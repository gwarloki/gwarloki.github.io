{"title":"容器镜像安全工具-Veinmind-tools","uid":"3675872e04aa6948518b5c79b3c5c1a2","slug":"veinmind-tools","date":"2022-09-13T08:44:00.000Z","updated":"2022-10-27T02:23:49.299Z","comments":true,"path":"api/articles/veinmind-tools.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159415/4k-beautiful-sunrise-reflection-wallpapers-159415-2155234-3113697.png","content":"<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>工具的道与术：<br>道，是指这个工具内在的哲学，如果你觉得哲学这个词太大了，也可以叫它逻辑。一个工具的优雅之处就体现在「道」上，「道」虽然貌似虚无缥缈，它却是最容易区分同类型工具之间不同之处的东西。<br>术，就是技术层面，这个工具怎么操作，怎么用起来。</p></blockquote>\n<h1 id=\"veinmind-tools\"><a href=\"#veinmind-tools\" class=\"headerlink\" title=\"veinmind-tools\"></a>veinmind-tools</h1><h2 id=\"0x01简介\"><a href=\"#0x01简介\" class=\"headerlink\" title=\"0x01简介\"></a>0x01简介</h2><p><a href=\"https://github.com/chaitin/veinmind-tools\">veinmind-tools</a>是由长亭科技自研，基于 <a href=\"https://github.com/chaitin/libveinmind\">veinmind-sdk</a> 打造的容器安全工具集</p>\n<h2 id=\"0x02架构图\"><a href=\"#0x02架构图\" class=\"headerlink\" title=\"0x02架构图\"></a>0x02架构图</h2><p>略</p>\n<h2 id=\"0x03核心能力\"><a href=\"#0x03核心能力\" class=\"headerlink\" title=\"0x03核心能力\"></a>0x03核心能力</h2><table>\n<thead>\n<tr>\n<th>工具</th>\n<th>功能</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>veinmind-runner</td>\n<td>扫描工具运行宿主</td>\n</tr>\n<tr>\n<td>veinmind-malicious</td>\n<td>扫描镜像中的恶意文件</td>\n</tr>\n<tr>\n<td>veinmind-weakpass</td>\n<td>扫描镜像中的弱口令</td>\n</tr>\n<tr>\n<td>veinmind-sensitive</td>\n<td>扫描镜像中的敏感信息</td>\n</tr>\n<tr>\n<td>veinmind-backdoor</td>\n<td>扫描镜像中的后门</td>\n</tr>\n<tr>\n<td>veinmind-history</td>\n<td>扫描镜像中的异常历史命令</td>\n</tr>\n<tr>\n<td>veinmind-asset</td>\n<td>扫描镜像中的资产信息</td>\n</tr>\n<tr>\n<td>veinmind-webshell</td>\n<td>扫描镜像中的 Webshell</td>\n</tr>\n</tbody></table>\n<h2 id=\"0x04云原生兼容性\"><a href=\"#0x04云原生兼容性\" class=\"headerlink\" title=\"0x04云原生兼容性\"></a>0x04云原生兼容性</h2><table>\n<thead>\n<tr>\n<th>名称</th>\n<th>类别</th>\n<th>是否兼容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Jenkins</td>\n<td>CI&#x2F;CD</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Gitlab CI</td>\n<td>CI&#x2F;CD</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Github Action</td>\n<td>CI&#x2F;CD</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>DockerHub</td>\n<td>镜像仓库</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Docker Registry</td>\n<td>镜像仓库</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Harbor</td>\n<td>镜像仓库</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Docker</td>\n<td>容器运行时</td>\n<td>✔️</td>\n</tr>\n<tr>\n<td>Containerd</td>\n<td>容器运行时</td>\n<td>✔️</td>\n</tr>\n</tbody></table>\n<h2 id=\"0x05Quickstart\"><a href=\"#0x05Quickstart\" class=\"headerlink\" title=\"0x05Quickstart\"></a>0x05Quickstart</h2><h3 id=\"require\"><a href=\"#require\" class=\"headerlink\" title=\"require\"></a>require</h3><p>安装docker</p>\n<h3 id=\"install\"><a href=\"#install\" class=\"headerlink\" title=\"install\"></a>install</h3><p>安装镜像</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">docker pull veinmind&#x2F;veinmind-runner:latest</code></pre>\n<p>下载 <a href=\"https://github.com/chaitin/veinmind-tools/tree/master/veinmind-runner\">veinmind-runner</a> 平行容器启动脚本</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">wget -q https:&#x2F;&#x2F;download.veinmind.tech&#x2F;scripts&#x2F;veinmind-runner-parallel-container-run.sh -O run.sh &amp;&amp; chmod +x run.sh</code></pre>\n<p>快速扫描本地镜像</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">.&#x2F;run.sh scan-host</code></pre>\n<h2 id=\"0x06libVeinMind\"><a href=\"#0x06libVeinMind\" class=\"headerlink\" title=\"0x06libVeinMind\"></a>0x06libVeinMind</h2><p><a href=\"https://github.com/chaitin/libveinmind\">libveinmind</a>一个由长亭自研，直观而可扩展的容器安全 SDK</p>\n<h3 id=\"quick-start\"><a href=\"#quick-start\" class=\"headerlink\" title=\"quick start\"></a>quick start</h3><p>一般情况下，应用应以平行容器的方式发布和部署，用户无需额外安装依赖。如何以平行容器方式构建与发布应用，详见<a href=\"https://github.com/chaitin/libveinmind/blob/master/docs/parallel-container.md\">平行容器</a>说明文档。</p>\n<p>若应用只支持本地运行，或需要搭建本地环境进行开发，则需要先安装对应平台下的问脉 SDK 软件包。</p>\n<p>软件安装包元信息中包含问脉 SDK 的相关许可协议，在开发和使用时请遵守许可协议。当您下载并安装 SDK 软件包后即视为您已同意问脉 SDK 使用协议。</p>\n<p>在 Ubuntu 和 Debian 平台下，添加问脉 SDK 的 APT 仓库即可安装所需软件包：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">echo &#39;deb [trusted&#x3D;yes] https:&#x2F;&#x2F;download.veinmind.tech&#x2F;libveinmind&#x2F;apt&#x2F; .&#x2F;&#39; | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;libveinmind.list\nsudo apt-get update\nsudo apt-get install libveinmind-dev</code></pre>\n<p>在 RedHat 和 CentOS 平台下，添加问脉 SDK 的 yum 仓库即可安装所需软件包：</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">sudo cat &gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;libveinmind.repo &lt;&lt; &#x3D;&#x3D;EOF&#x3D;&#x3D;\n[libveinmind]\nname&#x3D;libVeinMind SDK yum repository\nbaseurl&#x3D;https:&#x2F;&#x2F;download.veinmind.tech&#x2F;libveinmind&#x2F;yum&#x2F;\nenabled&#x3D;1\ngpgcheck&#x3D;0\n&#x3D;&#x3D;EOF&#x3D;&#x3D;\nsudo yum install libveinmind-devel</code></pre>\n<h3 id=\"开发指南\"><a href=\"#开发指南\" class=\"headerlink\" title=\"开发指南\"></a>开发指南</h3><ul>\n<li>API 文档及使用样例（<a href=\"https://pkg.go.dev/github.com/chaitin/libveinmind\">Golang</a>、<a href=\"https://github.com/chaitin/libveinmind/blob/master/docs/python-usage.rst\">Python3</a>）</li>\n<li><a href=\"https://github.com/chaitin/libveinmind/blob/master/docs/plugin-system.md\">插件系统</a>（如何开发可复用的容器安全工具）</li>\n<li><a href=\"https://github.com/chaitin/libveinmind/blob/master/docs/parallel-container.md\">平行容器</a>（如何容器化部署容器安全工具）</li>\n</ul>\n<h2 id=\"0x07Veinmind-Jenkins\"><a href=\"#0x07Veinmind-Jenkins\" class=\"headerlink\" title=\"0x07Veinmind Jenkins\"></a>0x07Veinmind Jenkins</h2><p><a href=\"https://github.com/chaitin/veinmind-jenkins\">veinmind-jenkins</a>可以快速集成 <code>veinmind-runner</code> 扫描能力到您的CI中</p>\n<h3 id=\"quick-start-1\"><a href=\"#quick-start-1\" class=\"headerlink\" title=\"quick start\"></a>quick start</h3><ul>\n<li>支持自动扫描模式，<strong>无需修改Jenkinsfile文件或BuildStep</strong>，自动识别<code>docker build</code>的动作，触发扫描任务。</li>\n<li>支持手动模式，可以手动增加Build Step&#x2F;Pipeline Step来手动触发扫描。</li>\n<li>简便安装，一次安装，永久使用。</li>\n<li>使用简单，无需记住复杂的参数，鼠标配置即可。</li>\n<li>支持阻断功能。</li>\n<li>提供数据统计和详情页面。<br><img src=\"https://github.com/chaitin/veinmind-jenkins/raw/main/docs/dest.png\"></li>\n</ul>\n<h3 id=\"适配性\"><a href=\"#适配性\" class=\"headerlink\" title=\"适配性\"></a>适配性</h3><p>Veinmind Scanner 需要如下的条件。</p>\n<ol>\n<li><p>Jenkins 支持版本 &gt; v2.332.4</p>\n</li>\n<li><p>对于自动扫描功能，目前支持的自动扫描的方法:</p>\n</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>插件名称</th>\n<th>Job类型</th>\n<th>是否支持Auto</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>Linux Shell</td>\n<td>FreeStyle</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Docker plugin</td>\n<td>FreeStyle</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Docker build step</td>\n<td>FreeStyle</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Pipeline Shell(sh)</td>\n<td>Pipeline</td>\n<td>✅</td>\n</tr>\n<tr>\n<td>Docker Pipeline</td>\n<td>Pipeline</td>\n<td>✅</td>\n</tr>\n</tbody></table>\n<h3 id=\"Usage\"><a href=\"#Usage\" class=\"headerlink\" title=\"Usage\"></a>Usage</h3><p>略，详见GitHub</p>\n<h2 id=\"References\"><a href=\"#References\" class=\"headerlink\" title=\"References\"></a>References</h2><p><a href=\"https://mp.weixin.qq.com/s/_izKs3Zs_43a6VbeAWQ0og\">Veinmind 在 Jenkins 的0部署成本自动化扫描方案</a></p>\n","text":" 工具的道与术：道，是指这个工具内在的哲学，如果你觉得哲学这个词太大了，也可以叫它逻辑。一个工具的优雅之处就体现在「道」上，「道」虽然貌似虚无缥缈，它却是最容易区分同类型工具之间不同之处的东西。术，就是技术层面，这个工具怎么操作，怎么用起来。 veinmind-tools0x01...","link":"","photos":[],"count_time":{"symbolsCount":"2.6k","symbolsTime":"2 mins."},"categories":[{"name":"Cloud-Native-Security","slug":"Cloud-Native-Security","count":12,"path":"api/categories/Cloud-Native-Security.json"}],"tags":[{"name":"CI/CD","slug":"CI-CD","count":4,"path":"api/tags/CI-CD.json"},{"name":"容器安全","slug":"容器安全","count":3,"path":"api/tags/容器安全.json"},{"name":"镜像安全","slug":"镜像安全","count":3,"path":"api/tags/镜像安全.json"},{"name":"长亭科技","slug":"长亭科技","count":1,"path":"api/tags/长亭科技.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#veinmind-tools\"><span class=\"toc-text\">veinmind-tools</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x01%E7%AE%80%E4%BB%8B\"><span class=\"toc-text\">0x01简介</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x02%E6%9E%B6%E6%9E%84%E5%9B%BE\"><span class=\"toc-text\">0x02架构图</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x03%E6%A0%B8%E5%BF%83%E8%83%BD%E5%8A%9B\"><span class=\"toc-text\">0x03核心能力</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x04%E4%BA%91%E5%8E%9F%E7%94%9F%E5%85%BC%E5%AE%B9%E6%80%A7\"><span class=\"toc-text\">0x04云原生兼容性</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x05Quickstart\"><span class=\"toc-text\">0x05Quickstart</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#require\"><span class=\"toc-text\">require</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#install\"><span class=\"toc-text\">install</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x06libVeinMind\"><span class=\"toc-text\">0x06libVeinMind</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#quick-start\"><span class=\"toc-text\">quick start</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%BC%80%E5%8F%91%E6%8C%87%E5%8D%97\"><span class=\"toc-text\">开发指南</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#0x07Veinmind-Jenkins\"><span class=\"toc-text\">0x07Veinmind Jenkins</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#quick-start-1\"><span class=\"toc-text\">quick start</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%80%82%E9%85%8D%E6%80%A7\"><span class=\"toc-text\">适配性</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#Usage\"><span class=\"toc-text\">Usage</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#References\"><span class=\"toc-text\">References</span></a></li></ol></li></ol>","author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"CI/CD 过程中的部分pipeline","uid":"832ec458ec0531279eee1cd18e61ce2f","slug":"Jenkins pipeline","date":"2022-09-14T02:13:00.000Z","updated":"2022-10-26T09:18:52.847Z","comments":true,"path":"api/articles/Jenkins pipeline.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159414/4k-backlit-dawn-wallpapers-159414-29512-7452839.png","text":"DTimport hudson.model.*; import hudson.* import groovy.json.JsonSlurper; pipeline &#123; agent any tools &#123; &#x2F;&#x2F; maven &#39;mave...","link":"","photos":[],"count_time":{"symbolsCount":"26k","symbolsTime":"24 mins."},"categories":[{"name":"软件供应链安全","slug":"软件供应链安全","count":26,"path":"api/categories/软件供应链安全.json"}],"tags":[{"name":"CI/CD","slug":"CI-CD","count":4,"path":"api/tags/CI-CD.json"},{"name":"SCA","slug":"SCA","count":15,"path":"api/tags/SCA.json"},{"name":"Jenkins","slug":"Jenkins","count":2,"path":"api/tags/Jenkins.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"容器镜像构建与分发的技术实践与安全思索","uid":"d761d3905282bd119994c0c8a6e0235c","slug":"容器镜像构建与分发的技术实践与安全思索","date":"2022-09-01T06:34:00.000Z","updated":"2022-10-27T02:20:09.450Z","comments":true,"path":"api/articles/容器镜像构建与分发的技术实践与安全思索.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/244766/beach-themed-backgrounds-244766-2113386-274623.png","text":"容器镜像构建与分发的技术实践与安全思索BackendDocker 能引爆容器，主要原因是它带来了镜像和镜像分发技术。 容器运行时是 Kubernetes 平台的基础组件，镜像则是容器的静态文件，容器由镜像创建。在 Kubernetes 平台中，我们交付的所有应用，最终都是以镜像形...","link":"","photos":[],"count_time":{"symbolsCount":"5.1k","symbolsTime":"5 mins."},"categories":[{"name":"Cloud-Native-Security","slug":"Cloud-Native-Security","count":12,"path":"api/categories/Cloud-Native-Security.json"}],"tags":[{"name":"容器镜像安全","slug":"容器镜像安全","count":2,"path":"api/tags/容器镜像安全.json"},{"name":"Distroless","slug":"Distroless","count":1,"path":"api/tags/Distroless.json"},{"name":"buidlkit","slug":"buidlkit","count":1,"path":"api/tags/buidlkit.json"},{"name":"CNB","slug":"CNB","count":1,"path":"api/tags/CNB.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}