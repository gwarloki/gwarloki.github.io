{"title":"通过自建DevSecOps环境学习","uid":"b970fe5bee1957a85fe7360386c990fe","slug":"通过自建DevSecOps环境学习","date":"2021-08-20T06:20:21.000Z","updated":"2022-10-27T02:40:56.148Z","comments":true,"path":"api/articles/通过自建DevSecOps环境学习.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159416/4k-beneath-the-clouds-wallpapers-159416-909591-7848524.png","content":"<h1 id=\"前导知识\"><a href=\"#前导知识\" class=\"headerlink\" title=\"前导知识\"></a>前导知识</h1><ul>\n<li>版本控制系统：Git Jenkins    </li>\n<li>持续集成与持续交付：CI&#x2F;CD </li>\n<li>制品仓库管理：Artifactory、Nexus</li>\n<li>IaC，基础设施管理配置管理工具</li>\n<li>公有云私有云相关技术组件</li>\n</ul>\n<h2 id=\"DevSecOps平台搭建\"><a href=\"#DevSecOps平台搭建\" class=\"headerlink\" title=\"DevSecOps平台搭建\"></a>DevSecOps平台搭建</h2><p><a href=\"https://github.com/hysnsec/DevSecOps-Studio/\">DevSecOps-Studio</a><br>DevSecOps-Studio包含的技术组件选型主要有： </p>\n<table>\n<thead>\n<tr>\n<th>&lt;类型&gt;</th>\n<th>&lt;组件工具&gt;</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>渗透测试</td>\n<td>Nmap, Metasploit</td>\n</tr>\n<tr>\n<td>静态检测</td>\n<td>Brakeman, bandit, findbugs</td>\n</tr>\n<tr>\n<td>动态检测</td>\n<td>ZAP proxy, Gaunlt</td>\n</tr>\n<tr>\n<td>基线加固</td>\n<td>DevSec Ansible OS Hardening</td>\n</tr>\n<tr>\n<td>合规检测</td>\n<td>Inspec</td>\n</tr>\n<tr>\n<td>操作系统</td>\n<td>Ubuntu Xenial (16.04)</td>\n</tr>\n<tr>\n<td>开发语言</td>\n<td>Java, Python 3, Ruby&#x2F;Rails</td>\n</tr>\n<tr>\n<td>容器化技术</td>\n<td>Docker</td>\n</tr>\n<tr>\n<td>源码管理</td>\n<td>Gitlab</td>\n</tr>\n<tr>\n<td>CI服务</td>\n<td>Gitlab CI&#x2F;Jenkins</td>\n</tr>\n<tr>\n<td>配置管理</td>\n<td>Ansible</td>\n</tr>\n<tr>\n<td>安全监控</td>\n<td>ELK</td>\n</tr>\n<tr>\n<td>公有云</td>\n<td>AWS CLI</td>\n</tr>\n<tr>\n<td>其他工具</td>\n<td>Git, Vim, curl, wget</td>\n</tr>\n</tbody></table>\n<h2 id=\"常见工具链选型参考\"><a href=\"#常见工具链选型参考\" class=\"headerlink\" title=\"常见工具链选型参考\"></a>常见工具链选型参考</h2><p><img src=\"https://s2.loli.net/2021/12/27/UfElt2Ip97VmbWh.jpg\" alt=\"DevSecOps-Toolchain技术选型参考\"></p>\n<h1 id=\"DevSecOps安装\"><a href=\"#DevSecOps安装\" class=\"headerlink\" title=\"DevSecOps安装\"></a>DevSecOps安装</h1><p><em>Require</em>   </p>\n<ul>\n<li><a href=\"https://www.vagrantup.com/downloads.html\">Vagrant</a>       </li>\n<li><a href=\"https://www.virtualbox.org/wiki/Downloads\">Virtualbox</a>       </li>\n<li><a href=\"http://docs.ansible.com/ansible/latest/intro_installation.html#installation\">Ansible</a><br><em>Dependencies</em><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">brew install vagrant\nbrew install virtualbox\nbrew install ansible</code></pre>\n<em>Installation</em><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">$ git clone https:&#x2F;&#x2F;github.com&#x2F;hysnsec&#x2F;DevSecOps-Studio.git\n$ cd DevSecOps-Studio &amp;&amp; vagrant status\n$ ansible-galaxy install -r requirements.yml\nvagrant up</code></pre>\n<em>Q&#x2F;A</em><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">Q1#homebrew安装ansible失败\nexport HOMEBREW_BOTTLE_DOMAIN&#x3D;&#39;&#39; #临时修改去掉国内的镜像设置: 在 Terminal 中输入下面的命令即可.\n写入zsh的~&#x2F;.zprofile文件source后永久生效\nQ2#Vagrant使用国内镜像安装镜像box失败\nvagrant init centos7 https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;centos-cloud&#x2F;centos&#x2F;7&#x2F;vagrant&#x2F;x86_64&#x2F;images&#x2F;CentOS-7.box #使用中科大镜像站</code></pre></li>\n</ul>\n<h1 id=\"DevSecOps平台使用\"><a href=\"#DevSecOps平台使用\" class=\"headerlink\" title=\"DevSecOps平台使用\"></a>DevSecOps平台使用</h1><h2 id=\"前导工具使用\"><a href=\"#前导工具使用\" class=\"headerlink\" title=\"前导工具使用\"></a>前导工具使用</h2><p><strong>Vagrant命令</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">vagrant init      # 初始化\nvagrant up        # 启动虚拟机\nvagrant halt      # 关闭虚拟机\nvagrant reload    # 重启虚拟机\nvagrant ssh       # SSH 至虚拟机\nvagrant suspend   # 挂起虚拟机\nvagrant resume    # 唤醒虚拟机\nvagrant status    # 查看虚拟机运行状态\nvagrant destroy   # 销毁当前虚拟机\nvagrant provision #任务是预先设置的一些操作指令 &#96;vagrant provision --provision-with shell&#96;\n[[box]]管理命令\nvagrant box list    # 查看本地box列表\nvagrant box add     # 添加box到列表\nvagrant box remove  # 从box列表移除 </code></pre>\n<p><strong>设置CI&#x2F;CDpipeline</strong></p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">- 1.创建项目：Repo by URL 或者本地使用git push\n- 2.项目地址：https:&#x2F;&#x2F;github.com&#x2F;secfigo&#x2F;django.nV.git\n- 3.setup CI&#x2F;CD\nstages:\n  - build\n  - test\n  - deploy\n\nbuild:\n  stage: build\n  script:\n    - echo &quot;This is a build step&quot;\n\ntest:\n  stage: test\n  script:\n    - echo &quot;This is a test step&quot;\n\ndeploy:\n  stage: deploy\n  script:\n    - echo &quot;This is a deploy step&quot;\n</code></pre>\n","text":"前导知识 版本控制系统：Git Jenkins 持续集成与持续交付：CI&#x2F;CD 制品仓库管理：Artifactory、Nexus IaC，基础设施管理配置管理工具 公有云私有云相关技术组件 DevSecOps平台搭建DevSecOps-StudioDevSecOps-S...","link":"","photos":[],"count_time":{"symbolsCount":"2.1k","symbolsTime":"2 mins."},"categories":[{"name":"DevSecOps","slug":"DevSecOps","count":3,"path":"api/categories/DevSecOps.json"}],"tags":[{"name":"CI/CD","slug":"CI-CD","count":4,"path":"api/tags/CI-CD.json"},{"name":"Jenkins","slug":"Jenkins","count":2,"path":"api/tags/Jenkins.json"},{"name":"DevSecOps","slug":"DevSecOps","count":3,"path":"api/tags/DevSecOps.json"},{"name":"实验环境","slug":"实验环境","count":1,"path":"api/tags/实验环境.json"},{"name":"Vagrant","slug":"Vagrant","count":1,"path":"api/tags/Vagrant.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%89%8D%E5%AF%BC%E7%9F%A5%E8%AF%86\"><span class=\"toc-text\">前导知识</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#DevSecOps%E5%B9%B3%E5%8F%B0%E6%90%AD%E5%BB%BA\"><span class=\"toc-text\">DevSecOps平台搭建</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%B8%B8%E8%A7%81%E5%B7%A5%E5%85%B7%E9%93%BE%E9%80%89%E5%9E%8B%E5%8F%82%E8%80%83\"><span class=\"toc-text\">常见工具链选型参考</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#DevSecOps%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">DevSecOps安装</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#DevSecOps%E5%B9%B3%E5%8F%B0%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">DevSecOps平台使用</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%89%8D%E5%AF%BC%E5%B7%A5%E5%85%B7%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">前导工具使用</span></a></li></ol></li></ol>","author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"监控平台搭建","uid":"89d5cf8a319b3740168525b9ad32b4e4","slug":"监控平台","date":"2021-09-10T16:00:00.000Z","updated":"2022-11-02T07:23:10.493Z","comments":true,"path":"api/articles/监控平台.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159420/4k-dramatic-sunset-over-blidinje-wallpapers-159420-21846-5367686.png","text":"前言 随着应用容器化和微服务的兴起，借由 Docker和 Kubernetes等工具，服务的快速开发和部署成为可能，构建微服务应用变得越来越简单。但是随着大型单体应用拆分为微服务，服务之间的依赖和调用变得极为复杂，这些服务可能是不同团队开发的，可能基于不同的语言，微服务之间可能是...","link":"","photos":[],"count_time":{"symbolsCount":"9.2k","symbolsTime":"8 mins."},"categories":[{"name":"Cloud-Native","slug":"Cloud-Native","count":6,"path":"api/categories/Cloud-Native.json"}],"tags":[{"name":"DeepFlow","slug":"DeepFlow","count":2,"path":"api/tags/DeepFlow.json"},{"name":"可观测性","slug":"可观测性","count":2,"path":"api/tags/可观测性.json"},{"name":"skywalking","slug":"skywalking","count":1,"path":"api/tags/skywalking.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"Kubernetes学习笔记 -- kubeadm-ha安装集群","uid":"f443264b00bffe4f0b17c0513a02db89","slug":"Kuboard","date":"2021-08-15T16:00:00.000Z","updated":"2022-11-02T02:56:58.613Z","comments":true,"path":"api/articles/Kuboard.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159420/4k-dramatic-sunset-over-blidinje-wallpapers-159420-21735-6813944.png","text":"在K8S 中安装 Kuboard v3方法一：使用 hostPath 提供持久化安装1.执行 Kuboard v3 在 K8S 中的安装 kubectl apply -f https:&#x2F;&#x2F;addons.kuboard.cn&#x2F;kuboard&#x2F;...","link":"","photos":[],"count_time":{"symbolsCount":"1.2k","symbolsTime":"1 mins."},"categories":[{"name":"Cloud-Native","slug":"Cloud-Native","count":6,"path":"api/categories/Cloud-Native.json"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","count":3,"path":"api/tags/Kubernetes.json"},{"name":"k8s-dashboard","slug":"k8s-dashboard","count":3,"path":"api/tags/k8s-dashboard.json"},{"name":"Docker","slug":"Docker","count":2,"path":"api/tags/Docker.json"},{"name":"kuboard","slug":"kuboard","count":1,"path":"api/tags/kuboard.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}