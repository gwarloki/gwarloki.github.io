{"title":"DeepFlow安装","uid":"880573b75c369c317bbd9d9133cf8195","slug":"DeepFlow","date":"2021-09-18T16:00:00.000Z","updated":"2022-11-02T07:22:26.227Z","comments":true,"path":"api/articles/DeepFlow.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159420/4k-dramatic-sunset-over-blidinje-wallpapers-159420-21801-1335455.png","content":"<h1 id=\"install-Q-amp-A\"><a href=\"#install-Q-amp-A\" class=\"headerlink\" title=\"install Q&amp;A\"></a>install Q&amp;A</h1><h2 id=\"关于IPV4还是IPV6的问题\"><a href=\"#关于IPV4还是IPV6的问题\" class=\"headerlink\" title=\"关于IPV4还是IPV6的问题\"></a>关于IPV4还是IPV6的问题</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>单个k8s集群（v1.22.10）通过helm（v3.9.0）部署deepflow，使用value文件指定默认SC，3个PVC状态均正常。问题：server、mysql、grafana、app4个pod均异常。</p></blockquote>\n<p><img src=\"http://img.moses.wang/new/20220824162600.png\"></p>\n<ol>\n<li><p>查看日志，默认使用IPV6协议栈。<br><strong>my.cnf初始配置</strong></p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">[client]\ndefault-character-set&#x3D;utf8\n\n[mysqld]\ndefault-authentication-plugin&#x3D;mysql_native_password\n\n# Network related\nbind-address&#x3D;::\nport&#x3D;30130\n\n# Enable query cache\ninnodb_buffer_pool_size&#x3D;20M\nmax_connections&#x3D;1000\nwait_timeout&#x3D;60\n\n# Replication related\nslave_skip_errors&#x3D;all</code></pre></li>\n<li><p>修改为IPV4协议栈后，出app意外其余部署没有问题。查看app容器日志</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">2022-08-23 11:38:15,403 T140463419844416-MainThread INFO app.main.42: Launching Deepflow-app ...\nTraceback (most recent call last):\n  File &quot;&#x2F;root&#x2F;app&#x2F;app.py&quot;, line 56, in &lt;module&gt;\n    main()\n  File &quot;&#x2F;root&#x2F;app&#x2F;app.py&quot;, line 48, in main\n    sock &#x3D; socket.socket(socket.AF_INET6, socket.SOCK_STREAM)\n  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.8&#x2F;socket.py&quot;, line 231, in __init__\n    _socket.socket.__init__(self, family, type, proto, fileno)\nOSError: [Errno 97] Address family not supported by protocol</code></pre>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>联系厂商后，推送支持ipv4的app镜像，问题解决</p></blockquote>\n</li>\n<li><p>期间宿主机启用IPV6协议，见[[k8s启用IPV4&amp;IPV6双栈实践|k8s ipv4&#x2F;ipv6双栈实践]]</p>\n</li>\n<li><p>delete app容器重新拉取新的镜像和使用IPV6协议配置以上两种方式测试后均没有问题，所有容器运营正常，没有新的报错。</p>\n</li>\n</ol>\n<h2 id=\"grafana-视图查看问题\"><a href=\"#grafana-视图查看问题\" class=\"headerlink\" title=\"grafana 视图查看问题\"></a>grafana 视图查看问题</h2><p><img src=\"http://img.moses.wang/new/20220824163231.png\"></p>\n<p>从报错来看，开始以为是后端服务问题，查看相关日志未发现。遂排查插件问题，内置插件未签名，导致Safari浏览器打开有问题，切换Chrome浏览器后问题解决。</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>经排查发现是前端问题，以通知厂商。厂商确认后修改grafana镜像至latest tag</p></blockquote>\n<h2 id=\"clickhouse的存储问题\"><a href=\"#clickhouse的存储问题\" class=\"headerlink\" title=\"clickhouse的存储问题\"></a>clickhouse的存储问题</h2><p>helm安装在K8S集群内的clickhouse1天的磁盘占用率约占50%左右，大概24G的数据量。</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">root@deepflow-clickhouse-0:&#x2F;# df -h\nFilesystem           Size  Used Avail Use% Mounted on\noverlay               47G   24G   24G  50% &#x2F;\ntmpfs                 64M     0   64M   0% &#x2F;dev\ntmpfs                7.9G     0  7.9G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup\n&#x2F;dev&#x2F;mapper&#x2F;cl-root   47G   24G   24G  50% &#x2F;etc&#x2F;hosts\nshm                   64M     0   64M   0% &#x2F;dev&#x2F;shm\ntmpfs                 15G   12K   15G   1% &#x2F;run&#x2F;secrets&#x2F;kubernetes.io&#x2F;serviceaccount\ntmpfs                7.9G     0  7.9G   0% &#x2F;proc&#x2F;acpi\ntmpfs                7.9G     0  7.9G   0% &#x2F;proc&#x2F;scsi\ntmpfs                7.9G     0  7.9G   0% &#x2F;sys&#x2F;firmware\nroot@deepflow-clickhouse-0:&#x2F;# cd &#x2F;var&#x2F;lib&#x2F;clickhouse\nroot@deepflow-clickhouse-0:&#x2F;var&#x2F;lib&#x2F;clickhouse# df -h .\nFilesystem           Size  Used Avail Use% Mounted on\n&#x2F;dev&#x2F;mapper&#x2F;cl-root   47G   24G   24G  50% &#x2F;var&#x2F;lib&#x2F;clickhouse</code></pre>\n<p><img src=\"http://img.moses.wang/new/20220825131349.png\"></p>\n<h3 id=\"解决方案\"><a href=\"#解决方案\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h3><ul>\n<li>新版本DeepFlow 6.1.2，将会支持使用<strong>外部Clickhouse</strong>。</li>\n<li>设置设置采集频率<pre class=\"line-numbers language-markdown\" data-language=\"markdown\"><code class=\"language-markdown\">- server 端采样（配置server的configmap即可）：https:&#x2F;&#x2F;github.com&#x2F;deepflowys&#x2F;deepflow&#x2F;blob&#x2F;main&#x2F;server&#x2F;server.yaml#L345\n\n- agent 端采样：\ndeepflow-ctl agent-group-config example | grep log_coll -B 2\n配置方法：https:&#x2F;&#x2F;deepflow.yunshan.net:7788&#x2F;docs&#x2F;zh&#x2F;install&#x2F;advanced-config&#x2F;#deepflow-agent</code></pre></li>\n<li>设置数据保留期限？暂时不支持</li>\n</ul>\n<h2 id=\"关于nodelocalDNS设置Ipv6的问题\"><a href=\"#关于nodelocalDNS设置Ipv6的问题\" class=\"headerlink\" title=\"关于nodelocalDNS设置Ipv6的问题\"></a>关于nodelocalDNS设置Ipv6的问题</h2><p>查看nodelocalDNS日志，错误信息：</p>\n<pre class=\"line-numbers language-none\"><code class=\"language-none\">2022&#x2F;08&#x2F;23 07:41:41 [ERROR] Failed to sync kube-dns config directory &#x2F;etc&#x2F;kube-dns, err: lstat &#x2F;etc&#x2F;kube-dns: no such file or directory  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw PREROUTING [-p tcp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw PREROUTING [-p udp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter INPUT [-p tcp -d 169.254.25.10 --dport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter INPUT [-p udp -d 169.254.25.10 --dport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -s 169.254.25.10 --sport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p udp -s 169.254.25.10 --sport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter OUTPUT [-p tcp -s 169.254.25.10 --sport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter OUTPUT [-p udp -s 169.254.25.10 --sport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p udp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -d 169.254.25.10 --dport 8080 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -s 169.254.25.10 --sport 8080 -j NOTRACK]&#125;  \n\ncluster.local.:53 on 169.254.25.10  \n\nin-addr.arpa.:53 on 169.254.25.10  \n\nip6.arpa.:53 on 169.254.25.10  \n\n.:53 on 169.254.25.10  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added interface - nodelocaldns  \n\n[INFO] plugin&#x2F;reload: Running configuration MD5 &#x3D; adf97d6b4504ff12113ebb35f0c6413e  \n\nCoreDNS-1.6.7  \n\nlinux&#x2F;amd64, go1.11.13,  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. A: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. AAAA: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. A: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. AAAA: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out</code></pre>\n<h3 id=\"解决方案-1\"><a href=\"#解决方案-1\" class=\"headerlink\" title=\"解决方案\"></a>解决方案</h3><p>修改nodelocaldns.yaml配置清单使用IPV6需要把 <a href=\"https://github.com/kubernetes/kubernetes/blob/b2ecd1b3a3192fbbe2b9e348e095326f51dc43dd/cluster/addons/dns/nodelocaldns/nodelocaldns.yaml#L70\">配置行 L70</a>修改为： “<code>health [__PILLAR__LOCAL__DNS__]:8080</code>“。<br>参加[[NodeLocalDNSCache]]</p>\n<h2 id=\"参考\"><a href=\"#参考\" class=\"headerlink\" title=\"参考\"></a>参考</h2><p><a href=\"https://www.cnblogs.com/erdongx/p/13063157.html\">K8S 中的 Grafana 数据持久化 - 耳东-Erdong - 博客园</a></p>\n","text":"install Q&amp;A关于IPV4还是IPV6的问题 单个k8s集群（v1.22.10）通过helm（v3.9.0）部署deepflow，使用value文件指定默认SC，3个PVC状态均正常。问题：server、mysql、grafana、app4个pod均异常。 查看日...","link":"","photos":[],"count_time":{"symbolsCount":"7.2k","symbolsTime":"7 mins."},"categories":[{"name":"Cloud-Native","slug":"Cloud-Native","count":6,"path":"api/categories/Cloud-Native.json"}],"tags":[{"name":"安装手册","slug":"安装手册","count":2,"path":"api/tags/安装手册.json"},{"name":"DeepFlow","slug":"DeepFlow","count":2,"path":"api/tags/DeepFlow.json"},{"name":"可观测性","slug":"可观测性","count":2,"path":"api/tags/可观测性.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#install-Q-amp-A\"><span class=\"toc-text\">install Q&amp;A</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E4%BA%8EIPV4%E8%BF%98%E6%98%AFIPV6%E7%9A%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">关于IPV4还是IPV6的问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#grafana-%E8%A7%86%E5%9B%BE%E6%9F%A5%E7%9C%8B%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">grafana 视图查看问题</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#clickhouse%E7%9A%84%E5%AD%98%E5%82%A8%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">clickhouse的存储问题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88\"><span class=\"toc-text\">解决方案</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%85%B3%E4%BA%8EnodelocalDNS%E8%AE%BE%E7%BD%AEIpv6%E7%9A%84%E9%97%AE%E9%A2%98\"><span class=\"toc-text\">关于nodelocalDNS设置Ipv6的问题</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1\"><span class=\"toc-text\">解决方案</span></a></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%8F%82%E8%80%83\"><span class=\"toc-text\">参考</span></a></li></ol></li></ol>","author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"微服务学习-服务发现","uid":"d1f13540bd8121bde49915d55687c3f7","slug":"服务发现","date":"2021-09-26T04:23:21.000Z","updated":"2022-10-27T05:40:15.602Z","comments":true,"path":"api/articles/服务发现.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159416/4k-beneath-the-clouds-wallpapers-159416-910618-6855685.png","text":"一、什么是服务发现？让用户不用关心服务提供者的具体网络位置（IP、端口等）和配置步骤，只需要选择和链接即可使用这些服务。如局域网内 通过WS-Discovery或者Bonjor协议发现并连接网络打印机服务，亦或是华为鸿蒙超级终端通过蓝牙、WIFI等通信技术[软总线技术] ，可以实...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"分布式","slug":"分布式","count":6,"path":"api/categories/分布式.json"},{"name":"微服务","slug":"分布式/微服务","count":3,"path":"api/categories/分布式/微服务.json"}],"tags":[{"name":"服务发现 - 微服务","slug":"服务发现-微服务","count":1,"path":"api/tags/服务发现-微服务.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"监控平台搭建","uid":"89d5cf8a319b3740168525b9ad32b4e4","slug":"监控平台","date":"2021-09-10T16:00:00.000Z","updated":"2022-11-02T07:23:10.493Z","comments":true,"path":"api/articles/监控平台.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159420/4k-dramatic-sunset-over-blidinje-wallpapers-159420-21846-5367686.png","text":"前言 随着应用容器化和微服务的兴起，借由 Docker和 Kubernetes等工具，服务的快速开发和部署成为可能，构建微服务应用变得越来越简单。但是随着大型单体应用拆分为微服务，服务之间的依赖和调用变得极为复杂，这些服务可能是不同团队开发的，可能基于不同的语言，微服务之间可能是...","link":"","photos":[],"count_time":{"symbolsCount":"9.2k","symbolsTime":"8 mins."},"categories":[{"name":"Cloud-Native","slug":"Cloud-Native","count":6,"path":"api/categories/Cloud-Native.json"}],"tags":[{"name":"DeepFlow","slug":"DeepFlow","count":2,"path":"api/tags/DeepFlow.json"},{"name":"可观测性","slug":"可观测性","count":2,"path":"api/tags/可观测性.json"},{"name":"skywalking","slug":"skywalking","count":1,"path":"api/tags/skywalking.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}