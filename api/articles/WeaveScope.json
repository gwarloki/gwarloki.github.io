{"title":"Kubernetes学习笔记 -- weavescope","uid":"ffb8302384d7f037a2dd91b7ad370f37","slug":"WeaveScope","date":"2021-09-28T16:00:00.000Z","updated":"2022-11-02T07:22:24.176Z","comments":true,"path":"api/articles/WeaveScope.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159420/4k-dramatic-sunset-over-blidinje-wallpapers-159420-21723-7647956.png","content":"<h1 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h1><p>Weave Scope是Docker和Kubernetes的可视化和监视工具。它提供了自上而下的应用程序视图以及整个基础架构视图，并允许您实时诊断将分布式容器化应用程序部署到云提供商时遇到的任何问题。<br>WeaveScope 监控展示了主机、容器、进程的众多常用数据和状态，并提供 WebUI和plugin插件。</p>\n<h1 id=\"特点\"><a href=\"#特点\" class=\"headerlink\" title=\"特点\"></a>特点</h1><ul>\n<li>直观的图形或表格模式；</li>\n<li>灵活的过滤和强大的搜索；</li>\n<li>实时展示应用和容器指标；</li>\n<li>支持多主机监管，支持k8s。</li>\n</ul>\n<h1 id=\"安装部署\"><a href=\"#安装部署\" class=\"headerlink\" title=\"安装部署\"></a>安装部署</h1><p>k8s集群部署声明文件添加<code>basicAuth</code>未成功，推荐1容器部署可以实现身份认证。</p>\n<h2 id=\"1-容器部署\"><a href=\"#1-容器部署\" class=\"headerlink\" title=\"1.容器部署\"></a>1.容器部署</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\"># 下载 scope 工具\nsudo curl -L https:&#x2F;&#x2F;github.com&#x2F;weaveworks&#x2F;scope&#x2F;releases&#x2F;download&#x2F;latest_release&#x2F;scope -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;scope\n# 使 scope 具有执行权限\nsudo chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;scope\n# 部署安装 Weave Scope， 并设定验证用户 myuser， 密码 mypassword。\nsudo scope launch -app.basicAuth -app.basicAuth.password mypassword -app.basicAuth.username myuser -probe.basicAuth -probe.basicAuth.password mypassword -probe.basicAuth.username myuser</code></pre>\n<h2 id=\"2-helm部署\"><a href=\"#2-helm部署\" class=\"headerlink\" title=\"2.helm部署\"></a>2.helm部署</h2><p>1、搜索weave仓库</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 scope]# helm search repo weave\nNAME                    CHART VERSION   APP VERSION DESCRIPTION\nali&#x2F;weave-cloud         0.1.2                       Weave Cloud is a add-on to Kubernetes which pro...\nali&#x2F;weave-scope         0.9.2           1.6.5       A Helm chart for the Weave Scope cluster visual...\naliyun&#x2F;weave-cloud      0.1.2                       Weave Cloud is a add-on to Kubernetes which pro...\naliyun&#x2F;weave-scope      0.9.2           1.6.5       A Helm chart for the Weave Scope cluster visual...\napphub&#x2F;weave-cloud      0.3.7           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\napphub&#x2F;weave-scope      1.1.8           1.12.0      A Helm chart for the Weave Scope cluster visual...\nburdenbear&#x2F;weave-cloud  0.3.8           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\nburdenbear&#x2F;weave-scope  1.1.11          1.12.0      A Helm chart for the Weave Scope cluster visual...\nchart&#x2F;weave-cloud       0.3.3           1.3.0       Weave Cloud is a add-on to Kubernetes which pro...\nchart&#x2F;weave-scope       1.1.1           1.11.1      A Helm chart for the Weave Scope cluster visual...\nstable&#x2F;weave-cloud      0.3.8           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\nstable&#x2F;weave-scope      1.1.11          1.12.0      A Helm chart for the Weave Scope cluster visual...</code></pre>\n<p>2、下载远程安装包到本地并解压</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">helm fetch stable&#x2F;weave-scope [[helm]] pull\ntar xf weave-scope-1.1.10.tgz</code></pre>\n<p>3、修改ClusterIP为NodePort</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 data]# sed -i &quot;s@\\ type:\\ \\&quot;ClusterIP\\&quot;@ type: \\&quot;NodePort\\&quot;@&quot; weave-scope&#x2F;values.yaml</code></pre>\n<p>4、创建weave-scope命名空间</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 data]# kubectl create namespace weave-scope</code></pre>\n<p>5.安装</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 data]# helm install -n weave-scope common-service -f weave-scope&#x2F;values.yaml weave-scope&#x2F;</code></pre>\n<p>6.验证服务列表</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 data]# helm list -n weave-scope</code></pre>\n<p>7.验证服务状态</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">helm status common-service -n weave-scope</code></pre>\n<p>8.验证pod svc deploy</p>\n<pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">[root@k8s01 data]# kubectl get all -n weave-scope -o wide</code></pre>\n<h2 id=\"3-k8s安装\"><a href=\"#3-k8s安装\" class=\"headerlink\" title=\"3.k8s安装\"></a>3.k8s安装</h2><pre class=\"line-numbers language-bash\" data-language=\"bash\"><code class=\"language-bash\">\nkubectl apply -f &quot;https:&#x2F;&#x2F;cloud.weave.works&#x2F;k8s&#x2F;scope.yaml?k8s-version&#x3D;$(kubectl version | base64 | tr -d &#39;\\n&#39;)&quot;\nkubectl get pod -n weave\nkubectl get svc -n weave\nkubectl get deploy -n weave\nkubectl port-forward --address&#x3D;X.X.X.X -n weave &quot;$(kubectl get -n weave pod --selector&#x3D;weave-scope-component&#x3D;app -o jsonpath&#x3D;&#39;&#123;.items..metadata.name&#125;&#39;)&quot; 4040</code></pre>\n<h1 id=\"项目地址\"><a href=\"#项目地址\" class=\"headerlink\" title=\"项目地址\"></a>项目地址</h1><p><a href=\"https://github.com/weaveworks/scope\">github</a><br><a href=\"https://www.weave.works/docs/scope/latest/installing/\">weave docs</a> </p>\n","text":"介绍Weave Scope是Docker和Kubernetes的可视化和监视工具。它提供了自上而下的应用程序视图以及整个基础架构视图，并允许您实时诊断将分布式容器化应用程序部署到云提供商时遇到的任何问题。WeaveScope 监控展示了主机、容器、进程的众多常用数据和状态，并提供...","link":"","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[{"name":"Cloud-Native","slug":"Cloud-Native","count":6,"path":"api/categories/Cloud-Native.json"}],"tags":[{"name":"Kubernetes","slug":"Kubernetes","count":3,"path":"api/tags/Kubernetes.json"},{"name":"k8s-dashboard","slug":"k8s-dashboard","count":3,"path":"api/tags/k8s-dashboard.json"},{"name":"weave","slug":"weave","count":1,"path":"api/tags/weave.json"},{"name":"CNI","slug":"CNI","count":1,"path":"api/tags/CNI.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">介绍</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E7%89%B9%E7%82%B9\"><span class=\"toc-text\">特点</span></a></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">安装部署</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#1-%E5%AE%B9%E5%99%A8%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">1.容器部署</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#2-helm%E9%83%A8%E7%BD%B2\"><span class=\"toc-text\">2.helm部署</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#3-k8s%E5%AE%89%E8%A3%85\"><span class=\"toc-text\">3.k8s安装</span></a></li></ol></li><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E9%A1%B9%E7%9B%AE%E5%9C%B0%E5%9D%80\"><span class=\"toc-text\">项目地址</span></a></li></ol>","author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"软件供应链安全分析工具-snyk","uid":"7635de4b7a3e17088e6fc5a823d4941c","slug":"使用snyk检查开源软件依赖中的漏洞.md","date":"2021-12-31T08:35:00.000Z","updated":"2022-10-26T08:22:52.067Z","comments":true,"path":"api/articles/使用snyk检查开源软件依赖中的漏洞.md.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159447/abstract-ink-wallpapers-159447-4211-7091776.png","text":"使用snyk检查开源软件依赖中的漏洞.md0x01简介Snyk 是一家美国的安全公司，致力于监控开源软件包中的漏洞。Snyk 以其庞大的漏洞资料库为基础（由以色列和伦敦的资安研究专家团队负责维护该资料库），持续的监控开源社区中各种软件包的安全情况，以及给出解决方案。 随著 Sny...","link":"","photos":[],"count_time":{"symbolsCount":762,"symbolsTime":"1 mins."},"categories":[{"name":"软件供应链安全","slug":"软件供应链安全","count":26,"path":"api/categories/软件供应链安全.json"}],"tags":[{"name":"SCA","slug":"SCA","count":15,"path":"api/tags/SCA.json"},{"name":"软件供应链安全分析工具","slug":"软件供应链安全分析工具","count":1,"path":"api/tags/软件供应链安全分析工具.json"},{"name":"snyk","slug":"snyk","count":1,"path":"api/tags/snyk.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}},"next_post":{"title":"微服务学习-服务发现","uid":"d1f13540bd8121bde49915d55687c3f7","slug":"服务发现","date":"2021-09-26T04:23:21.000Z","updated":"2022-10-27T05:40:15.602Z","comments":true,"path":"api/articles/服务发现.json","keywords":null,"cover":"https://gtwallpaper.org/sites/default/files/wallpaper/159416/4k-beneath-the-clouds-wallpapers-159416-910618-6855685.png","text":"一、什么是服务发现？让用户不用关心服务提供者的具体网络位置（IP、端口等）和配置步骤，只需要选择和链接即可使用这些服务。如局域网内 通过WS-Discovery或者Bonjor协议发现并连接网络打印机服务，亦或是华为鸿蒙超级终端通过蓝牙、WIFI等通信技术[软总线技术] ，可以实...","link":"","photos":[],"count_time":{"symbolsCount":"1.4k","symbolsTime":"1 mins."},"categories":[{"name":"分布式","slug":"分布式","count":6,"path":"api/categories/分布式.json"},{"name":"微服务","slug":"分布式/微服务","count":3,"path":"api/categories/分布式/微服务.json"}],"tags":[{"name":"服务发现 - 微服务","slug":"服务发现-微服务","count":1,"path":"api/tags/服务发现-微服务.json"}],"author":{"name":"Moses","slug":"blog-author","avatar":"https://img-blog.csdnimg.cn/20210313122054101.png","link":"/","description":"一位正在重塑知识的技术人","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}